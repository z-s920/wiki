2023-05-27 00:00:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467199722295296[0;39m 生成今日电子书快照开始
2023-05-27 00:00:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467199722295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:00.088 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467199722295296[0;39m ==> Parameters: 
2023-05-27 00:00:00.206 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467199722295296[0;39m <==    Updates: 8
2023-05-27 00:00:00.206 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467199722295296[0;39m 生成今日电子书快照结束，耗时：198 毫秒
2023-05-27 00:00:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467220714786816[0;39m 生成今日电子书快照开始
2023-05-27 00:00:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467220714786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467220714786816[0;39m ==> Parameters: 
2023-05-27 00:00:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467220714786816[0;39m <==    Updates: 0
2023-05-27 00:00:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467220714786816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:00:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119467220718981120[0;39m 更新电子书下的文档数据开始
2023-05-27 00:00:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467220718981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:00:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467220718981120[0;39m ==> Parameters: 
2023-05-27 00:00:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467220718981120[0;39m <==    Updates: 8
2023-05-27 00:00:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119467220718981120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:00:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467241644363776[0;39m 生成今日电子书快照开始
2023-05-27 00:00:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467241644363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467241644363776[0;39m ==> Parameters: 
2023-05-27 00:00:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467241644363776[0;39m <==    Updates: 0
2023-05-27 00:00:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467241644363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:00:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467262624272384[0;39m 生成今日电子书快照开始
2023-05-27 00:00:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467262624272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467262624272384[0;39m ==> Parameters: 
2023-05-27 00:00:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467262624272384[0;39m <==    Updates: 0
2023-05-27 00:00:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467262624272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:00:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467283604180992[0;39m 生成今日电子书快照开始
2023-05-27 00:00:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467283604180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467283604180992[0;39m ==> Parameters: 
2023-05-27 00:00:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467283604180992[0;39m <==    Updates: 0
2023-05-27 00:00:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467283604180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:00:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467304554729472[0;39m 生成今日电子书快照开始
2023-05-27 00:00:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467304554729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467304554729472[0;39m ==> Parameters: 
2023-05-27 00:00:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467304554729472[0;39m <==    Updates: 0
2023-05-27 00:00:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467304554729472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:00:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467325555609600[0;39m 生成今日电子书快照开始
2023-05-27 00:00:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467325555609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467325555609600[0;39m ==> Parameters: 
2023-05-27 00:00:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467325555609600[0;39m <==    Updates: 0
2023-05-27 00:00:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467325555609600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:00:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467346518740992[0;39m 生成今日电子书快照开始
2023-05-27 00:00:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467346518740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467346518740992[0;39m ==> Parameters: 
2023-05-27 00:00:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467346518740992[0;39m <==    Updates: 0
2023-05-27 00:00:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467346518740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:00:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119467346527129600[0;39m 更新电子书下的文档数据开始
2023-05-27 00:00:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467346527129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:00:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467346527129600[0;39m ==> Parameters: 
2023-05-27 00:00:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467346527129600[0;39m <==    Updates: 8
2023-05-27 00:00:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119467346527129600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:00:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467367486066688[0;39m 生成今日电子书快照开始
2023-05-27 00:00:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467367486066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467367486066688[0;39m ==> Parameters: 
2023-05-27 00:00:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467367486066688[0;39m <==    Updates: 0
2023-05-27 00:00:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467367486066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:00:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467388486946816[0;39m 生成今日电子书快照开始
2023-05-27 00:00:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467388486946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467388486946816[0;39m ==> Parameters: 
2023-05-27 00:00:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467388486946816[0;39m <==    Updates: 0
2023-05-27 00:00:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467388486946816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:00:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467409441689600[0;39m 生成今日电子书快照开始
2023-05-27 00:00:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467409441689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467409441689600[0;39m ==> Parameters: 
2023-05-27 00:00:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467409441689600[0;39m <==    Updates: 0
2023-05-27 00:00:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467409441689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:00:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467430429986816[0;39m 生成今日电子书快照开始
2023-05-27 00:00:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467430429986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:00:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467430429986816[0;39m ==> Parameters: 
2023-05-27 00:00:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467430429986816[0;39m <==    Updates: 0
2023-05-27 00:00:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467430429986816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:01:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467451393118208[0;39m 生成今日电子书快照开始
2023-05-27 00:01:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467451393118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467451393118208[0;39m ==> Parameters: 
2023-05-27 00:01:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467451393118208[0;39m <==    Updates: 0
2023-05-27 00:01:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467451393118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:01:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467472352055296[0;39m 生成今日电子书快照开始
2023-05-27 00:01:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467472352055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467472352055296[0;39m ==> Parameters: 
2023-05-27 00:01:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467472352055296[0;39m <==    Updates: 0
2023-05-27 00:01:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467472352055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:01:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119467472360443904[0;39m 更新电子书下的文档数据开始
2023-05-27 00:01:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467472360443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:01:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467472360443904[0;39m ==> Parameters: 
2023-05-27 00:01:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467472360443904[0;39m <==    Updates: 8
2023-05-27 00:01:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119467472360443904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:01:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467493357129728[0;39m 生成今日电子书快照开始
2023-05-27 00:01:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467493357129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467493357129728[0;39m ==> Parameters: 
2023-05-27 00:01:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467493357129728[0;39m <==    Updates: 0
2023-05-27 00:01:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467493357129728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:01:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467514295095296[0;39m 生成今日电子书快照开始
2023-05-27 00:01:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467514295095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467514295095296[0;39m ==> Parameters: 
2023-05-27 00:01:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467514295095296[0;39m <==    Updates: 0
2023-05-27 00:01:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467514295095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:01:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467535254032384[0;39m 生成今日电子书快照开始
2023-05-27 00:01:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467535254032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467535254032384[0;39m ==> Parameters: 
2023-05-27 00:01:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467535254032384[0;39m <==    Updates: 0
2023-05-27 00:01:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467535254032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:01:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467556242329600[0;39m 生成今日电子书快照开始
2023-05-27 00:01:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467556242329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467556242329600[0;39m ==> Parameters: 
2023-05-27 00:01:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467556242329600[0;39m <==    Updates: 0
2023-05-27 00:01:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467556242329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:01:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467577209655296[0;39m 生成今日电子书快照开始
2023-05-27 00:01:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467577209655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467577209655296[0;39m ==> Parameters: 
2023-05-27 00:01:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467577209655296[0;39m <==    Updates: 0
2023-05-27 00:01:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467577209655296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:01:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119467598218924032[0;39m 更新电子书下的文档数据开始
2023-05-27 00:01:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467598218924032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:01:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467598218924032[0;39m ==> Parameters: 
2023-05-27 00:01:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467598218924032[0;39m <==    Updates: 8
2023-05-27 00:01:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119467598218924032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:01:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467598227312640[0;39m 生成今日电子书快照开始
2023-05-27 00:01:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467598227312640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467598227312640[0;39m ==> Parameters: 
2023-05-27 00:01:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467598227312640[0;39m <==    Updates: 0
2023-05-27 00:01:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467598227312640[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:01:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467619186249728[0;39m 生成今日电子书快照开始
2023-05-27 00:01:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467619186249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467619186249728[0;39m ==> Parameters: 
2023-05-27 00:01:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467619186249728[0;39m <==    Updates: 0
2023-05-27 00:01:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467619186249728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:01:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467640161964032[0;39m 生成今日电子书快照开始
2023-05-27 00:01:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467640161964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467640161964032[0;39m ==> Parameters: 
2023-05-27 00:01:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467640161964032[0;39m <==    Updates: 0
2023-05-27 00:01:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467640161964032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:01:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467661083152384[0;39m 生成今日电子书快照开始
2023-05-27 00:01:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467661083152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467661083152384[0;39m ==> Parameters: 
2023-05-27 00:01:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467661083152384[0;39m <==    Updates: 0
2023-05-27 00:01:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467661083152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:01:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467682063060992[0;39m 生成今日电子书快照开始
2023-05-27 00:01:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467682063060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:01:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467682063060992[0;39m ==> Parameters: 
2023-05-27 00:01:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467682063060992[0;39m <==    Updates: 0
2023-05-27 00:01:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467682063060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467703076524032[0;39m 生成今日电子书快照开始
2023-05-27 00:02:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467703076524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467703076524032[0;39m ==> Parameters: 
2023-05-27 00:02:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467703076524032[0;39m <==    Updates: 0
2023-05-27 00:02:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467703076524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467724001906688[0;39m 生成今日电子书快照开始
2023-05-27 00:02:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467724001906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467724001906688[0;39m ==> Parameters: 
2023-05-27 00:02:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467724001906688[0;39m <==    Updates: 0
2023-05-27 00:02:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467724001906688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119467724010295296[0;39m 更新电子书下的文档数据开始
2023-05-27 00:02:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467724010295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:02:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467724010295296[0;39m ==> Parameters: 
2023-05-27 00:02:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467724010295296[0;39m <==    Updates: 8
2023-05-27 00:02:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119467724010295296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:02:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467745011175424[0;39m 生成今日电子书快照开始
2023-05-27 00:02:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467745011175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467745011175424[0;39m ==> Parameters: 
2023-05-27 00:02:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467745011175424[0;39m <==    Updates: 0
2023-05-27 00:02:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467745011175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467765970112512[0;39m 生成今日电子书快照开始
2023-05-27 00:02:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467765970112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467765970112512[0;39m ==> Parameters: 
2023-05-27 00:02:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467765970112512[0;39m <==    Updates: 0
2023-05-27 00:02:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467765970112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467786933243904[0;39m 生成今日电子书快照开始
2023-05-27 00:02:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467786933243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467786933243904[0;39m ==> Parameters: 
2023-05-27 00:02:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467786933243904[0;39m <==    Updates: 0
2023-05-27 00:02:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467786933243904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:02:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467807921541120[0;39m 生成今日电子书快照开始
2023-05-27 00:02:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467807921541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467807921541120[0;39m ==> Parameters: 
2023-05-27 00:02:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467807921541120[0;39m <==    Updates: 0
2023-05-27 00:02:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467807921541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467828859506688[0;39m 生成今日电子书快照开始
2023-05-27 00:02:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467828859506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467828859506688[0;39m ==> Parameters: 
2023-05-27 00:02:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467828859506688[0;39m <==    Updates: 0
2023-05-27 00:02:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467828859506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119467849860386816[0;39m 更新电子书下的文档数据开始
2023-05-27 00:02:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467849860386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:02:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467849860386816[0;39m ==> Parameters: 
2023-05-27 00:02:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467849860386816[0;39m <==    Updates: 8
2023-05-27 00:02:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119467849860386816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:02:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467849864581120[0;39m 生成今日电子书快照开始
2023-05-27 00:02:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467849864581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467849864581120[0;39m ==> Parameters: 
2023-05-27 00:02:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467849864581120[0;39m <==    Updates: 0
2023-05-27 00:02:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467849864581120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:02:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467870848684032[0;39m 生成今日电子书快照开始
2023-05-27 00:02:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467870848684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467870848684032[0;39m ==> Parameters: 
2023-05-27 00:02:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467870848684032[0;39m <==    Updates: 0
2023-05-27 00:02:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467870848684032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467891757289472[0;39m 生成今日电子书快照开始
2023-05-27 00:02:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467891757289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467891757289472[0;39m ==> Parameters: 
2023-05-27 00:02:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467891757289472[0;39m <==    Updates: 0
2023-05-27 00:02:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467891757289472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:02:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467912783335424[0;39m 生成今日电子书快照开始
2023-05-27 00:02:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467912783335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467912783335424[0;39m ==> Parameters: 
2023-05-27 00:02:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467912783335424[0;39m <==    Updates: 0
2023-05-27 00:02:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467912783335424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:02:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467933746466816[0;39m 生成今日电子书快照开始
2023-05-27 00:02:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467933746466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:02:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467933746466816[0;39m ==> Parameters: 
2023-05-27 00:02:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467933746466816[0;39m <==    Updates: 0
2023-05-27 00:02:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467933746466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:03:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467954692820992[0;39m 生成今日电子书快照开始
2023-05-27 00:03:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467954692820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467954692820992[0;39m ==> Parameters: 
2023-05-27 00:03:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467954692820992[0;39m <==    Updates: 0
2023-05-27 00:03:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467954692820992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:03:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467975693701120[0;39m 生成今日电子书快照开始
2023-05-27 00:03:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467975693701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467975693701120[0;39m ==> Parameters: 
2023-05-27 00:03:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467975693701120[0;39m <==    Updates: 0
2023-05-27 00:03:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467975693701120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:03:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119467975697895424[0;39m 更新电子书下的文档数据开始
2023-05-27 00:03:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467975697895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:03:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467975697895424[0;39m ==> Parameters: 
2023-05-27 00:03:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467975697895424[0;39m <==    Updates: 8
2023-05-27 00:03:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119467975697895424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:03:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467996661026816[0;39m 生成今日电子书快照开始
2023-05-27 00:03:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467996661026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467996661026816[0;39m ==> Parameters: 
2023-05-27 00:03:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467996661026816[0;39m <==    Updates: 0
2023-05-27 00:03:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467996661026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:03:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468017636741120[0;39m 生成今日电子书快照开始
2023-05-27 00:03:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468017636741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468017636741120[0;39m ==> Parameters: 
2023-05-27 00:03:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468017636741120[0;39m <==    Updates: 0
2023-05-27 00:03:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468017636741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:03:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468038574706688[0;39m 生成今日电子书快照开始
2023-05-27 00:03:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468038574706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468038574706688[0;39m ==> Parameters: 
2023-05-27 00:03:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468038574706688[0;39m <==    Updates: 0
2023-05-27 00:03:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468038574706688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:03:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468059563003904[0;39m 生成今日电子书快照开始
2023-05-27 00:03:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468059563003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468059563003904[0;39m ==> Parameters: 
2023-05-27 00:03:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468059563003904[0;39m <==    Updates: 0
2023-05-27 00:03:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468059563003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:03:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468080559689728[0;39m 生成今日电子书快照开始
2023-05-27 00:03:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468080559689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468080559689728[0;39m ==> Parameters: 
2023-05-27 00:03:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468080559689728[0;39m <==    Updates: 0
2023-05-27 00:03:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468080559689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:03:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468101485072384[0;39m 生成今日电子书快照开始
2023-05-27 00:03:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468101485072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468101485072384[0;39m ==> Parameters: 
2023-05-27 00:03:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468101485072384[0;39m <==    Updates: 0
2023-05-27 00:03:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468101485072384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:03:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119468101489266688[0;39m 更新电子书下的文档数据开始
2023-05-27 00:03:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468101489266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:03:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468101489266688[0;39m ==> Parameters: 
2023-05-27 00:03:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468101489266688[0;39m <==    Updates: 8
2023-05-27 00:03:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119468101489266688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:03:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468122456592384[0;39m 生成今日电子书快照开始
2023-05-27 00:03:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468122456592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468122456592384[0;39m ==> Parameters: 
2023-05-27 00:03:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468122456592384[0;39m <==    Updates: 0
2023-05-27 00:03:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468122456592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:03:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468143415529472[0;39m 生成今日电子书快照开始
2023-05-27 00:03:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468143415529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468143415529472[0;39m ==> Parameters: 
2023-05-27 00:03:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468143415529472[0;39m <==    Updates: 0
2023-05-27 00:03:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468143415529472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:03:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468164437381120[0;39m 生成今日电子书快照开始
2023-05-27 00:03:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468164437381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468164437381120[0;39m ==> Parameters: 
2023-05-27 00:03:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468164437381120[0;39m <==    Updates: 0
2023-05-27 00:03:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468164437381120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:03:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468185404706816[0;39m 生成今日电子书快照开始
2023-05-27 00:03:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468185404706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:03:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468185404706816[0;39m ==> Parameters: 
2023-05-27 00:03:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468185404706816[0;39m <==    Updates: 0
2023-05-27 00:03:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468185404706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:04:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468206355255296[0;39m 生成今日电子书快照开始
2023-05-27 00:04:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468206355255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468206355255296[0;39m ==> Parameters: 
2023-05-27 00:04:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468206355255296[0;39m <==    Updates: 0
2023-05-27 00:04:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468206355255296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:04:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468227347746816[0;39m 生成今日电子书快照开始
2023-05-27 00:04:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468227347746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468227347746816[0;39m ==> Parameters: 
2023-05-27 00:04:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468227347746816[0;39m <==    Updates: 0
2023-05-27 00:04:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468227347746816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:04:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119468227360329728[0;39m 更新电子书下的文档数据开始
2023-05-27 00:04:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468227360329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:04:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468227360329728[0;39m ==> Parameters: 
2023-05-27 00:04:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468227360329728[0;39m <==    Updates: 8
2023-05-27 00:04:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119468227360329728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:04:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468248323461120[0;39m 生成今日电子书快照开始
2023-05-27 00:04:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468248323461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468248323461120[0;39m ==> Parameters: 
2023-05-27 00:04:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468248323461120[0;39m <==    Updates: 0
2023-05-27 00:04:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468248323461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:04:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468269274009600[0;39m 生成今日电子书快照开始
2023-05-27 00:04:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468269274009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468269274009600[0;39m ==> Parameters: 
2023-05-27 00:04:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468269274009600[0;39m <==    Updates: 0
2023-05-27 00:04:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468269274009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:04:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468290220363776[0;39m 生成今日电子书快照开始
2023-05-27 00:04:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468290220363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468290220363776[0;39m ==> Parameters: 
2023-05-27 00:04:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468290220363776[0;39m <==    Updates: 0
2023-05-27 00:04:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468290220363776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:04:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468311246409728[0;39m 生成今日电子书快照开始
2023-05-27 00:04:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468311246409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468311246409728[0;39m ==> Parameters: 
2023-05-27 00:04:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468311246409728[0;39m <==    Updates: 0
2023-05-27 00:04:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468311246409728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:04:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468332209541120[0;39m 生成今日电子书快照开始
2023-05-27 00:04:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468332209541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468332209541120[0;39m ==> Parameters: 
2023-05-27 00:04:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468332209541120[0;39m <==    Updates: 0
2023-05-27 00:04:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468332209541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:04:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468353168478208[0;39m 生成今日电子书快照开始
2023-05-27 00:04:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468353168478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468353168478208[0;39m ==> Parameters: 
2023-05-27 00:04:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468353168478208[0;39m <==    Updates: 0
2023-05-27 00:04:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468353168478208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:04:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119468353176866816[0;39m 更新电子书下的文档数据开始
2023-05-27 00:04:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468353176866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:04:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468353176866816[0;39m ==> Parameters: 
2023-05-27 00:04:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468353176866816[0;39m <==    Updates: 8
2023-05-27 00:04:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119468353176866816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:04:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468374148386816[0;39m 生成今日电子书快照开始
2023-05-27 00:04:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468374148386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468374148386816[0;39m ==> Parameters: 
2023-05-27 00:04:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468374148386816[0;39m <==    Updates: 0
2023-05-27 00:04:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468374148386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:04:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468395115712512[0;39m 生成今日电子书快照开始
2023-05-27 00:04:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468395115712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468395115712512[0;39m ==> Parameters: 
2023-05-27 00:04:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468395115712512[0;39m <==    Updates: 0
2023-05-27 00:04:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468395115712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:04:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468416099815424[0;39m 生成今日电子书快照开始
2023-05-27 00:04:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468416099815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468416099815424[0;39m ==> Parameters: 
2023-05-27 00:04:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468416099815424[0;39m <==    Updates: 0
2023-05-27 00:04:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468416099815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:04:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468437016809472[0;39m 生成今日电子书快照开始
2023-05-27 00:04:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468437016809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:04:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468437016809472[0;39m ==> Parameters: 
2023-05-27 00:04:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468437016809472[0;39m <==    Updates: 0
2023-05-27 00:04:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468437016809472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:05:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468457988329472[0;39m 生成今日电子书快照开始
2023-05-27 00:05:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468457988329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468457988329472[0;39m ==> Parameters: 
2023-05-27 00:05:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468457988329472[0;39m <==    Updates: 0
2023-05-27 00:05:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468457988329472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:05:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119468479005986816[0;39m 更新电子书下的文档数据开始
2023-05-27 00:05:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468479005986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:05:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468479005986816[0;39m ==> Parameters: 
2023-05-27 00:05:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468479005986816[0;39m <==    Updates: 8
2023-05-27 00:05:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119468479005986816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:05:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468479010181120[0;39m 生成今日电子书快照开始
2023-05-27 00:05:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468479010181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468479010181120[0;39m ==> Parameters: 
2023-05-27 00:05:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468479010181120[0;39m <==    Updates: 0
2023-05-27 00:05:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468479010181120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:05:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468499977506816[0;39m 生成今日电子书快照开始
2023-05-27 00:05:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468499977506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468499977506816[0;39m ==> Parameters: 
2023-05-27 00:05:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468499977506816[0;39m <==    Updates: 0
2023-05-27 00:05:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468499977506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:05:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468520961609728[0;39m 生成今日电子书快照开始
2023-05-27 00:05:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468520961609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468520961609728[0;39m ==> Parameters: 
2023-05-27 00:05:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468520961609728[0;39m <==    Updates: 0
2023-05-27 00:05:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468520961609728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:05:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468541916352512[0;39m 生成今日电子书快照开始
2023-05-27 00:05:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468541916352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468541916352512[0;39m ==> Parameters: 
2023-05-27 00:05:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468541916352512[0;39m <==    Updates: 0
2023-05-27 00:05:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468541916352512[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2023-05-27 00:05:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468562850123776[0;39m 生成今日电子书快照开始
2023-05-27 00:05:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468562850123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468562850123776[0;39m ==> Parameters: 
2023-05-27 00:05:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468562850123776[0;39m <==    Updates: 0
2023-05-27 00:05:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468562850123776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:05:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468583859392512[0;39m 生成今日电子书快照开始
2023-05-27 00:05:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468583859392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468583859392512[0;39m ==> Parameters: 
2023-05-27 00:05:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468583859392512[0;39m <==    Updates: 0
2023-05-27 00:05:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468583859392512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:05:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468604805746688[0;39m 生成今日电子书快照开始
2023-05-27 00:05:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468604805746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468604805746688[0;39m ==> Parameters: 
2023-05-27 00:05:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468604805746688[0;39m <==    Updates: 0
2023-05-27 00:05:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468604805746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:05:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119468604814135296[0;39m 更新电子书下的文档数据开始
2023-05-27 00:05:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468604814135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:05:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468604814135296[0;39m ==> Parameters: 
2023-05-27 00:05:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468604814135296[0;39m <==    Updates: 8
2023-05-27 00:05:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119468604814135296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:05:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468625823404032[0;39m 生成今日电子书快照开始
2023-05-27 00:05:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468625823404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468625823404032[0;39m ==> Parameters: 
2023-05-27 00:05:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468625823404032[0;39m <==    Updates: 0
2023-05-27 00:05:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468625823404032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:05:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468646773952512[0;39m 生成今日电子书快照开始
2023-05-27 00:05:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468646773952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468646773952512[0;39m ==> Parameters: 
2023-05-27 00:05:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468646773952512[0;39m <==    Updates: 0
2023-05-27 00:05:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468646773952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:05:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468667724500992[0;39m 生成今日电子书快照开始
2023-05-27 00:05:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468667724500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468667724500992[0;39m ==> Parameters: 
2023-05-27 00:05:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468667724500992[0;39m <==    Updates: 0
2023-05-27 00:05:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468667724500992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:05:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468688725381120[0;39m 生成今日电子书快照开始
2023-05-27 00:05:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468688725381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:05:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468688725381120[0;39m ==> Parameters: 
2023-05-27 00:05:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468688725381120[0;39m <==    Updates: 0
2023-05-27 00:05:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468688725381120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468709701095424[0;39m 生成今日电子书快照开始
2023-05-27 00:06:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468709701095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468709701095424[0;39m ==> Parameters: 
2023-05-27 00:06:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468709701095424[0;39m <==    Updates: 0
2023-05-27 00:06:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468709701095424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119468730639060992[0;39m 更新电子书下的文档数据开始
2023-05-27 00:06:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468730639060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:06:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468730639060992[0;39m ==> Parameters: 
2023-05-27 00:06:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468730639060992[0;39m <==    Updates: 8
2023-05-27 00:06:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119468730639060992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:06:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468730643255296[0;39m 生成今日电子书快照开始
2023-05-27 00:06:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468730643255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468730643255296[0;39m ==> Parameters: 
2023-05-27 00:06:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468730643255296[0;39m <==    Updates: 0
2023-05-27 00:06:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468730643255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468751610580992[0;39m 生成今日电子书快照开始
2023-05-27 00:06:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468751610580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468751610580992[0;39m ==> Parameters: 
2023-05-27 00:06:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468751610580992[0;39m <==    Updates: 0
2023-05-27 00:06:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468751610580992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:06:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468772624044032[0;39m 生成今日电子书快照开始
2023-05-27 00:06:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468772624044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468772624044032[0;39m ==> Parameters: 
2023-05-27 00:06:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468772624044032[0;39m <==    Updates: 0
2023-05-27 00:06:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468772624044032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468793582981120[0;39m 生成今日电子书快照开始
2023-05-27 00:06:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468793582981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468793582981120[0;39m ==> Parameters: 
2023-05-27 00:06:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468793582981120[0;39m <==    Updates: 0
2023-05-27 00:06:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468793582981120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468814508363776[0;39m 生成今日电子书快照开始
2023-05-27 00:06:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468814508363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468814508363776[0;39m ==> Parameters: 
2023-05-27 00:06:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468814508363776[0;39m <==    Updates: 0
2023-05-27 00:06:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468814508363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468835488272384[0;39m 生成今日电子书快照开始
2023-05-27 00:06:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468835488272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468835488272384[0;39m ==> Parameters: 
2023-05-27 00:06:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468835488272384[0;39m <==    Updates: 0
2023-05-27 00:06:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468835488272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119468856493346816[0;39m 更新电子书下的文档数据开始
2023-05-27 00:06:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468856493346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:06:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468856493346816[0;39m ==> Parameters: 
2023-05-27 00:06:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468856493346816[0;39m <==    Updates: 8
2023-05-27 00:06:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119468856493346816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:06:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468856497541120[0;39m 生成今日电子书快照开始
2023-05-27 00:06:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468856497541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468856497541120[0;39m ==> Parameters: 
2023-05-27 00:06:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468856497541120[0;39m <==    Updates: 0
2023-05-27 00:06:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468856497541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468877460672512[0;39m 生成今日电子书快照开始
2023-05-27 00:06:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468877460672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468877460672512[0;39m ==> Parameters: 
2023-05-27 00:06:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468877460672512[0;39m <==    Updates: 0
2023-05-27 00:06:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468877460672512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468898419609600[0;39m 生成今日电子书快照开始
2023-05-27 00:06:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468898419609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468898419609600[0;39m ==> Parameters: 
2023-05-27 00:06:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468898419609600[0;39m <==    Updates: 0
2023-05-27 00:06:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468898419609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468919416295424[0;39m 生成今日电子书快照开始
2023-05-27 00:06:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468919416295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468919416295424[0;39m ==> Parameters: 
2023-05-27 00:06:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468919416295424[0;39m <==    Updates: 0
2023-05-27 00:06:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468919416295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:06:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468940375232512[0;39m 生成今日电子书快照开始
2023-05-27 00:06:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468940375232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:06:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468940375232512[0;39m ==> Parameters: 
2023-05-27 00:06:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468940375232512[0;39m <==    Updates: 0
2023-05-27 00:06:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468940375232512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:07:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468961317392384[0;39m 生成今日电子书快照开始
2023-05-27 00:07:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468961317392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468961317392384[0;39m ==> Parameters: 
2023-05-27 00:07:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468961317392384[0;39m <==    Updates: 0
2023-05-27 00:07:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468961317392384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:07:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119468982293106688[0;39m 更新电子书下的文档数据开始
2023-05-27 00:07:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468982293106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:07:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468982293106688[0;39m ==> Parameters: 
2023-05-27 00:07:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119468982293106688[0;39m <==    Updates: 8
2023-05-27 00:07:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119468982293106688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:07:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119468982297300992[0;39m 生成今日电子书快照开始
2023-05-27 00:07:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468982297300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468982297300992[0;39m ==> Parameters: 
2023-05-27 00:07:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119468982297300992[0;39m <==    Updates: 0
2023-05-27 00:07:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119468982297300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:07:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469003260432384[0;39m 生成今日电子书快照开始
2023-05-27 00:07:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469003260432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469003260432384[0;39m ==> Parameters: 
2023-05-27 00:07:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469003260432384[0;39m <==    Updates: 0
2023-05-27 00:07:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469003260432384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:07:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469024240340992[0;39m 生成今日电子书快照开始
2023-05-27 00:07:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469024240340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469024240340992[0;39m ==> Parameters: 
2023-05-27 00:07:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469024240340992[0;39m <==    Updates: 0
2023-05-27 00:07:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469024240340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:07:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469045253804032[0;39m 生成今日电子书快照开始
2023-05-27 00:07:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469045253804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469045253804032[0;39m ==> Parameters: 
2023-05-27 00:07:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469045253804032[0;39m <==    Updates: 0
2023-05-27 00:07:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469045253804032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:07:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469066200158208[0;39m 生成今日电子书快照开始
2023-05-27 00:07:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469066200158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469066200158208[0;39m ==> Parameters: 
2023-05-27 00:07:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469066200158208[0;39m <==    Updates: 0
2023-05-27 00:07:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469066200158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:07:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469087171678208[0;39m 生成今日电子书快照开始
2023-05-27 00:07:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469087171678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469087171678208[0;39m ==> Parameters: 
2023-05-27 00:07:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469087171678208[0;39m <==    Updates: 0
2023-05-27 00:07:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469087171678208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:07:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119469108113838080[0;39m 更新电子书下的文档数据开始
2023-05-27 00:07:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469108113838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:07:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469108113838080[0;39m ==> Parameters: 
2023-05-27 00:07:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469108113838080[0;39m <==    Updates: 8
2023-05-27 00:07:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119469108113838080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:07:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469108118032384[0;39m 生成今日电子书快照开始
2023-05-27 00:07:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469108118032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469108118032384[0;39m ==> Parameters: 
2023-05-27 00:07:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469108118032384[0;39m <==    Updates: 0
2023-05-27 00:07:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469108118032384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:07:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469129135689728[0;39m 生成今日电子书快照开始
2023-05-27 00:07:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469129135689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469129135689728[0;39m ==> Parameters: 
2023-05-27 00:07:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469129135689728[0;39m <==    Updates: 0
2023-05-27 00:07:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469129135689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:07:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469150069460992[0;39m 生成今日电子书快照开始
2023-05-27 00:07:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469150069460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469150069460992[0;39m ==> Parameters: 
2023-05-27 00:07:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469150069460992[0;39m <==    Updates: 0
2023-05-27 00:07:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469150069460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:07:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469171066146816[0;39m 生成今日电子书快照开始
2023-05-27 00:07:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469171066146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469171066146816[0;39m ==> Parameters: 
2023-05-27 00:07:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469171066146816[0;39m <==    Updates: 0
2023-05-27 00:07:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469171066146816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:07:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469192008306688[0;39m 生成今日电子书快照开始
2023-05-27 00:07:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469192008306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:07:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469192008306688[0;39m ==> Parameters: 
2023-05-27 00:07:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469192008306688[0;39m <==    Updates: 0
2023-05-27 00:07:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469192008306688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:08:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469212996603904[0;39m 生成今日电子书快照开始
2023-05-27 00:08:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469212996603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469212996603904[0;39m ==> Parameters: 
2023-05-27 00:08:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469212996603904[0;39m <==    Updates: 0
2023-05-27 00:08:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469212996603904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:08:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469233955540992[0;39m 生成今日电子书快照开始
2023-05-27 00:08:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469233955540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469233955540992[0;39m ==> Parameters: 
2023-05-27 00:08:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469233955540992[0;39m <==    Updates: 0
2023-05-27 00:08:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469233955540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:08:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119469233963929600[0;39m 更新电子书下的文档数据开始
2023-05-27 00:08:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469233963929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:08:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469233963929600[0;39m ==> Parameters: 
2023-05-27 00:08:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469233963929600[0;39m <==    Updates: 8
2023-05-27 00:08:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119469233963929600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:08:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469254969004032[0;39m 生成今日电子书快照开始
2023-05-27 00:08:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469254969004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469254969004032[0;39m ==> Parameters: 
2023-05-27 00:08:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469254969004032[0;39m <==    Updates: 0
2023-05-27 00:08:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469254969004032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:08:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469275894386688[0;39m 生成今日电子书快照开始
2023-05-27 00:08:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469275894386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469275894386688[0;39m ==> Parameters: 
2023-05-27 00:08:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469275894386688[0;39m <==    Updates: 0
2023-05-27 00:08:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469275894386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:08:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469296895266816[0;39m 生成今日电子书快照开始
2023-05-27 00:08:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469296895266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469296895266816[0;39m ==> Parameters: 
2023-05-27 00:08:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469296895266816[0;39m <==    Updates: 0
2023-05-27 00:08:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469296895266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:08:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469317875175424[0;39m 生成今日电子书快照开始
2023-05-27 00:08:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469317875175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469317875175424[0;39m ==> Parameters: 
2023-05-27 00:08:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469317875175424[0;39m <==    Updates: 0
2023-05-27 00:08:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469317875175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:08:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469338842501120[0;39m 生成今日电子书快照开始
2023-05-27 00:08:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469338842501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469338842501120[0;39m ==> Parameters: 
2023-05-27 00:08:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469338842501120[0;39m <==    Updates: 0
2023-05-27 00:08:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469338842501120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:08:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119469359788855296[0;39m 更新电子书下的文档数据开始
2023-05-27 00:08:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469359788855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:08:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469359788855296[0;39m ==> Parameters: 
2023-05-27 00:08:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469359788855296[0;39m <==    Updates: 8
2023-05-27 00:08:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119469359788855296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:08:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469359793049600[0;39m 生成今日电子书快照开始
2023-05-27 00:08:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469359793049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469359793049600[0;39m ==> Parameters: 
2023-05-27 00:08:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469359793049600[0;39m <==    Updates: 0
2023-05-27 00:08:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469359793049600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:08:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469380785541120[0;39m 生成今日电子书快照开始
2023-05-27 00:08:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469380785541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469380785541120[0;39m ==> Parameters: 
2023-05-27 00:08:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469380785541120[0;39m <==    Updates: 0
2023-05-27 00:08:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469380785541120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:08:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469401757061120[0;39m 生成今日电子书快照开始
2023-05-27 00:08:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469401757061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469401757061120[0;39m ==> Parameters: 
2023-05-27 00:08:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469401757061120[0;39m <==    Updates: 0
2023-05-27 00:08:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469401757061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:08:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469422715998208[0;39m 生成今日电子书快照开始
2023-05-27 00:08:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469422715998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469422715998208[0;39m ==> Parameters: 
2023-05-27 00:08:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469422715998208[0;39m <==    Updates: 0
2023-05-27 00:08:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469422715998208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:08:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469443666546688[0;39m 生成今日电子书快照开始
2023-05-27 00:08:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469443666546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:08:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469443666546688[0;39m ==> Parameters: 
2023-05-27 00:08:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469443666546688[0;39m <==    Updates: 0
2023-05-27 00:08:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469443666546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:09:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469464633872384[0;39m 生成今日电子书快照开始
2023-05-27 00:09:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469464633872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469464633872384[0;39m ==> Parameters: 
2023-05-27 00:09:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469464633872384[0;39m <==    Updates: 0
2023-05-27 00:09:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469464633872384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:09:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469485647335424[0;39m 生成今日电子书快照开始
2023-05-27 00:09:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469485647335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469485647335424[0;39m ==> Parameters: 
2023-05-27 00:09:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469485647335424[0;39m <==    Updates: 0
2023-05-27 00:09:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469485647335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:09:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119469485655724032[0;39m 更新电子书下的文档数据开始
2023-05-27 00:09:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469485655724032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:09:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469485655724032[0;39m ==> Parameters: 
2023-05-27 00:09:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469485655724032[0;39m <==    Updates: 8
2023-05-27 00:09:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119469485655724032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:09:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469506560135168[0;39m 生成今日电子书快照开始
2023-05-27 00:09:10.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469506560135168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469506560135168[0;39m ==> Parameters: 
2023-05-27 00:09:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469506560135168[0;39m <==    Updates: 0
2023-05-27 00:09:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469506560135168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:09:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469527594569728[0;39m 生成今日电子书快照开始
2023-05-27 00:09:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469527594569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469527594569728[0;39m ==> Parameters: 
2023-05-27 00:09:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469527594569728[0;39m <==    Updates: 0
2023-05-27 00:09:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469527594569728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:09:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469548524146688[0;39m 生成今日电子书快照开始
2023-05-27 00:09:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469548524146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469548524146688[0;39m ==> Parameters: 
2023-05-27 00:09:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469548524146688[0;39m <==    Updates: 0
2023-05-27 00:09:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469548524146688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:09:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469569516638208[0;39m 生成今日电子书快照开始
2023-05-27 00:09:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469569516638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469569516638208[0;39m ==> Parameters: 
2023-05-27 00:09:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469569516638208[0;39m <==    Updates: 0
2023-05-27 00:09:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469569516638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:09:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469590492352512[0;39m 生成今日电子书快照开始
2023-05-27 00:09:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469590492352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469590492352512[0;39m ==> Parameters: 
2023-05-27 00:09:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469590492352512[0;39m <==    Updates: 0
2023-05-27 00:09:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469590492352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:09:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119469611442900992[0;39m 更新电子书下的文档数据开始
2023-05-27 00:09:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469611442900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:09:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469611442900992[0;39m ==> Parameters: 
2023-05-27 00:09:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469611442900992[0;39m <==    Updates: 8
2023-05-27 00:09:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119469611442900992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:09:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469611451289600[0;39m 生成今日电子书快照开始
2023-05-27 00:09:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469611451289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469611451289600[0;39m ==> Parameters: 
2023-05-27 00:09:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469611451289600[0;39m <==    Updates: 0
2023-05-27 00:09:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469611451289600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:09:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469632443781120[0;39m 生成今日电子书快照开始
2023-05-27 00:09:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469632443781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469632443781120[0;39m ==> Parameters: 
2023-05-27 00:09:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469632443781120[0;39m <==    Updates: 0
2023-05-27 00:09:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469632443781120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:09:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469653377552384[0;39m 生成今日电子书快照开始
2023-05-27 00:09:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469653377552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469653377552384[0;39m ==> Parameters: 
2023-05-27 00:09:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469653377552384[0;39m <==    Updates: 0
2023-05-27 00:09:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469653377552384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:09:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469674399404032[0;39m 生成今日电子书快照开始
2023-05-27 00:09:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469674399404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469674399404032[0;39m ==> Parameters: 
2023-05-27 00:09:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469674399404032[0;39m <==    Updates: 0
2023-05-27 00:09:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469674399404032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:09:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469695345758208[0;39m 生成今日电子书快照开始
2023-05-27 00:09:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469695345758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:09:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469695345758208[0;39m ==> Parameters: 
2023-05-27 00:09:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469695345758208[0;39m <==    Updates: 0
2023-05-27 00:09:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469695345758208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:10:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469716334055424[0;39m 生成今日电子书快照开始
2023-05-27 00:10:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469716334055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469716334055424[0;39m ==> Parameters: 
2023-05-27 00:10:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469716334055424[0;39m <==    Updates: 0
2023-05-27 00:10:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469716334055424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:10:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119469737297186816[0;39m 更新电子书下的文档数据开始
2023-05-27 00:10:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469737297186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:10:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469737297186816[0;39m ==> Parameters: 
2023-05-27 00:10:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469737297186816[0;39m <==    Updates: 8
2023-05-27 00:10:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119469737297186816[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-27 00:10:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469737301381120[0;39m 生成今日电子书快照开始
2023-05-27 00:10:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469737301381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469737301381120[0;39m ==> Parameters: 
2023-05-27 00:10:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469737301381120[0;39m <==    Updates: 0
2023-05-27 00:10:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469737301381120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:10:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469758230958080[0;39m 生成今日电子书快照开始
2023-05-27 00:10:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469758230958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469758230958080[0;39m ==> Parameters: 
2023-05-27 00:10:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469758230958080[0;39m <==    Updates: 0
2023-05-27 00:10:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469758230958080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:10:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469779223449600[0;39m 生成今日电子书快照开始
2023-05-27 00:10:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469779223449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469779223449600[0;39m ==> Parameters: 
2023-05-27 00:10:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469779223449600[0;39m <==    Updates: 0
2023-05-27 00:10:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469779223449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:10:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469800173998080[0;39m 生成今日电子书快照开始
2023-05-27 00:10:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469800173998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469800173998080[0;39m ==> Parameters: 
2023-05-27 00:10:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469800173998080[0;39m <==    Updates: 0
2023-05-27 00:10:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469800173998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:10:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469821179072512[0;39m 生成今日电子书快照开始
2023-05-27 00:10:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469821179072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469821179072512[0;39m ==> Parameters: 
2023-05-27 00:10:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469821179072512[0;39m <==    Updates: 0
2023-05-27 00:10:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469821179072512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:10:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469842154786816[0;39m 生成今日电子书快照开始
2023-05-27 00:10:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469842154786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469842154786816[0;39m ==> Parameters: 
2023-05-27 00:10:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469842154786816[0;39m <==    Updates: 0
2023-05-27 00:10:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469842154786816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:10:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119469863105335296[0;39m 更新电子书下的文档数据开始
2023-05-27 00:10:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469863105335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:10:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469863105335296[0;39m ==> Parameters: 
2023-05-27 00:10:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469863105335296[0;39m <==    Updates: 8
2023-05-27 00:10:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119469863105335296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 00:10:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469863113723904[0;39m 生成今日电子书快照开始
2023-05-27 00:10:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469863113723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469863113723904[0;39m ==> Parameters: 
2023-05-27 00:10:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469863113723904[0;39m <==    Updates: 0
2023-05-27 00:10:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469863113723904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:10:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469884085243904[0;39m 生成今日电子书快照开始
2023-05-27 00:10:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469884085243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469884085243904[0;39m ==> Parameters: 
2023-05-27 00:10:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469884085243904[0;39m <==    Updates: 0
2023-05-27 00:10:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469884085243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:10:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469905044180992[0;39m 生成今日电子书快照开始
2023-05-27 00:10:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469905044180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469905044180992[0;39m ==> Parameters: 
2023-05-27 00:10:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469905044180992[0;39m <==    Updates: 0
2023-05-27 00:10:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469905044180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:10:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469926024089600[0;39m 生成今日电子书快照开始
2023-05-27 00:10:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469926024089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469926024089600[0;39m ==> Parameters: 
2023-05-27 00:10:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469926024089600[0;39m <==    Updates: 0
2023-05-27 00:10:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469926024089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:10:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469946970443776[0;39m 生成今日电子书快照开始
2023-05-27 00:10:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469946970443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:10:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469946970443776[0;39m ==> Parameters: 
2023-05-27 00:10:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469946970443776[0;39m <==    Updates: 0
2023-05-27 00:10:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469946970443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:11:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469967937769472[0;39m 生成今日电子书快照开始
2023-05-27 00:11:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469967937769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469967937769472[0;39m ==> Parameters: 
2023-05-27 00:11:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469967937769472[0;39m <==    Updates: 0
2023-05-27 00:11:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469967937769472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:11:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119469988938649600[0;39m 更新电子书下的文档数据开始
2023-05-27 00:11:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469988938649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:11:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469988938649600[0;39m ==> Parameters: 
2023-05-27 00:11:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119469988938649600[0;39m <==    Updates: 8
2023-05-27 00:11:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119469988938649600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 00:11:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119469988947038208[0;39m 生成今日电子书快照开始
2023-05-27 00:11:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469988947038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469988947038208[0;39m ==> Parameters: 
2023-05-27 00:11:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119469988947038208[0;39m <==    Updates: 0
2023-05-27 00:11:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119469988947038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:11:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470009931141120[0;39m 生成今日电子书快照开始
2023-05-27 00:11:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470009931141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470009931141120[0;39m ==> Parameters: 
2023-05-27 00:11:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470009931141120[0;39m <==    Updates: 0
2023-05-27 00:11:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470009931141120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:11:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470030906855424[0;39m 生成今日电子书快照开始
2023-05-27 00:11:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470030906855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470030906855424[0;39m ==> Parameters: 
2023-05-27 00:11:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470030906855424[0;39m <==    Updates: 0
2023-05-27 00:11:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470030906855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:11:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470051840626688[0;39m 生成今日电子书快照开始
2023-05-27 00:11:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470051840626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470051840626688[0;39m ==> Parameters: 
2023-05-27 00:11:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470051840626688[0;39m <==    Updates: 0
2023-05-27 00:11:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470051840626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:11:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470072833118208[0;39m 生成今日电子书快照开始
2023-05-27 00:11:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470072833118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470072833118208[0;39m ==> Parameters: 
2023-05-27 00:11:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470072833118208[0;39m <==    Updates: 0
2023-05-27 00:11:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470072833118208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:11:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470093817221120[0;39m 生成今日电子书快照开始
2023-05-27 00:11:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470093817221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470093817221120[0;39m ==> Parameters: 
2023-05-27 00:11:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470093817221120[0;39m <==    Updates: 0
2023-05-27 00:11:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470093817221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:11:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119470114792935424[0;39m 更新电子书下的文档数据开始
2023-05-27 00:11:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119470114792935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 00:11:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119470114792935424[0;39m ==> Parameters: 
2023-05-27 00:11:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119470114792935424[0;39m <==    Updates: 8
2023-05-27 00:11:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119470114792935424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 00:11:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470114801324032[0;39m 生成今日电子书快照开始
2023-05-27 00:11:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470114801324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470114801324032[0;39m ==> Parameters: 
2023-05-27 00:11:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470114801324032[0;39m <==    Updates: 0
2023-05-27 00:11:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470114801324032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:11:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470135714123776[0;39m 生成今日电子书快照开始
2023-05-27 00:11:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470135714123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470135714123776[0;39m ==> Parameters: 
2023-05-27 00:11:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470135714123776[0;39m <==    Updates: 0
2023-05-27 00:11:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470135714123776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 00:11:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470156727586816[0;39m 生成今日电子书快照开始
2023-05-27 00:11:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470156727586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470156727586816[0;39m ==> Parameters: 
2023-05-27 00:11:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470156727586816[0;39m <==    Updates: 0
2023-05-27 00:11:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470156727586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 00:11:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470177703301120[0;39m 生成今日电子书快照开始
2023-05-27 00:11:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470177703301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470177703301120[0;39m ==> Parameters: 
2023-05-27 00:11:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470177703301120[0;39m <==    Updates: 0
2023-05-27 00:11:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470177703301120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 00:11:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470198666432512[0;39m 生成今日电子书快照开始
2023-05-27 00:11:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470198666432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:11:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470198666432512[0;39m ==> Parameters: 
2023-05-27 00:11:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470198666432512[0;39m <==    Updates: 0
2023-05-27 00:11:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470198666432512[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2023-05-27 00:12:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119470219654729728[0;39m 生成今日电子书快照开始
2023-05-27 00:12:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470219654729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 00:12:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470219654729728[0;39m ==> Parameters: 
2023-05-27 00:12:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119470219654729728[0;39m <==    Updates: 0
2023-05-27 00:12:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119470219654729728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:53:36.574 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119661884914929664[0;39m 更新电子书下的文档数据开始
2023-05-27 12:53:36.574 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119661884914929664[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:53:36.575 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119661884914929664[0;39m ==> Parameters: 
2023-05-27 12:53:36.576 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119661884914929664[0;39m <==    Updates: 8
2023-05-27 12:53:36.576 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119661884914929664[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 12:53:36.576 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119661884923318272[0;39m 生成今日电子书快照开始
2023-05-27 12:53:36.576 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661884923318272[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:53:36.577 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661884923318272[0;39m ==> Parameters: 
2023-05-27 12:53:36.578 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661884923318272[0;39m <==    Updates: 0
2023-05-27 12:53:36.578 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119661884923318272[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:53:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119661899309780992[0;39m 生成今日电子书快照开始
2023-05-27 12:53:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661899309780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:53:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661899309780992[0;39m ==> Parameters: 
2023-05-27 12:53:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661899309780992[0;39m <==    Updates: 0
2023-05-27 12:53:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119661899309780992[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2023-05-27 12:53:40.977 WARN  com.zaxxer.hikari.pool.HikariPool                 :788 
                [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=12h42m1s582ms397µs700ns).
2023-05-27 12:53:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119661920285495296[0;39m 生成今日电子书快照开始
2023-05-27 12:53:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661920285495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:53:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661920285495296[0;39m ==> Parameters: 
2023-05-27 12:53:45.044 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661920285495296[0;39m <==    Updates: 0
2023-05-27 12:53:45.044 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119661920285495296[0;39m 生成今日电子书快照结束，耗时：37 毫秒
2023-05-27 12:53:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119661941273792512[0;39m 生成今日电子书快照开始
2023-05-27 12:53:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661941273792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:53:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661941273792512[0;39m ==> Parameters: 
2023-05-27 12:53:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661941273792512[0;39m <==    Updates: 0
2023-05-27 12:53:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119661941273792512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:53:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119661962220146688[0;39m 生成今日电子书快照开始
2023-05-27 12:53:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661962220146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:53:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661962220146688[0;39m ==> Parameters: 
2023-05-27 12:53:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661962220146688[0;39m <==    Updates: 0
2023-05-27 12:53:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119661962220146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:54:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119661983179083776[0;39m 生成今日电子书快照开始
2023-05-27 12:54:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661983179083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661983179083776[0;39m ==> Parameters: 
2023-05-27 12:54:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119661983179083776[0;39m <==    Updates: 0
2023-05-27 12:54:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119661983179083776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:54:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662004200935424[0;39m 生成今日电子书快照开始
2023-05-27 12:54:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662004200935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662004200935424[0;39m ==> Parameters: 
2023-05-27 12:54:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662004200935424[0;39m <==    Updates: 0
2023-05-27 12:54:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662004200935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:54:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119662004209324032[0;39m 更新电子书下的文档数据开始
2023-05-27 12:54:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662004209324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:54:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662004209324032[0;39m ==> Parameters: 
2023-05-27 12:54:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662004209324032[0;39m <==    Updates: 8
2023-05-27 12:54:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119662004209324032[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 12:54:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662025164066816[0;39m 生成今日电子书快照开始
2023-05-27 12:54:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662025164066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662025164066816[0;39m ==> Parameters: 
2023-05-27 12:54:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662025164066816[0;39m <==    Updates: 0
2023-05-27 12:54:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662025164066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:54:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662046127198208[0;39m 生成今日电子书快照开始
2023-05-27 12:54:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662046127198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662046127198208[0;39m ==> Parameters: 
2023-05-27 12:54:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662046127198208[0;39m <==    Updates: 0
2023-05-27 12:54:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662046127198208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:54:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662067107106816[0;39m 生成今日电子书快照开始
2023-05-27 12:54:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662067107106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662067107106816[0;39m ==> Parameters: 
2023-05-27 12:54:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662067107106816[0;39m <==    Updates: 0
2023-05-27 12:54:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662067107106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:54:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662088087015424[0;39m 生成今日电子书快照开始
2023-05-27 12:54:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662088087015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662088087015424[0;39m ==> Parameters: 
2023-05-27 12:54:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662088087015424[0;39m <==    Updates: 0
2023-05-27 12:54:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662088087015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:54:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662109008203776[0;39m 生成今日电子书快照开始
2023-05-27 12:54:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662109008203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662109008203776[0;39m ==> Parameters: 
2023-05-27 12:54:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662109008203776[0;39m <==    Updates: 0
2023-05-27 12:54:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662109008203776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:54:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662129979723776[0;39m 生成今日电子书快照开始
2023-05-27 12:54:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662129979723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662129979723776[0;39m ==> Parameters: 
2023-05-27 12:54:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662129979723776[0;39m <==    Updates: 0
2023-05-27 12:54:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662129979723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:54:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119662129988112384[0;39m 更新电子书下的文档数据开始
2023-05-27 12:54:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662129988112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:54:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662129988112384[0;39m ==> Parameters: 
2023-05-27 12:54:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662129988112384[0;39m <==    Updates: 8
2023-05-27 12:54:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119662129988112384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 12:54:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662150980603904[0;39m 生成今日电子书快照开始
2023-05-27 12:54:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662150980603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662150980603904[0;39m ==> Parameters: 
2023-05-27 12:54:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662150980603904[0;39m <==    Updates: 0
2023-05-27 12:54:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662150980603904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 12:54:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662171968901120[0;39m 生成今日电子书快照开始
2023-05-27 12:54:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662171968901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662171968901120[0;39m ==> Parameters: 
2023-05-27 12:54:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662171968901120[0;39m <==    Updates: 0
2023-05-27 12:54:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662171968901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:54:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662192911060992[0;39m 生成今日电子书快照开始
2023-05-27 12:54:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662192911060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662192911060992[0;39m ==> Parameters: 
2023-05-27 12:54:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662192911060992[0;39m <==    Updates: 0
2023-05-27 12:54:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662192911060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:54:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662213916135424[0;39m 生成今日电子书快照开始
2023-05-27 12:54:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662213916135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:54:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662213916135424[0;39m ==> Parameters: 
2023-05-27 12:54:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662213916135424[0;39m <==    Updates: 0
2023-05-27 12:54:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662213916135424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:55:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662234862489600[0;39m 生成今日电子书快照开始
2023-05-27 12:55:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662234862489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662234862489600[0;39m ==> Parameters: 
2023-05-27 12:55:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662234862489600[0;39m <==    Updates: 0
2023-05-27 12:55:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662234862489600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 12:55:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662255838203904[0;39m 生成今日电子书快照开始
2023-05-27 12:55:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662255838203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662255838203904[0;39m ==> Parameters: 
2023-05-27 12:55:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662255838203904[0;39m <==    Updates: 0
2023-05-27 12:55:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662255838203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:55:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119662255846592512[0;39m 更新电子书下的文档数据开始
2023-05-27 12:55:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662255846592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:55:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662255846592512[0;39m ==> Parameters: 
2023-05-27 12:55:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662255846592512[0;39m <==    Updates: 8
2023-05-27 12:55:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119662255846592512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 12:55:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662276780363776[0;39m 生成今日电子书快照开始
2023-05-27 12:55:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662276780363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662276780363776[0;39m ==> Parameters: 
2023-05-27 12:55:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662276780363776[0;39m <==    Updates: 0
2023-05-27 12:55:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662276780363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:55:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662297806409728[0;39m 生成今日电子书快照开始
2023-05-27 12:55:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662297806409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662297806409728[0;39m ==> Parameters: 
2023-05-27 12:55:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662297806409728[0;39m <==    Updates: 0
2023-05-27 12:55:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662297806409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:55:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662318756958208[0;39m 生成今日电子书快照开始
2023-05-27 12:55:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662318756958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662318756958208[0;39m ==> Parameters: 
2023-05-27 12:55:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662318756958208[0;39m <==    Updates: 0
2023-05-27 12:55:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662318756958208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:55:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662339732672512[0;39m 生成今日电子书快照开始
2023-05-27 12:55:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662339732672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662339732672512[0;39m ==> Parameters: 
2023-05-27 12:55:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662339732672512[0;39m <==    Updates: 0
2023-05-27 12:55:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662339732672512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:55:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662360699998208[0;39m 生成今日电子书快照开始
2023-05-27 12:55:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662360699998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662360699998208[0;39m ==> Parameters: 
2023-05-27 12:55:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662360699998208[0;39m <==    Updates: 0
2023-05-27 12:55:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662360699998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:55:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119662381633769472[0;39m 更新电子书下的文档数据开始
2023-05-27 12:55:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662381633769472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:55:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662381633769472[0;39m ==> Parameters: 
2023-05-27 12:55:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662381633769472[0;39m <==    Updates: 8
2023-05-27 12:55:35.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119662381633769472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 12:55:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662381637963776[0;39m 生成今日电子书快照开始
2023-05-27 12:55:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662381637963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662381637963776[0;39m ==> Parameters: 
2023-05-27 12:55:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662381637963776[0;39m <==    Updates: 0
2023-05-27 12:55:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662381637963776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 12:55:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662402664009728[0;39m 生成今日电子书快照开始
2023-05-27 12:55:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662402664009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662402664009728[0;39m ==> Parameters: 
2023-05-27 12:55:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662402664009728[0;39m <==    Updates: 0
2023-05-27 12:55:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662402664009728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:55:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662423585198080[0;39m 生成今日电子书快照开始
2023-05-27 12:55:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662423585198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662423585198080[0;39m ==> Parameters: 
2023-05-27 12:55:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662423585198080[0;39m <==    Updates: 0
2023-05-27 12:55:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662423585198080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:55:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662444548329472[0;39m 生成今日电子书快照开始
2023-05-27 12:55:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662444548329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662444548329472[0;39m ==> Parameters: 
2023-05-27 12:55:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662444548329472[0;39m <==    Updates: 0
2023-05-27 12:55:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662444548329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:55:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662465565986816[0;39m 生成今日电子书快照开始
2023-05-27 12:55:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662465565986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:55:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662465565986816[0;39m ==> Parameters: 
2023-05-27 12:55:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662465565986816[0;39m <==    Updates: 0
2023-05-27 12:55:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662465565986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:56:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662486495563776[0;39m 生成今日电子书快照开始
2023-05-27 12:56:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662486495563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662486495563776[0;39m ==> Parameters: 
2023-05-27 12:56:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662486495563776[0;39m <==    Updates: 0
2023-05-27 12:56:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662486495563776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 12:56:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662507471278080[0;39m 生成今日电子书快照开始
2023-05-27 12:56:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662507471278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662507471278080[0;39m ==> Parameters: 
2023-05-27 12:56:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662507471278080[0;39m <==    Updates: 0
2023-05-27 12:56:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662507471278080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 12:56:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119662507475472384[0;39m 更新电子书下的文档数据开始
2023-05-27 12:56:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662507475472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:56:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662507475472384[0;39m ==> Parameters: 
2023-05-27 12:56:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662507475472384[0;39m <==    Updates: 8
2023-05-27 12:56:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119662507475472384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 12:56:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662528484741120[0;39m 生成今日电子书快照开始
2023-05-27 12:56:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662528484741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662528484741120[0;39m ==> Parameters: 
2023-05-27 12:56:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662528484741120[0;39m <==    Updates: 0
2023-05-27 12:56:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662528484741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:56:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662549435289600[0;39m 生成今日电子书快照开始
2023-05-27 12:56:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662549435289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662549435289600[0;39m ==> Parameters: 
2023-05-27 12:56:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662549435289600[0;39m <==    Updates: 0
2023-05-27 12:56:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662549435289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:56:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662570398420992[0;39m 生成今日电子书快照开始
2023-05-27 12:56:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662570398420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662570398420992[0;39m ==> Parameters: 
2023-05-27 12:56:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662570398420992[0;39m <==    Updates: 0
2023-05-27 12:56:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662570398420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:56:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662591403495424[0;39m 生成今日电子书快照开始
2023-05-27 12:56:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662591403495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662591403495424[0;39m ==> Parameters: 
2023-05-27 12:56:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662591403495424[0;39m <==    Updates: 0
2023-05-27 12:56:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662591403495424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:56:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662612379209728[0;39m 生成今日电子书快照开始
2023-05-27 12:56:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662612379209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662612379209728[0;39m ==> Parameters: 
2023-05-27 12:56:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662612379209728[0;39m <==    Updates: 0
2023-05-27 12:56:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662612379209728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:56:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662633333952512[0;39m 生成今日电子书快照开始
2023-05-27 12:56:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662633333952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662633333952512[0;39m ==> Parameters: 
2023-05-27 12:56:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662633333952512[0;39m <==    Updates: 0
2023-05-27 12:56:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662633333952512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:56:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119662633346535424[0;39m 更新电子书下的文档数据开始
2023-05-27 12:56:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662633346535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:56:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662633346535424[0;39m ==> Parameters: 
2023-05-27 12:56:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662633346535424[0;39m <==    Updates: 8
2023-05-27 12:56:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119662633346535424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 12:56:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662654288695296[0;39m 生成今日电子书快照开始
2023-05-27 12:56:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662654288695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662654288695296[0;39m ==> Parameters: 
2023-05-27 12:56:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662654288695296[0;39m <==    Updates: 0
2023-05-27 12:56:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662654288695296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:56:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662675251826688[0;39m 生成今日电子书快照开始
2023-05-27 12:56:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662675251826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662675251826688[0;39m ==> Parameters: 
2023-05-27 12:56:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662675251826688[0;39m <==    Updates: 0
2023-05-27 12:56:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662675251826688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:56:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662696244318208[0;39m 生成今日电子书快照开始
2023-05-27 12:56:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662696244318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662696244318208[0;39m ==> Parameters: 
2023-05-27 12:56:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662696244318208[0;39m <==    Updates: 0
2023-05-27 12:56:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662696244318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:56:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662717194866688[0;39m 生成今日电子书快照开始
2023-05-27 12:56:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662717194866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:56:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662717194866688[0;39m ==> Parameters: 
2023-05-27 12:56:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662717194866688[0;39m <==    Updates: 0
2023-05-27 12:56:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662717194866688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662738162192384[0;39m 生成今日电子书快照开始
2023-05-27 12:57:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662738162192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662738162192384[0;39m ==> Parameters: 
2023-05-27 12:57:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662738162192384[0;39m <==    Updates: 0
2023-05-27 12:57:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662738162192384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:57:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119662759129518080[0;39m 更新电子书下的文档数据开始
2023-05-27 12:57:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662759129518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:57:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662759129518080[0;39m ==> Parameters: 
2023-05-27 12:57:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662759129518080[0;39m <==    Updates: 8
2023-05-27 12:57:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119662759129518080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 12:57:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662759137906688[0;39m 生成今日电子书快照开始
2023-05-27 12:57:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662759137906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662759137906688[0;39m ==> Parameters: 
2023-05-27 12:57:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662759137906688[0;39m <==    Updates: 0
2023-05-27 12:57:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662759137906688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 12:57:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662780113620992[0;39m 生成今日电子书快照开始
2023-05-27 12:57:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662780113620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662780113620992[0;39m ==> Parameters: 
2023-05-27 12:57:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662780113620992[0;39m <==    Updates: 0
2023-05-27 12:57:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662780113620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662801085140992[0;39m 生成今日电子书快照开始
2023-05-27 12:57:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662801085140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662801085140992[0;39m ==> Parameters: 
2023-05-27 12:57:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662801085140992[0;39m <==    Updates: 0
2023-05-27 12:57:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662801085140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662822056660992[0;39m 生成今日电子书快照开始
2023-05-27 12:57:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662822056660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662822056660992[0;39m ==> Parameters: 
2023-05-27 12:57:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662822056660992[0;39m <==    Updates: 0
2023-05-27 12:57:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662822056660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662843040763904[0;39m 生成今日电子书快照开始
2023-05-27 12:57:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662843040763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662843040763904[0;39m ==> Parameters: 
2023-05-27 12:57:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662843040763904[0;39m <==    Updates: 0
2023-05-27 12:57:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662843040763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662863982923776[0;39m 生成今日电子书快照开始
2023-05-27 12:57:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662863982923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662863982923776[0;39m ==> Parameters: 
2023-05-27 12:57:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662863982923776[0;39m <==    Updates: 0
2023-05-27 12:57:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662863982923776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119662884958638080[0;39m 更新电子书下的文档数据开始
2023-05-27 12:57:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662884958638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:57:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662884958638080[0;39m ==> Parameters: 
2023-05-27 12:57:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119662884958638080[0;39m <==    Updates: 8
2023-05-27 12:57:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119662884958638080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 12:57:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662884962832384[0;39m 生成今日电子书快照开始
2023-05-27 12:57:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662884962832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662884962832384[0;39m ==> Parameters: 
2023-05-27 12:57:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662884962832384[0;39m <==    Updates: 0
2023-05-27 12:57:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662884962832384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 12:57:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662905946935296[0;39m 生成今日电子书快照开始
2023-05-27 12:57:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662905946935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662905946935296[0;39m ==> Parameters: 
2023-05-27 12:57:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662905946935296[0;39m <==    Updates: 0
2023-05-27 12:57:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662905946935296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662926910066688[0;39m 生成今日电子书快照开始
2023-05-27 12:57:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662926910066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662926910066688[0;39m ==> Parameters: 
2023-05-27 12:57:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662926910066688[0;39m <==    Updates: 0
2023-05-27 12:57:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662926910066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662947869003776[0;39m 生成今日电子书快照开始
2023-05-27 12:57:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662947869003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662947869003776[0;39m ==> Parameters: 
2023-05-27 12:57:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662947869003776[0;39m <==    Updates: 0
2023-05-27 12:57:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662947869003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:57:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662968874078208[0;39m 生成今日电子书快照开始
2023-05-27 12:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662968874078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:57:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662968874078208[0;39m ==> Parameters: 
2023-05-27 12:57:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662968874078208[0;39m <==    Updates: 0
2023-05-27 12:57:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662968874078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:58:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119662989824626688[0;39m 生成今日电子书快照开始
2023-05-27 12:58:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662989824626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662989824626688[0;39m ==> Parameters: 
2023-05-27 12:58:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119662989824626688[0;39m <==    Updates: 0
2023-05-27 12:58:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119662989824626688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:58:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663010779369472[0;39m 生成今日电子书快照开始
2023-05-27 12:58:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663010779369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663010779369472[0;39m ==> Parameters: 
2023-05-27 12:58:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663010779369472[0;39m <==    Updates: 0
2023-05-27 12:58:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663010779369472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:58:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119663010787758080[0;39m 更新电子书下的文档数据开始
2023-05-27 12:58:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663010787758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:58:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663010787758080[0;39m ==> Parameters: 
2023-05-27 12:58:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663010787758080[0;39m <==    Updates: 8
2023-05-27 12:58:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119663010787758080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 12:58:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663031750889472[0;39m 生成今日电子书快照开始
2023-05-27 12:58:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663031750889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663031750889472[0;39m ==> Parameters: 
2023-05-27 12:58:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663031750889472[0;39m <==    Updates: 0
2023-05-27 12:58:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663031750889472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 12:58:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663052743380992[0;39m 生成今日电子书快照开始
2023-05-27 12:58:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663052743380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663052743380992[0;39m ==> Parameters: 
2023-05-27 12:58:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663052743380992[0;39m <==    Updates: 0
2023-05-27 12:58:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663052743380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:58:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663073731678208[0;39m 生成今日电子书快照开始
2023-05-27 12:58:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663073731678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663073731678208[0;39m ==> Parameters: 
2023-05-27 12:58:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663073731678208[0;39m <==    Updates: 0
2023-05-27 12:58:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663073731678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:58:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663094719975424[0;39m 生成今日电子书快照开始
2023-05-27 12:58:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663094719975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663094719975424[0;39m ==> Parameters: 
2023-05-27 12:58:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663094719975424[0;39m <==    Updates: 0
2023-05-27 12:58:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663094719975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:58:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663115695689728[0;39m 生成今日电子书快照开始
2023-05-27 12:58:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663115695689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663115695689728[0;39m ==> Parameters: 
2023-05-27 12:58:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663115695689728[0;39m <==    Updates: 0
2023-05-27 12:58:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663115695689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:58:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119663136637849600[0;39m 更新电子书下的文档数据开始
2023-05-27 12:58:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663136637849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:58:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663136637849600[0;39m ==> Parameters: 
2023-05-27 12:58:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663136637849600[0;39m <==    Updates: 8
2023-05-27 12:58:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119663136637849600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 12:58:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663136646238208[0;39m 生成今日电子书快照开始
2023-05-27 12:58:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663136646238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663136646238208[0;39m ==> Parameters: 
2023-05-27 12:58:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663136646238208[0;39m <==    Updates: 0
2023-05-27 12:58:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663136646238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:58:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663157617758208[0;39m 生成今日电子书快照开始
2023-05-27 12:58:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663157617758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663157617758208[0;39m ==> Parameters: 
2023-05-27 12:58:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663157617758208[0;39m <==    Updates: 0
2023-05-27 12:58:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663157617758208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:58:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663178585083904[0;39m 生成今日电子书快照开始
2023-05-27 12:58:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663178585083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663178585083904[0;39m ==> Parameters: 
2023-05-27 12:58:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663178585083904[0;39m <==    Updates: 0
2023-05-27 12:58:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663178585083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:58:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663199573381120[0;39m 生成今日电子书快照开始
2023-05-27 12:58:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663199573381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663199573381120[0;39m ==> Parameters: 
2023-05-27 12:58:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663199573381120[0;39m <==    Updates: 0
2023-05-27 12:58:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663199573381120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:58:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663220523929600[0;39m 生成今日电子书快照开始
2023-05-27 12:58:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663220523929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:58:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663220523929600[0;39m ==> Parameters: 
2023-05-27 12:58:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663220523929600[0;39m <==    Updates: 0
2023-05-27 12:58:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663220523929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663241487060992[0;39m 生成今日电子书快照开始
2023-05-27 12:59:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663241487060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663241487060992[0;39m ==> Parameters: 
2023-05-27 12:59:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663241487060992[0;39m <==    Updates: 0
2023-05-27 12:59:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663241487060992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 12:59:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663262471163904[0;39m 生成今日电子书快照开始
2023-05-27 12:59:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663262471163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663262471163904[0;39m ==> Parameters: 
2023-05-27 12:59:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663262471163904[0;39m <==    Updates: 0
2023-05-27 12:59:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663262471163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119663262479552512[0;39m 更新电子书下的文档数据开始
2023-05-27 12:59:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663262479552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:59:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663262479552512[0;39m ==> Parameters: 
2023-05-27 12:59:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663262479552512[0;39m <==    Updates: 8
2023-05-27 12:59:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119663262479552512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 12:59:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663283413323776[0;39m 生成今日电子书快照开始
2023-05-27 12:59:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663283413323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663283413323776[0;39m ==> Parameters: 
2023-05-27 12:59:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663283413323776[0;39m <==    Updates: 0
2023-05-27 12:59:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663283413323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663304443564032[0;39m 生成今日电子书快照开始
2023-05-27 12:59:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663304443564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663304443564032[0;39m ==> Parameters: 
2023-05-27 12:59:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663304443564032[0;39m <==    Updates: 0
2023-05-27 12:59:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663304443564032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663325368946688[0;39m 生成今日电子书快照开始
2023-05-27 12:59:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663325368946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663325368946688[0;39m ==> Parameters: 
2023-05-27 12:59:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663325368946688[0;39m <==    Updates: 0
2023-05-27 12:59:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663325368946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663346323689472[0;39m 生成今日电子书快照开始
2023-05-27 12:59:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663346323689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663346323689472[0;39m ==> Parameters: 
2023-05-27 12:59:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663346323689472[0;39m <==    Updates: 0
2023-05-27 12:59:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663346323689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663367307792384[0;39m 生成今日电子书快照开始
2023-05-27 12:59:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663367307792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663367307792384[0;39m ==> Parameters: 
2023-05-27 12:59:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663367307792384[0;39m <==    Updates: 0
2023-05-27 12:59:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663367307792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119663388308672512[0;39m 更新电子书下的文档数据开始
2023-05-27 12:59:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663388308672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 12:59:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663388308672512[0;39m ==> Parameters: 
2023-05-27 12:59:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663388308672512[0;39m <==    Updates: 8
2023-05-27 12:59:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119663388308672512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 12:59:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663388312866816[0;39m 生成今日电子书快照开始
2023-05-27 12:59:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663388312866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663388312866816[0;39m ==> Parameters: 
2023-05-27 12:59:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663388312866816[0;39m <==    Updates: 0
2023-05-27 12:59:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663388312866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663409296969728[0;39m 生成今日电子书快照开始
2023-05-27 12:59:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663409296969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663409296969728[0;39m ==> Parameters: 
2023-05-27 12:59:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663409296969728[0;39m <==    Updates: 0
2023-05-27 12:59:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663409296969728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663430260101120[0;39m 生成今日电子书快照开始
2023-05-27 12:59:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663430260101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663430260101120[0;39m ==> Parameters: 
2023-05-27 12:59:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663430260101120[0;39m <==    Updates: 0
2023-05-27 12:59:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663430260101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:50.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663451177095168[0;39m 生成今日电子书快照开始
2023-05-27 12:59:50.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663451177095168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663451177095168[0;39m ==> Parameters: 
2023-05-27 12:59:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663451177095168[0;39m <==    Updates: 0
2023-05-27 12:59:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663451177095168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 12:59:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663472219918336[0;39m 生成今日电子书快照开始
2023-05-27 12:59:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663472219918336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 12:59:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663472219918336[0;39m ==> Parameters: 
2023-05-27 12:59:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663472219918336[0;39m <==    Updates: 0
2023-05-27 12:59:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663472219918336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:00:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663493153689600[0;39m 生成今日电子书快照开始
2023-05-27 13:00:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663493153689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663493153689600[0;39m ==> Parameters: 
2023-05-27 13:00:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663493153689600[0;39m <==    Updates: 0
2023-05-27 13:00:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663493153689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663514121015296[0;39m 生成今日电子书快照开始
2023-05-27 13:00:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663514121015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663514121015296[0;39m ==> Parameters: 
2023-05-27 13:00:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663514121015296[0;39m <==    Updates: 0
2023-05-27 13:00:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663514121015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119663514129403904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:00:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663514129403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:00:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663514129403904[0;39m ==> Parameters: 
2023-05-27 13:00:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663514129403904[0;39m <==    Updates: 8
2023-05-27 13:00:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119663514129403904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:00:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663535084146688[0;39m 生成今日电子书快照开始
2023-05-27 13:00:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663535084146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663535084146688[0;39m ==> Parameters: 
2023-05-27 13:00:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663535084146688[0;39m <==    Updates: 0
2023-05-27 13:00:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663535084146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663556093415424[0;39m 生成今日电子书快照开始
2023-05-27 13:00:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663556093415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663556093415424[0;39m ==> Parameters: 
2023-05-27 13:00:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663556093415424[0;39m <==    Updates: 0
2023-05-27 13:00:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663556093415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663577022992384[0;39m 生成今日电子书快照开始
2023-05-27 13:00:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663577022992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663577022992384[0;39m ==> Parameters: 
2023-05-27 13:00:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663577022992384[0;39m <==    Updates: 0
2023-05-27 13:00:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663577022992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663597977735168[0;39m 生成今日电子书快照开始
2023-05-27 13:00:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663597977735168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663597977735168[0;39m ==> Parameters: 
2023-05-27 13:00:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663597977735168[0;39m <==    Updates: 0
2023-05-27 13:00:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663597977735168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663618999586816[0;39m 生成今日电子书快照开始
2023-05-27 13:00:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663618999586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663618999586816[0;39m ==> Parameters: 
2023-05-27 13:00:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663618999586816[0;39m <==    Updates: 0
2023-05-27 13:00:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663618999586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:35.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119663639920775168[0;39m 更新电子书下的文档数据开始
2023-05-27 13:00:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663639920775168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:00:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663639920775168[0;39m ==> Parameters: 
2023-05-27 13:00:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663639920775168[0;39m <==    Updates: 8
2023-05-27 13:00:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119663639920775168[0;39m 更新电子书下的文档数据结束，耗时：9 毫秒
2023-05-27 13:00:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663639962718208[0;39m 生成今日电子书快照开始
2023-05-27 13:00:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663639962718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663639962718208[0;39m ==> Parameters: 
2023-05-27 13:00:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663639962718208[0;39m <==    Updates: 0
2023-05-27 13:00:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663639962718208[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2023-05-27 13:00:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663660951015424[0;39m 生成今日电子书快照开始
2023-05-27 13:00:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663660951015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663660951015424[0;39m ==> Parameters: 
2023-05-27 13:00:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663660951015424[0;39m <==    Updates: 0
2023-05-27 13:00:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663660951015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663681880592384[0;39m 生成今日电子书快照开始
2023-05-27 13:00:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663681880592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663681880592384[0;39m ==> Parameters: 
2023-05-27 13:00:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663681880592384[0;39m <==    Updates: 0
2023-05-27 13:00:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663681880592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:00:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663702852112384[0;39m 生成今日电子书快照开始
2023-05-27 13:00:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663702852112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663702852112384[0;39m ==> Parameters: 
2023-05-27 13:00:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663702852112384[0;39m <==    Updates: 0
2023-05-27 13:00:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663702852112384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:00:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663723861381120[0;39m 生成今日电子书快照开始
2023-05-27 13:00:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663723861381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:00:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663723861381120[0;39m ==> Parameters: 
2023-05-27 13:00:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663723861381120[0;39m <==    Updates: 0
2023-05-27 13:00:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663723861381120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663744816123904[0;39m 生成今日电子书快照开始
2023-05-27 13:01:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663744816123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663744816123904[0;39m ==> Parameters: 
2023-05-27 13:01:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663744816123904[0;39m <==    Updates: 0
2023-05-27 13:01:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663744816123904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119663765804421120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:01:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663765804421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:01:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663765804421120[0;39m ==> Parameters: 
2023-05-27 13:01:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663765804421120[0;39m <==    Updates: 8
2023-05-27 13:01:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119663765804421120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:01:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663765808615424[0;39m 生成今日电子书快照开始
2023-05-27 13:01:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663765808615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663765808615424[0;39m ==> Parameters: 
2023-05-27 13:01:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663765808615424[0;39m <==    Updates: 0
2023-05-27 13:01:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663765808615424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663786771746816[0;39m 生成今日电子书快照开始
2023-05-27 13:01:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663786771746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663786771746816[0;39m ==> Parameters: 
2023-05-27 13:01:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663786771746816[0;39m <==    Updates: 0
2023-05-27 13:01:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663786771746816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:12.592 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m119402365253193728[0;39m ------------- LoginInterceptor 开始 -------------
2023-05-27 13:01:12.593 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m119402365253193728[0;39m 接口登录拦截：，path：http://localhost:8880/
2023-05-27 13:01:12.593 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m119402365253193728[0;39m 登录校验开始，token：null
2023-05-27 13:01:12.593 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :49  
                [32m119402365253193728[0;39m token为空，请求被拦截
2023-05-27 13:01:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663807747461120[0;39m 生成今日电子书快照开始
2023-05-27 13:01:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663807747461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663807747461120[0;39m ==> Parameters: 
2023-05-27 13:01:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663807747461120[0;39m <==    Updates: 0
2023-05-27 13:01:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663807747461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663828718981120[0;39m 生成今日电子书快照开始
2023-05-27 13:01:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663828718981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663828718981120[0;39m ==> Parameters: 
2023-05-27 13:01:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663828718981120[0;39m <==    Updates: 0
2023-05-27 13:01:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663828718981120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663849648558080[0;39m 生成今日电子书快照开始
2023-05-27 13:01:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663849648558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663849648558080[0;39m ==> Parameters: 
2023-05-27 13:01:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663849648558080[0;39m <==    Updates: 0
2023-05-27 13:01:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663849648558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:25.905 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：w8U0U7lEJJ，session id：2，当前连接数：1
2023-05-27 13:01:26.068 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119663854115491841[0;39m ------------- 开始 -------------
2023-05-27 13:01:26.068 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119663854115491840[0;39m ------------- 开始 -------------
2023-05-27 13:01:26.068 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119663854115491842[0;39m ------------- 开始 -------------
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119663854115491840[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119663854115491841[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119663854115491842[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119663854115491840[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119663854115491841[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119663854115491842[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119663854115491841[0;39m 远程地址: 127.0.0.1
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119663854115491840[0;39m 远程地址: 127.0.0.1
2023-05-27 13:01:26.069 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119663854115491842[0;39m 远程地址: 127.0.0.1
2023-05-27 13:01:26.070 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119663854115491841[0;39m 请求参数: []
2023-05-27 13:01:26.070 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119663854115491842[0;39m 请求参数: []
2023-05-27 13:01:26.070 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119663854115491840[0;39m 请求参数: []
2023-05-27 13:01:26.084 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119663854115491841[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 13:01:26.084 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119663854115491840[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 13:01:26.085 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119663854115491841[0;39m ==> Parameters: 
2023-05-27 13:01:26.085 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119663854115491840[0;39m ==> Parameters: 
2023-05-27 13:01:26.087 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119663854115491842[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 13:01:26.087 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119663854115491842[0;39m ==> Parameters: 
2023-05-27 13:01:26.089 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119663854115491840[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 13:01:26.089 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119663854115491841[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 13:01:26.089 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==    Columns: id, parent, name, sort
2023-05-27 13:01:26.090 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 13:01:26.091 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 13:01:26.091 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119663854115491841[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 13:01:26.091 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119663854115491840[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 13:01:26.091 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 13:01:26.091 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 13:01:26.092 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 13:01:26.092 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 13:01:26.092 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 13:01:26.093 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 13:01:26.093 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 13:01:26.093 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 13:01:26.093 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 13:01:26.093 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 13:01:26.094 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 13:01:26.094 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 13:01:26.094 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 13:01:26.094 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119663854115491842[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 13:01:26.094 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119663854115491842[0;39m <==      Total: 16
2023-05-27 13:01:26.097 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119663854115491842[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 13:01:26.097 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119663854115491842[0;39m ------------- 结束 耗时：29 ms -------------
2023-05-27 13:01:26.126 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119663854115491840[0;39m <==      Total: 1
2023-05-27 13:01:26.126 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119663854115491841[0;39m <==        Row: 2023-05-27, 436, 68, 0, 0
2023-05-27 13:01:26.126 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119663854115491841[0;39m <==      Total: 2
2023-05-27 13:01:26.127 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119663854115491840[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 13:01:26.127 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119663854115491840[0;39m ------------- 结束 耗时：61 ms -------------
2023-05-27 13:01:26.127 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119663854115491841[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":436,"viewIncrease":0,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 13:01:26.127 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119663854115491841[0;39m ------------- 结束 耗时：59 ms -------------
2023-05-27 13:01:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663870666215424[0;39m 生成今日电子书快照开始
2023-05-27 13:01:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663870666215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663870666215424[0;39m ==> Parameters: 
2023-05-27 13:01:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663870666215424[0;39m <==    Updates: 0
2023-05-27 13:01:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663870666215424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:01:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663891637735424[0;39m 生成今日电子书快照开始
2023-05-27 13:01:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663891637735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663891637735424[0;39m ==> Parameters: 
2023-05-27 13:01:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663891637735424[0;39m <==    Updates: 0
2023-05-27 13:01:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663891637735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119663891646124032[0;39m 更新电子书下的文档数据开始
2023-05-27 13:01:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663891646124032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:01:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663891646124032[0;39m ==> Parameters: 
2023-05-27 13:01:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119663891646124032[0;39m <==    Updates: 8
2023-05-27 13:01:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119663891646124032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:01:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663912567312384[0;39m 生成今日电子书快照开始
2023-05-27 13:01:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663912567312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663912567312384[0;39m ==> Parameters: 
2023-05-27 13:01:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663912567312384[0;39m <==    Updates: 0
2023-05-27 13:01:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663912567312384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663933576581120[0;39m 生成今日电子书快照开始
2023-05-27 13:01:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663933576581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663933576581120[0;39m ==> Parameters: 
2023-05-27 13:01:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663933576581120[0;39m <==    Updates: 0
2023-05-27 13:01:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663933576581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663954514546688[0;39m 生成今日电子书快照开始
2023-05-27 13:01:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663954514546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663954514546688[0;39m ==> Parameters: 
2023-05-27 13:01:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663954514546688[0;39m <==    Updates: 0
2023-05-27 13:01:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663954514546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:01:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663975494455296[0;39m 生成今日电子书快照开始
2023-05-27 13:01:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663975494455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:01:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663975494455296[0;39m ==> Parameters: 
2023-05-27 13:01:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663975494455296[0;39m <==    Updates: 0
2023-05-27 13:01:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663975494455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119663996465975296[0;39m 生成今日电子书快照开始
2023-05-27 13:02:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663996465975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663996465975296[0;39m ==> Parameters: 
2023-05-27 13:02:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119663996465975296[0;39m <==    Updates: 0
2023-05-27 13:02:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119663996465975296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:02:05.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664017408135168[0;39m 生成今日电子书快照开始
2023-05-27 13:02:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664017408135168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664017408135168[0;39m ==> Parameters: 
2023-05-27 13:02:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664017408135168[0;39m <==    Updates: 0
2023-05-27 13:02:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664017408135168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119664017420718080[0;39m 更新电子书下的文档数据开始
2023-05-27 13:02:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664017420718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:02:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664017420718080[0;39m ==> Parameters: 
2023-05-27 13:02:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664017420718080[0;39m <==    Updates: 8
2023-05-27 13:02:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119664017420718080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:02:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664038413209600[0;39m 生成今日电子书快照开始
2023-05-27 13:02:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664038413209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664038413209600[0;39m ==> Parameters: 
2023-05-27 13:02:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664038413209600[0;39m <==    Updates: 0
2023-05-27 13:02:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664038413209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664059409895424[0;39m 生成今日电子书快照开始
2023-05-27 13:02:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664059409895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664059409895424[0;39m ==> Parameters: 
2023-05-27 13:02:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664059409895424[0;39m <==    Updates: 0
2023-05-27 13:02:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664059409895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664080381415424[0;39m 生成今日电子书快照开始
2023-05-27 13:02:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664080381415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664080381415424[0;39m ==> Parameters: 
2023-05-27 13:02:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664080381415424[0;39m <==    Updates: 0
2023-05-27 13:02:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664080381415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664101336158208[0;39m 生成今日电子书快照开始
2023-05-27 13:02:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664101336158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664101336158208[0;39m ==> Parameters: 
2023-05-27 13:02:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664101336158208[0;39m <==    Updates: 0
2023-05-27 13:02:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664101336158208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:02:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664122320261120[0;39m 生成今日电子书快照开始
2023-05-27 13:02:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664122320261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664122320261120[0;39m ==> Parameters: 
2023-05-27 13:02:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664122320261120[0;39m <==    Updates: 0
2023-05-27 13:02:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664122320261120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119664143241449472[0;39m 更新电子书下的文档数据开始
2023-05-27 13:02:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664143241449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:02:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664143241449472[0;39m ==> Parameters: 
2023-05-27 13:02:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664143241449472[0;39m <==    Updates: 8
2023-05-27 13:02:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119664143241449472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:02:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664143249838080[0;39m 生成今日电子书快照开始
2023-05-27 13:02:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664143249838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664143249838080[0;39m ==> Parameters: 
2023-05-27 13:02:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664143249838080[0;39m <==    Updates: 0
2023-05-27 13:02:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664143249838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664164217163776[0;39m 生成今日电子书快照开始
2023-05-27 13:02:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664164217163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664164217163776[0;39m ==> Parameters: 
2023-05-27 13:02:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664164217163776[0;39m <==    Updates: 0
2023-05-27 13:02:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664164217163776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:02:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664185218043904[0;39m 生成今日电子书快照开始
2023-05-27 13:02:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664185218043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664185218043904[0;39m ==> Parameters: 
2023-05-27 13:02:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664185218043904[0;39m <==    Updates: 0
2023-05-27 13:02:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664185218043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664206206341120[0;39m 生成今日电子书快照开始
2023-05-27 13:02:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664206206341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664206206341120[0;39m ==> Parameters: 
2023-05-27 13:02:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664206206341120[0;39m <==    Updates: 0
2023-05-27 13:02:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664206206341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:02:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664227148500992[0;39m 生成今日电子书快照开始
2023-05-27 13:02:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664227148500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:02:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664227148500992[0;39m ==> Parameters: 
2023-05-27 13:02:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664227148500992[0;39m <==    Updates: 0
2023-05-27 13:02:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664227148500992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664248136798208[0;39m 生成今日电子书快照开始
2023-05-27 13:03:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664248136798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664248136798208[0;39m ==> Parameters: 
2023-05-27 13:03:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664248136798208[0;39m <==    Updates: 0
2023-05-27 13:03:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664248136798208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:03:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664269112512512[0;39m 生成今日电子书快照开始
2023-05-27 13:03:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664269112512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664269112512512[0;39m ==> Parameters: 
2023-05-27 13:03:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664269112512512[0;39m <==    Updates: 0
2023-05-27 13:03:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664269112512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119664269120901120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:03:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664269120901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:03:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664269120901120[0;39m ==> Parameters: 
2023-05-27 13:03:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664269120901120[0;39m <==    Updates: 8
2023-05-27 13:03:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119664269120901120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:03:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664290092421120[0;39m 生成今日电子书快照开始
2023-05-27 13:03:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664290092421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664290092421120[0;39m ==> Parameters: 
2023-05-27 13:03:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664290092421120[0;39m <==    Updates: 0
2023-05-27 13:03:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664290092421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664311076524032[0;39m 生成今日电子书快照开始
2023-05-27 13:03:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664311076524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664311076524032[0;39m ==> Parameters: 
2023-05-27 13:03:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664311076524032[0;39m <==    Updates: 0
2023-05-27 13:03:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664311076524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664332035461120[0;39m 生成今日电子书快照开始
2023-05-27 13:03:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664332035461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664332035461120[0;39m ==> Parameters: 
2023-05-27 13:03:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664332035461120[0;39m <==    Updates: 0
2023-05-27 13:03:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664332035461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664353019564032[0;39m 生成今日电子书快照开始
2023-05-27 13:03:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664353019564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664353019564032[0;39m ==> Parameters: 
2023-05-27 13:03:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664353019564032[0;39m <==    Updates: 0
2023-05-27 13:03:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664353019564032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:03:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664373986889728[0;39m 生成今日电子书快照开始
2023-05-27 13:03:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664373986889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664373986889728[0;39m ==> Parameters: 
2023-05-27 13:03:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664373986889728[0;39m <==    Updates: 0
2023-05-27 13:03:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664373986889728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664394899689472[0;39m 生成今日电子书快照开始
2023-05-27 13:03:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664394899689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664394899689472[0;39m ==> Parameters: 
2023-05-27 13:03:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664394899689472[0;39m <==    Updates: 0
2023-05-27 13:03:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664394899689472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:03:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119664394912272384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:03:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664394912272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:03:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664394912272384[0;39m ==> Parameters: 
2023-05-27 13:03:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664394912272384[0;39m <==    Updates: 8
2023-05-27 13:03:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119664394912272384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:03:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664415925735424[0;39m 生成今日电子书快照开始
2023-05-27 13:03:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664415925735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664415925735424[0;39m ==> Parameters: 
2023-05-27 13:03:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664415925735424[0;39m <==    Updates: 0
2023-05-27 13:03:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664415925735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664436851118080[0;39m 生成今日电子书快照开始
2023-05-27 13:03:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664436851118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664436851118080[0;39m ==> Parameters: 
2023-05-27 13:03:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664436851118080[0;39m <==    Updates: 0
2023-05-27 13:03:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664436851118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664457872969728[0;39m 生成今日电子书快照开始
2023-05-27 13:03:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664457872969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664457872969728[0;39m ==> Parameters: 
2023-05-27 13:03:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664457872969728[0;39m <==    Updates: 0
2023-05-27 13:03:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664457872969728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:03:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664478819323904[0;39m 生成今日电子书快照开始
2023-05-27 13:03:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664478819323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:03:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664478819323904[0;39m ==> Parameters: 
2023-05-27 13:03:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664478819323904[0;39m <==    Updates: 0
2023-05-27 13:03:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664478819323904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:04:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664499795038208[0;39m 生成今日电子书快照开始
2023-05-27 13:04:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664499795038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664499795038208[0;39m ==> Parameters: 
2023-05-27 13:04:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664499795038208[0;39m <==    Updates: 0
2023-05-27 13:04:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664499795038208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:04:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664520791724032[0;39m 生成今日电子书快照开始
2023-05-27 13:04:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664520791724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664520791724032[0;39m ==> Parameters: 
2023-05-27 13:04:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664520791724032[0;39m <==    Updates: 0
2023-05-27 13:04:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664520791724032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:04:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119664520795918336[0;39m 更新电子书下的文档数据开始
2023-05-27 13:04:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664520795918336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:04:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664520795918336[0;39m ==> Parameters: 
2023-05-27 13:04:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664520795918336[0;39m <==    Updates: 8
2023-05-27 13:04:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119664520795918336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:04:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664541704523776[0;39m 生成今日电子书快照开始
2023-05-27 13:04:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664541704523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664541704523776[0;39m ==> Parameters: 
2023-05-27 13:04:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664541704523776[0;39m <==    Updates: 0
2023-05-27 13:04:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664541704523776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:04:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664562701209600[0;39m 生成今日电子书快照开始
2023-05-27 13:04:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664562701209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664562701209600[0;39m ==> Parameters: 
2023-05-27 13:04:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664562701209600[0;39m <==    Updates: 0
2023-05-27 13:04:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664562701209600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:04:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664583660146688[0;39m 生成今日电子书快照开始
2023-05-27 13:04:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664583660146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664583660146688[0;39m ==> Parameters: 
2023-05-27 13:04:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664583660146688[0;39m <==    Updates: 0
2023-05-27 13:04:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664583660146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:04:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664604656832512[0;39m 生成今日电子书快照开始
2023-05-27 13:04:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664604656832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664604656832512[0;39m ==> Parameters: 
2023-05-27 13:04:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664604656832512[0;39m <==    Updates: 0
2023-05-27 13:04:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664604656832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:04:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664625615769600[0;39m 生成今日电子书快照开始
2023-05-27 13:04:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664625615769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664625615769600[0;39m ==> Parameters: 
2023-05-27 13:04:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664625615769600[0;39m <==    Updates: 0
2023-05-27 13:04:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664625615769600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:04:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119664646557929472[0;39m 更新电子书下的文档数据开始
2023-05-27 13:04:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664646557929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:04:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664646557929472[0;39m ==> Parameters: 
2023-05-27 13:04:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664646557929472[0;39m <==    Updates: 8
2023-05-27 13:04:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119664646557929472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:04:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664646566318080[0;39m 生成今日电子书快照开始
2023-05-27 13:04:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664646566318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664646566318080[0;39m ==> Parameters: 
2023-05-27 13:04:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664646566318080[0;39m <==    Updates: 0
2023-05-27 13:04:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664646566318080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:04:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664667592364032[0;39m 生成今日电子书快照开始
2023-05-27 13:04:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664667592364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664667592364032[0;39m ==> Parameters: 
2023-05-27 13:04:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664667592364032[0;39m <==    Updates: 0
2023-05-27 13:04:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664667592364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:04:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664688530329600[0;39m 生成今日电子书快照开始
2023-05-27 13:04:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664688530329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664688530329600[0;39m ==> Parameters: 
2023-05-27 13:04:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664688530329600[0;39m <==    Updates: 0
2023-05-27 13:04:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664688530329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:04:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664709480878080[0;39m 生成今日电子书快照开始
2023-05-27 13:04:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664709480878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664709480878080[0;39m ==> Parameters: 
2023-05-27 13:04:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664709480878080[0;39m <==    Updates: 0
2023-05-27 13:04:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664709480878080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:04:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664730444009472[0;39m 生成今日电子书快照开始
2023-05-27 13:04:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664730444009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:04:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664730444009472[0;39m ==> Parameters: 
2023-05-27 13:04:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664730444009472[0;39m <==    Updates: 0
2023-05-27 13:04:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664730444009472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:05:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664751449083904[0;39m 生成今日电子书快照开始
2023-05-27 13:05:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664751449083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664751449083904[0;39m ==> Parameters: 
2023-05-27 13:05:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664751449083904[0;39m <==    Updates: 0
2023-05-27 13:05:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664751449083904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:05:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119664772424798208[0;39m 更新电子书下的文档数据开始
2023-05-27 13:05:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664772424798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:05:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664772424798208[0;39m ==> Parameters: 
2023-05-27 13:05:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664772424798208[0;39m <==    Updates: 8
2023-05-27 13:05:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119664772424798208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:05:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664772433186816[0;39m 生成今日电子书快照开始
2023-05-27 13:05:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664772433186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664772433186816[0;39m ==> Parameters: 
2023-05-27 13:05:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664772433186816[0;39m <==    Updates: 0
2023-05-27 13:05:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664772433186816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:05:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664793387929600[0;39m 生成今日电子书快照开始
2023-05-27 13:05:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664793387929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664793387929600[0;39m ==> Parameters: 
2023-05-27 13:05:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664793387929600[0;39m <==    Updates: 0
2023-05-27 13:05:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664793387929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:05:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664814351060992[0;39m 生成今日电子书快照开始
2023-05-27 13:05:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664814351060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664814351060992[0;39m ==> Parameters: 
2023-05-27 13:05:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664814351060992[0;39m <==    Updates: 0
2023-05-27 13:05:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664814351060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:05:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664835330969600[0;39m 生成今日电子书快照开始
2023-05-27 13:05:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664835330969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664835330969600[0;39m ==> Parameters: 
2023-05-27 13:05:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664835330969600[0;39m <==    Updates: 0
2023-05-27 13:05:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664835330969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:05:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664856273129472[0;39m 生成今日电子书快照开始
2023-05-27 13:05:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664856273129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664856273129472[0;39m ==> Parameters: 
2023-05-27 13:05:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664856273129472[0;39m <==    Updates: 0
2023-05-27 13:05:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664856273129472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:05:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664877269815296[0;39m 生成今日电子书快照开始
2023-05-27 13:05:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664877269815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664877269815296[0;39m ==> Parameters: 
2023-05-27 13:05:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664877269815296[0;39m <==    Updates: 0
2023-05-27 13:05:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664877269815296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:05:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119664898270695424[0;39m 更新电子书下的文档数据开始
2023-05-27 13:05:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664898270695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:05:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664898270695424[0;39m ==> Parameters: 
2023-05-27 13:05:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119664898270695424[0;39m <==    Updates: 8
2023-05-27 13:05:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119664898270695424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:05:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664898279084032[0;39m 生成今日电子书快照开始
2023-05-27 13:05:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664898279084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664898279084032[0;39m ==> Parameters: 
2023-05-27 13:05:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664898279084032[0;39m <==    Updates: 0
2023-05-27 13:05:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664898279084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:05:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664919225438208[0;39m 生成今日电子书快照开始
2023-05-27 13:05:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664919225438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664919225438208[0;39m ==> Parameters: 
2023-05-27 13:05:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664919225438208[0;39m <==    Updates: 0
2023-05-27 13:05:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664919225438208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:05:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664940167598080[0;39m 生成今日电子书快照开始
2023-05-27 13:05:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664940167598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664940167598080[0;39m ==> Parameters: 
2023-05-27 13:05:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664940167598080[0;39m <==    Updates: 0
2023-05-27 13:05:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664940167598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:05:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664961193644032[0;39m 生成今日电子书快照开始
2023-05-27 13:05:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664961193644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664961193644032[0;39m ==> Parameters: 
2023-05-27 13:05:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664961193644032[0;39m <==    Updates: 0
2023-05-27 13:05:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664961193644032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:05:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119664982135803904[0;39m 生成今日电子书快照开始
2023-05-27 13:05:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664982135803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:05:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664982135803904[0;39m ==> Parameters: 
2023-05-27 13:05:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119664982135803904[0;39m <==    Updates: 0
2023-05-27 13:05:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119664982135803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:06:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665003086352384[0;39m 生成今日电子书快照开始
2023-05-27 13:06:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665003086352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665003086352384[0;39m ==> Parameters: 
2023-05-27 13:06:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665003086352384[0;39m <==    Updates: 0
2023-05-27 13:06:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665003086352384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:06:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119665024104009728[0;39m 更新电子书下的文档数据开始
2023-05-27 13:06:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665024104009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:06:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665024104009728[0;39m ==> Parameters: 
2023-05-27 13:06:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665024104009728[0;39m <==    Updates: 8
2023-05-27 13:06:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119665024104009728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:06:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665024112398336[0;39m 生成今日电子书快照开始
2023-05-27 13:06:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665024112398336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665024112398336[0;39m ==> Parameters: 
2023-05-27 13:06:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665024112398336[0;39m <==    Updates: 0
2023-05-27 13:06:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665024112398336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:06:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665045054558208[0;39m 生成今日电子书快照开始
2023-05-27 13:06:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665045054558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665045054558208[0;39m ==> Parameters: 
2023-05-27 13:06:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665045054558208[0;39m <==    Updates: 0
2023-05-27 13:06:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665045054558208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:06:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665066021883904[0;39m 生成今日电子书快照开始
2023-05-27 13:06:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665066021883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665066021883904[0;39m ==> Parameters: 
2023-05-27 13:06:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665066021883904[0;39m <==    Updates: 0
2023-05-27 13:06:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665066021883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:06:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665086976626688[0;39m 生成今日电子书快照开始
2023-05-27 13:06:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665086976626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665086976626688[0;39m ==> Parameters: 
2023-05-27 13:06:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665086976626688[0;39m <==    Updates: 0
2023-05-27 13:06:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665086976626688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:06:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665107960729600[0;39m 生成今日电子书快照开始
2023-05-27 13:06:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665107960729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665107960729600[0;39m ==> Parameters: 
2023-05-27 13:06:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665107960729600[0;39m <==    Updates: 0
2023-05-27 13:06:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665107960729600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:06:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665128928055296[0;39m 生成今日电子书快照开始
2023-05-27 13:06:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665128928055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665128928055296[0;39m ==> Parameters: 
2023-05-27 13:06:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665128928055296[0;39m <==    Updates: 0
2023-05-27 13:06:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665128928055296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:06:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665149907963904[0;39m 生成今日电子书快照开始
2023-05-27 13:06:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665149907963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665149907963904[0;39m ==> Parameters: 
2023-05-27 13:06:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665149907963904[0;39m <==    Updates: 0
2023-05-27 13:06:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665149907963904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:06:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119665149920546816[0;39m 更新电子书下的文档数据开始
2023-05-27 13:06:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665149920546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:06:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665149920546816[0;39m ==> Parameters: 
2023-05-27 13:06:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665149920546816[0;39m <==    Updates: 8
2023-05-27 13:06:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119665149920546816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:06:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665170858512384[0;39m 生成今日电子书快照开始
2023-05-27 13:06:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665170858512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665170858512384[0;39m ==> Parameters: 
2023-05-27 13:06:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665170858512384[0;39m <==    Updates: 0
2023-05-27 13:06:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665170858512384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:06:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665191834226688[0;39m 生成今日电子书快照开始
2023-05-27 13:06:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665191834226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665191834226688[0;39m ==> Parameters: 
2023-05-27 13:06:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665191834226688[0;39m <==    Updates: 0
2023-05-27 13:06:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665191834226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:06:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665212847689728[0;39m 生成今日电子书快照开始
2023-05-27 13:06:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665212847689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665212847689728[0;39m ==> Parameters: 
2023-05-27 13:06:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665212847689728[0;39m <==    Updates: 0
2023-05-27 13:06:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665212847689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:06:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665233794043904[0;39m 生成今日电子书快照开始
2023-05-27 13:06:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665233794043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:06:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665233794043904[0;39m ==> Parameters: 
2023-05-27 13:06:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665233794043904[0;39m <==    Updates: 0
2023-05-27 13:06:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665233794043904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:07:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665254786535424[0;39m 生成今日电子书快照开始
2023-05-27 13:07:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665254786535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665254786535424[0;39m ==> Parameters: 
2023-05-27 13:07:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665254786535424[0;39m <==    Updates: 0
2023-05-27 13:07:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665254786535424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:07:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665275716112384[0;39m 生成今日电子书快照开始
2023-05-27 13:07:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665275716112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665275716112384[0;39m ==> Parameters: 
2023-05-27 13:07:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665275716112384[0;39m <==    Updates: 0
2023-05-27 13:07:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665275716112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:07:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119665275724500992[0;39m 更新电子书下的文档数据开始
2023-05-27 13:07:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665275724500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:07:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665275724500992[0;39m ==> Parameters: 
2023-05-27 13:07:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665275724500992[0;39m <==    Updates: 8
2023-05-27 13:07:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119665275724500992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:07:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665296679243776[0;39m 生成今日电子书快照开始
2023-05-27 13:07:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665296679243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665296679243776[0;39m ==> Parameters: 
2023-05-27 13:07:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665296679243776[0;39m <==    Updates: 0
2023-05-27 13:07:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665296679243776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:07:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665317680123904[0;39m 生成今日电子书快照开始
2023-05-27 13:07:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665317680123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665317680123904[0;39m ==> Parameters: 
2023-05-27 13:07:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665317680123904[0;39m <==    Updates: 0
2023-05-27 13:07:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665317680123904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:07:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665338639060992[0;39m 生成今日电子书快照开始
2023-05-27 13:07:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665338639060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665338639060992[0;39m ==> Parameters: 
2023-05-27 13:07:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665338639060992[0;39m <==    Updates: 0
2023-05-27 13:07:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665338639060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:07:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665359597998080[0;39m 生成今日电子书快照开始
2023-05-27 13:07:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665359597998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665359597998080[0;39m ==> Parameters: 
2023-05-27 13:07:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665359597998080[0;39m <==    Updates: 0
2023-05-27 13:07:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665359597998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:07:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665380569518080[0;39m 生成今日电子书快照开始
2023-05-27 13:07:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665380569518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665380569518080[0;39m ==> Parameters: 
2023-05-27 13:07:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665380569518080[0;39m <==    Updates: 0
2023-05-27 13:07:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665380569518080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:07:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119665401557815296[0;39m 更新电子书下的文档数据开始
2023-05-27 13:07:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665401557815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:07:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665401557815296[0;39m ==> Parameters: 
2023-05-27 13:07:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665401557815296[0;39m <==    Updates: 8
2023-05-27 13:07:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119665401557815296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:07:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665401562009600[0;39m 生成今日电子书快照开始
2023-05-27 13:07:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665401562009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665401562009600[0;39m ==> Parameters: 
2023-05-27 13:07:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665401562009600[0;39m <==    Updates: 0
2023-05-27 13:07:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665401562009600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:07:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665422533529600[0;39m 生成今日电子书快照开始
2023-05-27 13:07:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665422533529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665422533529600[0;39m ==> Parameters: 
2023-05-27 13:07:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665422533529600[0;39m <==    Updates: 0
2023-05-27 13:07:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665422533529600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:07:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665443484078080[0;39m 生成今日电子书快照开始
2023-05-27 13:07:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665443484078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665443484078080[0;39m ==> Parameters: 
2023-05-27 13:07:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665443484078080[0;39m <==    Updates: 0
2023-05-27 13:07:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665443484078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:07:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665464493346816[0;39m 生成今日电子书快照开始
2023-05-27 13:07:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665464493346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665464493346816[0;39m ==> Parameters: 
2023-05-27 13:07:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665464493346816[0;39m <==    Updates: 0
2023-05-27 13:07:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665464493346816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:07:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665485435506688[0;39m 生成今日电子书快照开始
2023-05-27 13:07:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665485435506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:07:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665485435506688[0;39m ==> Parameters: 
2023-05-27 13:07:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665485435506688[0;39m <==    Updates: 0
2023-05-27 13:07:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665485435506688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:08:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665506402832384[0;39m 生成今日电子书快照开始
2023-05-27 13:08:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665506402832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665506402832384[0;39m ==> Parameters: 
2023-05-27 13:08:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665506402832384[0;39m <==    Updates: 0
2023-05-27 13:08:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665506402832384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:08:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119665527361769472[0;39m 更新电子书下的文档数据开始
2023-05-27 13:08:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665527361769472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:08:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665527361769472[0;39m ==> Parameters: 
2023-05-27 13:08:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665527361769472[0;39m <==    Updates: 8
2023-05-27 13:08:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119665527361769472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:08:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665527370158080[0;39m 生成今日电子书快照开始
2023-05-27 13:08:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665527370158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665527370158080[0;39m ==> Parameters: 
2023-05-27 13:08:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665527370158080[0;39m <==    Updates: 0
2023-05-27 13:08:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665527370158080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:08:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665548396204032[0;39m 生成今日电子书快照开始
2023-05-27 13:08:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665548396204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665548396204032[0;39m ==> Parameters: 
2023-05-27 13:08:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665548396204032[0;39m <==    Updates: 0
2023-05-27 13:08:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665548396204032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:08:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665569359335424[0;39m 生成今日电子书快照开始
2023-05-27 13:08:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665569359335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665569359335424[0;39m ==> Parameters: 
2023-05-27 13:08:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665569359335424[0;39m <==    Updates: 0
2023-05-27 13:08:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665569359335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:08:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665590309883904[0;39m 生成今日电子书快照开始
2023-05-27 13:08:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665590309883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665590309883904[0;39m ==> Parameters: 
2023-05-27 13:08:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665590309883904[0;39m <==    Updates: 0
2023-05-27 13:08:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665590309883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:08:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665611252043776[0;39m 生成今日电子书快照开始
2023-05-27 13:08:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665611252043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665611252043776[0;39m ==> Parameters: 
2023-05-27 13:08:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665611252043776[0;39m <==    Updates: 0
2023-05-27 13:08:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665611252043776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:08:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665632252923904[0;39m 生成今日电子书快照开始
2023-05-27 13:08:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665632252923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665632252923904[0;39m ==> Parameters: 
2023-05-27 13:08:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665632252923904[0;39m <==    Updates: 0
2023-05-27 13:08:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665632252923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:08:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119665653241221120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:08:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665653241221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:08:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665653241221120[0;39m ==> Parameters: 
2023-05-27 13:08:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665653241221120[0;39m <==    Updates: 8
2023-05-27 13:08:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119665653241221120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:08:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665653249609728[0;39m 生成今日电子书快照开始
2023-05-27 13:08:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665653249609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665653249609728[0;39m ==> Parameters: 
2023-05-27 13:08:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665653249609728[0;39m <==    Updates: 0
2023-05-27 13:08:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665653249609728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:08:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665674174992384[0;39m 生成今日电子书快照开始
2023-05-27 13:08:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665674174992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665674174992384[0;39m ==> Parameters: 
2023-05-27 13:08:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665674174992384[0;39m <==    Updates: 0
2023-05-27 13:08:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665674174992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:08:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665695180066816[0;39m 生成今日电子书快照开始
2023-05-27 13:08:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665695180066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665695180066816[0;39m ==> Parameters: 
2023-05-27 13:08:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665695180066816[0;39m <==    Updates: 0
2023-05-27 13:08:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665695180066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:08:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665716139003904[0;39m 生成今日电子书快照开始
2023-05-27 13:08:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665716139003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665716139003904[0;39m ==> Parameters: 
2023-05-27 13:08:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665716139003904[0;39m <==    Updates: 0
2023-05-27 13:08:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665716139003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:08:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665737131495424[0;39m 生成今日电子书快照开始
2023-05-27 13:08:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665737131495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:08:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665737131495424[0;39m ==> Parameters: 
2023-05-27 13:08:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665737131495424[0;39m <==    Updates: 0
2023-05-27 13:08:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665737131495424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665758098821120[0;39m 生成今日电子书快照开始
2023-05-27 13:09:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665758098821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665758098821120[0;39m ==> Parameters: 
2023-05-27 13:09:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665758098821120[0;39m <==    Updates: 0
2023-05-27 13:09:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665758098821120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:09:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119665779020009472[0;39m 更新电子书下的文档数据开始
2023-05-27 13:09:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665779020009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:09:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665779020009472[0;39m ==> Parameters: 
2023-05-27 13:09:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665779020009472[0;39m <==    Updates: 8
2023-05-27 13:09:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119665779020009472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:09:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665779024203776[0;39m 生成今日电子书快照开始
2023-05-27 13:09:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665779024203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665779024203776[0;39m ==> Parameters: 
2023-05-27 13:09:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665779024203776[0;39m <==    Updates: 0
2023-05-27 13:09:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665779024203776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:09:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665800033472512[0;39m 生成今日电子书快照开始
2023-05-27 13:09:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665800033472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665800033472512[0;39m ==> Parameters: 
2023-05-27 13:09:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665800033472512[0;39m <==    Updates: 0
2023-05-27 13:09:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665800033472512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665820971438080[0;39m 生成今日电子书快照开始
2023-05-27 13:09:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665820971438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665820971438080[0;39m ==> Parameters: 
2023-05-27 13:09:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665820971438080[0;39m <==    Updates: 0
2023-05-27 13:09:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665820971438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665841938763776[0;39m 生成今日电子书快照开始
2023-05-27 13:09:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665841938763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665841938763776[0;39m ==> Parameters: 
2023-05-27 13:09:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665841938763776[0;39m <==    Updates: 0
2023-05-27 13:09:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665841938763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665862952226816[0;39m 生成今日电子书快照开始
2023-05-27 13:09:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665862952226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665862952226816[0;39m ==> Parameters: 
2023-05-27 13:09:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665862952226816[0;39m <==    Updates: 0
2023-05-27 13:09:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665862952226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665883881803776[0;39m 生成今日电子书快照开始
2023-05-27 13:09:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665883881803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665883881803776[0;39m ==> Parameters: 
2023-05-27 13:09:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665883881803776[0;39m <==    Updates: 0
2023-05-27 13:09:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665883881803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665904907849728[0;39m 生成今日电子书快照开始
2023-05-27 13:09:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665904907849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665904907849728[0;39m ==> Parameters: 
2023-05-27 13:09:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665904907849728[0;39m <==    Updates: 0
2023-05-27 13:09:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665904907849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119665904916238336[0;39m 更新电子书下的文档数据开始
2023-05-27 13:09:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665904916238336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:09:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665904916238336[0;39m ==> Parameters: 
2023-05-27 13:09:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119665904916238336[0;39m <==    Updates: 8
2023-05-27 13:09:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119665904916238336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:09:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665925866786816[0;39m 生成今日电子书快照开始
2023-05-27 13:09:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665925866786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665925866786816[0;39m ==> Parameters: 
2023-05-27 13:09:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665925866786816[0;39m <==    Updates: 0
2023-05-27 13:09:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665925866786816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665946792169472[0;39m 生成今日电子书快照开始
2023-05-27 13:09:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665946792169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665946792169472[0;39m ==> Parameters: 
2023-05-27 13:09:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665946792169472[0;39m <==    Updates: 0
2023-05-27 13:09:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665946792169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665967822409728[0;39m 生成今日电子书快照开始
2023-05-27 13:09:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665967822409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665967822409728[0;39m ==> Parameters: 
2023-05-27 13:09:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665967822409728[0;39m <==    Updates: 0
2023-05-27 13:09:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665967822409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:09:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119665988760375296[0;39m 生成今日电子书快照开始
2023-05-27 13:09:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665988760375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:09:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665988760375296[0;39m ==> Parameters: 
2023-05-27 13:09:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119665988760375296[0;39m <==    Updates: 0
2023-05-27 13:09:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119665988760375296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666009757061120[0;39m 生成今日电子书快照开始
2023-05-27 13:10:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666009757061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666009757061120[0;39m ==> Parameters: 
2023-05-27 13:10:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666009757061120[0;39m <==    Updates: 0
2023-05-27 13:10:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666009757061120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:10:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119666030682443776[0;39m 更新电子书下的文档数据开始
2023-05-27 13:10:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666030682443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:10:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666030682443776[0;39m ==> Parameters: 
2023-05-27 13:10:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666030682443776[0;39m <==    Updates: 8
2023-05-27 13:10:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119666030682443776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:10:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666030686638080[0;39m 生成今日电子书快照开始
2023-05-27 13:10:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666030686638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666030686638080[0;39m ==> Parameters: 
2023-05-27 13:10:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666030686638080[0;39m <==    Updates: 0
2023-05-27 13:10:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666030686638080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:10:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666051704295424[0;39m 生成今日电子书快照开始
2023-05-27 13:10:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666051704295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666051704295424[0;39m ==> Parameters: 
2023-05-27 13:10:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666051704295424[0;39m <==    Updates: 0
2023-05-27 13:10:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666051704295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666072659038208[0;39m 生成今日电子书快照开始
2023-05-27 13:10:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666072659038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666072659038208[0;39m ==> Parameters: 
2023-05-27 13:10:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666072659038208[0;39m <==    Updates: 0
2023-05-27 13:10:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666072659038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666093651529728[0;39m 生成今日电子书快照开始
2023-05-27 13:10:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666093651529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666093651529728[0;39m ==> Parameters: 
2023-05-27 13:10:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666093651529728[0;39m <==    Updates: 0
2023-05-27 13:10:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666093651529728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666114602078208[0;39m 生成今日电子书快照开始
2023-05-27 13:10:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666114602078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666114602078208[0;39m ==> Parameters: 
2023-05-27 13:10:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666114602078208[0;39m <==    Updates: 0
2023-05-27 13:10:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666114602078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666135594569728[0;39m 生成今日电子书快照开始
2023-05-27 13:10:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666135594569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666135594569728[0;39m ==> Parameters: 
2023-05-27 13:10:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666135594569728[0;39m <==    Updates: 0
2023-05-27 13:10:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666135594569728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119666156570284032[0;39m 更新电子书下的文档数据开始
2023-05-27 13:10:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666156570284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:10:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666156570284032[0;39m ==> Parameters: 
2023-05-27 13:10:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666156570284032[0;39m <==    Updates: 8
2023-05-27 13:10:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119666156570284032[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:10:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666156578672640[0;39m 生成今日电子书快照开始
2023-05-27 13:10:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666156578672640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666156578672640[0;39m ==> Parameters: 
2023-05-27 13:10:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666156578672640[0;39m <==    Updates: 0
2023-05-27 13:10:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666156578672640[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:10:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666177504055296[0;39m 生成今日电子书快照开始
2023-05-27 13:10:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666177504055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666177504055296[0;39m ==> Parameters: 
2023-05-27 13:10:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666177504055296[0;39m <==    Updates: 0
2023-05-27 13:10:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666177504055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666198496546816[0;39m 生成今日电子书快照开始
2023-05-27 13:10:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666198496546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666198496546816[0;39m ==> Parameters: 
2023-05-27 13:10:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666198496546816[0;39m <==    Updates: 0
2023-05-27 13:10:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666198496546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666219447095296[0;39m 生成今日电子书快照开始
2023-05-27 13:10:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666219447095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666219447095296[0;39m ==> Parameters: 
2023-05-27 13:10:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666219447095296[0;39m <==    Updates: 0
2023-05-27 13:10:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666219447095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:10:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666240422809600[0;39m 生成今日电子书快照开始
2023-05-27 13:10:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666240422809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:10:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666240422809600[0;39m ==> Parameters: 
2023-05-27 13:10:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666240422809600[0;39m <==    Updates: 0
2023-05-27 13:10:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666240422809600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:11:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666261394329600[0;39m 生成今日电子书快照开始
2023-05-27 13:11:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666261394329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666261394329600[0;39m ==> Parameters: 
2023-05-27 13:11:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666261394329600[0;39m <==    Updates: 0
2023-05-27 13:11:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666261394329600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:11:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666282386821120[0;39m 生成今日电子书快照开始
2023-05-27 13:11:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666282386821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666282386821120[0;39m ==> Parameters: 
2023-05-27 13:11:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666282386821120[0;39m <==    Updates: 0
2023-05-27 13:11:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666282386821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:11:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119666282395209728[0;39m 更新电子书下的文档数据开始
2023-05-27 13:11:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666282395209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:11:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666282395209728[0;39m ==> Parameters: 
2023-05-27 13:11:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666282395209728[0;39m <==    Updates: 8
2023-05-27 13:11:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119666282395209728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:11:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666303316398080[0;39m 生成今日电子书快照开始
2023-05-27 13:11:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666303316398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666303316398080[0;39m ==> Parameters: 
2023-05-27 13:11:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666303316398080[0;39m <==    Updates: 0
2023-05-27 13:11:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666303316398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:11:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666324325666816[0;39m 生成今日电子书快照开始
2023-05-27 13:11:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666324325666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666324325666816[0;39m ==> Parameters: 
2023-05-27 13:11:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666324325666816[0;39m <==    Updates: 0
2023-05-27 13:11:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666324325666816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:11:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666345272020992[0;39m 生成今日电子书快照开始
2023-05-27 13:11:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666345272020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666345272020992[0;39m ==> Parameters: 
2023-05-27 13:11:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666345272020992[0;39m <==    Updates: 0
2023-05-27 13:11:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666345272020992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:11:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666366268706816[0;39m 生成今日电子书快照开始
2023-05-27 13:11:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666366268706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666366268706816[0;39m ==> Parameters: 
2023-05-27 13:11:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666366268706816[0;39m <==    Updates: 0
2023-05-27 13:11:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666366268706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:11:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666387194089472[0;39m 生成今日电子书快照开始
2023-05-27 13:11:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666387194089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666387194089472[0;39m ==> Parameters: 
2023-05-27 13:11:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666387194089472[0;39m <==    Updates: 0
2023-05-27 13:11:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666387194089472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:11:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119666408194969600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:11:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666408194969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:11:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666408194969600[0;39m ==> Parameters: 
2023-05-27 13:11:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666408194969600[0;39m <==    Updates: 8
2023-05-27 13:11:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119666408194969600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:11:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666408203358208[0;39m 生成今日电子书快照开始
2023-05-27 13:11:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666408203358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666408203358208[0;39m ==> Parameters: 
2023-05-27 13:11:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666408203358208[0;39m <==    Updates: 0
2023-05-27 13:11:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666408203358208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:11:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666429141323776[0;39m 生成今日电子书快照开始
2023-05-27 13:11:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666429141323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666429141323776[0;39m ==> Parameters: 
2023-05-27 13:11:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666429141323776[0;39m <==    Updates: 0
2023-05-27 13:11:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666429141323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:11:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666450129620992[0;39m 生成今日电子书快照开始
2023-05-27 13:11:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666450129620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666450129620992[0;39m ==> Parameters: 
2023-05-27 13:11:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666450129620992[0;39m <==    Updates: 0
2023-05-27 13:11:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666450129620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:11:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666471109529600[0;39m 生成今日电子书快照开始
2023-05-27 13:11:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666471109529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666471109529600[0;39m ==> Parameters: 
2023-05-27 13:11:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666471109529600[0;39m <==    Updates: 0
2023-05-27 13:11:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666471109529600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:11:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666492081049600[0;39m 生成今日电子书快照开始
2023-05-27 13:11:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666492081049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:11:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666492081049600[0;39m ==> Parameters: 
2023-05-27 13:11:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666492081049600[0;39m <==    Updates: 0
2023-05-27 13:11:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666492081049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666513039986688[0;39m 生成今日电子书快照开始
2023-05-27 13:12:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666513039986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666513039986688[0;39m ==> Parameters: 
2023-05-27 13:12:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666513039986688[0;39m <==    Updates: 0
2023-05-27 13:12:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666513039986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119666533994729472[0;39m 更新电子书下的文档数据开始
2023-05-27 13:12:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666533994729472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:12:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666533994729472[0;39m ==> Parameters: 
2023-05-27 13:12:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666533994729472[0;39m <==    Updates: 8
2023-05-27 13:12:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119666533994729472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:12:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666533998923776[0;39m 生成今日电子书快照开始
2023-05-27 13:12:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666533998923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666533998923776[0;39m ==> Parameters: 
2023-05-27 13:12:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666533998923776[0;39m <==    Updates: 0
2023-05-27 13:12:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666533998923776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:12:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666554978832384[0;39m 生成今日电子书快照开始
2023-05-27 13:12:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666554978832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666554978832384[0;39m ==> Parameters: 
2023-05-27 13:12:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666554978832384[0;39m <==    Updates: 0
2023-05-27 13:12:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666554978832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666575941963776[0;39m 生成今日电子书快照开始
2023-05-27 13:12:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666575941963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666575941963776[0;39m ==> Parameters: 
2023-05-27 13:12:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666575941963776[0;39m <==    Updates: 0
2023-05-27 13:12:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666575941963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666596955426816[0;39m 生成今日电子书快照开始
2023-05-27 13:12:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666596955426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666596955426816[0;39m ==> Parameters: 
2023-05-27 13:12:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666596955426816[0;39m <==    Updates: 0
2023-05-27 13:12:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666596955426816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666617893392384[0;39m 生成今日电子书快照开始
2023-05-27 13:12:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666617893392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666617893392384[0;39m ==> Parameters: 
2023-05-27 13:12:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666617893392384[0;39m <==    Updates: 0
2023-05-27 13:12:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666617893392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666638906855424[0;39m 生成今日电子书快照开始
2023-05-27 13:12:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666638906855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666638906855424[0;39m ==> Parameters: 
2023-05-27 13:12:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666638906855424[0;39m <==    Updates: 0
2023-05-27 13:12:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666638906855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119666659861598208[0;39m 更新电子书下的文档数据开始
2023-05-27 13:12:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666659861598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:12:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666659861598208[0;39m ==> Parameters: 
2023-05-27 13:12:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666659861598208[0;39m <==    Updates: 8
2023-05-27 13:12:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119666659861598208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:12:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666659869986816[0;39m 生成今日电子书快照开始
2023-05-27 13:12:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666659869986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666659869986816[0;39m ==> Parameters: 
2023-05-27 13:12:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666659869986816[0;39m <==    Updates: 0
2023-05-27 13:12:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666659869986816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:12:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666680833118208[0;39m 生成今日电子书快照开始
2023-05-27 13:12:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666680833118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666680833118208[0;39m ==> Parameters: 
2023-05-27 13:12:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666680833118208[0;39m <==    Updates: 0
2023-05-27 13:12:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666680833118208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:12:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666701783666688[0;39m 生成今日电子书快照开始
2023-05-27 13:12:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666701783666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666701783666688[0;39m ==> Parameters: 
2023-05-27 13:12:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666701783666688[0;39m <==    Updates: 0
2023-05-27 13:12:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666701783666688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666722788741120[0;39m 生成今日电子书快照开始
2023-05-27 13:12:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666722788741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666722788741120[0;39m ==> Parameters: 
2023-05-27 13:12:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666722788741120[0;39m <==    Updates: 0
2023-05-27 13:12:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666722788741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:12:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666743764455424[0;39m 生成今日电子书快照开始
2023-05-27 13:12:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666743764455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:12:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666743764455424[0;39m ==> Parameters: 
2023-05-27 13:12:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666743764455424[0;39m <==    Updates: 0
2023-05-27 13:12:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666743764455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666764685643776[0;39m 生成今日电子书快照开始
2023-05-27 13:13:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666764685643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666764685643776[0;39m ==> Parameters: 
2023-05-27 13:13:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666764685643776[0;39m <==    Updates: 0
2023-05-27 13:13:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666764685643776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:13:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119666785707495424[0;39m 更新电子书下的文档数据开始
2023-05-27 13:13:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666785707495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:13:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666785707495424[0;39m ==> Parameters: 
2023-05-27 13:13:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666785707495424[0;39m <==    Updates: 8
2023-05-27 13:13:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119666785707495424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:13:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666785711689728[0;39m 生成今日电子书快照开始
2023-05-27 13:13:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666785711689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666785711689728[0;39m ==> Parameters: 
2023-05-27 13:13:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666785711689728[0;39m <==    Updates: 0
2023-05-27 13:13:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666785711689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666806632878080[0;39m 生成今日电子书快照开始
2023-05-27 13:13:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666806632878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666806632878080[0;39m ==> Parameters: 
2023-05-27 13:13:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666806632878080[0;39m <==    Updates: 0
2023-05-27 13:13:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666806632878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666827637952512[0;39m 生成今日电子书快照开始
2023-05-27 13:13:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666827637952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666827637952512[0;39m ==> Parameters: 
2023-05-27 13:13:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666827637952512[0;39m <==    Updates: 0
2023-05-27 13:13:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666827637952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666848575918080[0;39m 生成今日电子书快照开始
2023-05-27 13:13:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666848575918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666848575918080[0;39m ==> Parameters: 
2023-05-27 13:13:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666848575918080[0;39m <==    Updates: 0
2023-05-27 13:13:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666848575918080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666869568409600[0;39m 生成今日电子书快照开始
2023-05-27 13:13:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666869568409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666869568409600[0;39m ==> Parameters: 
2023-05-27 13:13:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666869568409600[0;39m <==    Updates: 0
2023-05-27 13:13:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666869568409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666890560901120[0;39m 生成今日电子书快照开始
2023-05-27 13:13:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666890560901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666890560901120[0;39m ==> Parameters: 
2023-05-27 13:13:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666890560901120[0;39m <==    Updates: 0
2023-05-27 13:13:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666890560901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666911528226816[0;39m 生成今日电子书快照开始
2023-05-27 13:13:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666911528226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666911528226816[0;39m ==> Parameters: 
2023-05-27 13:13:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666911528226816[0;39m <==    Updates: 0
2023-05-27 13:13:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666911528226816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:13:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119666911532421120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:13:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666911532421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:13:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666911532421120[0;39m ==> Parameters: 
2023-05-27 13:13:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119666911532421120[0;39m <==    Updates: 8
2023-05-27 13:13:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119666911532421120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:13:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666932495552512[0;39m 生成今日电子书快照开始
2023-05-27 13:13:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666932495552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666932495552512[0;39m ==> Parameters: 
2023-05-27 13:13:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666932495552512[0;39m <==    Updates: 0
2023-05-27 13:13:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666932495552512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666953475461120[0;39m 生成今日电子书快照开始
2023-05-27 13:13:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666953475461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666953475461120[0;39m ==> Parameters: 
2023-05-27 13:13:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666953475461120[0;39m <==    Updates: 0
2023-05-27 13:13:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666953475461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:13:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666974459564032[0;39m 生成今日电子书快照开始
2023-05-27 13:13:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666974459564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666974459564032[0;39m ==> Parameters: 
2023-05-27 13:13:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666974459564032[0;39m <==    Updates: 0
2023-05-27 13:13:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666974459564032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:13:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119666995401723904[0;39m 生成今日电子书快照开始
2023-05-27 13:13:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666995401723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:13:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666995401723904[0;39m ==> Parameters: 
2023-05-27 13:13:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119666995401723904[0;39m <==    Updates: 0
2023-05-27 13:13:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119666995401723904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:14:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667016352272384[0;39m 生成今日电子书快照开始
2023-05-27 13:14:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667016352272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667016352272384[0;39m ==> Parameters: 
2023-05-27 13:14:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667016352272384[0;39m <==    Updates: 0
2023-05-27 13:14:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667016352272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667037315403776[0;39m 生成今日电子书快照开始
2023-05-27 13:14:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667037315403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667037315403776[0;39m ==> Parameters: 
2023-05-27 13:14:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667037315403776[0;39m <==    Updates: 0
2023-05-27 13:14:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667037315403776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:14:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119667037319598080[0;39m 更新电子书下的文档数据开始
2023-05-27 13:14:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667037319598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:14:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667037319598080[0;39m ==> Parameters: 
2023-05-27 13:14:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667037319598080[0;39m <==    Updates: 8
2023-05-27 13:14:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119667037319598080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:14:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667058307895296[0;39m 生成今日电子书快照开始
2023-05-27 13:14:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667058307895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667058307895296[0;39m ==> Parameters: 
2023-05-27 13:14:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667058307895296[0;39m <==    Updates: 0
2023-05-27 13:14:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667058307895296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667079300386816[0;39m 生成今日电子书快照开始
2023-05-27 13:14:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667079300386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667079300386816[0;39m ==> Parameters: 
2023-05-27 13:14:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667079300386816[0;39m <==    Updates: 0
2023-05-27 13:14:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667079300386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667100255129600[0;39m 生成今日电子书快照开始
2023-05-27 13:14:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667100255129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667100255129600[0;39m ==> Parameters: 
2023-05-27 13:14:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667100255129600[0;39m <==    Updates: 0
2023-05-27 13:14:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667100255129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667121230843904[0;39m 生成今日电子书快照开始
2023-05-27 13:14:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667121230843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667121230843904[0;39m ==> Parameters: 
2023-05-27 13:14:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667121230843904[0;39m <==    Updates: 0
2023-05-27 13:14:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667121230843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667142227529728[0;39m 生成今日电子书快照开始
2023-05-27 13:14:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667142227529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667142227529728[0;39m ==> Parameters: 
2023-05-27 13:14:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667142227529728[0;39m <==    Updates: 0
2023-05-27 13:14:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667142227529728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667163144523776[0;39m 生成今日电子书快照开始
2023-05-27 13:14:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667163144523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667163144523776[0;39m ==> Parameters: 
2023-05-27 13:14:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667163144523776[0;39m <==    Updates: 0
2023-05-27 13:14:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667163144523776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119667163152912384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:14:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667163152912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:14:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667163152912384[0;39m ==> Parameters: 
2023-05-27 13:14:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667163152912384[0;39m <==    Updates: 8
2023-05-27 13:14:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119667163152912384[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-27 13:14:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667184111849472[0;39m 生成今日电子书快照开始
2023-05-27 13:14:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667184111849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667184111849472[0;39m ==> Parameters: 
2023-05-27 13:14:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667184111849472[0;39m <==    Updates: 0
2023-05-27 13:14:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667184111849472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667205104340992[0;39m 生成今日电子书快照开始
2023-05-27 13:14:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667205104340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667205104340992[0;39m ==> Parameters: 
2023-05-27 13:14:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667205104340992[0;39m <==    Updates: 0
2023-05-27 13:14:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667205104340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667226105221120[0;39m 生成今日电子书快照开始
2023-05-27 13:14:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667226105221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667226105221120[0;39m ==> Parameters: 
2023-05-27 13:14:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667226105221120[0;39m <==    Updates: 0
2023-05-27 13:14:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667226105221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:14:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667247080935424[0;39m 生成今日电子书快照开始
2023-05-27 13:14:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667247080935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:14:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667247080935424[0;39m ==> Parameters: 
2023-05-27 13:14:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667247080935424[0;39m <==    Updates: 0
2023-05-27 13:14:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667247080935424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:15:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667268023095296[0;39m 生成今日电子书快照开始
2023-05-27 13:15:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667268023095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667268023095296[0;39m ==> Parameters: 
2023-05-27 13:15:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667268023095296[0;39m <==    Updates: 0
2023-05-27 13:15:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667268023095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:15:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119667289019781120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:15:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667289019781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:15:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667289019781120[0;39m ==> Parameters: 
2023-05-27 13:15:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667289019781120[0;39m <==    Updates: 8
2023-05-27 13:15:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119667289019781120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:15:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667289028169728[0;39m 生成今日电子书快照开始
2023-05-27 13:15:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667289028169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667289028169728[0;39m ==> Parameters: 
2023-05-27 13:15:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667289028169728[0;39m <==    Updates: 0
2023-05-27 13:15:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667289028169728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:15:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667309991301120[0;39m 生成今日电子书快照开始
2023-05-27 13:15:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667309991301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667309991301120[0;39m ==> Parameters: 
2023-05-27 13:15:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667309991301120[0;39m <==    Updates: 0
2023-05-27 13:15:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667309991301120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:15:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667330925072384[0;39m 生成今日电子书快照开始
2023-05-27 13:15:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667330925072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667330925072384[0;39m ==> Parameters: 
2023-05-27 13:15:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667330925072384[0;39m <==    Updates: 0
2023-05-27 13:15:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667330925072384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:15:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667351888203776[0;39m 生成今日电子书快照开始
2023-05-27 13:15:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667351888203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667351888203776[0;39m ==> Parameters: 
2023-05-27 13:15:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667351888203776[0;39m <==    Updates: 0
2023-05-27 13:15:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667351888203776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:15:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667372876500992[0;39m 生成今日电子书快照开始
2023-05-27 13:15:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667372876500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667372876500992[0;39m ==> Parameters: 
2023-05-27 13:15:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667372876500992[0;39m <==    Updates: 0
2023-05-27 13:15:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667372876500992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:15:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667393868992512[0;39m 生成今日电子书快照开始
2023-05-27 13:15:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667393868992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667393868992512[0;39m ==> Parameters: 
2023-05-27 13:15:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667393868992512[0;39m <==    Updates: 0
2023-05-27 13:15:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667393868992512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:15:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119667414819540992[0;39m 更新电子书下的文档数据开始
2023-05-27 13:15:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667414819540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:15:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667414819540992[0;39m ==> Parameters: 
2023-05-27 13:15:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667414819540992[0;39m <==    Updates: 8
2023-05-27 13:15:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119667414819540992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:15:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667414823735296[0;39m 生成今日电子书快照开始
2023-05-27 13:15:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667414823735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667414823735296[0;39m ==> Parameters: 
2023-05-27 13:15:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667414823735296[0;39m <==    Updates: 0
2023-05-27 13:15:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667414823735296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:15:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667435824615424[0;39m 生成今日电子书快照开始
2023-05-27 13:15:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667435824615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667435824615424[0;39m ==> Parameters: 
2023-05-27 13:15:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667435824615424[0;39m <==    Updates: 0
2023-05-27 13:15:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667435824615424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:15:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667456779358208[0;39m 生成今日电子书快照开始
2023-05-27 13:15:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667456779358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667456779358208[0;39m ==> Parameters: 
2023-05-27 13:15:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667456779358208[0;39m <==    Updates: 0
2023-05-27 13:15:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667456779358208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:15:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667477717323776[0;39m 生成今日电子书快照开始
2023-05-27 13:15:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667477717323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667477717323776[0;39m ==> Parameters: 
2023-05-27 13:15:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667477717323776[0;39m <==    Updates: 0
2023-05-27 13:15:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667477717323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:15:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667498714009600[0;39m 生成今日电子书快照开始
2023-05-27 13:15:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667498714009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:15:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667498714009600[0;39m ==> Parameters: 
2023-05-27 13:15:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667498714009600[0;39m <==    Updates: 0
2023-05-27 13:15:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667498714009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:16:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667519664558080[0;39m 生成今日电子书快照开始
2023-05-27 13:16:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667519664558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667519664558080[0;39m ==> Parameters: 
2023-05-27 13:16:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667519664558080[0;39m <==    Updates: 0
2023-05-27 13:16:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667519664558080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:16:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667540648660992[0;39m 生成今日电子书快照开始
2023-05-27 13:16:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667540648660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667540648660992[0;39m ==> Parameters: 
2023-05-27 13:16:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667540648660992[0;39m <==    Updates: 0
2023-05-27 13:16:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667540648660992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:16:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119667540652855296[0;39m 更新电子书下的文档数据开始
2023-05-27 13:16:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667540652855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:16:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667540652855296[0;39m ==> Parameters: 
2023-05-27 13:16:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667540652855296[0;39m <==    Updates: 8
2023-05-27 13:16:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119667540652855296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:16:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667561624375296[0;39m 生成今日电子书快照开始
2023-05-27 13:16:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667561624375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667561624375296[0;39m ==> Parameters: 
2023-05-27 13:16:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667561624375296[0;39m <==    Updates: 0
2023-05-27 13:16:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667561624375296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:16:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667582604283904[0;39m 生成今日电子书快照开始
2023-05-27 13:16:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667582604283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667582604283904[0;39m ==> Parameters: 
2023-05-27 13:16:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667582604283904[0;39m <==    Updates: 0
2023-05-27 13:16:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667582604283904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:16:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667603605164032[0;39m 生成今日电子书快照开始
2023-05-27 13:16:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667603605164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667603605164032[0;39m ==> Parameters: 
2023-05-27 13:16:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667603605164032[0;39m <==    Updates: 0
2023-05-27 13:16:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667603605164032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:16:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667624526352384[0;39m 生成今日电子书快照开始
2023-05-27 13:16:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667624526352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667624526352384[0;39m ==> Parameters: 
2023-05-27 13:16:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667624526352384[0;39m <==    Updates: 0
2023-05-27 13:16:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667624526352384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:16:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667645535621120[0;39m 生成今日电子书快照开始
2023-05-27 13:16:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667645535621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667645535621120[0;39m ==> Parameters: 
2023-05-27 13:16:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667645535621120[0;39m <==    Updates: 0
2023-05-27 13:16:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667645535621120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:16:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119667666486169600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:16:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667666486169600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:16:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667666486169600[0;39m ==> Parameters: 
2023-05-27 13:16:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667666486169600[0;39m <==    Updates: 8
2023-05-27 13:16:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119667666486169600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:16:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667666494558208[0;39m 生成今日电子书快照开始
2023-05-27 13:16:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667666494558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667666494558208[0;39m ==> Parameters: 
2023-05-27 13:16:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667666494558208[0;39m <==    Updates: 0
2023-05-27 13:16:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667666494558208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:16:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667687449300992[0;39m 生成今日电子书快照开始
2023-05-27 13:16:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667687449300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667687449300992[0;39m ==> Parameters: 
2023-05-27 13:16:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667687449300992[0;39m <==    Updates: 0
2023-05-27 13:16:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667687449300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:16:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667708412432384[0;39m 生成今日电子书快照开始
2023-05-27 13:16:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667708412432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667708412432384[0;39m ==> Parameters: 
2023-05-27 13:16:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667708412432384[0;39m <==    Updates: 0
2023-05-27 13:16:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667708412432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:16:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667729400729600[0;39m 生成今日电子书快照开始
2023-05-27 13:16:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667729400729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667729400729600[0;39m ==> Parameters: 
2023-05-27 13:16:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667729400729600[0;39m <==    Updates: 0
2023-05-27 13:16:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667729400729600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:16:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667750380638208[0;39m 生成今日电子书快照开始
2023-05-27 13:16:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667750380638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:16:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667750380638208[0;39m ==> Parameters: 
2023-05-27 13:16:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667750380638208[0;39m <==    Updates: 0
2023-05-27 13:16:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667750380638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667771326992384[0;39m 生成今日电子书快照开始
2023-05-27 13:17:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667771326992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667771326992384[0;39m ==> Parameters: 
2023-05-27 13:17:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667771326992384[0;39m <==    Updates: 0
2023-05-27 13:17:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667771326992384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:17:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667792302706688[0;39m 生成今日电子书快照开始
2023-05-27 13:17:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667792302706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667792302706688[0;39m ==> Parameters: 
2023-05-27 13:17:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667792302706688[0;39m <==    Updates: 0
2023-05-27 13:17:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667792302706688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119667792311095296[0;39m 更新电子书下的文档数据开始
2023-05-27 13:17:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667792311095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:17:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667792311095296[0;39m ==> Parameters: 
2023-05-27 13:17:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667792311095296[0;39m <==    Updates: 8
2023-05-27 13:17:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119667792311095296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:17:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667813265838080[0;39m 生成今日电子书快照开始
2023-05-27 13:17:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667813265838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667813265838080[0;39m ==> Parameters: 
2023-05-27 13:17:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667813265838080[0;39m <==    Updates: 0
2023-05-27 13:17:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667813265838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667834275106816[0;39m 生成今日电子书快照开始
2023-05-27 13:17:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667834275106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667834275106816[0;39m ==> Parameters: 
2023-05-27 13:17:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667834275106816[0;39m <==    Updates: 0
2023-05-27 13:17:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667834275106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667855217266688[0;39m 生成今日电子书快照开始
2023-05-27 13:17:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667855217266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667855217266688[0;39m ==> Parameters: 
2023-05-27 13:17:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667855217266688[0;39m <==    Updates: 0
2023-05-27 13:17:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667855217266688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667876172009472[0;39m 生成今日电子书快照开始
2023-05-27 13:17:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667876172009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667876172009472[0;39m ==> Parameters: 
2023-05-27 13:17:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667876172009472[0;39m <==    Updates: 0
2023-05-27 13:17:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667876172009472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667897172889600[0;39m 生成今日电子书快照开始
2023-05-27 13:17:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667897172889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667897172889600[0;39m ==> Parameters: 
2023-05-27 13:17:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667897172889600[0;39m <==    Updates: 0
2023-05-27 13:17:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667897172889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667918115049472[0;39m 生成今日电子书快照开始
2023-05-27 13:17:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667918115049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667918115049472[0;39m ==> Parameters: 
2023-05-27 13:17:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667918115049472[0;39m <==    Updates: 0
2023-05-27 13:17:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667918115049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119667918123438080[0;39m 更新电子书下的文档数据开始
2023-05-27 13:17:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667918123438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:17:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667918123438080[0;39m ==> Parameters: 
2023-05-27 13:17:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119667918123438080[0;39m <==    Updates: 8
2023-05-27 13:17:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119667918123438080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:17:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667939136901120[0;39m 生成今日电子书快照开始
2023-05-27 13:17:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667939136901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667939136901120[0;39m ==> Parameters: 
2023-05-27 13:17:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667939136901120[0;39m <==    Updates: 0
2023-05-27 13:17:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667939136901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667960058089472[0;39m 生成今日电子书快照开始
2023-05-27 13:17:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667960058089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667960058089472[0;39m ==> Parameters: 
2023-05-27 13:17:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667960058089472[0;39m <==    Updates: 0
2023-05-27 13:17:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667960058089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119667981033803776[0;39m 生成今日电子书快照开始
2023-05-27 13:17:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667981033803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667981033803776[0;39m ==> Parameters: 
2023-05-27 13:17:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119667981033803776[0;39m <==    Updates: 0
2023-05-27 13:17:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119667981033803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:17:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668002043072512[0;39m 生成今日电子书快照开始
2023-05-27 13:17:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668002043072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:17:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668002043072512[0;39m ==> Parameters: 
2023-05-27 13:17:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668002043072512[0;39m <==    Updates: 0
2023-05-27 13:17:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668002043072512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:18:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668023027175424[0;39m 生成今日电子书快照开始
2023-05-27 13:18:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668023027175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668023027175424[0;39m ==> Parameters: 
2023-05-27 13:18:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668023027175424[0;39m <==    Updates: 0
2023-05-27 13:18:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668023027175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:18:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119668043960946688[0;39m 更新电子书下的文档数据开始
2023-05-27 13:18:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668043960946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:18:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668043960946688[0;39m ==> Parameters: 
2023-05-27 13:18:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668043960946688[0;39m <==    Updates: 8
2023-05-27 13:18:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119668043960946688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:18:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668043965140992[0;39m 生成今日电子书快照开始
2023-05-27 13:18:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668043965140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668043965140992[0;39m ==> Parameters: 
2023-05-27 13:18:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668043965140992[0;39m <==    Updates: 0
2023-05-27 13:18:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668043965140992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:18:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668064928272384[0;39m 生成今日电子书快照开始
2023-05-27 13:18:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668064928272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668064928272384[0;39m ==> Parameters: 
2023-05-27 13:18:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668064928272384[0;39m <==    Updates: 0
2023-05-27 13:18:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668064928272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:18:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668085895598080[0;39m 生成今日电子书快照开始
2023-05-27 13:18:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668085895598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668085895598080[0;39m ==> Parameters: 
2023-05-27 13:18:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668085895598080[0;39m <==    Updates: 0
2023-05-27 13:18:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668085895598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:18:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668106888089600[0;39m 生成今日电子书快照开始
2023-05-27 13:18:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668106888089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668106888089600[0;39m ==> Parameters: 
2023-05-27 13:18:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668106888089600[0;39m <==    Updates: 0
2023-05-27 13:18:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668106888089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:18:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668127851220992[0;39m 生成今日电子书快照开始
2023-05-27 13:18:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668127851220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668127851220992[0;39m ==> Parameters: 
2023-05-27 13:18:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668127851220992[0;39m <==    Updates: 0
2023-05-27 13:18:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668127851220992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:18:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668148826935296[0;39m 生成今日电子书快照开始
2023-05-27 13:18:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668148826935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668148826935296[0;39m ==> Parameters: 
2023-05-27 13:18:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668148826935296[0;39m <==    Updates: 0
2023-05-27 13:18:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668148826935296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:18:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119668169802649600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:18:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668169802649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:18:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668169802649600[0;39m ==> Parameters: 
2023-05-27 13:18:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668169802649600[0;39m <==    Updates: 8
2023-05-27 13:18:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119668169802649600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:18:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668169811038208[0;39m 生成今日电子书快照开始
2023-05-27 13:18:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668169811038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668169811038208[0;39m ==> Parameters: 
2023-05-27 13:18:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668169811038208[0;39m <==    Updates: 0
2023-05-27 13:18:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668169811038208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:18:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668190765780992[0;39m 生成今日电子书快照开始
2023-05-27 13:18:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668190765780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668190765780992[0;39m ==> Parameters: 
2023-05-27 13:18:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668190765780992[0;39m <==    Updates: 0
2023-05-27 13:18:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668190765780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:18:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668211720523776[0;39m 生成今日电子书快照开始
2023-05-27 13:18:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668211720523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668211720523776[0;39m ==> Parameters: 
2023-05-27 13:18:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668211720523776[0;39m <==    Updates: 0
2023-05-27 13:18:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668211720523776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:18:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668232717209600[0;39m 生成今日电子书快照开始
2023-05-27 13:18:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668232717209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668232717209600[0;39m ==> Parameters: 
2023-05-27 13:18:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668232717209600[0;39m <==    Updates: 0
2023-05-27 13:18:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668232717209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:18:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668253713895424[0;39m 生成今日电子书快照开始
2023-05-27 13:18:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668253713895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:18:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668253713895424[0;39m ==> Parameters: 
2023-05-27 13:18:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668253713895424[0;39m <==    Updates: 0
2023-05-27 13:18:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668253713895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:19:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668274647666688[0;39m 生成今日电子书快照开始
2023-05-27 13:19:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668274647666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668274647666688[0;39m ==> Parameters: 
2023-05-27 13:19:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668274647666688[0;39m <==    Updates: 0
2023-05-27 13:19:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668274647666688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:19:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119668295648546816[0;39m 更新电子书下的文档数据开始
2023-05-27 13:19:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668295648546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:19:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668295648546816[0;39m ==> Parameters: 
2023-05-27 13:19:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668295648546816[0;39m <==    Updates: 8
2023-05-27 13:19:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119668295648546816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:19:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668295656935424[0;39m 生成今日电子书快照开始
2023-05-27 13:19:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668295656935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668295656935424[0;39m ==> Parameters: 
2023-05-27 13:19:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668295656935424[0;39m <==    Updates: 0
2023-05-27 13:19:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668295656935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:19:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668316620066816[0;39m 生成今日电子书快照开始
2023-05-27 13:19:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668316620066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668316620066816[0;39m ==> Parameters: 
2023-05-27 13:19:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668316620066816[0;39m <==    Updates: 0
2023-05-27 13:19:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668316620066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:19:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668337574809600[0;39m 生成今日电子书快照开始
2023-05-27 13:19:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668337574809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668337574809600[0;39m ==> Parameters: 
2023-05-27 13:19:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668337574809600[0;39m <==    Updates: 0
2023-05-27 13:19:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668337574809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:19:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668358563106816[0;39m 生成今日电子书快照开始
2023-05-27 13:19:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668358563106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668358563106816[0;39m ==> Parameters: 
2023-05-27 13:19:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668358563106816[0;39m <==    Updates: 0
2023-05-27 13:19:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668358563106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:19:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668379513655296[0;39m 生成今日电子书快照开始
2023-05-27 13:19:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668379513655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668379513655296[0;39m ==> Parameters: 
2023-05-27 13:19:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668379513655296[0;39m <==    Updates: 0
2023-05-27 13:19:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668379513655296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:19:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668400501952512[0;39m 生成今日电子书快照开始
2023-05-27 13:19:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668400501952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668400501952512[0;39m ==> Parameters: 
2023-05-27 13:19:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668400501952512[0;39m <==    Updates: 0
2023-05-27 13:19:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668400501952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:19:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668421486055424[0;39m 生成今日电子书快照开始
2023-05-27 13:19:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668421486055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668421486055424[0;39m ==> Parameters: 
2023-05-27 13:19:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668421486055424[0;39m <==    Updates: 0
2023-05-27 13:19:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668421486055424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:19:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119668421490249728[0;39m 更新电子书下的文档数据开始
2023-05-27 13:19:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668421490249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:19:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668421490249728[0;39m ==> Parameters: 
2023-05-27 13:19:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668421490249728[0;39m <==    Updates: 8
2023-05-27 13:19:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119668421490249728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:19:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668442465964032[0;39m 生成今日电子书快照开始
2023-05-27 13:19:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668442465964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668442465964032[0;39m ==> Parameters: 
2023-05-27 13:19:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668442465964032[0;39m <==    Updates: 0
2023-05-27 13:19:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668442465964032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:19:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668463424901120[0;39m 生成今日电子书快照开始
2023-05-27 13:19:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668463424901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668463424901120[0;39m ==> Parameters: 
2023-05-27 13:19:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668463424901120[0;39m <==    Updates: 0
2023-05-27 13:19:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668463424901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:19:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668484404809728[0;39m 生成今日电子书快照开始
2023-05-27 13:19:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668484404809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668484404809728[0;39m ==> Parameters: 
2023-05-27 13:19:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668484404809728[0;39m <==    Updates: 0
2023-05-27 13:19:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668484404809728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:19:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668505351163904[0;39m 生成今日电子书快照开始
2023-05-27 13:19:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668505351163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:19:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668505351163904[0;39m ==> Parameters: 
2023-05-27 13:19:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668505351163904[0;39m <==    Updates: 0
2023-05-27 13:19:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668505351163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668526305906688[0;39m 生成今日电子书快照开始
2023-05-27 13:20:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668526305906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668526305906688[0;39m ==> Parameters: 
2023-05-27 13:20:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668526305906688[0;39m <==    Updates: 0
2023-05-27 13:20:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668526305906688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668547264843776[0;39m 生成今日电子书快照开始
2023-05-27 13:20:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668547264843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668547264843776[0;39m ==> Parameters: 
2023-05-27 13:20:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668547264843776[0;39m <==    Updates: 0
2023-05-27 13:20:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668547264843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119668547273232384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:20:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668547273232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:20:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668547273232384[0;39m ==> Parameters: 
2023-05-27 13:20:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668547273232384[0;39m <==    Updates: 8
2023-05-27 13:20:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119668547273232384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:20:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668568253140992[0;39m 生成今日电子书快照开始
2023-05-27 13:20:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668568253140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668568253140992[0;39m ==> Parameters: 
2023-05-27 13:20:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668568253140992[0;39m <==    Updates: 0
2023-05-27 13:20:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668568253140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668589266604032[0;39m 生成今日电子书快照开始
2023-05-27 13:20:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668589266604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668589266604032[0;39m ==> Parameters: 
2023-05-27 13:20:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668589266604032[0;39m <==    Updates: 0
2023-05-27 13:20:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668589266604032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668610196180992[0;39m 生成今日电子书快照开始
2023-05-27 13:20:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668610196180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668610196180992[0;39m ==> Parameters: 
2023-05-27 13:20:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668610196180992[0;39m <==    Updates: 0
2023-05-27 13:20:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668610196180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668631188672512[0;39m 生成今日电子书快照开始
2023-05-27 13:20:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668631188672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668631188672512[0;39m ==> Parameters: 
2023-05-27 13:20:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668631188672512[0;39m <==    Updates: 0
2023-05-27 13:20:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668631188672512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:20:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668652130832384[0;39m 生成今日电子书快照开始
2023-05-27 13:20:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668652130832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668652130832384[0;39m ==> Parameters: 
2023-05-27 13:20:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668652130832384[0;39m <==    Updates: 0
2023-05-27 13:20:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668652130832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668673131712512[0;39m 生成今日电子书快照开始
2023-05-27 13:20:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668673131712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668673131712512[0;39m ==> Parameters: 
2023-05-27 13:20:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668673131712512[0;39m <==    Updates: 0
2023-05-27 13:20:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668673131712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119668673140101120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:20:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668673140101120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:20:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668673140101120[0;39m ==> Parameters: 
2023-05-27 13:20:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668673140101120[0;39m <==    Updates: 8
2023-05-27 13:20:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119668673140101120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:20:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668694120009728[0;39m 生成今日电子书快照开始
2023-05-27 13:20:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668694120009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668694120009728[0;39m ==> Parameters: 
2023-05-27 13:20:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668694120009728[0;39m <==    Updates: 0
2023-05-27 13:20:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668694120009728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668715049586688[0;39m 生成今日电子书快照开始
2023-05-27 13:20:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668715049586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668715049586688[0;39m ==> Parameters: 
2023-05-27 13:20:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668715049586688[0;39m <==    Updates: 0
2023-05-27 13:20:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668715049586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:20:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668736025300992[0;39m 生成今日电子书快照开始
2023-05-27 13:20:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668736025300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668736025300992[0;39m ==> Parameters: 
2023-05-27 13:20:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668736025300992[0;39m <==    Updates: 0
2023-05-27 13:20:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668736025300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:20:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668756984238080[0;39m 生成今日电子书快照开始
2023-05-27 13:20:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668756984238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:20:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668756984238080[0;39m ==> Parameters: 
2023-05-27 13:20:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668756984238080[0;39m <==    Updates: 0
2023-05-27 13:20:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668756984238080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:21:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668777997701120[0;39m 生成今日电子书快照开始
2023-05-27 13:21:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668777997701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668777997701120[0;39m ==> Parameters: 
2023-05-27 13:21:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668777997701120[0;39m <==    Updates: 0
2023-05-27 13:21:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668777997701120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:21:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119668798969221120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:21:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668798969221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:21:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668798969221120[0;39m ==> Parameters: 
2023-05-27 13:21:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668798969221120[0;39m <==    Updates: 8
2023-05-27 13:21:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119668798969221120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:21:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668798977609728[0;39m 生成今日电子书快照开始
2023-05-27 13:21:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668798977609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668798977609728[0;39m ==> Parameters: 
2023-05-27 13:21:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668798977609728[0;39m <==    Updates: 0
2023-05-27 13:21:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668798977609728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:21:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668819898798080[0;39m 生成今日电子书快照开始
2023-05-27 13:21:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668819898798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668819898798080[0;39m ==> Parameters: 
2023-05-27 13:21:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668819898798080[0;39m <==    Updates: 0
2023-05-27 13:21:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668819898798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:21:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668840882900992[0;39m 生成今日电子书快照开始
2023-05-27 13:21:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668840882900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668840882900992[0;39m ==> Parameters: 
2023-05-27 13:21:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668840882900992[0;39m <==    Updates: 0
2023-05-27 13:21:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668840882900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:21:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668861846032384[0;39m 生成今日电子书快照开始
2023-05-27 13:21:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668861846032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668861846032384[0;39m ==> Parameters: 
2023-05-27 13:21:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668861846032384[0;39m <==    Updates: 0
2023-05-27 13:21:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668861846032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:21:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668882842718208[0;39m 生成今日电子书快照开始
2023-05-27 13:21:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668882842718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668882842718208[0;39m ==> Parameters: 
2023-05-27 13:21:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668882842718208[0;39m <==    Updates: 0
2023-05-27 13:21:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668882842718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:21:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668903810043904[0;39m 生成今日电子书快照开始
2023-05-27 13:21:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668903810043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668903810043904[0;39m ==> Parameters: 
2023-05-27 13:21:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668903810043904[0;39m <==    Updates: 0
2023-05-27 13:21:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668903810043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:21:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119668924785758208[0;39m 更新电子书下的文档数据开始
2023-05-27 13:21:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668924785758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:21:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668924785758208[0;39m ==> Parameters: 
2023-05-27 13:21:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119668924785758208[0;39m <==    Updates: 8
2023-05-27 13:21:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119668924785758208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:21:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668924794146816[0;39m 生成今日电子书快照开始
2023-05-27 13:21:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668924794146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668924794146816[0;39m ==> Parameters: 
2023-05-27 13:21:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668924794146816[0;39m <==    Updates: 0
2023-05-27 13:21:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668924794146816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:21:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668945774055424[0;39m 生成今日电子书快照开始
2023-05-27 13:21:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668945774055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668945774055424[0;39m ==> Parameters: 
2023-05-27 13:21:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668945774055424[0;39m <==    Updates: 0
2023-05-27 13:21:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668945774055424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:21:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668966707826688[0;39m 生成今日电子书快照开始
2023-05-27 13:21:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668966707826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668966707826688[0;39m ==> Parameters: 
2023-05-27 13:21:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668966707826688[0;39m <==    Updates: 0
2023-05-27 13:21:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668966707826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:21:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119668987725484032[0;39m 生成今日电子书快照开始
2023-05-27 13:21:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668987725484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668987725484032[0;39m ==> Parameters: 
2023-05-27 13:21:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119668987725484032[0;39m <==    Updates: 0
2023-05-27 13:21:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119668987725484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:21:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669008655060992[0;39m 生成今日电子书快照开始
2023-05-27 13:21:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669008655060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:21:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669008655060992[0;39m ==> Parameters: 
2023-05-27 13:21:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669008655060992[0;39m <==    Updates: 0
2023-05-27 13:21:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669008655060992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:22:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669029647552512[0;39m 生成今日电子书快照开始
2023-05-27 13:22:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669029647552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669029647552512[0;39m ==> Parameters: 
2023-05-27 13:22:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669029647552512[0;39m <==    Updates: 0
2023-05-27 13:22:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669029647552512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:22:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669050627461120[0;39m 生成今日电子书快照开始
2023-05-27 13:22:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669050627461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669050627461120[0;39m ==> Parameters: 
2023-05-27 13:22:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669050627461120[0;39m <==    Updates: 0
2023-05-27 13:22:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669050627461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119669050635849728[0;39m 更新电子书下的文档数据开始
2023-05-27 13:22:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669050635849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:22:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669050635849728[0;39m ==> Parameters: 
2023-05-27 13:22:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669050635849728[0;39m <==    Updates: 8
2023-05-27 13:22:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119669050635849728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:22:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669071565426688[0;39m 生成今日电子书快照开始
2023-05-27 13:22:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669071565426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669071565426688[0;39m ==> Parameters: 
2023-05-27 13:22:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669071565426688[0;39m <==    Updates: 0
2023-05-27 13:22:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669071565426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669092583084032[0;39m 生成今日电子书快照开始
2023-05-27 13:22:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669092583084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669092583084032[0;39m ==> Parameters: 
2023-05-27 13:22:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669092583084032[0;39m <==    Updates: 0
2023-05-27 13:22:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669092583084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669113500078080[0;39m 生成今日电子书快照开始
2023-05-27 13:22:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669113500078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669113500078080[0;39m ==> Parameters: 
2023-05-27 13:22:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669113500078080[0;39m <==    Updates: 0
2023-05-27 13:22:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669113500078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669134484180992[0;39m 生成今日电子书快照开始
2023-05-27 13:22:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669134484180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669134484180992[0;39m ==> Parameters: 
2023-05-27 13:22:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669134484180992[0;39m <==    Updates: 0
2023-05-27 13:22:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669134484180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669155472478208[0;39m 生成今日电子书快照开始
2023-05-27 13:22:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669155472478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669155472478208[0;39m ==> Parameters: 
2023-05-27 13:22:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669155472478208[0;39m <==    Updates: 0
2023-05-27 13:22:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669155472478208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669176460775424[0;39m 生成今日电子书快照开始
2023-05-27 13:22:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669176460775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669176460775424[0;39m ==> Parameters: 
2023-05-27 13:22:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669176460775424[0;39m <==    Updates: 0
2023-05-27 13:22:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669176460775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119669176469164032[0;39m 更新电子书下的文档数据开始
2023-05-27 13:22:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669176469164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:22:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669176469164032[0;39m ==> Parameters: 
2023-05-27 13:22:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669176469164032[0;39m <==    Updates: 8
2023-05-27 13:22:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119669176469164032[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:22:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669197377769472[0;39m 生成今日电子书快照开始
2023-05-27 13:22:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669197377769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669197377769472[0;39m ==> Parameters: 
2023-05-27 13:22:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669197377769472[0;39m <==    Updates: 0
2023-05-27 13:22:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669197377769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669218399621120[0;39m 生成今日电子书快照开始
2023-05-27 13:22:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669218399621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669218399621120[0;39m ==> Parameters: 
2023-05-27 13:22:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669218399621120[0;39m <==    Updates: 0
2023-05-27 13:22:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669218399621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669239375335424[0;39m 生成今日电子书快照开始
2023-05-27 13:22:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669239375335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669239375335424[0;39m ==> Parameters: 
2023-05-27 13:22:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669239375335424[0;39m <==    Updates: 0
2023-05-27 13:22:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669239375335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:22:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669260334272512[0;39m 生成今日电子书快照开始
2023-05-27 13:22:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669260334272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:22:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669260334272512[0;39m ==> Parameters: 
2023-05-27 13:22:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669260334272512[0;39m <==    Updates: 0
2023-05-27 13:22:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669260334272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:23:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669281284820992[0;39m 生成今日电子书快照开始
2023-05-27 13:23:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669281284820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669281284820992[0;39m ==> Parameters: 
2023-05-27 13:23:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669281284820992[0;39m <==    Updates: 0
2023-05-27 13:23:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669281284820992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:23:05.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119669302231175168[0;39m 更新电子书下的文档数据开始
2023-05-27 13:23:05.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669302231175168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:23:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669302231175168[0;39m ==> Parameters: 
2023-05-27 13:23:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669302231175168[0;39m <==    Updates: 8
2023-05-27 13:23:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119669302231175168[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:23:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669302239563776[0;39m 生成今日电子书快照开始
2023-05-27 13:23:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669302239563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669302239563776[0;39m ==> Parameters: 
2023-05-27 13:23:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669302239563776[0;39m <==    Updates: 0
2023-05-27 13:23:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669302239563776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:23:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669323227860992[0;39m 生成今日电子书快照开始
2023-05-27 13:23:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669323227860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669323227860992[0;39m ==> Parameters: 
2023-05-27 13:23:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669323227860992[0;39m <==    Updates: 0
2023-05-27 13:23:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669323227860992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:23:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669344232935424[0;39m 生成今日电子书快照开始
2023-05-27 13:23:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669344232935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669344232935424[0;39m ==> Parameters: 
2023-05-27 13:23:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669344232935424[0;39m <==    Updates: 0
2023-05-27 13:23:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669344232935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:23:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669365183483904[0;39m 生成今日电子书快照开始
2023-05-27 13:23:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669365183483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669365183483904[0;39m ==> Parameters: 
2023-05-27 13:23:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669365183483904[0;39m <==    Updates: 0
2023-05-27 13:23:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669365183483904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:23:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669386121449472[0;39m 生成今日电子书快照开始
2023-05-27 13:23:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669386121449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669386121449472[0;39m ==> Parameters: 
2023-05-27 13:23:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669386121449472[0;39m <==    Updates: 0
2023-05-27 13:23:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669386121449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:23:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669407122329600[0;39m 生成今日电子书快照开始
2023-05-27 13:23:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669407122329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669407122329600[0;39m ==> Parameters: 
2023-05-27 13:23:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669407122329600[0;39m <==    Updates: 0
2023-05-27 13:23:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669407122329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:23:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119669428064489472[0;39m 更新电子书下的文档数据开始
2023-05-27 13:23:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669428064489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:23:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669428064489472[0;39m ==> Parameters: 
2023-05-27 13:23:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669428064489472[0;39m <==    Updates: 8
2023-05-27 13:23:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119669428064489472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:23:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669428072878080[0;39m 生成今日电子书快照开始
2023-05-27 13:23:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669428072878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669428072878080[0;39m ==> Parameters: 
2023-05-27 13:23:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669428072878080[0;39m <==    Updates: 0
2023-05-27 13:23:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669428072878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:23:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669449031815168[0;39m 生成今日电子书快照开始
2023-05-27 13:23:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669449031815168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669449031815168[0;39m ==> Parameters: 
2023-05-27 13:23:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669449031815168[0;39m <==    Updates: 0
2023-05-27 13:23:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669449031815168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:23:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669470070444032[0;39m 生成今日电子书快照开始
2023-05-27 13:23:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669470070444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669470070444032[0;39m ==> Parameters: 
2023-05-27 13:23:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669470070444032[0;39m <==    Updates: 0
2023-05-27 13:23:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669470070444032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:23:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669491033575424[0;39m 生成今日电子书快照开始
2023-05-27 13:23:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669491033575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669491033575424[0;39m ==> Parameters: 
2023-05-27 13:23:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669491033575424[0;39m <==    Updates: 0
2023-05-27 13:23:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669491033575424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:23:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669511967346688[0;39m 生成今日电子书快照开始
2023-05-27 13:23:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669511967346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:23:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669511967346688[0;39m ==> Parameters: 
2023-05-27 13:23:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669511967346688[0;39m <==    Updates: 0
2023-05-27 13:23:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669511967346688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:24:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669532980809728[0;39m 生成今日电子书快照开始
2023-05-27 13:24:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669532980809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669532980809728[0;39m ==> Parameters: 
2023-05-27 13:24:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669532980809728[0;39m <==    Updates: 0
2023-05-27 13:24:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669532980809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119669553910386688[0;39m 更新电子书下的文档数据开始
2023-05-27 13:24:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669553910386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:24:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669553910386688[0;39m ==> Parameters: 
2023-05-27 13:24:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669553910386688[0;39m <==    Updates: 8
2023-05-27 13:24:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119669553910386688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:24:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669553918775296[0;39m 生成今日电子书快照开始
2023-05-27 13:24:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669553918775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669553918775296[0;39m ==> Parameters: 
2023-05-27 13:24:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669553918775296[0;39m <==    Updates: 0
2023-05-27 13:24:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669553918775296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:24:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669574928044032[0;39m 生成今日电子书快照开始
2023-05-27 13:24:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669574928044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669574928044032[0;39m ==> Parameters: 
2023-05-27 13:24:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669574928044032[0;39m <==    Updates: 0
2023-05-27 13:24:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669574928044032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669595891175424[0;39m 生成今日电子书快照开始
2023-05-27 13:24:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669595891175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669595891175424[0;39m ==> Parameters: 
2023-05-27 13:24:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669595891175424[0;39m <==    Updates: 0
2023-05-27 13:24:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669595891175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669616871084032[0;39m 生成今日电子书快照开始
2023-05-27 13:24:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669616871084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669616871084032[0;39m ==> Parameters: 
2023-05-27 13:24:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669616871084032[0;39m <==    Updates: 0
2023-05-27 13:24:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669616871084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669637821632512[0;39m 生成今日电子书快照开始
2023-05-27 13:24:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669637821632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669637821632512[0;39m ==> Parameters: 
2023-05-27 13:24:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669637821632512[0;39m <==    Updates: 0
2023-05-27 13:24:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669637821632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669658801541120[0;39m 生成今日电子书快照开始
2023-05-27 13:24:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669658801541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669658801541120[0;39m ==> Parameters: 
2023-05-27 13:24:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669658801541120[0;39m <==    Updates: 0
2023-05-27 13:24:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669658801541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119669679760478208[0;39m 更新电子书下的文档数据开始
2023-05-27 13:24:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669679760478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:24:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669679760478208[0;39m ==> Parameters: 
2023-05-27 13:24:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669679760478208[0;39m <==    Updates: 8
2023-05-27 13:24:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119669679760478208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:24:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669679768866816[0;39m 生成今日电子书快照开始
2023-05-27 13:24:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669679768866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669679768866816[0;39m ==> Parameters: 
2023-05-27 13:24:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669679768866816[0;39m <==    Updates: 0
2023-05-27 13:24:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669679768866816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:24:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669700711026688[0;39m 生成今日电子书快照开始
2023-05-27 13:24:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669700711026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669700711026688[0;39m ==> Parameters: 
2023-05-27 13:24:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669700711026688[0;39m <==    Updates: 0
2023-05-27 13:24:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669700711026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669721724489728[0;39m 生成今日电子书快照开始
2023-05-27 13:24:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669721724489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669721724489728[0;39m ==> Parameters: 
2023-05-27 13:24:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669721724489728[0;39m <==    Updates: 0
2023-05-27 13:24:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669721724489728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669742649872384[0;39m 生成今日电子书快照开始
2023-05-27 13:24:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669742649872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669742649872384[0;39m ==> Parameters: 
2023-05-27 13:24:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669742649872384[0;39m <==    Updates: 0
2023-05-27 13:24:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669742649872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:24:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669763613003776[0;39m 生成今日电子书快照开始
2023-05-27 13:24:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669763613003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:24:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669763613003776[0;39m ==> Parameters: 
2023-05-27 13:24:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669763613003776[0;39m <==    Updates: 0
2023-05-27 13:24:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669763613003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669784630661120[0;39m 生成今日电子书快照开始
2023-05-27 13:25:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669784630661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669784630661120[0;39m ==> Parameters: 
2023-05-27 13:25:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669784630661120[0;39m <==    Updates: 0
2023-05-27 13:25:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669784630661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119669805597986816[0;39m 更新电子书下的文档数据开始
2023-05-27 13:25:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669805597986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:25:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669805597986816[0;39m ==> Parameters: 
2023-05-27 13:25:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669805597986816[0;39m <==    Updates: 8
2023-05-27 13:25:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119669805597986816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:25:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669805602181120[0;39m 生成今日电子书快照开始
2023-05-27 13:25:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669805602181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669805602181120[0;39m ==> Parameters: 
2023-05-27 13:25:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669805602181120[0;39m <==    Updates: 0
2023-05-27 13:25:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669805602181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669826586284032[0;39m 生成今日电子书快照开始
2023-05-27 13:25:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669826586284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669826586284032[0;39m ==> Parameters: 
2023-05-27 13:25:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669826586284032[0;39m <==    Updates: 0
2023-05-27 13:25:10.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669826586284032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:25:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669847549415424[0;39m 生成今日电子书快照开始
2023-05-27 13:25:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669847549415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669847549415424[0;39m ==> Parameters: 
2023-05-27 13:25:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669847549415424[0;39m <==    Updates: 0
2023-05-27 13:25:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669847549415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669868520935424[0;39m 生成今日电子书快照开始
2023-05-27 13:25:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669868520935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669868520935424[0;39m ==> Parameters: 
2023-05-27 13:25:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669868520935424[0;39m <==    Updates: 0
2023-05-27 13:25:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669868520935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669889446318080[0;39m 生成今日电子书快照开始
2023-05-27 13:25:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669889446318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669889446318080[0;39m ==> Parameters: 
2023-05-27 13:25:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669889446318080[0;39m <==    Updates: 0
2023-05-27 13:25:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669889446318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669910447198208[0;39m 生成今日电子书快照开始
2023-05-27 13:25:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669910447198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669910447198208[0;39m ==> Parameters: 
2023-05-27 13:25:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669910447198208[0;39m <==    Updates: 0
2023-05-27 13:25:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669910447198208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:25:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119669931393552384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:25:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669931393552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:25:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669931393552384[0;39m ==> Parameters: 
2023-05-27 13:25:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119669931393552384[0;39m <==    Updates: 8
2023-05-27 13:25:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119669931393552384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:25:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669931397746688[0;39m 生成今日电子书快照开始
2023-05-27 13:25:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669931397746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669931397746688[0;39m ==> Parameters: 
2023-05-27 13:25:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669931397746688[0;39m <==    Updates: 0
2023-05-27 13:25:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669931397746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669952411209728[0;39m 生成今日电子书快照开始
2023-05-27 13:25:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669952411209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669952411209728[0;39m ==> Parameters: 
2023-05-27 13:25:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669952411209728[0;39m <==    Updates: 0
2023-05-27 13:25:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669952411209728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669973382729728[0;39m 生成今日电子书快照开始
2023-05-27 13:25:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669973382729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669973382729728[0;39m ==> Parameters: 
2023-05-27 13:25:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669973382729728[0;39m <==    Updates: 0
2023-05-27 13:25:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669973382729728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119669994337472512[0;39m 生成今日电子书快照开始
2023-05-27 13:25:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669994337472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669994337472512[0;39m ==> Parameters: 
2023-05-27 13:25:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119669994337472512[0;39m <==    Updates: 0
2023-05-27 13:25:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119669994337472512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:25:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670015325769728[0;39m 生成今日电子书快照开始
2023-05-27 13:25:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670015325769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:25:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670015325769728[0;39m ==> Parameters: 
2023-05-27 13:25:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670015325769728[0;39m <==    Updates: 0
2023-05-27 13:25:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670015325769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:26:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670036284706816[0;39m 生成今日电子书快照开始
2023-05-27 13:26:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670036284706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670036284706816[0;39m ==> Parameters: 
2023-05-27 13:26:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670036284706816[0;39m <==    Updates: 0
2023-05-27 13:26:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670036284706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:26:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119670057260421120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:26:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670057260421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:26:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670057260421120[0;39m ==> Parameters: 
2023-05-27 13:26:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670057260421120[0;39m <==    Updates: 8
2023-05-27 13:26:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119670057260421120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:26:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670057268809728[0;39m 生成今日电子书快照开始
2023-05-27 13:26:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670057268809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670057268809728[0;39m ==> Parameters: 
2023-05-27 13:26:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670057268809728[0;39m <==    Updates: 0
2023-05-27 13:26:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670057268809728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:26:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670078181609472[0;39m 生成今日电子书快照开始
2023-05-27 13:26:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670078181609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670078181609472[0;39m ==> Parameters: 
2023-05-27 13:26:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670078181609472[0;39m <==    Updates: 0
2023-05-27 13:26:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670078181609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:26:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670099199266816[0;39m 生成今日电子书快照开始
2023-05-27 13:26:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670099199266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670099199266816[0;39m ==> Parameters: 
2023-05-27 13:26:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670099199266816[0;39m <==    Updates: 0
2023-05-27 13:26:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670099199266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:26:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670120179175424[0;39m 生成今日电子书快照开始
2023-05-27 13:26:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670120179175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670120179175424[0;39m ==> Parameters: 
2023-05-27 13:26:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670120179175424[0;39m <==    Updates: 0
2023-05-27 13:26:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670120179175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:26:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670141121335296[0;39m 生成今日电子书快照开始
2023-05-27 13:26:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670141121335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670141121335296[0;39m ==> Parameters: 
2023-05-27 13:26:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670141121335296[0;39m <==    Updates: 0
2023-05-27 13:26:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670141121335296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:26:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670162097049600[0;39m 生成今日电子书快照开始
2023-05-27 13:26:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670162097049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670162097049600[0;39m ==> Parameters: 
2023-05-27 13:26:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670162097049600[0;39m <==    Updates: 0
2023-05-27 13:26:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670162097049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:26:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119670183093735424[0;39m 更新电子书下的文档数据开始
2023-05-27 13:26:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670183093735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:26:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670183093735424[0;39m ==> Parameters: 
2023-05-27 13:26:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670183093735424[0;39m <==    Updates: 8
2023-05-27 13:26:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119670183093735424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:26:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670183102124032[0;39m 生成今日电子书快照开始
2023-05-27 13:26:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670183102124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670183102124032[0;39m ==> Parameters: 
2023-05-27 13:26:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670183102124032[0;39m <==    Updates: 0
2023-05-27 13:26:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670183102124032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:26:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670204073644032[0;39m 生成今日电子书快照开始
2023-05-27 13:26:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670204073644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670204073644032[0;39m ==> Parameters: 
2023-05-27 13:26:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670204073644032[0;39m <==    Updates: 0
2023-05-27 13:26:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670204073644032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:26:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670225019998208[0;39m 生成今日电子书快照开始
2023-05-27 13:26:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670225019998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670225019998208[0;39m ==> Parameters: 
2023-05-27 13:26:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670225019998208[0;39m <==    Updates: 0
2023-05-27 13:26:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670225019998208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:26:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670246004101120[0;39m 生成今日电子书快照开始
2023-05-27 13:26:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670246004101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670246004101120[0;39m ==> Parameters: 
2023-05-27 13:26:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670246004101120[0;39m <==    Updates: 0
2023-05-27 13:26:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670246004101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:26:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670266950455296[0;39m 生成今日电子书快照开始
2023-05-27 13:26:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670266950455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:26:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670266950455296[0;39m ==> Parameters: 
2023-05-27 13:26:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670266950455296[0;39m <==    Updates: 0
2023-05-27 13:26:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670266950455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:27:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670287942946816[0;39m 生成今日电子书快照开始
2023-05-27 13:27:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670287942946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670287942946816[0;39m ==> Parameters: 
2023-05-27 13:27:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670287942946816[0;39m <==    Updates: 0
2023-05-27 13:27:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670287942946816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:27:04.020 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119402365253193728[0;39m 连接关闭，token：w8U0U7lEJJ，session id：2！当前连接数：0
2023-05-27 13:27:04.627 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：dSsO5iEYw3，session id：3，当前连接数：1
2023-05-27 13:27:04.678 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119670307513569280[0;39m ------------- 开始 -------------
2023-05-27 13:27:04.678 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119670307513569281[0;39m ------------- 开始 -------------
2023-05-27 13:27:04.678 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119670307513569282[0;39m ------------- 开始 -------------
2023-05-27 13:27:04.678 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119670307513569281[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 13:27:04.678 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119670307513569280[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 13:27:04.678 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119670307513569282[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 13:27:04.678 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119670307513569281[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 13:27:04.678 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119670307513569280[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 13:27:04.679 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119670307513569282[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 13:27:04.679 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119670307513569281[0;39m 远程地址: 127.0.0.1
2023-05-27 13:27:04.679 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119670307513569280[0;39m 远程地址: 127.0.0.1
2023-05-27 13:27:04.679 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119670307513569282[0;39m 远程地址: 127.0.0.1
2023-05-27 13:27:04.679 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119670307513569280[0;39m 请求参数: []
2023-05-27 13:27:04.679 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119670307513569281[0;39m 请求参数: []
2023-05-27 13:27:04.679 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119670307513569282[0;39m 请求参数: []
2023-05-27 13:27:04.679 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119670307513569280[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 13:27:04.681 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119670307513569281[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 13:27:04.681 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119670307513569282[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 13:27:04.681 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119670307513569280[0;39m ==> Parameters: 
2023-05-27 13:27:04.681 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119670307513569282[0;39m ==> Parameters: 
2023-05-27 13:27:04.681 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119670307513569281[0;39m ==> Parameters: 
2023-05-27 13:27:04.682 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119670307513569281[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 13:27:04.682 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==    Columns: id, parent, name, sort
2023-05-27 13:27:04.682 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119670307513569280[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 13:27:04.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 13:27:04.683 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119670307513569281[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 13:27:04.683 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119670307513569280[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 13:27:04.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 13:27:04.683 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119670307513569281[0;39m <==        Row: 2023-05-27, 436, 68, 0, 0
2023-05-27 13:27:04.683 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119670307513569280[0;39m <==      Total: 1
2023-05-27 13:27:04.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 13:27:04.683 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119670307513569281[0;39m <==      Total: 2
2023-05-27 13:27:04.684 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119670307513569280[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 13:27:04.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 13:27:04.684 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119670307513569280[0;39m ------------- 结束 耗时：6 ms -------------
2023-05-27 13:27:04.684 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119670307513569281[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":436,"viewIncrease":0,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 13:27:04.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 13:27:04.684 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119670307513569281[0;39m ------------- 结束 耗时：6 ms -------------
2023-05-27 13:27:04.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 13:27:04.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 13:27:04.685 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 13:27:04.685 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 13:27:04.685 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 13:27:04.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 13:27:04.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 13:27:04.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 13:27:04.687 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 13:27:04.687 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 13:27:04.687 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119670307513569282[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 13:27:04.687 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119670307513569282[0;39m <==      Total: 16
2023-05-27 13:27:04.688 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119670307513569282[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 13:27:04.688 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119670307513569282[0;39m ------------- 结束 耗时：10 ms -------------
2023-05-27 13:27:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119670308876718080[0;39m 更新电子书下的文档数据开始
2023-05-27 13:27:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670308876718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:27:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670308876718080[0;39m ==> Parameters: 
2023-05-27 13:27:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670308876718080[0;39m <==    Updates: 8
2023-05-27 13:27:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119670308876718080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:27:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670308880912384[0;39m 生成今日电子书快照开始
2023-05-27 13:27:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670308880912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670308880912384[0;39m ==> Parameters: 
2023-05-27 13:27:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670308880912384[0;39m <==    Updates: 0
2023-05-27 13:27:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670308880912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:27:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670329881792512[0;39m 生成今日电子书快照开始
2023-05-27 13:27:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670329881792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670329881792512[0;39m ==> Parameters: 
2023-05-27 13:27:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670329881792512[0;39m <==    Updates: 0
2023-05-27 13:27:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670329881792512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:27:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670350840729600[0;39m 生成今日电子书快照开始
2023-05-27 13:27:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670350840729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670350840729600[0;39m ==> Parameters: 
2023-05-27 13:27:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670350840729600[0;39m <==    Updates: 0
2023-05-27 13:27:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670350840729600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:27:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670371791278080[0;39m 生成今日电子书快照开始
2023-05-27 13:27:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670371791278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670371791278080[0;39m ==> Parameters: 
2023-05-27 13:27:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670371791278080[0;39m <==    Updates: 0
2023-05-27 13:27:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670371791278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:27:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670392800546816[0;39m 生成今日电子书快照开始
2023-05-27 13:27:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670392800546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670392800546816[0;39m ==> Parameters: 
2023-05-27 13:27:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670392800546816[0;39m <==    Updates: 0
2023-05-27 13:27:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670392800546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:27:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670413751095296[0;39m 生成今日电子书快照开始
2023-05-27 13:27:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670413751095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670413751095296[0;39m ==> Parameters: 
2023-05-27 13:27:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670413751095296[0;39m <==    Updates: 0
2023-05-27 13:27:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670413751095296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:27:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119670434756169728[0;39m 更新电子书下的文档数据开始
2023-05-27 13:27:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670434756169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:27:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670434756169728[0;39m ==> Parameters: 
2023-05-27 13:27:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670434756169728[0;39m <==    Updates: 8
2023-05-27 13:27:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119670434756169728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:27:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670434764558336[0;39m 生成今日电子书快照开始
2023-05-27 13:27:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670434764558336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670434764558336[0;39m ==> Parameters: 
2023-05-27 13:27:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670434764558336[0;39m <==    Updates: 0
2023-05-27 13:27:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670434764558336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:27:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670455689940992[0;39m 生成今日电子书快照开始
2023-05-27 13:27:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670455689940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670455689940992[0;39m ==> Parameters: 
2023-05-27 13:27:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670455689940992[0;39m <==    Updates: 0
2023-05-27 13:27:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670455689940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:27:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670476657266688[0;39m 生成今日电子书快照开始
2023-05-27 13:27:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670476657266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670476657266688[0;39m ==> Parameters: 
2023-05-27 13:27:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670476657266688[0;39m <==    Updates: 0
2023-05-27 13:27:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670476657266688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:27:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670497632980992[0;39m 生成今日电子书快照开始
2023-05-27 13:27:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670497632980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670497632980992[0;39m ==> Parameters: 
2023-05-27 13:27:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670497632980992[0;39m <==    Updates: 0
2023-05-27 13:27:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670497632980992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:27:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670518625472512[0;39m 生成今日电子书快照开始
2023-05-27 13:27:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670518625472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:27:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670518625472512[0;39m ==> Parameters: 
2023-05-27 13:27:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670518625472512[0;39m <==    Updates: 0
2023-05-27 13:27:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670518625472512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:28:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670539601186816[0;39m 生成今日电子书快照开始
2023-05-27 13:28:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670539601186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670539601186816[0;39m ==> Parameters: 
2023-05-27 13:28:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670539601186816[0;39m <==    Updates: 0
2023-05-27 13:28:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670539601186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:28:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119670560560123904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:28:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670560560123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:28:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670560560123904[0;39m ==> Parameters: 
2023-05-27 13:28:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670560560123904[0;39m <==    Updates: 8
2023-05-27 13:28:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119670560560123904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:28:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670560568512512[0;39m 生成今日电子书快照开始
2023-05-27 13:28:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670560568512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670560568512512[0;39m ==> Parameters: 
2023-05-27 13:28:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670560568512512[0;39m <==    Updates: 0
2023-05-27 13:28:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670560568512512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:28:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670581548421120[0;39m 生成今日电子书快照开始
2023-05-27 13:28:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670581548421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670581548421120[0;39m ==> Parameters: 
2023-05-27 13:28:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670581548421120[0;39m <==    Updates: 0
2023-05-27 13:28:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670581548421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:28:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670602498969600[0;39m 生成今日电子书快照开始
2023-05-27 13:28:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670602498969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670602498969600[0;39m ==> Parameters: 
2023-05-27 13:28:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670602498969600[0;39m <==    Updates: 0
2023-05-27 13:28:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670602498969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:28:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670623457906688[0;39m 生成今日电子书快照开始
2023-05-27 13:28:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670623457906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670623457906688[0;39m ==> Parameters: 
2023-05-27 13:28:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670623457906688[0;39m <==    Updates: 0
2023-05-27 13:28:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670623457906688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:28:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670644450398208[0;39m 生成今日电子书快照开始
2023-05-27 13:28:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670644450398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670644450398208[0;39m ==> Parameters: 
2023-05-27 13:28:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670644450398208[0;39m <==    Updates: 0
2023-05-27 13:28:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670644450398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:28:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670665384169472[0;39m 生成今日电子书快照开始
2023-05-27 13:28:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670665384169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670665384169472[0;39m ==> Parameters: 
2023-05-27 13:28:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670665384169472[0;39m <==    Updates: 0
2023-05-27 13:28:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670665384169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:28:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119670686376660992[0;39m 更新电子书下的文档数据开始
2023-05-27 13:28:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670686376660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:28:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670686376660992[0;39m ==> Parameters: 
2023-05-27 13:28:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670686376660992[0;39m <==    Updates: 8
2023-05-27 13:28:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119670686376660992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:28:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670686385049600[0;39m 生成今日电子书快照开始
2023-05-27 13:28:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670686385049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670686385049600[0;39m ==> Parameters: 
2023-05-27 13:28:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670686385049600[0;39m <==    Updates: 0
2023-05-27 13:28:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670686385049600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:28:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670707343986688[0;39m 生成今日电子书快照开始
2023-05-27 13:28:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670707343986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670707343986688[0;39m ==> Parameters: 
2023-05-27 13:28:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670707343986688[0;39m <==    Updates: 0
2023-05-27 13:28:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670707343986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:28:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670728340672512[0;39m 生成今日电子书快照开始
2023-05-27 13:28:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670728340672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670728340672512[0;39m ==> Parameters: 
2023-05-27 13:28:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670728340672512[0;39m <==    Updates: 0
2023-05-27 13:28:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670728340672512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:28:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670749274443776[0;39m 生成今日电子书快照开始
2023-05-27 13:28:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670749274443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670749274443776[0;39m ==> Parameters: 
2023-05-27 13:28:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670749274443776[0;39m <==    Updates: 0
2023-05-27 13:28:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670749274443776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:28:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670770262740992[0;39m 生成今日电子书快照开始
2023-05-27 13:28:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670770262740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:28:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670770262740992[0;39m ==> Parameters: 
2023-05-27 13:28:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670770262740992[0;39m <==    Updates: 0
2023-05-27 13:28:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670770262740992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:29:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670791251038208[0;39m 生成今日电子书快照开始
2023-05-27 13:29:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670791251038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670791251038208[0;39m ==> Parameters: 
2023-05-27 13:29:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670791251038208[0;39m <==    Updates: 0
2023-05-27 13:29:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670791251038208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:29:05.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119670812180615168[0;39m 更新电子书下的文档数据开始
2023-05-27 13:29:05.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670812180615168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:29:05.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670812180615168[0;39m ==> Parameters: 
2023-05-27 13:29:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670812180615168[0;39m <==    Updates: 8
2023-05-27 13:29:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119670812180615168[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:29:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670812189003776[0;39m 生成今日电子书快照开始
2023-05-27 13:29:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670812189003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670812189003776[0;39m ==> Parameters: 
2023-05-27 13:29:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670812189003776[0;39m <==    Updates: 0
2023-05-27 13:29:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670812189003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:29:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670833198272512[0;39m 生成今日电子书快照开始
2023-05-27 13:29:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670833198272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670833198272512[0;39m ==> Parameters: 
2023-05-27 13:29:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670833198272512[0;39m <==    Updates: 0
2023-05-27 13:29:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670833198272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:29:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670854161403904[0;39m 生成今日电子书快照开始
2023-05-27 13:29:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670854161403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670854161403904[0;39m ==> Parameters: 
2023-05-27 13:29:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670854161403904[0;39m <==    Updates: 0
2023-05-27 13:29:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670854161403904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:29:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670875137118208[0;39m 生成今日电子书快照开始
2023-05-27 13:29:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670875137118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670875137118208[0;39m ==> Parameters: 
2023-05-27 13:29:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670875137118208[0;39m <==    Updates: 0
2023-05-27 13:29:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670875137118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:29:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670896079278080[0;39m 生成今日电子书快照开始
2023-05-27 13:29:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670896079278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670896079278080[0;39m ==> Parameters: 
2023-05-27 13:29:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670896079278080[0;39m <==    Updates: 0
2023-05-27 13:29:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670896079278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:29:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670917084352512[0;39m 生成今日电子书快照开始
2023-05-27 13:29:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670917084352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670917084352512[0;39m ==> Parameters: 
2023-05-27 13:29:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670917084352512[0;39m <==    Updates: 0
2023-05-27 13:29:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670917084352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:29:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119670938043289600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:29:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670938043289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:29:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670938043289600[0;39m ==> Parameters: 
2023-05-27 13:29:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119670938043289600[0;39m <==    Updates: 8
2023-05-27 13:29:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119670938043289600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:29:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670938047483904[0;39m 生成今日电子书快照开始
2023-05-27 13:29:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670938047483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670938047483904[0;39m ==> Parameters: 
2023-05-27 13:29:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670938047483904[0;39m <==    Updates: 0
2023-05-27 13:29:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670938047483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:29:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670959027392512[0;39m 生成今日电子书快照开始
2023-05-27 13:29:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670959027392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670959027392512[0;39m ==> Parameters: 
2023-05-27 13:29:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670959027392512[0;39m <==    Updates: 0
2023-05-27 13:29:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670959027392512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:29:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119670979956969472[0;39m 生成今日电子书快照开始
2023-05-27 13:29:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670979956969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670979956969472[0;39m ==> Parameters: 
2023-05-27 13:29:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119670979956969472[0;39m <==    Updates: 0
2023-05-27 13:29:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119670979956969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:29:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671000974626816[0;39m 生成今日电子书快照开始
2023-05-27 13:29:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671000974626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671000974626816[0;39m ==> Parameters: 
2023-05-27 13:29:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671000974626816[0;39m <==    Updates: 0
2023-05-27 13:29:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671000974626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:29:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671021958729728[0;39m 生成今日电子书快照开始
2023-05-27 13:29:55.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671021958729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:29:55.031 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671021958729728[0;39m ==> Parameters: 
2023-05-27 13:29:55.033 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671021958729728[0;39m <==    Updates: 0
2023-05-27 13:29:55.033 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671021958729728[0;39m 生成今日电子书快照结束，耗时：18 毫秒
2023-05-27 13:30:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671042896695296[0;39m 生成今日电子书快照开始
2023-05-27 13:30:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671042896695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671042896695296[0;39m ==> Parameters: 
2023-05-27 13:30:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671042896695296[0;39m <==    Updates: 0
2023-05-27 13:30:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671042896695296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:30:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671063855632384[0;39m 生成今日电子书快照开始
2023-05-27 13:30:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671063855632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671063855632384[0;39m ==> Parameters: 
2023-05-27 13:30:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671063855632384[0;39m <==    Updates: 0
2023-05-27 13:30:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671063855632384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:30:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119671063859826688[0;39m 更新电子书下的文档数据开始
2023-05-27 13:30:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671063859826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:30:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671063859826688[0;39m ==> Parameters: 
2023-05-27 13:30:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671063859826688[0;39m <==    Updates: 8
2023-05-27 13:30:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119671063859826688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:30:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671084864901120[0;39m 生成今日电子书快照开始
2023-05-27 13:30:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671084864901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671084864901120[0;39m ==> Parameters: 
2023-05-27 13:30:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671084864901120[0;39m <==    Updates: 0
2023-05-27 13:30:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671084864901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671105836421120[0;39m 生成今日电子书快照开始
2023-05-27 13:30:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671105836421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671105836421120[0;39m ==> Parameters: 
2023-05-27 13:30:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671105836421120[0;39m <==    Updates: 0
2023-05-27 13:30:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671105836421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671126799552512[0;39m 生成今日电子书快照开始
2023-05-27 13:30:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671126799552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671126799552512[0;39m ==> Parameters: 
2023-05-27 13:30:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671126799552512[0;39m <==    Updates: 0
2023-05-27 13:30:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671126799552512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671147792044032[0;39m 生成今日电子书快照开始
2023-05-27 13:30:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671147792044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671147792044032[0;39m ==> Parameters: 
2023-05-27 13:30:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671147792044032[0;39m <==    Updates: 0
2023-05-27 13:30:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671147792044032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671168700649472[0;39m 生成今日电子书快照开始
2023-05-27 13:30:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671168700649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671168700649472[0;39m ==> Parameters: 
2023-05-27 13:30:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671168700649472[0;39m <==    Updates: 0
2023-05-27 13:30:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671168700649472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119671189714112512[0;39m 更新电子书下的文档数据开始
2023-05-27 13:30:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671189714112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:30:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671189714112512[0;39m ==> Parameters: 
2023-05-27 13:30:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671189714112512[0;39m <==    Updates: 8
2023-05-27 13:30:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119671189714112512[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2023-05-27 13:30:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671189730889728[0;39m 生成今日电子书快照开始
2023-05-27 13:30:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671189730889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671189730889728[0;39m ==> Parameters: 
2023-05-27 13:30:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671189730889728[0;39m <==    Updates: 0
2023-05-27 13:30:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671189730889728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671210689826816[0;39m 生成今日电子书快照开始
2023-05-27 13:30:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671210689826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671210689826816[0;39m ==> Parameters: 
2023-05-27 13:30:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671210689826816[0;39m <==    Updates: 0
2023-05-27 13:30:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671210689826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671231652958208[0;39m 生成今日电子书快照开始
2023-05-27 13:30:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671231652958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671231652958208[0;39m ==> Parameters: 
2023-05-27 13:30:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671231652958208[0;39m <==    Updates: 0
2023-05-27 13:30:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671231652958208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671252624478208[0;39m 生成今日电子书快照开始
2023-05-27 13:30:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671252624478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671252624478208[0;39m ==> Parameters: 
2023-05-27 13:30:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671252624478208[0;39m <==    Updates: 0
2023-05-27 13:30:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671252624478208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:30:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671273600192512[0;39m 生成今日电子书快照开始
2023-05-27 13:30:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671273600192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:30:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671273600192512[0;39m ==> Parameters: 
2023-05-27 13:30:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671273600192512[0;39m <==    Updates: 0
2023-05-27 13:30:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671273600192512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:31:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671294584295424[0;39m 生成今日电子书快照开始
2023-05-27 13:31:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671294584295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671294584295424[0;39m ==> Parameters: 
2023-05-27 13:31:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671294584295424[0;39m <==    Updates: 0
2023-05-27 13:31:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671294584295424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:31:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119671315522260992[0;39m 更新电子书下的文档数据开始
2023-05-27 13:31:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671315522260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:31:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671315522260992[0;39m ==> Parameters: 
2023-05-27 13:31:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671315522260992[0;39m <==    Updates: 8
2023-05-27 13:31:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119671315522260992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:31:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671315526455296[0;39m 生成今日电子书快照开始
2023-05-27 13:31:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671315526455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671315526455296[0;39m ==> Parameters: 
2023-05-27 13:31:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671315526455296[0;39m <==    Updates: 0
2023-05-27 13:31:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671315526455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:31:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671336497975296[0;39m 生成今日电子书快照开始
2023-05-27 13:31:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671336497975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671336497975296[0;39m ==> Parameters: 
2023-05-27 13:31:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671336497975296[0;39m <==    Updates: 0
2023-05-27 13:31:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671336497975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:31:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671357477883904[0;39m 生成今日电子书快照开始
2023-05-27 13:31:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671357477883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671357477883904[0;39m ==> Parameters: 
2023-05-27 13:31:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671357477883904[0;39m <==    Updates: 0
2023-05-27 13:31:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671357477883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:31:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671378420043776[0;39m 生成今日电子书快照开始
2023-05-27 13:31:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671378420043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671378420043776[0;39m ==> Parameters: 
2023-05-27 13:31:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671378420043776[0;39m <==    Updates: 0
2023-05-27 13:31:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671378420043776[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2023-05-27 13:31:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671399404146688[0;39m 生成今日电子书快照开始
2023-05-27 13:31:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671399404146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671399404146688[0;39m ==> Parameters: 
2023-05-27 13:31:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671399404146688[0;39m <==    Updates: 0
2023-05-27 13:31:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671399404146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:31:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671420392443904[0;39m 生成今日电子书快照开始
2023-05-27 13:31:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671420392443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671420392443904[0;39m ==> Parameters: 
2023-05-27 13:31:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671420392443904[0;39m <==    Updates: 0
2023-05-27 13:31:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671420392443904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:31:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671441330409472[0;39m 生成今日电子书快照开始
2023-05-27 13:31:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671441330409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671441330409472[0;39m ==> Parameters: 
2023-05-27 13:31:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671441330409472[0;39m <==    Updates: 0
2023-05-27 13:31:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671441330409472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:31:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119671441342992384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:31:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671441342992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:31:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671441342992384[0;39m ==> Parameters: 
2023-05-27 13:31:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671441342992384[0;39m <==    Updates: 8
2023-05-27 13:31:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119671441342992384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:31:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671462335483904[0;39m 生成今日电子书快照开始
2023-05-27 13:31:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671462335483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671462335483904[0;39m ==> Parameters: 
2023-05-27 13:31:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671462335483904[0;39m <==    Updates: 0
2023-05-27 13:31:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671462335483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:31:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671483290226688[0;39m 生成今日电子书快照开始
2023-05-27 13:31:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671483290226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671483290226688[0;39m ==> Parameters: 
2023-05-27 13:31:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671483290226688[0;39m <==    Updates: 0
2023-05-27 13:31:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671483290226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:31:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671504249163776[0;39m 生成今日电子书快照开始
2023-05-27 13:31:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671504249163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671504249163776[0;39m ==> Parameters: 
2023-05-27 13:31:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671504249163776[0;39m <==    Updates: 0
2023-05-27 13:31:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671504249163776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:31:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671525279404032[0;39m 生成今日电子书快照开始
2023-05-27 13:31:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671525279404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:31:55.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671525279404032[0;39m ==> Parameters: 
2023-05-27 13:31:55.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671525279404032[0;39m <==    Updates: 0
2023-05-27 13:31:55.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671525279404032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:32:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671546213175296[0;39m 生成今日电子书快照开始
2023-05-27 13:32:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671546213175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671546213175296[0;39m ==> Parameters: 
2023-05-27 13:32:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671546213175296[0;39m <==    Updates: 0
2023-05-27 13:32:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671546213175296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:32:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119671567193083904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:32:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671567193083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:32:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671567193083904[0;39m ==> Parameters: 
2023-05-27 13:32:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671567193083904[0;39m <==    Updates: 8
2023-05-27 13:32:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119671567193083904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:32:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671567201472512[0;39m 生成今日电子书快照开始
2023-05-27 13:32:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671567201472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671567201472512[0;39m ==> Parameters: 
2023-05-27 13:32:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671567201472512[0;39m <==    Updates: 0
2023-05-27 13:32:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671567201472512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671588126855168[0;39m 生成今日电子书快照开始
2023-05-27 13:32:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671588126855168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671588126855168[0;39m ==> Parameters: 
2023-05-27 13:32:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671588126855168[0;39m <==    Updates: 0
2023-05-27 13:32:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671588126855168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671609115152384[0;39m 生成今日电子书快照开始
2023-05-27 13:32:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671609115152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671609115152384[0;39m ==> Parameters: 
2023-05-27 13:32:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671609115152384[0;39m <==    Updates: 0
2023-05-27 13:32:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671609115152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671630086672384[0;39m 生成今日电子书快照开始
2023-05-27 13:32:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671630086672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671630086672384[0;39m ==> Parameters: 
2023-05-27 13:32:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671630086672384[0;39m <==    Updates: 0
2023-05-27 13:32:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671630086672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671651053998080[0;39m 生成今日电子书快照开始
2023-05-27 13:32:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671651053998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671651053998080[0;39m ==> Parameters: 
2023-05-27 13:32:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671651053998080[0;39m <==    Updates: 0
2023-05-27 13:32:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671651053998080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:32:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671672017129472[0;39m 生成今日电子书快照开始
2023-05-27 13:32:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671672017129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671672017129472[0;39m ==> Parameters: 
2023-05-27 13:32:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671672017129472[0;39m <==    Updates: 0
2023-05-27 13:32:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671672017129472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119671693038981120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:32:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671693038981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:32:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671693038981120[0;39m ==> Parameters: 
2023-05-27 13:32:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671693038981120[0;39m <==    Updates: 8
2023-05-27 13:32:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119671693038981120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:32:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671693043175424[0;39m 生成今日电子书快照开始
2023-05-27 13:32:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671693043175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671693043175424[0;39m ==> Parameters: 
2023-05-27 13:32:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671693043175424[0;39m <==    Updates: 0
2023-05-27 13:32:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671693043175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671713976946688[0;39m 生成今日电子书快照开始
2023-05-27 13:32:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671713976946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671713976946688[0;39m ==> Parameters: 
2023-05-27 13:32:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671713976946688[0;39m <==    Updates: 0
2023-05-27 13:32:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671713976946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671734935883776[0;39m 生成今日电子书快照开始
2023-05-27 13:32:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671734935883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671734935883776[0;39m ==> Parameters: 
2023-05-27 13:32:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671734935883776[0;39m <==    Updates: 0
2023-05-27 13:32:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671734935883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671755949346816[0;39m 生成今日电子书快照开始
2023-05-27 13:32:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671755949346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671755949346816[0;39m ==> Parameters: 
2023-05-27 13:32:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671755949346816[0;39m <==    Updates: 0
2023-05-27 13:32:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671755949346816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:32:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671776933449728[0;39m 生成今日电子书快照开始
2023-05-27 13:32:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671776933449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:32:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671776933449728[0;39m ==> Parameters: 
2023-05-27 13:32:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671776933449728[0;39m <==    Updates: 0
2023-05-27 13:32:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671776933449728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:33:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671797879803904[0;39m 生成今日电子书快照开始
2023-05-27 13:33:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671797879803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671797879803904[0;39m ==> Parameters: 
2023-05-27 13:33:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671797879803904[0;39m <==    Updates: 0
2023-05-27 13:33:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671797879803904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:33:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671818876489728[0;39m 生成今日电子书快照开始
2023-05-27 13:33:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671818876489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671818876489728[0;39m ==> Parameters: 
2023-05-27 13:33:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671818876489728[0;39m <==    Updates: 0
2023-05-27 13:33:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671818876489728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:33:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119671818880684032[0;39m 更新电子书下的文档数据开始
2023-05-27 13:33:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671818880684032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:33:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671818880684032[0;39m ==> Parameters: 
2023-05-27 13:33:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671818880684032[0;39m <==    Updates: 8
2023-05-27 13:33:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119671818880684032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:33:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671839801872384[0;39m 生成今日电子书快照开始
2023-05-27 13:33:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671839801872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671839801872384[0;39m ==> Parameters: 
2023-05-27 13:33:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671839801872384[0;39m <==    Updates: 0
2023-05-27 13:33:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671839801872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:33:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671860773392384[0;39m 生成今日电子书快照开始
2023-05-27 13:33:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671860773392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671860773392384[0;39m ==> Parameters: 
2023-05-27 13:33:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671860773392384[0;39m <==    Updates: 0
2023-05-27 13:33:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671860773392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:33:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671881740718080[0;39m 生成今日电子书快照开始
2023-05-27 13:33:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671881740718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671881740718080[0;39m ==> Parameters: 
2023-05-27 13:33:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671881740718080[0;39m <==    Updates: 0
2023-05-27 13:33:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671881740718080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:33:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671902720626688[0;39m 生成今日电子书快照开始
2023-05-27 13:33:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671902720626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671902720626688[0;39m ==> Parameters: 
2023-05-27 13:33:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671902720626688[0;39m <==    Updates: 0
2023-05-27 13:33:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671902720626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:33:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671923679563776[0;39m 生成今日电子书快照开始
2023-05-27 13:33:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671923679563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671923679563776[0;39m ==> Parameters: 
2023-05-27 13:33:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671923679563776[0;39m <==    Updates: 0
2023-05-27 13:33:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671923679563776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:33:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671944701415424[0;39m 生成今日电子书快照开始
2023-05-27 13:33:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671944701415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671944701415424[0;39m ==> Parameters: 
2023-05-27 13:33:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671944701415424[0;39m <==    Updates: 0
2023-05-27 13:33:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671944701415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:33:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119671944709804032[0;39m 更新电子书下的文档数据开始
2023-05-27 13:33:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671944709804032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:33:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671944709804032[0;39m ==> Parameters: 
2023-05-27 13:33:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119671944709804032[0;39m <==    Updates: 8
2023-05-27 13:33:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119671944709804032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:33:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671965643575296[0;39m 生成今日电子书快照开始
2023-05-27 13:33:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671965643575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671965643575296[0;39m ==> Parameters: 
2023-05-27 13:33:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671965643575296[0;39m <==    Updates: 0
2023-05-27 13:33:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671965643575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:33:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119671986623483904[0;39m 生成今日电子书快照开始
2023-05-27 13:33:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671986623483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671986623483904[0;39m ==> Parameters: 
2023-05-27 13:33:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119671986623483904[0;39m <==    Updates: 0
2023-05-27 13:33:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119671986623483904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:33:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672007565643776[0;39m 生成今日电子书快照开始
2023-05-27 13:33:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672007565643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672007565643776[0;39m ==> Parameters: 
2023-05-27 13:33:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672007565643776[0;39m <==    Updates: 0
2023-05-27 13:33:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672007565643776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:33:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672028570718208[0;39m 生成今日电子书快照开始
2023-05-27 13:33:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672028570718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:33:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672028570718208[0;39m ==> Parameters: 
2023-05-27 13:33:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672028570718208[0;39m <==    Updates: 0
2023-05-27 13:33:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672028570718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:34:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672049521266688[0;39m 生成今日电子书快照开始
2023-05-27 13:34:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672049521266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672049521266688[0;39m ==> Parameters: 
2023-05-27 13:34:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672049521266688[0;39m <==    Updates: 0
2023-05-27 13:34:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672049521266688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:34:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119672070505369600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:34:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672070505369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:34:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672070505369600[0;39m ==> Parameters: 
2023-05-27 13:34:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672070505369600[0;39m <==    Updates: 8
2023-05-27 13:34:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119672070505369600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:34:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672070509563904[0;39m 生成今日电子书快照开始
2023-05-27 13:34:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672070509563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672070509563904[0;39m ==> Parameters: 
2023-05-27 13:34:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672070509563904[0;39m <==    Updates: 0
2023-05-27 13:34:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672070509563904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:34:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672091510444032[0;39m 生成今日电子书快照开始
2023-05-27 13:34:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672091510444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672091510444032[0;39m ==> Parameters: 
2023-05-27 13:34:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672091510444032[0;39m <==    Updates: 0
2023-05-27 13:34:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672091510444032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:34:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672112427438080[0;39m 生成今日电子书快照开始
2023-05-27 13:34:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672112427438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672112427438080[0;39m ==> Parameters: 
2023-05-27 13:34:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672112427438080[0;39m <==    Updates: 0
2023-05-27 13:34:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672112427438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:34:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672133436706816[0;39m 生成今日电子书快照开始
2023-05-27 13:34:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672133436706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672133436706816[0;39m ==> Parameters: 
2023-05-27 13:34:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672133436706816[0;39m <==    Updates: 0
2023-05-27 13:34:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672133436706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:34:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672154374672384[0;39m 生成今日电子书快照开始
2023-05-27 13:34:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672154374672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672154374672384[0;39m ==> Parameters: 
2023-05-27 13:34:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672154374672384[0;39m <==    Updates: 0
2023-05-27 13:34:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672154374672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:34:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672175392329728[0;39m 生成今日电子书快照开始
2023-05-27 13:34:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672175392329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672175392329728[0;39m ==> Parameters: 
2023-05-27 13:34:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672175392329728[0;39m <==    Updates: 0
2023-05-27 13:34:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672175392329728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:34:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119672196355461120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:34:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672196355461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:34:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672196355461120[0;39m ==> Parameters: 
2023-05-27 13:34:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672196355461120[0;39m <==    Updates: 8
2023-05-27 13:34:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119672196355461120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:34:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672196363849728[0;39m 生成今日电子书快照开始
2023-05-27 13:34:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672196363849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672196363849728[0;39m ==> Parameters: 
2023-05-27 13:34:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672196363849728[0;39m <==    Updates: 0
2023-05-27 13:34:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672196363849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:34:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672217280843776[0;39m 生成今日电子书快照开始
2023-05-27 13:34:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672217280843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672217280843776[0;39m ==> Parameters: 
2023-05-27 13:34:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672217280843776[0;39m <==    Updates: 0
2023-05-27 13:34:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672217280843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:34:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672238273335296[0;39m 生成今日电子书快照开始
2023-05-27 13:34:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672238273335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672238273335296[0;39m ==> Parameters: 
2023-05-27 13:34:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672238273335296[0;39m <==    Updates: 0
2023-05-27 13:34:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672238273335296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:34:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672259282604032[0;39m 生成今日电子书快照开始
2023-05-27 13:34:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672259282604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672259282604032[0;39m ==> Parameters: 
2023-05-27 13:34:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672259282604032[0;39m <==    Updates: 0
2023-05-27 13:34:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672259282604032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:34:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672280249929728[0;39m 生成今日电子书快照开始
2023-05-27 13:34:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672280249929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:34:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672280249929728[0;39m ==> Parameters: 
2023-05-27 13:34:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672280249929728[0;39m <==    Updates: 0
2023-05-27 13:34:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672280249929728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672301192089600[0;39m 生成今日电子书快照开始
2023-05-27 13:35:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672301192089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672301192089600[0;39m ==> Parameters: 
2023-05-27 13:35:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672301192089600[0;39m <==    Updates: 0
2023-05-27 13:35:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672301192089600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:35:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672322192969728[0;39m 生成今日电子书快照开始
2023-05-27 13:35:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672322192969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672322192969728[0;39m ==> Parameters: 
2023-05-27 13:35:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672322192969728[0;39m <==    Updates: 0
2023-05-27 13:35:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672322192969728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119672322201358336[0;39m 更新电子书下的文档数据开始
2023-05-27 13:35:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672322201358336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:35:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672322201358336[0;39m ==> Parameters: 
2023-05-27 13:35:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672322201358336[0;39m <==    Updates: 8
2023-05-27 13:35:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119672322201358336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:35:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672343156101120[0;39m 生成今日电子书快照开始
2023-05-27 13:35:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672343156101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672343156101120[0;39m ==> Parameters: 
2023-05-27 13:35:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672343156101120[0;39m <==    Updates: 0
2023-05-27 13:35:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672343156101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672364140204032[0;39m 生成今日电子书快照开始
2023-05-27 13:35:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672364140204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672364140204032[0;39m ==> Parameters: 
2023-05-27 13:35:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672364140204032[0;39m <==    Updates: 0
2023-05-27 13:35:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672364140204032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672385094946816[0;39m 生成今日电子书快照开始
2023-05-27 13:35:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672385094946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672385094946816[0;39m ==> Parameters: 
2023-05-27 13:35:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672385094946816[0;39m <==    Updates: 0
2023-05-27 13:35:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672385094946816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672406045495296[0;39m 生成今日电子书快照开始
2023-05-27 13:35:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672406045495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672406045495296[0;39m ==> Parameters: 
2023-05-27 13:35:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672406045495296[0;39m <==    Updates: 0
2023-05-27 13:35:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672406045495296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:35:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672427054764032[0;39m 生成今日电子书快照开始
2023-05-27 13:35:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672427054764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672427054764032[0;39m ==> Parameters: 
2023-05-27 13:35:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672427054764032[0;39m <==    Updates: 0
2023-05-27 13:35:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672427054764032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672448026284032[0;39m 生成今日电子书快照开始
2023-05-27 13:35:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672448026284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672448026284032[0;39m ==> Parameters: 
2023-05-27 13:35:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672448026284032[0;39m <==    Updates: 0
2023-05-27 13:35:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672448026284032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119672448034672640[0;39m 更新电子书下的文档数据开始
2023-05-27 13:35:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672448034672640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:35:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672448034672640[0;39m ==> Parameters: 
2023-05-27 13:35:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672448034672640[0;39m <==    Updates: 8
2023-05-27 13:35:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119672448034672640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:35:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672468939083776[0;39m 生成今日电子书快照开始
2023-05-27 13:35:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672468939083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672468939083776[0;39m ==> Parameters: 
2023-05-27 13:35:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672468939083776[0;39m <==    Updates: 0
2023-05-27 13:35:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672468939083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672489948352512[0;39m 生成今日电子书快照开始
2023-05-27 13:35:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672489948352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672489948352512[0;39m ==> Parameters: 
2023-05-27 13:35:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672489948352512[0;39m <==    Updates: 0
2023-05-27 13:35:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672489948352512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:35:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672510915678208[0;39m 生成今日电子书快照开始
2023-05-27 13:35:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672510915678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672510915678208[0;39m ==> Parameters: 
2023-05-27 13:35:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672510915678208[0;39m <==    Updates: 0
2023-05-27 13:35:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672510915678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:35:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672531866226688[0;39m 生成今日电子书快照开始
2023-05-27 13:35:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672531866226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:35:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672531866226688[0;39m ==> Parameters: 
2023-05-27 13:35:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672531866226688[0;39m <==    Updates: 0
2023-05-27 13:35:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672531866226688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:36:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672552875495424[0;39m 生成今日电子书快照开始
2023-05-27 13:36:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672552875495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672552875495424[0;39m ==> Parameters: 
2023-05-27 13:36:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672552875495424[0;39m <==    Updates: 0
2023-05-27 13:36:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672552875495424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:36:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119672573805072384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:36:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672573805072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:36:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672573805072384[0;39m ==> Parameters: 
2023-05-27 13:36:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672573805072384[0;39m <==    Updates: 8
2023-05-27 13:36:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119672573805072384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:36:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672573813460992[0;39m 生成今日电子书快照开始
2023-05-27 13:36:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672573813460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672573813460992[0;39m ==> Parameters: 
2023-05-27 13:36:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672573813460992[0;39m <==    Updates: 0
2023-05-27 13:36:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672573813460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:36:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672594764009472[0;39m 生成今日电子书快照开始
2023-05-27 13:36:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672594764009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672594764009472[0;39m ==> Parameters: 
2023-05-27 13:36:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672594764009472[0;39m <==    Updates: 0
2023-05-27 13:36:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672594764009472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:36:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672615756500992[0;39m 生成今日电子书快照开始
2023-05-27 13:36:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672615756500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672615756500992[0;39m ==> Parameters: 
2023-05-27 13:36:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672615756500992[0;39m <==    Updates: 0
2023-05-27 13:36:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672615756500992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:36:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672636757381120[0;39m 生成今日电子书快照开始
2023-05-27 13:36:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672636757381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672636757381120[0;39m ==> Parameters: 
2023-05-27 13:36:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672636757381120[0;39m <==    Updates: 0
2023-05-27 13:36:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672636757381120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:36:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672657682763776[0;39m 生成今日电子书快照开始
2023-05-27 13:36:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672657682763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672657682763776[0;39m ==> Parameters: 
2023-05-27 13:36:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672657682763776[0;39m <==    Updates: 0
2023-05-27 13:36:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672657682763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:36:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672678679449600[0;39m 生成今日电子书快照开始
2023-05-27 13:36:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672678679449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672678679449600[0;39m ==> Parameters: 
2023-05-27 13:36:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672678679449600[0;39m <==    Updates: 0
2023-05-27 13:36:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672678679449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:36:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119672699629998080[0;39m 更新电子书下的文档数据开始
2023-05-27 13:36:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672699629998080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:36:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672699629998080[0;39m ==> Parameters: 
2023-05-27 13:36:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672699629998080[0;39m <==    Updates: 8
2023-05-27 13:36:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119672699629998080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:36:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672699638386688[0;39m 生成今日电子书快照开始
2023-05-27 13:36:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672699638386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672699638386688[0;39m ==> Parameters: 
2023-05-27 13:36:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672699638386688[0;39m <==    Updates: 0
2023-05-27 13:36:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672699638386688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:36:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672720643461120[0;39m 生成今日电子书快照开始
2023-05-27 13:36:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672720643461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672720643461120[0;39m ==> Parameters: 
2023-05-27 13:36:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672720643461120[0;39m <==    Updates: 0
2023-05-27 13:36:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672720643461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:36:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672741598203904[0;39m 生成今日电子书快照开始
2023-05-27 13:36:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672741598203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672741598203904[0;39m ==> Parameters: 
2023-05-27 13:36:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672741598203904[0;39m <==    Updates: 0
2023-05-27 13:36:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672741598203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:36:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672762536169472[0;39m 生成今日电子书快照开始
2023-05-27 13:36:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672762536169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672762536169472[0;39m ==> Parameters: 
2023-05-27 13:36:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672762536169472[0;39m <==    Updates: 0
2023-05-27 13:36:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672762536169472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:36:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672783520272384[0;39m 生成今日电子书快照开始
2023-05-27 13:36:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672783520272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:36:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672783520272384[0;39m ==> Parameters: 
2023-05-27 13:36:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672783520272384[0;39m <==    Updates: 0
2023-05-27 13:36:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672783520272384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:37:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672804537929728[0;39m 生成今日电子书快照开始
2023-05-27 13:37:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672804537929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672804537929728[0;39m ==> Parameters: 
2023-05-27 13:37:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672804537929728[0;39m <==    Updates: 0
2023-05-27 13:37:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672804537929728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:37:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672825484283904[0;39m 生成今日电子书快照开始
2023-05-27 13:37:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672825484283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672825484283904[0;39m ==> Parameters: 
2023-05-27 13:37:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672825484283904[0;39m <==    Updates: 0
2023-05-27 13:37:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672825484283904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:37:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119672825496866816[0;39m 更新电子书下的文档数据开始
2023-05-27 13:37:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672825496866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:37:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672825496866816[0;39m ==> Parameters: 
2023-05-27 13:37:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672825496866816[0;39m <==    Updates: 8
2023-05-27 13:37:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119672825496866816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:37:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672846434832384[0;39m 生成今日电子书快照开始
2023-05-27 13:37:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672846434832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672846434832384[0;39m ==> Parameters: 
2023-05-27 13:37:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672846434832384[0;39m <==    Updates: 0
2023-05-27 13:37:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672846434832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:37:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672867406352384[0;39m 生成今日电子书快照开始
2023-05-27 13:37:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672867406352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672867406352384[0;39m ==> Parameters: 
2023-05-27 13:37:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672867406352384[0;39m <==    Updates: 0
2023-05-27 13:37:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672867406352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:37:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672888407232512[0;39m 生成今日电子书快照开始
2023-05-27 13:37:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672888407232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672888407232512[0;39m ==> Parameters: 
2023-05-27 13:37:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672888407232512[0;39m <==    Updates: 0
2023-05-27 13:37:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672888407232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:37:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672909349392384[0;39m 生成今日电子书快照开始
2023-05-27 13:37:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672909349392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672909349392384[0;39m ==> Parameters: 
2023-05-27 13:37:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672909349392384[0;39m <==    Updates: 0
2023-05-27 13:37:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672909349392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:37:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672930358661120[0;39m 生成今日电子书快照开始
2023-05-27 13:37:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672930358661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672930358661120[0;39m ==> Parameters: 
2023-05-27 13:37:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672930358661120[0;39m <==    Updates: 0
2023-05-27 13:37:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672930358661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:37:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672951300820992[0;39m 生成今日电子书快照开始
2023-05-27 13:37:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672951300820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672951300820992[0;39m ==> Parameters: 
2023-05-27 13:37:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672951300820992[0;39m <==    Updates: 0
2023-05-27 13:37:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672951300820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:37:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119672951309209600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:37:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672951309209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:37:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672951309209600[0;39m ==> Parameters: 
2023-05-27 13:37:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119672951309209600[0;39m <==    Updates: 8
2023-05-27 13:37:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119672951309209600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:37:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672972289118208[0;39m 生成今日电子书快照开始
2023-05-27 13:37:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672972289118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672972289118208[0;39m ==> Parameters: 
2023-05-27 13:37:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672972289118208[0;39m <==    Updates: 0
2023-05-27 13:37:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672972289118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:37:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119672993248055296[0;39m 生成今日电子书快照开始
2023-05-27 13:37:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672993248055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672993248055296[0;39m ==> Parameters: 
2023-05-27 13:37:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119672993248055296[0;39m <==    Updates: 0
2023-05-27 13:37:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119672993248055296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:37:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673014219575296[0;39m 生成今日电子书快照开始
2023-05-27 13:37:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673014219575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673014219575296[0;39m ==> Parameters: 
2023-05-27 13:37:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673014219575296[0;39m <==    Updates: 0
2023-05-27 13:37:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673014219575296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:37:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673035203678208[0;39m 生成今日电子书快照开始
2023-05-27 13:37:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673035203678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:37:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673035203678208[0;39m ==> Parameters: 
2023-05-27 13:37:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673035203678208[0;39m <==    Updates: 0
2023-05-27 13:37:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673035203678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:38:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673056158420992[0;39m 生成今日电子书快照开始
2023-05-27 13:38:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673056158420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673056158420992[0;39m ==> Parameters: 
2023-05-27 13:38:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673056158420992[0;39m <==    Updates: 0
2023-05-27 13:38:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673056158420992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:38:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673077134135296[0;39m 生成今日电子书快照开始
2023-05-27 13:38:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673077134135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673077134135296[0;39m ==> Parameters: 
2023-05-27 13:38:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673077134135296[0;39m <==    Updates: 0
2023-05-27 13:38:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673077134135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:38:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119673077142523904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673077142523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673077142523904[0;39m ==> Parameters: 
2023-05-27 13:38:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673077142523904[0;39m <==    Updates: 8
2023-05-27 13:38:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119673077142523904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:38:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673098084683776[0;39m 生成今日电子书快照开始
2023-05-27 13:38:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673098084683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673098084683776[0;39m ==> Parameters: 
2023-05-27 13:38:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673098084683776[0;39m <==    Updates: 0
2023-05-27 13:38:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673098084683776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:38:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673119077175296[0;39m 生成今日电子书快照开始
2023-05-27 13:38:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673119077175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673119077175296[0;39m ==> Parameters: 
2023-05-27 13:38:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673119077175296[0;39m <==    Updates: 0
2023-05-27 13:38:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673119077175296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:38:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673140031918080[0;39m 生成今日电子书快照开始
2023-05-27 13:38:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673140031918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673140031918080[0;39m ==> Parameters: 
2023-05-27 13:38:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673140031918080[0;39m <==    Updates: 0
2023-05-27 13:38:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673140031918080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:38:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673160995049472[0;39m 生成今日电子书快照开始
2023-05-27 13:38:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673160995049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673160995049472[0;39m ==> Parameters: 
2023-05-27 13:38:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673160995049472[0;39m <==    Updates: 0
2023-05-27 13:38:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673160995049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:38:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673182000123904[0;39m 生成今日电子书快照开始
2023-05-27 13:38:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673182000123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673182000123904[0;39m ==> Parameters: 
2023-05-27 13:38:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673182000123904[0;39m <==    Updates: 0
2023-05-27 13:38:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673182000123904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:38:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119673202946478080[0;39m 更新电子书下的文档数据开始
2023-05-27 13:38:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673202946478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:38:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673202946478080[0;39m ==> Parameters: 
2023-05-27 13:38:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673202946478080[0;39m <==    Updates: 8
2023-05-27 13:38:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119673202946478080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:38:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673202954866688[0;39m 生成今日电子书快照开始
2023-05-27 13:38:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673202954866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673202954866688[0;39m ==> Parameters: 
2023-05-27 13:38:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673202954866688[0;39m <==    Updates: 0
2023-05-27 13:38:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673202954866688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:38:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673223917998080[0;39m 生成今日电子书快照开始
2023-05-27 13:38:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673223917998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673223917998080[0;39m ==> Parameters: 
2023-05-27 13:38:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673223917998080[0;39m <==    Updates: 0
2023-05-27 13:38:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673223917998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:38:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673244897906688[0;39m 生成今日电子书快照开始
2023-05-27 13:38:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673244897906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673244897906688[0;39m ==> Parameters: 
2023-05-27 13:38:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673244897906688[0;39m <==    Updates: 0
2023-05-27 13:38:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673244897906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:38:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673265907175424[0;39m 生成今日电子书快照开始
2023-05-27 13:38:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673265907175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673265907175424[0;39m ==> Parameters: 
2023-05-27 13:38:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673265907175424[0;39m <==    Updates: 0
2023-05-27 13:38:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673265907175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:38:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673286849335296[0;39m 生成今日电子书快照开始
2023-05-27 13:38:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673286849335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:38:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673286849335296[0;39m ==> Parameters: 
2023-05-27 13:38:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673286849335296[0;39m <==    Updates: 0
2023-05-27 13:38:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673286849335296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673307846021120[0;39m 生成今日电子书快照开始
2023-05-27 13:39:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673307846021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673307846021120[0;39m ==> Parameters: 
2023-05-27 13:39:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673307846021120[0;39m <==    Updates: 0
2023-05-27 13:39:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673307846021120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:39:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119673328813346816[0;39m 更新电子书下的文档数据开始
2023-05-27 13:39:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673328813346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:39:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673328813346816[0;39m ==> Parameters: 
2023-05-27 13:39:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673328813346816[0;39m <==    Updates: 8
2023-05-27 13:39:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119673328813346816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:39:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673328821735424[0;39m 生成今日电子书快照开始
2023-05-27 13:39:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673328821735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673328821735424[0;39m ==> Parameters: 
2023-05-27 13:39:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673328821735424[0;39m <==    Updates: 0
2023-05-27 13:39:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673328821735424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:39:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673349759700992[0;39m 生成今日电子书快照开始
2023-05-27 13:39:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673349759700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673349759700992[0;39m ==> Parameters: 
2023-05-27 13:39:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673349759700992[0;39m <==    Updates: 0
2023-05-27 13:39:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673349759700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673370756386816[0;39m 生成今日电子书快照开始
2023-05-27 13:39:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673370756386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673370756386816[0;39m ==> Parameters: 
2023-05-27 13:39:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673370756386816[0;39m <==    Updates: 0
2023-05-27 13:39:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673370756386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673391698546688[0;39m 生成今日电子书快照开始
2023-05-27 13:39:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673391698546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673391698546688[0;39m ==> Parameters: 
2023-05-27 13:39:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673391698546688[0;39m <==    Updates: 0
2023-05-27 13:39:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673391698546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673412707815424[0;39m 生成今日电子书快照开始
2023-05-27 13:39:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673412707815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673412707815424[0;39m ==> Parameters: 
2023-05-27 13:39:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673412707815424[0;39m <==    Updates: 0
2023-05-27 13:39:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673412707815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673433670946816[0;39m 生成今日电子书快照开始
2023-05-27 13:39:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673433670946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673433670946816[0;39m ==> Parameters: 
2023-05-27 13:39:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673433670946816[0;39m <==    Updates: 0
2023-05-27 13:39:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673433670946816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119673454625689600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:39:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673454625689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:39:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673454625689600[0;39m ==> Parameters: 
2023-05-27 13:39:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673454625689600[0;39m <==    Updates: 8
2023-05-27 13:39:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119673454625689600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:39:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673454634078208[0;39m 生成今日电子书快照开始
2023-05-27 13:39:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673454634078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673454634078208[0;39m ==> Parameters: 
2023-05-27 13:39:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673454634078208[0;39m <==    Updates: 0
2023-05-27 13:39:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673454634078208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:39:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673475576238080[0;39m 生成今日电子书快照开始
2023-05-27 13:39:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673475576238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673475576238080[0;39m ==> Parameters: 
2023-05-27 13:39:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673475576238080[0;39m <==    Updates: 0
2023-05-27 13:39:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673475576238080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673496539369472[0;39m 生成今日电子书快照开始
2023-05-27 13:39:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673496539369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673496539369472[0;39m ==> Parameters: 
2023-05-27 13:39:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673496539369472[0;39m <==    Updates: 0
2023-05-27 13:39:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673496539369472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673517552832512[0;39m 生成今日电子书快照开始
2023-05-27 13:39:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673517552832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673517552832512[0;39m ==> Parameters: 
2023-05-27 13:39:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673517552832512[0;39m <==    Updates: 0
2023-05-27 13:39:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673517552832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:39:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673538503380992[0;39m 生成今日电子书快照开始
2023-05-27 13:39:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673538503380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:39:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673538503380992[0;39m ==> Parameters: 
2023-05-27 13:39:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673538503380992[0;39m <==    Updates: 0
2023-05-27 13:39:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673538503380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673559466512384[0;39m 生成今日电子书快照开始
2023-05-27 13:40:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673559466512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673559466512384[0;39m ==> Parameters: 
2023-05-27 13:40:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673559466512384[0;39m <==    Updates: 0
2023-05-27 13:40:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673559466512384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673580488364032[0;39m 生成今日电子书快照开始
2023-05-27 13:40:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673580488364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673580488364032[0;39m ==> Parameters: 
2023-05-27 13:40:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673580488364032[0;39m <==    Updates: 0
2023-05-27 13:40:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673580488364032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:40:05.020 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119673580505141248[0;39m 更新电子书下的文档数据开始
2023-05-27 13:40:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673580505141248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:40:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673580505141248[0;39m ==> Parameters: 
2023-05-27 13:40:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673580505141248[0;39m <==    Updates: 8
2023-05-27 13:40:05.023 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119673580505141248[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2023-05-27 13:40:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673601451495424[0;39m 生成今日电子书快照开始
2023-05-27 13:40:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673601451495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673601451495424[0;39m ==> Parameters: 
2023-05-27 13:40:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673601451495424[0;39m <==    Updates: 0
2023-05-27 13:40:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673601451495424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673622376878080[0;39m 生成今日电子书快照开始
2023-05-27 13:40:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673622376878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673622376878080[0;39m ==> Parameters: 
2023-05-27 13:40:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673622376878080[0;39m <==    Updates: 0
2023-05-27 13:40:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673622376878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673643352592384[0;39m 生成今日电子书快照开始
2023-05-27 13:40:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673643352592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673643352592384[0;39m ==> Parameters: 
2023-05-27 13:40:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673643352592384[0;39m <==    Updates: 0
2023-05-27 13:40:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673643352592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673664349278208[0;39m 生成今日电子书快照开始
2023-05-27 13:40:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673664349278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673664349278208[0;39m ==> Parameters: 
2023-05-27 13:40:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673664349278208[0;39m <==    Updates: 0
2023-05-27 13:40:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673664349278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673685287243776[0;39m 生成今日电子书快照开始
2023-05-27 13:40:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673685287243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673685287243776[0;39m ==> Parameters: 
2023-05-27 13:40:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673685287243776[0;39m <==    Updates: 0
2023-05-27 13:40:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673685287243776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:40:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119673706300706816[0;39m 更新电子书下的文档数据开始
2023-05-27 13:40:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673706300706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:40:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673706300706816[0;39m ==> Parameters: 
2023-05-27 13:40:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673706300706816[0;39m <==    Updates: 8
2023-05-27 13:40:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119673706300706816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:40:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673706309095424[0;39m 生成今日电子书快照开始
2023-05-27 13:40:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673706309095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673706309095424[0;39m ==> Parameters: 
2023-05-27 13:40:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673706309095424[0;39m <==    Updates: 0
2023-05-27 13:40:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673706309095424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673727247060992[0;39m 生成今日电子书快照开始
2023-05-27 13:40:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673727247060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673727247060992[0;39m ==> Parameters: 
2023-05-27 13:40:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673727247060992[0;39m <==    Updates: 0
2023-05-27 13:40:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673727247060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673748214386688[0;39m 生成今日电子书快照开始
2023-05-27 13:40:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673748214386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673748214386688[0;39m ==> Parameters: 
2023-05-27 13:40:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673748214386688[0;39m <==    Updates: 0
2023-05-27 13:40:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673748214386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673769181712384[0;39m 生成今日电子书快照开始
2023-05-27 13:40:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673769181712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673769181712384[0;39m ==> Parameters: 
2023-05-27 13:40:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673769181712384[0;39m <==    Updates: 0
2023-05-27 13:40:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673769181712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:40:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673790195175424[0;39m 生成今日电子书快照开始
2023-05-27 13:40:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673790195175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:40:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673790195175424[0;39m ==> Parameters: 
2023-05-27 13:40:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673790195175424[0;39m <==    Updates: 0
2023-05-27 13:40:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673790195175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673811116363776[0;39m 生成今日电子书快照开始
2023-05-27 13:41:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673811116363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673811116363776[0;39m ==> Parameters: 
2023-05-27 13:41:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673811116363776[0;39m <==    Updates: 0
2023-05-27 13:41:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673811116363776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:41:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673832138215424[0;39m 生成今日电子书快照开始
2023-05-27 13:41:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673832138215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673832138215424[0;39m ==> Parameters: 
2023-05-27 13:41:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673832138215424[0;39m <==    Updates: 0
2023-05-27 13:41:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673832138215424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119673832146604032[0;39m 更新电子书下的文档数据开始
2023-05-27 13:41:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673832146604032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:41:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673832146604032[0;39m ==> Parameters: 
2023-05-27 13:41:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673832146604032[0;39m <==    Updates: 8
2023-05-27 13:41:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119673832146604032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:41:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673853059403776[0;39m 生成今日电子书快照开始
2023-05-27 13:41:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673853059403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673853059403776[0;39m ==> Parameters: 
2023-05-27 13:41:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673853059403776[0;39m <==    Updates: 0
2023-05-27 13:41:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673853059403776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:41:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673874047700992[0;39m 生成今日电子书快照开始
2023-05-27 13:41:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673874047700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673874047700992[0;39m ==> Parameters: 
2023-05-27 13:41:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673874047700992[0;39m <==    Updates: 0
2023-05-27 13:41:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673874047700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673895006638080[0;39m 生成今日电子书快照开始
2023-05-27 13:41:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673895006638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673895006638080[0;39m ==> Parameters: 
2023-05-27 13:41:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673895006638080[0;39m <==    Updates: 0
2023-05-27 13:41:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673895006638080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673915999129600[0;39m 生成今日电子书快照开始
2023-05-27 13:41:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673915999129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673915999129600[0;39m ==> Parameters: 
2023-05-27 13:41:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673915999129600[0;39m <==    Updates: 0
2023-05-27 13:41:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673915999129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673936970649600[0;39m 生成今日电子书快照开始
2023-05-27 13:41:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673936970649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673936970649600[0;39m ==> Parameters: 
2023-05-27 13:41:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673936970649600[0;39m <==    Updates: 0
2023-05-27 13:41:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673936970649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673957929586688[0;39m 生成今日电子书快照开始
2023-05-27 13:41:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673957929586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673957929586688[0;39m ==> Parameters: 
2023-05-27 13:41:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673957929586688[0;39m <==    Updates: 0
2023-05-27 13:41:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673957929586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119673957937975296[0;39m 更新电子书下的文档数据开始
2023-05-27 13:41:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673957937975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:41:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673957937975296[0;39m ==> Parameters: 
2023-05-27 13:41:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119673957937975296[0;39m <==    Updates: 8
2023-05-27 13:41:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119673957937975296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:41:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673978930466816[0;39m 生成今日电子书快照开始
2023-05-27 13:41:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673978930466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673978930466816[0;39m ==> Parameters: 
2023-05-27 13:41:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673978930466816[0;39m <==    Updates: 0
2023-05-27 13:41:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673978930466816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:41:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119673999897792512[0;39m 生成今日电子书快照开始
2023-05-27 13:41:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673999897792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673999897792512[0;39m ==> Parameters: 
2023-05-27 13:41:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119673999897792512[0;39m <==    Updates: 0
2023-05-27 13:41:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119673999897792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674020877701120[0;39m 生成今日电子书快照开始
2023-05-27 13:41:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674020877701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674020877701120[0;39m ==> Parameters: 
2023-05-27 13:41:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674020877701120[0;39m <==    Updates: 0
2023-05-27 13:41:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674020877701120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:41:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674041832443904[0;39m 生成今日电子书快照开始
2023-05-27 13:41:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674041832443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:41:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674041832443904[0;39m ==> Parameters: 
2023-05-27 13:41:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674041832443904[0;39m <==    Updates: 0
2023-05-27 13:41:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674041832443904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:42:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674062791380992[0;39m 生成今日电子书快照开始
2023-05-27 13:42:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674062791380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674062791380992[0;39m ==> Parameters: 
2023-05-27 13:42:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674062791380992[0;39m <==    Updates: 0
2023-05-27 13:42:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674062791380992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:42:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119674083796455424[0;39m 更新电子书下的文档数据开始
2023-05-27 13:42:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674083796455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:42:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674083796455424[0;39m ==> Parameters: 
2023-05-27 13:42:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674083796455424[0;39m <==    Updates: 8
2023-05-27 13:42:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119674083796455424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:42:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674083800649728[0;39m 生成今日电子书快照开始
2023-05-27 13:42:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674083800649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674083800649728[0;39m ==> Parameters: 
2023-05-27 13:42:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674083800649728[0;39m <==    Updates: 0
2023-05-27 13:42:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674083800649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:42:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674104726032384[0;39m 生成今日电子书快照开始
2023-05-27 13:42:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674104726032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674104726032384[0;39m ==> Parameters: 
2023-05-27 13:42:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674104726032384[0;39m <==    Updates: 0
2023-05-27 13:42:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674104726032384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:42:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674125705940992[0;39m 生成今日电子书快照开始
2023-05-27 13:42:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674125705940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674125705940992[0;39m ==> Parameters: 
2023-05-27 13:42:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674125705940992[0;39m <==    Updates: 0
2023-05-27 13:42:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674125705940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:42:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674146669072384[0;39m 生成今日电子书快照开始
2023-05-27 13:42:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674146669072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674146669072384[0;39m ==> Parameters: 
2023-05-27 13:42:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674146669072384[0;39m <==    Updates: 0
2023-05-27 13:42:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674146669072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:42:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674167640592384[0;39m 生成今日电子书快照开始
2023-05-27 13:42:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674167640592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674167640592384[0;39m ==> Parameters: 
2023-05-27 13:42:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674167640592384[0;39m <==    Updates: 0
2023-05-27 13:42:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674167640592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:42:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674188628889600[0;39m 生成今日电子书快照开始
2023-05-27 13:42:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674188628889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674188628889600[0;39m ==> Parameters: 
2023-05-27 13:42:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674188628889600[0;39m <==    Updates: 0
2023-05-27 13:42:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674188628889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:42:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674209579438080[0;39m 生成今日电子书快照开始
2023-05-27 13:42:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674209579438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674209579438080[0;39m ==> Parameters: 
2023-05-27 13:42:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674209579438080[0;39m <==    Updates: 0
2023-05-27 13:42:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674209579438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:42:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119674209587826688[0;39m 更新电子书下的文档数据开始
2023-05-27 13:42:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674209587826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:42:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674209587826688[0;39m ==> Parameters: 
2023-05-27 13:42:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674209587826688[0;39m <==    Updates: 8
2023-05-27 13:42:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119674209587826688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:42:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674230597095424[0;39m 生成今日电子书快照开始
2023-05-27 13:42:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674230597095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674230597095424[0;39m ==> Parameters: 
2023-05-27 13:42:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674230597095424[0;39m <==    Updates: 0
2023-05-27 13:42:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674230597095424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:42:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674251560226816[0;39m 生成今日电子书快照开始
2023-05-27 13:42:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674251560226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674251560226816[0;39m ==> Parameters: 
2023-05-27 13:42:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674251560226816[0;39m <==    Updates: 0
2023-05-27 13:42:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674251560226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:42:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674272523358208[0;39m 生成今日电子书快照开始
2023-05-27 13:42:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674272523358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674272523358208[0;39m ==> Parameters: 
2023-05-27 13:42:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674272523358208[0;39m <==    Updates: 0
2023-05-27 13:42:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674272523358208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:42:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674293490683904[0;39m 生成今日电子书快照开始
2023-05-27 13:42:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674293490683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:42:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674293490683904[0;39m ==> Parameters: 
2023-05-27 13:42:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674293490683904[0;39m <==    Updates: 0
2023-05-27 13:42:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674293490683904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674314432843776[0;39m 生成今日电子书快照开始
2023-05-27 13:43:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674314432843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674314432843776[0;39m ==> Parameters: 
2023-05-27 13:43:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674314432843776[0;39m <==    Updates: 0
2023-05-27 13:43:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674314432843776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:43:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674335425335296[0;39m 生成今日电子书快照开始
2023-05-27 13:43:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674335425335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674335425335296[0;39m ==> Parameters: 
2023-05-27 13:43:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674335425335296[0;39m <==    Updates: 0
2023-05-27 13:43:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674335425335296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119674335433723904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:43:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674335433723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:43:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674335433723904[0;39m ==> Parameters: 
2023-05-27 13:43:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674335433723904[0;39m <==    Updates: 8
2023-05-27 13:43:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119674335433723904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:43:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674356380078080[0;39m 生成今日电子书快照开始
2023-05-27 13:43:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674356380078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674356380078080[0;39m ==> Parameters: 
2023-05-27 13:43:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674356380078080[0;39m <==    Updates: 0
2023-05-27 13:43:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674356380078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674377364180992[0;39m 生成今日电子书快照开始
2023-05-27 13:43:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674377364180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674377364180992[0;39m ==> Parameters: 
2023-05-27 13:43:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674377364180992[0;39m <==    Updates: 0
2023-05-27 13:43:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674377364180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674398327312384[0;39m 生成今日电子书快照开始
2023-05-27 13:43:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674398327312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674398327312384[0;39m ==> Parameters: 
2023-05-27 13:43:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674398327312384[0;39m <==    Updates: 0
2023-05-27 13:43:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674398327312384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674419344969728[0;39m 生成今日电子书快照开始
2023-05-27 13:43:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674419344969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674419344969728[0;39m ==> Parameters: 
2023-05-27 13:43:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674419344969728[0;39m <==    Updates: 0
2023-05-27 13:43:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674419344969728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674440274546688[0;39m 生成今日电子书快照开始
2023-05-27 13:43:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674440274546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674440274546688[0;39m ==> Parameters: 
2023-05-27 13:43:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674440274546688[0;39m <==    Updates: 0
2023-05-27 13:43:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674440274546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119674461241872384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:43:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674461241872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:43:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674461241872384[0;39m ==> Parameters: 
2023-05-27 13:43:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674461241872384[0;39m <==    Updates: 8
2023-05-27 13:43:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119674461241872384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:43:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674461250260992[0;39m 生成今日电子书快照开始
2023-05-27 13:43:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674461250260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674461250260992[0;39m ==> Parameters: 
2023-05-27 13:43:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674461250260992[0;39m <==    Updates: 0
2023-05-27 13:43:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674461250260992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:43:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674482230169600[0;39m 生成今日电子书快照开始
2023-05-27 13:43:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674482230169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674482230169600[0;39m ==> Parameters: 
2023-05-27 13:43:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674482230169600[0;39m <==    Updates: 0
2023-05-27 13:43:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674482230169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674503226855424[0;39m 生成今日电子书快照开始
2023-05-27 13:43:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674503226855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674503226855424[0;39m ==> Parameters: 
2023-05-27 13:43:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674503226855424[0;39m <==    Updates: 0
2023-05-27 13:43:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674503226855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674524194181120[0;39m 生成今日电子书快照开始
2023-05-27 13:43:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674524194181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674524194181120[0;39m ==> Parameters: 
2023-05-27 13:43:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674524194181120[0;39m <==    Updates: 0
2023-05-27 13:43:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674524194181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:43:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674545132146688[0;39m 生成今日电子书快照开始
2023-05-27 13:43:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674545132146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:43:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674545132146688[0;39m ==> Parameters: 
2023-05-27 13:43:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674545132146688[0;39m <==    Updates: 0
2023-05-27 13:43:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674545132146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674566091083776[0;39m 生成今日电子书快照开始
2023-05-27 13:44:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674566091083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674566091083776[0;39m ==> Parameters: 
2023-05-27 13:44:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674566091083776[0;39m <==    Updates: 0
2023-05-27 13:44:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674566091083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119674587104546816[0;39m 更新电子书下的文档数据开始
2023-05-27 13:44:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674587104546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:44:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674587104546816[0;39m ==> Parameters: 
2023-05-27 13:44:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674587104546816[0;39m <==    Updates: 8
2023-05-27 13:44:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119674587104546816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:44:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674587112935424[0;39m 生成今日电子书快照开始
2023-05-27 13:44:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674587112935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674587112935424[0;39m ==> Parameters: 
2023-05-27 13:44:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674587112935424[0;39m <==    Updates: 0
2023-05-27 13:44:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674587112935424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:44:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674608063483904[0;39m 生成今日电子书快照开始
2023-05-27 13:44:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674608063483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674608063483904[0;39m ==> Parameters: 
2023-05-27 13:44:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674608063483904[0;39m <==    Updates: 0
2023-05-27 13:44:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674608063483904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:44:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674629039198208[0;39m 生成今日电子书快照开始
2023-05-27 13:44:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674629039198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674629039198208[0;39m ==> Parameters: 
2023-05-27 13:44:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674629039198208[0;39m <==    Updates: 0
2023-05-27 13:44:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674629039198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674650035884032[0;39m 生成今日电子书快照开始
2023-05-27 13:44:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674650035884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674650035884032[0;39m ==> Parameters: 
2023-05-27 13:44:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674650035884032[0;39m <==    Updates: 0
2023-05-27 13:44:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674650035884032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674670982238208[0;39m 生成今日电子书快照开始
2023-05-27 13:44:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674670982238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674670982238208[0;39m ==> Parameters: 
2023-05-27 13:44:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674670982238208[0;39m <==    Updates: 0
2023-05-27 13:44:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674670982238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674691949563904[0;39m 生成今日电子书快照开始
2023-05-27 13:44:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674691949563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674691949563904[0;39m ==> Parameters: 
2023-05-27 13:44:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674691949563904[0;39m <==    Updates: 0
2023-05-27 13:44:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674691949563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119674712942055424[0;39m 更新电子书下的文档数据开始
2023-05-27 13:44:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674712942055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:44:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674712942055424[0;39m ==> Parameters: 
2023-05-27 13:44:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674712942055424[0;39m <==    Updates: 8
2023-05-27 13:44:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119674712942055424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:44:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674712950444032[0;39m 生成今日电子书快照开始
2023-05-27 13:44:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674712950444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674712950444032[0;39m ==> Parameters: 
2023-05-27 13:44:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674712950444032[0;39m <==    Updates: 0
2023-05-27 13:44:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674712950444032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674733884215296[0;39m 生成今日电子书快照开始
2023-05-27 13:44:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674733884215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674733884215296[0;39m ==> Parameters: 
2023-05-27 13:44:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674733884215296[0;39m <==    Updates: 0
2023-05-27 13:44:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674733884215296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674754855735296[0;39m 生成今日电子书快照开始
2023-05-27 13:44:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674754855735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674754855735296[0;39m ==> Parameters: 
2023-05-27 13:44:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674754855735296[0;39m <==    Updates: 0
2023-05-27 13:44:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674754855735296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:44:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674775831449600[0;39m 生成今日电子书快照开始
2023-05-27 13:44:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674775831449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674775831449600[0;39m ==> Parameters: 
2023-05-27 13:44:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674775831449600[0;39m <==    Updates: 0
2023-05-27 13:44:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674775831449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:44:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674796777803776[0;39m 生成今日电子书快照开始
2023-05-27 13:44:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674796777803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:44:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674796777803776[0;39m ==> Parameters: 
2023-05-27 13:44:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674796777803776[0;39m <==    Updates: 0
2023-05-27 13:44:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674796777803776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:45:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674817799655424[0;39m 生成今日电子书快照开始
2023-05-27 13:45:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674817799655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674817799655424[0;39m ==> Parameters: 
2023-05-27 13:45:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674817799655424[0;39m <==    Updates: 0
2023-05-27 13:45:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674817799655424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:45:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119674838741815296[0;39m 更新电子书下的文档数据开始
2023-05-27 13:45:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674838741815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:45:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674838741815296[0;39m ==> Parameters: 
2023-05-27 13:45:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674838741815296[0;39m <==    Updates: 8
2023-05-27 13:45:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119674838741815296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:45:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674838750203904[0;39m 生成今日电子书快照开始
2023-05-27 13:45:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674838750203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674838750203904[0;39m ==> Parameters: 
2023-05-27 13:45:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674838750203904[0;39m <==    Updates: 0
2023-05-27 13:45:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674838750203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:45:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674859683975168[0;39m 生成今日电子书快照开始
2023-05-27 13:45:10.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674859683975168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674859683975168[0;39m ==> Parameters: 
2023-05-27 13:45:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674859683975168[0;39m <==    Updates: 0
2023-05-27 13:45:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674859683975168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:45:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674880676466688[0;39m 生成今日电子书快照开始
2023-05-27 13:45:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674880676466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674880676466688[0;39m ==> Parameters: 
2023-05-27 13:45:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674880676466688[0;39m <==    Updates: 0
2023-05-27 13:45:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674880676466688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:45:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674901664763904[0;39m 生成今日电子书快照开始
2023-05-27 13:45:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674901664763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674901664763904[0;39m ==> Parameters: 
2023-05-27 13:45:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674901664763904[0;39m <==    Updates: 0
2023-05-27 13:45:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674901664763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:45:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674922661449728[0;39m 生成今日电子书快照开始
2023-05-27 13:45:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674922661449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674922661449728[0;39m ==> Parameters: 
2023-05-27 13:45:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674922661449728[0;39m <==    Updates: 0
2023-05-27 13:45:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674922661449728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:45:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674943624581120[0;39m 生成今日电子书快照开始
2023-05-27 13:45:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674943624581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674943624581120[0;39m ==> Parameters: 
2023-05-27 13:45:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674943624581120[0;39m <==    Updates: 0
2023-05-27 13:45:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674943624581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:45:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119674964579323904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:45:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674964579323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:45:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674964579323904[0;39m ==> Parameters: 
2023-05-27 13:45:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119674964579323904[0;39m <==    Updates: 8
2023-05-27 13:45:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119674964579323904[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2023-05-27 13:45:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674964600295424[0;39m 生成今日电子书快照开始
2023-05-27 13:45:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674964600295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674964600295424[0;39m ==> Parameters: 
2023-05-27 13:45:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674964600295424[0;39m <==    Updates: 0
2023-05-27 13:45:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674964600295424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:45:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119674985576009728[0;39m 生成今日电子书快照开始
2023-05-27 13:45:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674985576009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674985576009728[0;39m ==> Parameters: 
2023-05-27 13:45:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119674985576009728[0;39m <==    Updates: 0
2023-05-27 13:45:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119674985576009728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:45:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675006509780992[0;39m 生成今日电子书快照开始
2023-05-27 13:45:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675006509780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675006509780992[0;39m ==> Parameters: 
2023-05-27 13:45:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675006509780992[0;39m <==    Updates: 0
2023-05-27 13:45:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675006509780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:45:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675027485495296[0;39m 生成今日电子书快照开始
2023-05-27 13:45:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675027485495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675027485495296[0;39m ==> Parameters: 
2023-05-27 13:45:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675027485495296[0;39m <==    Updates: 0
2023-05-27 13:45:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675027485495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:45:55.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675048427655168[0;39m 生成今日电子书快照开始
2023-05-27 13:45:55.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675048427655168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:45:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675048427655168[0;39m ==> Parameters: 
2023-05-27 13:45:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675048427655168[0;39m <==    Updates: 0
2023-05-27 13:45:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675048427655168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675069432729600[0;39m 生成今日电子书快照开始
2023-05-27 13:46:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675069432729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675069432729600[0;39m ==> Parameters: 
2023-05-27 13:46:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675069432729600[0;39m <==    Updates: 0
2023-05-27 13:46:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675069432729600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:46:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119675090395860992[0;39m 更新电子书下的文档数据开始
2023-05-27 13:46:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675090395860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:46:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675090395860992[0;39m ==> Parameters: 
2023-05-27 13:46:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675090395860992[0;39m <==    Updates: 8
2023-05-27 13:46:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119675090395860992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:46:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675090404249600[0;39m 生成今日电子书快照开始
2023-05-27 13:46:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675090404249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675090404249600[0;39m ==> Parameters: 
2023-05-27 13:46:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675090404249600[0;39m <==    Updates: 0
2023-05-27 13:46:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675090404249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675111358992384[0;39m 生成今日电子书快照开始
2023-05-27 13:46:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675111358992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675111358992384[0;39m ==> Parameters: 
2023-05-27 13:46:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675111358992384[0;39m <==    Updates: 0
2023-05-27 13:46:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675111358992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675132368261120[0;39m 生成今日电子书快照开始
2023-05-27 13:46:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675132368261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675132368261120[0;39m ==> Parameters: 
2023-05-27 13:46:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675132368261120[0;39m <==    Updates: 0
2023-05-27 13:46:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675132368261120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675153297838080[0;39m 生成今日电子书快照开始
2023-05-27 13:46:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675153297838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675153297838080[0;39m ==> Parameters: 
2023-05-27 13:46:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675153297838080[0;39m <==    Updates: 0
2023-05-27 13:46:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675153297838080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:46:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675174294523904[0;39m 生成今日电子书快照开始
2023-05-27 13:46:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675174294523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675174294523904[0;39m ==> Parameters: 
2023-05-27 13:46:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675174294523904[0;39m <==    Updates: 0
2023-05-27 13:46:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675174294523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675195240878080[0;39m 生成今日电子书快照开始
2023-05-27 13:46:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675195240878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675195240878080[0;39m ==> Parameters: 
2023-05-27 13:46:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675195240878080[0;39m <==    Updates: 0
2023-05-27 13:46:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675195240878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119675216254341120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:46:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675216254341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:46:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675216254341120[0;39m ==> Parameters: 
2023-05-27 13:46:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675216254341120[0;39m <==    Updates: 8
2023-05-27 13:46:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119675216254341120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:46:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675216262729728[0;39m 生成今日电子书快照开始
2023-05-27 13:46:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675216262729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675216262729728[0;39m ==> Parameters: 
2023-05-27 13:46:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675216262729728[0;39m <==    Updates: 0
2023-05-27 13:46:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675216262729728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675237230055424[0;39m 生成今日电子书快照开始
2023-05-27 13:46:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675237230055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675237230055424[0;39m ==> Parameters: 
2023-05-27 13:46:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675237230055424[0;39m <==    Updates: 0
2023-05-27 13:46:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675237230055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:45.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675258142855168[0;39m 生成今日电子书快照开始
2023-05-27 13:46:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675258142855168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675258142855168[0;39m ==> Parameters: 
2023-05-27 13:46:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675258142855168[0;39m <==    Updates: 0
2023-05-27 13:46:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675258142855168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675279177289728[0;39m 生成今日电子书快照开始
2023-05-27 13:46:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675279177289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675279177289728[0;39m ==> Parameters: 
2023-05-27 13:46:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675279177289728[0;39m <==    Updates: 0
2023-05-27 13:46:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675279177289728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:46:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675300094283776[0;39m 生成今日电子书快照开始
2023-05-27 13:46:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675300094283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:46:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675300094283776[0;39m ==> Parameters: 
2023-05-27 13:46:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675300094283776[0;39m <==    Updates: 0
2023-05-27 13:46:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675300094283776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:47:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675321082580992[0;39m 生成今日电子书快照开始
2023-05-27 13:47:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675321082580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675321082580992[0;39m ==> Parameters: 
2023-05-27 13:47:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675321082580992[0;39m <==    Updates: 0
2023-05-27 13:47:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675321082580992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:47:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675342054100992[0;39m 生成今日电子书快照开始
2023-05-27 13:47:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675342054100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675342054100992[0;39m ==> Parameters: 
2023-05-27 13:47:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675342054100992[0;39m <==    Updates: 0
2023-05-27 13:47:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675342054100992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:47:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119675342066683904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:47:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675342066683904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:47:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675342066683904[0;39m ==> Parameters: 
2023-05-27 13:47:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675342066683904[0;39m <==    Updates: 8
2023-05-27 13:47:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119675342066683904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:47:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675363059175424[0;39m 生成今日电子书快照开始
2023-05-27 13:47:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675363059175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675363059175424[0;39m ==> Parameters: 
2023-05-27 13:47:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675363059175424[0;39m <==    Updates: 0
2023-05-27 13:47:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675363059175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:47:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675383980363776[0;39m 生成今日电子书快照开始
2023-05-27 13:47:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675383980363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675383980363776[0;39m ==> Parameters: 
2023-05-27 13:47:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675383980363776[0;39m <==    Updates: 0
2023-05-27 13:47:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675383980363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:47:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675404972855296[0;39m 生成今日电子书快照开始
2023-05-27 13:47:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675404972855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675404972855296[0;39m ==> Parameters: 
2023-05-27 13:47:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675404972855296[0;39m <==    Updates: 0
2023-05-27 13:47:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675404972855296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:47:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675425931792384[0;39m 生成今日电子书快照开始
2023-05-27 13:47:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675425931792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675425931792384[0;39m ==> Parameters: 
2023-05-27 13:47:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675425931792384[0;39m <==    Updates: 0
2023-05-27 13:47:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675425931792384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:47:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675446911700992[0;39m 生成今日电子书快照开始
2023-05-27 13:47:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675446911700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675446911700992[0;39m ==> Parameters: 
2023-05-27 13:47:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675446911700992[0;39m <==    Updates: 0
2023-05-27 13:47:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675446911700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:47:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119675467891609600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:47:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675467891609600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:47:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675467891609600[0;39m ==> Parameters: 
2023-05-27 13:47:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675467891609600[0;39m <==    Updates: 8
2023-05-27 13:47:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119675467891609600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:47:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675467895803904[0;39m 生成今日电子书快照开始
2023-05-27 13:47:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675467895803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675467895803904[0;39m ==> Parameters: 
2023-05-27 13:47:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675467895803904[0;39m <==    Updates: 0
2023-05-27 13:47:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675467895803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:47:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675488850546688[0;39m 生成今日电子书快照开始
2023-05-27 13:47:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675488850546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675488850546688[0;39m ==> Parameters: 
2023-05-27 13:47:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675488850546688[0;39m <==    Updates: 0
2023-05-27 13:47:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675488850546688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:47:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675509834649600[0;39m 生成今日电子书快照开始
2023-05-27 13:47:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675509834649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675509834649600[0;39m ==> Parameters: 
2023-05-27 13:47:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675509834649600[0;39m <==    Updates: 0
2023-05-27 13:47:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675509834649600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:47:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675530827141120[0;39m 生成今日电子书快照开始
2023-05-27 13:47:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675530827141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675530827141120[0;39m ==> Parameters: 
2023-05-27 13:47:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675530827141120[0;39m <==    Updates: 0
2023-05-27 13:47:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675530827141120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:47:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675551786078208[0;39m 生成今日电子书快照开始
2023-05-27 13:47:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675551786078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:47:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675551786078208[0;39m ==> Parameters: 
2023-05-27 13:47:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675551786078208[0;39m <==    Updates: 0
2023-05-27 13:47:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675551786078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:48:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675572749209600[0;39m 生成今日电子书快照开始
2023-05-27 13:48:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675572749209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675572749209600[0;39m ==> Parameters: 
2023-05-27 13:48:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675572749209600[0;39m <==    Updates: 0
2023-05-27 13:48:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675572749209600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:48:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675593695563776[0;39m 生成今日电子书快照开始
2023-05-27 13:48:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675593695563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675593695563776[0;39m ==> Parameters: 
2023-05-27 13:48:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675593695563776[0;39m <==    Updates: 0
2023-05-27 13:48:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675593695563776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:48:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119675593708146688[0;39m 更新电子书下的文档数据开始
2023-05-27 13:48:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675593708146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:48:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675593708146688[0;39m ==> Parameters: 
2023-05-27 13:48:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675593708146688[0;39m <==    Updates: 8
2023-05-27 13:48:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119675593708146688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:48:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675614688055296[0;39m 生成今日电子书快照开始
2023-05-27 13:48:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675614688055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675614688055296[0;39m ==> Parameters: 
2023-05-27 13:48:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675614688055296[0;39m <==    Updates: 0
2023-05-27 13:48:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675614688055296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:48:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675635697324032[0;39m 生成今日电子书快照开始
2023-05-27 13:48:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675635697324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675635697324032[0;39m ==> Parameters: 
2023-05-27 13:48:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675635697324032[0;39m <==    Updates: 0
2023-05-27 13:48:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675635697324032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:48:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675656605929472[0;39m 生成今日电子书快照开始
2023-05-27 13:48:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675656605929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675656605929472[0;39m ==> Parameters: 
2023-05-27 13:48:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675656605929472[0;39m <==    Updates: 0
2023-05-27 13:48:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675656605929472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:48:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675677623586816[0;39m 生成今日电子书快照开始
2023-05-27 13:48:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675677623586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675677623586816[0;39m ==> Parameters: 
2023-05-27 13:48:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675677623586816[0;39m <==    Updates: 0
2023-05-27 13:48:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675677623586816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:48:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675698595106816[0;39m 生成今日电子书快照开始
2023-05-27 13:48:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675698595106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675698595106816[0;39m ==> Parameters: 
2023-05-27 13:48:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675698595106816[0;39m <==    Updates: 0
2023-05-27 13:48:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675698595106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:48:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119675719520489472[0;39m 更新电子书下的文档数据开始
2023-05-27 13:48:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675719520489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:48:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675719520489472[0;39m ==> Parameters: 
2023-05-27 13:48:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675719520489472[0;39m <==    Updates: 8
2023-05-27 13:48:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119675719520489472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:48:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675719528878080[0;39m 生成今日电子书快照开始
2023-05-27 13:48:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675719528878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675719528878080[0;39m ==> Parameters: 
2023-05-27 13:48:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675719528878080[0;39m <==    Updates: 0
2023-05-27 13:48:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675719528878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:48:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675740512980992[0;39m 生成今日电子书快照开始
2023-05-27 13:48:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675740512980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675740512980992[0;39m ==> Parameters: 
2023-05-27 13:48:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675740512980992[0;39m <==    Updates: 0
2023-05-27 13:48:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675740512980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:48:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675761509666816[0;39m 生成今日电子书快照开始
2023-05-27 13:48:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675761509666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675761509666816[0;39m ==> Parameters: 
2023-05-27 13:48:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675761509666816[0;39m <==    Updates: 0
2023-05-27 13:48:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675761509666816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:48:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675782451826688[0;39m 生成今日电子书快照开始
2023-05-27 13:48:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675782451826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675782451826688[0;39m ==> Parameters: 
2023-05-27 13:48:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675782451826688[0;39m <==    Updates: 0
2023-05-27 13:48:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675782451826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:48:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675803414958080[0;39m 生成今日电子书快照开始
2023-05-27 13:48:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675803414958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:48:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675803414958080[0;39m ==> Parameters: 
2023-05-27 13:48:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675803414958080[0;39m <==    Updates: 0
2023-05-27 13:48:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675803414958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:49:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675824424226816[0;39m 生成今日电子书快照开始
2023-05-27 13:49:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675824424226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675824424226816[0;39m ==> Parameters: 
2023-05-27 13:49:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675824424226816[0;39m <==    Updates: 0
2023-05-27 13:49:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675824424226816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:49:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675845370580992[0;39m 生成今日电子书快照开始
2023-05-27 13:49:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675845370580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675845370580992[0;39m ==> Parameters: 
2023-05-27 13:49:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675845370580992[0;39m <==    Updates: 0
2023-05-27 13:49:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675845370580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:49:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119675845378969600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:49:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675845378969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:49:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675845378969600[0;39m ==> Parameters: 
2023-05-27 13:49:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675845378969600[0;39m <==    Updates: 8
2023-05-27 13:49:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119675845378969600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:49:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675866321129472[0;39m 生成今日电子书快照开始
2023-05-27 13:49:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675866321129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675866321129472[0;39m ==> Parameters: 
2023-05-27 13:49:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675866321129472[0;39m <==    Updates: 0
2023-05-27 13:49:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675866321129472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:49:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675887309426688[0;39m 生成今日电子书快照开始
2023-05-27 13:49:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675887309426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675887309426688[0;39m ==> Parameters: 
2023-05-27 13:49:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675887309426688[0;39m <==    Updates: 0
2023-05-27 13:49:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675887309426688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:49:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675908327084032[0;39m 生成今日电子书快照开始
2023-05-27 13:49:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675908327084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675908327084032[0;39m ==> Parameters: 
2023-05-27 13:49:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675908327084032[0;39m <==    Updates: 0
2023-05-27 13:49:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675908327084032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:49:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675929290215424[0;39m 生成今日电子书快照开始
2023-05-27 13:49:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675929290215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675929290215424[0;39m ==> Parameters: 
2023-05-27 13:49:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675929290215424[0;39m <==    Updates: 0
2023-05-27 13:49:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675929290215424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:49:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675950207209472[0;39m 生成今日电子书快照开始
2023-05-27 13:49:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675950207209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675950207209472[0;39m ==> Parameters: 
2023-05-27 13:49:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675950207209472[0;39m <==    Updates: 0
2023-05-27 13:49:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675950207209472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:49:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119675971191312384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:49:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675971191312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:49:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675971191312384[0;39m ==> Parameters: 
2023-05-27 13:49:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119675971191312384[0;39m <==    Updates: 8
2023-05-27 13:49:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119675971191312384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:49:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675971195506688[0;39m 生成今日电子书快照开始
2023-05-27 13:49:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675971195506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675971195506688[0;39m ==> Parameters: 
2023-05-27 13:49:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675971195506688[0;39m <==    Updates: 0
2023-05-27 13:49:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675971195506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:49:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119675992179609600[0;39m 生成今日电子书快照开始
2023-05-27 13:49:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675992179609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675992179609600[0;39m ==> Parameters: 
2023-05-27 13:49:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119675992179609600[0;39m <==    Updates: 0
2023-05-27 13:49:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119675992179609600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:49:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676013134352384[0;39m 生成今日电子书快照开始
2023-05-27 13:49:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676013134352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676013134352384[0;39m ==> Parameters: 
2023-05-27 13:49:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676013134352384[0;39m <==    Updates: 0
2023-05-27 13:49:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676013134352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:49:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676034118455296[0;39m 生成今日电子书快照开始
2023-05-27 13:49:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676034118455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676034118455296[0;39m ==> Parameters: 
2023-05-27 13:49:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676034118455296[0;39m <==    Updates: 0
2023-05-27 13:49:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676034118455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:49:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676055123529728[0;39m 生成今日电子书快照开始
2023-05-27 13:49:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676055123529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:49:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676055123529728[0;39m ==> Parameters: 
2023-05-27 13:49:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676055123529728[0;39m <==    Updates: 0
2023-05-27 13:49:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676055123529728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:50:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676076095049728[0;39m 生成今日电子书快照开始
2023-05-27 13:50:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676076095049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676076095049728[0;39m ==> Parameters: 
2023-05-27 13:50:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676076095049728[0;39m <==    Updates: 0
2023-05-27 13:50:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676076095049728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:50:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676097070764032[0;39m 生成今日电子书快照开始
2023-05-27 13:50:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676097070764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676097070764032[0;39m ==> Parameters: 
2023-05-27 13:50:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676097070764032[0;39m <==    Updates: 0
2023-05-27 13:50:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676097070764032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:50:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119676097074958336[0;39m 更新电子书下的文档数据开始
2023-05-27 13:50:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676097074958336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:50:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676097074958336[0;39m ==> Parameters: 
2023-05-27 13:50:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676097074958336[0;39m <==    Updates: 8
2023-05-27 13:50:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119676097074958336[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:50:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676117996146688[0;39m 生成今日电子书快照开始
2023-05-27 13:50:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676117996146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676117996146688[0;39m ==> Parameters: 
2023-05-27 13:50:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676117996146688[0;39m <==    Updates: 0
2023-05-27 13:50:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676117996146688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:50:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676139001221120[0;39m 生成今日电子书快照开始
2023-05-27 13:50:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676139001221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676139001221120[0;39m ==> Parameters: 
2023-05-27 13:50:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676139001221120[0;39m <==    Updates: 0
2023-05-27 13:50:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676139001221120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:50:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676159926603776[0;39m 生成今日电子书快照开始
2023-05-27 13:50:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676159926603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676159926603776[0;39m ==> Parameters: 
2023-05-27 13:50:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676159926603776[0;39m <==    Updates: 0
2023-05-27 13:50:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676159926603776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:50:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676180956844032[0;39m 生成今日电子书快照开始
2023-05-27 13:50:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676180956844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676180956844032[0;39m ==> Parameters: 
2023-05-27 13:50:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676180956844032[0;39m <==    Updates: 0
2023-05-27 13:50:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676180956844032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:50:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676201911586816[0;39m 生成今日电子书快照开始
2023-05-27 13:50:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676201911586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676201911586816[0;39m ==> Parameters: 
2023-05-27 13:50:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676201911586816[0;39m <==    Updates: 0
2023-05-27 13:50:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676201911586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:50:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119676222853746688[0;39m 更新电子书下的文档数据开始
2023-05-27 13:50:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676222853746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:50:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676222853746688[0;39m ==> Parameters: 
2023-05-27 13:50:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676222853746688[0;39m <==    Updates: 8
2023-05-27 13:50:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119676222853746688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:50:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676222857940992[0;39m 生成今日电子书快照开始
2023-05-27 13:50:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676222857940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676222857940992[0;39m ==> Parameters: 
2023-05-27 13:50:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676222857940992[0;39m <==    Updates: 0
2023-05-27 13:50:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676222857940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:50:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676243816878080[0;39m 生成今日电子书快照开始
2023-05-27 13:50:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676243816878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676243816878080[0;39m ==> Parameters: 
2023-05-27 13:50:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676243816878080[0;39m <==    Updates: 0
2023-05-27 13:50:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676243816878080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:50:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676264830341120[0;39m 生成今日电子书快照开始
2023-05-27 13:50:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676264830341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676264830341120[0;39m ==> Parameters: 
2023-05-27 13:50:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676264830341120[0;39m <==    Updates: 0
2023-05-27 13:50:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676264830341120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:50:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676285789278208[0;39m 生成今日电子书快照开始
2023-05-27 13:50:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676285789278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676285789278208[0;39m ==> Parameters: 
2023-05-27 13:50:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676285789278208[0;39m <==    Updates: 0
2023-05-27 13:50:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676285789278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:50:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676306752409600[0;39m 生成今日电子书快照开始
2023-05-27 13:50:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676306752409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:50:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676306752409600[0;39m ==> Parameters: 
2023-05-27 13:50:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676306752409600[0;39m <==    Updates: 0
2023-05-27 13:50:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676306752409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:51:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676327711346688[0;39m 生成今日电子书快照开始
2023-05-27 13:51:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676327711346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676327711346688[0;39m ==> Parameters: 
2023-05-27 13:51:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676327711346688[0;39m <==    Updates: 0
2023-05-27 13:51:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676327711346688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:51:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676348691255296[0;39m 生成今日电子书快照开始
2023-05-27 13:51:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676348691255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676348691255296[0;39m ==> Parameters: 
2023-05-27 13:51:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676348691255296[0;39m <==    Updates: 0
2023-05-27 13:51:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676348691255296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:51:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119676348708032512[0;39m 更新电子书下的文档数据开始
2023-05-27 13:51:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676348708032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:51:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676348708032512[0;39m ==> Parameters: 
2023-05-27 13:51:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676348708032512[0;39m <==    Updates: 8
2023-05-27 13:51:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119676348708032512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:51:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676369641803776[0;39m 生成今日电子书快照开始
2023-05-27 13:51:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676369641803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676369641803776[0;39m ==> Parameters: 
2023-05-27 13:51:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676369641803776[0;39m <==    Updates: 0
2023-05-27 13:51:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676369641803776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:51:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676390613323776[0;39m 生成今日电子书快照开始
2023-05-27 13:51:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676390613323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676390613323776[0;39m ==> Parameters: 
2023-05-27 13:51:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676390613323776[0;39m <==    Updates: 0
2023-05-27 13:51:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676390613323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:51:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676411584843776[0;39m 生成今日电子书快照开始
2023-05-27 13:51:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676411584843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676411584843776[0;39m ==> Parameters: 
2023-05-27 13:51:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676411584843776[0;39m <==    Updates: 0
2023-05-27 13:51:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676411584843776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:51:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676432619278336[0;39m 生成今日电子书快照开始
2023-05-27 13:51:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676432619278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676432619278336[0;39m ==> Parameters: 
2023-05-27 13:51:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676432619278336[0;39m <==    Updates: 0
2023-05-27 13:51:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676432619278336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:51:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676453569826816[0;39m 生成今日电子书快照开始
2023-05-27 13:51:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676453569826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676453569826816[0;39m ==> Parameters: 
2023-05-27 13:51:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676453569826816[0;39m <==    Updates: 0
2023-05-27 13:51:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676453569826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:51:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676474541346816[0;39m 生成今日电子书快照开始
2023-05-27 13:51:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676474541346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676474541346816[0;39m ==> Parameters: 
2023-05-27 13:51:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676474541346816[0;39m <==    Updates: 0
2023-05-27 13:51:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676474541346816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:51:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119676474553929728[0;39m 更新电子书下的文档数据开始
2023-05-27 13:51:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676474553929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:51:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676474553929728[0;39m ==> Parameters: 
2023-05-27 13:51:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676474553929728[0;39m <==    Updates: 8
2023-05-27 13:51:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119676474553929728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:51:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676495521255424[0;39m 生成今日电子书快照开始
2023-05-27 13:51:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676495521255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676495521255424[0;39m ==> Parameters: 
2023-05-27 13:51:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676495521255424[0;39m <==    Updates: 0
2023-05-27 13:51:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676495521255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:51:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676516459220992[0;39m 生成今日电子书快照开始
2023-05-27 13:51:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676516459220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676516459220992[0;39m ==> Parameters: 
2023-05-27 13:51:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676516459220992[0;39m <==    Updates: 0
2023-05-27 13:51:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676516459220992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:51:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676537460101120[0;39m 生成今日电子书快照开始
2023-05-27 13:51:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676537460101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676537460101120[0;39m ==> Parameters: 
2023-05-27 13:51:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676537460101120[0;39m <==    Updates: 0
2023-05-27 13:51:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676537460101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:51:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676558431621120[0;39m 生成今日电子书快照开始
2023-05-27 13:51:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676558431621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:51:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676558431621120[0;39m ==> Parameters: 
2023-05-27 13:51:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676558431621120[0;39m <==    Updates: 0
2023-05-27 13:51:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676558431621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676579398946816[0;39m 生成今日电子书快照开始
2023-05-27 13:52:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676579398946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676579398946816[0;39m ==> Parameters: 
2023-05-27 13:52:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676579398946816[0;39m <==    Updates: 0
2023-05-27 13:52:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676579398946816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:52:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676600341106688[0;39m 生成今日电子书快照开始
2023-05-27 13:52:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676600341106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676600341106688[0;39m ==> Parameters: 
2023-05-27 13:52:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676600341106688[0;39m <==    Updates: 0
2023-05-27 13:52:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676600341106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119676600349495296[0;39m 更新电子书下的文档数据开始
2023-05-27 13:52:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676600349495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:52:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676600349495296[0;39m ==> Parameters: 
2023-05-27 13:52:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676600349495296[0;39m <==    Updates: 8
2023-05-27 13:52:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119676600349495296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:52:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676621337792512[0;39m 生成今日电子书快照开始
2023-05-27 13:52:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676621337792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676621337792512[0;39m ==> Parameters: 
2023-05-27 13:52:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676621337792512[0;39m <==    Updates: 0
2023-05-27 13:52:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676621337792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676642321895424[0;39m 生成今日电子书快照开始
2023-05-27 13:52:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676642321895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676642321895424[0;39m ==> Parameters: 
2023-05-27 13:52:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676642321895424[0;39m <==    Updates: 0
2023-05-27 13:52:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676642321895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676663255666688[0;39m 生成今日电子书快照开始
2023-05-27 13:52:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676663255666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676663255666688[0;39m ==> Parameters: 
2023-05-27 13:52:20.108 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676663255666688[0;39m <==    Updates: 0
2023-05-27 13:52:20.108 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676663255666688[0;39m 生成今日电子书快照结束，耗时：103 毫秒
2023-05-27 13:52:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676684227186688[0;39m 生成今日电子书快照开始
2023-05-27 13:52:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676684227186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676684227186688[0;39m ==> Parameters: 
2023-05-27 13:52:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676684227186688[0;39m <==    Updates: 0
2023-05-27 13:52:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676684227186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676705232261120[0;39m 生成今日电子书快照开始
2023-05-27 13:52:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676705232261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676705232261120[0;39m ==> Parameters: 
2023-05-27 13:52:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676705232261120[0;39m <==    Updates: 0
2023-05-27 13:52:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676705232261120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119676726195392512[0;39m 更新电子书下的文档数据开始
2023-05-27 13:52:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676726195392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:52:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676726195392512[0;39m ==> Parameters: 
2023-05-27 13:52:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676726195392512[0;39m <==    Updates: 8
2023-05-27 13:52:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119676726195392512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:52:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676726199586816[0;39m 生成今日电子书快照开始
2023-05-27 13:52:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676726199586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676726199586816[0;39m ==> Parameters: 
2023-05-27 13:52:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676726199586816[0;39m <==    Updates: 0
2023-05-27 13:52:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676726199586816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:52:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676747162718208[0;39m 生成今日电子书快照开始
2023-05-27 13:52:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676747162718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676747162718208[0;39m ==> Parameters: 
2023-05-27 13:52:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676747162718208[0;39m <==    Updates: 0
2023-05-27 13:52:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676747162718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676768151015424[0;39m 生成今日电子书快照开始
2023-05-27 13:52:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676768151015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676768151015424[0;39m ==> Parameters: 
2023-05-27 13:52:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676768151015424[0;39m <==    Updates: 0
2023-05-27 13:52:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676768151015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676789080592384[0;39m 生成今日电子书快照开始
2023-05-27 13:52:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676789080592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676789080592384[0;39m ==> Parameters: 
2023-05-27 13:52:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676789080592384[0;39m <==    Updates: 0
2023-05-27 13:52:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676789080592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:52:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676810077278208[0;39m 生成今日电子书快照开始
2023-05-27 13:52:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676810077278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:52:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676810077278208[0;39m ==> Parameters: 
2023-05-27 13:52:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676810077278208[0;39m <==    Updates: 0
2023-05-27 13:52:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676810077278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676831061381120[0;39m 生成今日电子书快照开始
2023-05-27 13:53:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676831061381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676831061381120[0;39m ==> Parameters: 
2023-05-27 13:53:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676831061381120[0;39m <==    Updates: 0
2023-05-27 13:53:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676831061381120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:53:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676851986763776[0;39m 生成今日电子书快照开始
2023-05-27 13:53:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676851986763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676851986763776[0;39m ==> Parameters: 
2023-05-27 13:53:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676851986763776[0;39m <==    Updates: 0
2023-05-27 13:53:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676851986763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119676851999346688[0;39m 更新电子书下的文档数据开始
2023-05-27 13:53:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676851999346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:53:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676851999346688[0;39m ==> Parameters: 
2023-05-27 13:53:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676851999346688[0;39m <==    Updates: 8
2023-05-27 13:53:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119676851999346688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:53:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676872987643904[0;39m 生成今日电子书快照开始
2023-05-27 13:53:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676872987643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676872987643904[0;39m ==> Parameters: 
2023-05-27 13:53:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676872987643904[0;39m <==    Updates: 0
2023-05-27 13:53:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676872987643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676893933998080[0;39m 生成今日电子书快照开始
2023-05-27 13:53:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676893933998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676893933998080[0;39m ==> Parameters: 
2023-05-27 13:53:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676893933998080[0;39m <==    Updates: 0
2023-05-27 13:53:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676893933998080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:53:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676914947461120[0;39m 生成今日电子书快照开始
2023-05-27 13:53:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676914947461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676914947461120[0;39m ==> Parameters: 
2023-05-27 13:53:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676914947461120[0;39m <==    Updates: 0
2023-05-27 13:53:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676914947461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676935927369728[0;39m 生成今日电子书快照开始
2023-05-27 13:53:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676935927369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676935927369728[0;39m ==> Parameters: 
2023-05-27 13:53:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676935927369728[0;39m <==    Updates: 0
2023-05-27 13:53:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676935927369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676956848558080[0;39m 生成今日电子书快照开始
2023-05-27 13:53:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676956848558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676956848558080[0;39m ==> Parameters: 
2023-05-27 13:53:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676956848558080[0;39m <==    Updates: 0
2023-05-27 13:53:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676956848558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676977832660992[0;39m 生成今日电子书快照开始
2023-05-27 13:53:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676977832660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676977832660992[0;39m ==> Parameters: 
2023-05-27 13:53:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676977832660992[0;39m <==    Updates: 0
2023-05-27 13:53:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676977832660992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:53:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119676977845243904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:53:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676977845243904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:53:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676977845243904[0;39m ==> Parameters: 
2023-05-27 13:53:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119676977845243904[0;39m <==    Updates: 8
2023-05-27 13:53:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119676977845243904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:53:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119676998812569600[0;39m 生成今日电子书快照开始
2023-05-27 13:53:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676998812569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676998812569600[0;39m ==> Parameters: 
2023-05-27 13:53:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119676998812569600[0;39m <==    Updates: 0
2023-05-27 13:53:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119676998812569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677019800866816[0;39m 生成今日电子书快照开始
2023-05-27 13:53:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677019800866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677019800866816[0;39m ==> Parameters: 
2023-05-27 13:53:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677019800866816[0;39m <==    Updates: 0
2023-05-27 13:53:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677019800866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677040763998208[0;39m 生成今日电子书快照开始
2023-05-27 13:53:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677040763998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677040763998208[0;39m ==> Parameters: 
2023-05-27 13:53:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677040763998208[0;39m <==    Updates: 0
2023-05-27 13:53:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677040763998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:53:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677061701963776[0;39m 生成今日电子书快照开始
2023-05-27 13:53:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677061701963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:53:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677061701963776[0;39m ==> Parameters: 
2023-05-27 13:53:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677061701963776[0;39m <==    Updates: 0
2023-05-27 13:53:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677061701963776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:54:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677082686066688[0;39m 生成今日电子书快照开始
2023-05-27 13:54:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677082686066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677082686066688[0;39m ==> Parameters: 
2023-05-27 13:54:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677082686066688[0;39m <==    Updates: 0
2023-05-27 13:54:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677082686066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:54:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119677103670169600[0;39m 更新电子书下的文档数据开始
2023-05-27 13:54:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677103670169600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:54:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677103670169600[0;39m ==> Parameters: 
2023-05-27 13:54:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677103670169600[0;39m <==    Updates: 8
2023-05-27 13:54:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119677103670169600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:54:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677103678558208[0;39m 生成今日电子书快照开始
2023-05-27 13:54:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677103678558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677103678558208[0;39m ==> Parameters: 
2023-05-27 13:54:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677103678558208[0;39m <==    Updates: 0
2023-05-27 13:54:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677103678558208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:54:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677124637495296[0;39m 生成今日电子书快照开始
2023-05-27 13:54:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677124637495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677124637495296[0;39m ==> Parameters: 
2023-05-27 13:54:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677124637495296[0;39m <==    Updates: 0
2023-05-27 13:54:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677124637495296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:54:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677145609015296[0;39m 生成今日电子书快照开始
2023-05-27 13:54:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677145609015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677145609015296[0;39m ==> Parameters: 
2023-05-27 13:54:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677145609015296[0;39m <==    Updates: 0
2023-05-27 13:54:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677145609015296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:54:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677166559563776[0;39m 生成今日电子书快照开始
2023-05-27 13:54:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677166559563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677166559563776[0;39m ==> Parameters: 
2023-05-27 13:54:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677166559563776[0;39m <==    Updates: 0
2023-05-27 13:54:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677166559563776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:54:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677187547860992[0;39m 生成今日电子书快照开始
2023-05-27 13:54:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677187547860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677187547860992[0;39m ==> Parameters: 
2023-05-27 13:54:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677187547860992[0;39m <==    Updates: 0
2023-05-27 13:54:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677187547860992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:54:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677208552935424[0;39m 生成今日电子书快照开始
2023-05-27 13:54:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677208552935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677208552935424[0;39m ==> Parameters: 
2023-05-27 13:54:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677208552935424[0;39m <==    Updates: 0
2023-05-27 13:54:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677208552935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:54:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119677229490900992[0;39m 更新电子书下的文档数据开始
2023-05-27 13:54:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677229490900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:54:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677229490900992[0;39m ==> Parameters: 
2023-05-27 13:54:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677229490900992[0;39m <==    Updates: 8
2023-05-27 13:54:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119677229490900992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:54:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677229499289600[0;39m 生成今日电子书快照开始
2023-05-27 13:54:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677229499289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677229499289600[0;39m ==> Parameters: 
2023-05-27 13:54:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677229499289600[0;39m <==    Updates: 0
2023-05-27 13:54:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677229499289600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:54:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677250445643776[0;39m 生成今日电子书快照开始
2023-05-27 13:54:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677250445643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677250445643776[0;39m ==> Parameters: 
2023-05-27 13:54:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677250445643776[0;39m <==    Updates: 0
2023-05-27 13:54:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677250445643776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:54:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677271446523904[0;39m 生成今日电子书快照开始
2023-05-27 13:54:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677271446523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677271446523904[0;39m ==> Parameters: 
2023-05-27 13:54:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677271446523904[0;39m <==    Updates: 0
2023-05-27 13:54:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677271446523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:54:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677292434821120[0;39m 生成今日电子书快照开始
2023-05-27 13:54:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677292434821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677292434821120[0;39m ==> Parameters: 
2023-05-27 13:54:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677292434821120[0;39m <==    Updates: 0
2023-05-27 13:54:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677292434821120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:54:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677313414729728[0;39m 生成今日电子书快照开始
2023-05-27 13:54:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677313414729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:54:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677313414729728[0;39m ==> Parameters: 
2023-05-27 13:54:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677313414729728[0;39m <==    Updates: 0
2023-05-27 13:54:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677313414729728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:55:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677334356889600[0;39m 生成今日电子书快照开始
2023-05-27 13:55:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677334356889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677334356889600[0;39m ==> Parameters: 
2023-05-27 13:55:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677334356889600[0;39m <==    Updates: 0
2023-05-27 13:55:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677334356889600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:55:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677355332603904[0;39m 生成今日电子书快照开始
2023-05-27 13:55:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677355332603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677355332603904[0;39m ==> Parameters: 
2023-05-27 13:55:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677355332603904[0;39m <==    Updates: 0
2023-05-27 13:55:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677355332603904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:55:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119677355345186816[0;39m 更新电子书下的文档数据开始
2023-05-27 13:55:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677355345186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:55:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677355345186816[0;39m ==> Parameters: 
2023-05-27 13:55:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677355345186816[0;39m <==    Updates: 8
2023-05-27 13:55:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119677355345186816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:55:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677376291540992[0;39m 生成今日电子书快照开始
2023-05-27 13:55:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677376291540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677376291540992[0;39m ==> Parameters: 
2023-05-27 13:55:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677376291540992[0;39m <==    Updates: 0
2023-05-27 13:55:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677376291540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:55:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677397250478080[0;39m 生成今日电子书快照开始
2023-05-27 13:55:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677397250478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677397250478080[0;39m ==> Parameters: 
2023-05-27 13:55:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677397250478080[0;39m <==    Updates: 0
2023-05-27 13:55:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677397250478080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:55:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677418263941120[0;39m 生成今日电子书快照开始
2023-05-27 13:55:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677418263941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677418263941120[0;39m ==> Parameters: 
2023-05-27 13:55:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677418263941120[0;39m <==    Updates: 0
2023-05-27 13:55:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677418263941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:55:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677439210295296[0;39m 生成今日电子书快照开始
2023-05-27 13:55:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677439210295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677439210295296[0;39m ==> Parameters: 
2023-05-27 13:55:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677439210295296[0;39m <==    Updates: 0
2023-05-27 13:55:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677439210295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:55:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677460206981120[0;39m 生成今日电子书快照开始
2023-05-27 13:55:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677460206981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677460206981120[0;39m ==> Parameters: 
2023-05-27 13:55:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677460206981120[0;39m <==    Updates: 0
2023-05-27 13:55:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677460206981120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:55:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677481132363776[0;39m 生成今日电子书快照开始
2023-05-27 13:55:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677481132363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677481132363776[0;39m ==> Parameters: 
2023-05-27 13:55:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677481132363776[0;39m <==    Updates: 0
2023-05-27 13:55:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677481132363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:55:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119677481140752384[0;39m 更新电子书下的文档数据开始
2023-05-27 13:55:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677481140752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:55:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677481140752384[0;39m ==> Parameters: 
2023-05-27 13:55:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677481140752384[0;39m <==    Updates: 8
2023-05-27 13:55:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119677481140752384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:55:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677502116466688[0;39m 生成今日电子书快照开始
2023-05-27 13:55:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677502116466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677502116466688[0;39m ==> Parameters: 
2023-05-27 13:55:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677502116466688[0;39m <==    Updates: 0
2023-05-27 13:55:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677502116466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:55:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677523125735424[0;39m 生成今日电子书快照开始
2023-05-27 13:55:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677523125735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677523125735424[0;39m ==> Parameters: 
2023-05-27 13:55:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677523125735424[0;39m <==    Updates: 0
2023-05-27 13:55:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677523125735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:55:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677544067895296[0;39m 生成今日电子书快照开始
2023-05-27 13:55:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677544067895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677544067895296[0;39m ==> Parameters: 
2023-05-27 13:55:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677544067895296[0;39m <==    Updates: 0
2023-05-27 13:55:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677544067895296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:55:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677565047803904[0;39m 生成今日电子书快照开始
2023-05-27 13:55:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677565047803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:55:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677565047803904[0;39m ==> Parameters: 
2023-05-27 13:55:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677565047803904[0;39m <==    Updates: 0
2023-05-27 13:55:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677565047803904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:56:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677586040295424[0;39m 生成今日电子书快照开始
2023-05-27 13:56:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677586040295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677586040295424[0;39m ==> Parameters: 
2023-05-27 13:56:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677586040295424[0;39m <==    Updates: 0
2023-05-27 13:56:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677586040295424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:56:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119677607007621120[0;39m 更新电子书下的文档数据开始
2023-05-27 13:56:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677607007621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:56:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677607007621120[0;39m ==> Parameters: 
2023-05-27 13:56:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677607007621120[0;39m <==    Updates: 8
2023-05-27 13:56:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119677607007621120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:56:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677607011815424[0;39m 生成今日电子书快照开始
2023-05-27 13:56:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677607011815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677607011815424[0;39m ==> Parameters: 
2023-05-27 13:56:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677607011815424[0;39m <==    Updates: 0
2023-05-27 13:56:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677607011815424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:56:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677627953975296[0;39m 生成今日电子书快照开始
2023-05-27 13:56:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677627953975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677627953975296[0;39m ==> Parameters: 
2023-05-27 13:56:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677627953975296[0;39m <==    Updates: 0
2023-05-27 13:56:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677627953975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:56:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677648929689600[0;39m 生成今日电子书快照开始
2023-05-27 13:56:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677648929689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677648929689600[0;39m ==> Parameters: 
2023-05-27 13:56:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677648929689600[0;39m <==    Updates: 0
2023-05-27 13:56:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677648929689600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:56:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677669922181120[0;39m 生成今日电子书快照开始
2023-05-27 13:56:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677669922181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677669922181120[0;39m ==> Parameters: 
2023-05-27 13:56:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677669922181120[0;39m <==    Updates: 0
2023-05-27 13:56:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677669922181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:56:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677690860146688[0;39m 生成今日电子书快照开始
2023-05-27 13:56:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677690860146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677690860146688[0;39m ==> Parameters: 
2023-05-27 13:56:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677690860146688[0;39m <==    Updates: 0
2023-05-27 13:56:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677690860146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:56:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677711856832512[0;39m 生成今日电子书快照开始
2023-05-27 13:56:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677711856832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677711856832512[0;39m ==> Parameters: 
2023-05-27 13:56:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677711856832512[0;39m <==    Updates: 0
2023-05-27 13:56:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677711856832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:56:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677732845129728[0;39m 生成今日电子书快照开始
2023-05-27 13:56:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677732845129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677732845129728[0;39m ==> Parameters: 
2023-05-27 13:56:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677732845129728[0;39m <==    Updates: 0
2023-05-27 13:56:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677732845129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:56:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119677732853518336[0;39m 更新电子书下的文档数据开始
2023-05-27 13:56:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677732853518336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:56:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677732853518336[0;39m ==> Parameters: 
2023-05-27 13:56:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677732853518336[0;39m <==    Updates: 8
2023-05-27 13:56:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119677732853518336[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:56:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677753795678208[0;39m 生成今日电子书快照开始
2023-05-27 13:56:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677753795678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677753795678208[0;39m ==> Parameters: 
2023-05-27 13:56:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677753795678208[0;39m <==    Updates: 0
2023-05-27 13:56:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677753795678208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:56:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677774763003904[0;39m 生成今日电子书快照开始
2023-05-27 13:56:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677774763003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677774763003904[0;39m ==> Parameters: 
2023-05-27 13:56:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677774763003904[0;39m <==    Updates: 0
2023-05-27 13:56:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677774763003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:56:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677795742912512[0;39m 生成今日电子书快照开始
2023-05-27 13:56:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677795742912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677795742912512[0;39m ==> Parameters: 
2023-05-27 13:56:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677795742912512[0;39m <==    Updates: 0
2023-05-27 13:56:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677795742912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:56:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677816710238208[0;39m 生成今日电子书快照开始
2023-05-27 13:56:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677816710238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:56:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677816710238208[0;39m ==> Parameters: 
2023-05-27 13:56:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677816710238208[0;39m <==    Updates: 0
2023-05-27 13:56:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677816710238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:57:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677837706924032[0;39m 生成今日电子书快照开始
2023-05-27 13:57:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677837706924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677837706924032[0;39m ==> Parameters: 
2023-05-27 13:57:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677837706924032[0;39m <==    Updates: 0
2023-05-27 13:57:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677837706924032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:57:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677858661666816[0;39m 生成今日电子书快照开始
2023-05-27 13:57:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677858661666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677858661666816[0;39m ==> Parameters: 
2023-05-27 13:57:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677858661666816[0;39m <==    Updates: 0
2023-05-27 13:57:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677858661666816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:57:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119677858674249728[0;39m 更新电子书下的文档数据开始
2023-05-27 13:57:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677858674249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:57:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677858674249728[0;39m ==> Parameters: 
2023-05-27 13:57:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677858674249728[0;39m <==    Updates: 8
2023-05-27 13:57:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119677858674249728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:57:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677879603826688[0;39m 生成今日电子书快照开始
2023-05-27 13:57:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677879603826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677879603826688[0;39m ==> Parameters: 
2023-05-27 13:57:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677879603826688[0;39m <==    Updates: 0
2023-05-27 13:57:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677879603826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:57:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677900579540992[0;39m 生成今日电子书快照开始
2023-05-27 13:57:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677900579540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677900579540992[0;39m ==> Parameters: 
2023-05-27 13:57:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677900579540992[0;39m <==    Updates: 0
2023-05-27 13:57:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677900579540992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:57:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677921572032512[0;39m 生成今日电子书快照开始
2023-05-27 13:57:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677921572032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677921572032512[0;39m ==> Parameters: 
2023-05-27 13:57:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677921572032512[0;39m <==    Updates: 0
2023-05-27 13:57:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677921572032512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:57:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677942505803776[0;39m 生成今日电子书快照开始
2023-05-27 13:57:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677942505803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677942505803776[0;39m ==> Parameters: 
2023-05-27 13:57:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677942505803776[0;39m <==    Updates: 0
2023-05-27 13:57:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677942505803776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:57:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677963494100992[0;39m 生成今日电子书快照开始
2023-05-27 13:57:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677963494100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677963494100992[0;39m ==> Parameters: 
2023-05-27 13:57:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677963494100992[0;39m <==    Updates: 0
2023-05-27 13:57:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677963494100992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:57:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119677984469815296[0;39m 更新电子书下的文档数据开始
2023-05-27 13:57:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677984469815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:57:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677984469815296[0;39m ==> Parameters: 
2023-05-27 13:57:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119677984469815296[0;39m <==    Updates: 8
2023-05-27 13:57:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119677984469815296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 13:57:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119677984478203904[0;39m 生成今日电子书快照开始
2023-05-27 13:57:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677984478203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677984478203904[0;39m ==> Parameters: 
2023-05-27 13:57:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119677984478203904[0;39m <==    Updates: 0
2023-05-27 13:57:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119677984478203904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:57:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678005449723904[0;39m 生成今日电子书快照开始
2023-05-27 13:57:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678005449723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678005449723904[0;39m ==> Parameters: 
2023-05-27 13:57:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678005449723904[0;39m <==    Updates: 0
2023-05-27 13:57:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678005449723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:57:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678026433826816[0;39m 生成今日电子书快照开始
2023-05-27 13:57:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678026433826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678026433826816[0;39m ==> Parameters: 
2023-05-27 13:57:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678026433826816[0;39m <==    Updates: 0
2023-05-27 13:57:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678026433826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:57:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678047363403776[0;39m 生成今日电子书快照开始
2023-05-27 13:57:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678047363403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678047363403776[0;39m ==> Parameters: 
2023-05-27 13:57:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678047363403776[0;39m <==    Updates: 0
2023-05-27 13:57:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678047363403776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:57:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678068368478208[0;39m 生成今日电子书快照开始
2023-05-27 13:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678068368478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:57:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678068368478208[0;39m ==> Parameters: 
2023-05-27 13:57:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678068368478208[0;39m <==    Updates: 0
2023-05-27 13:57:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678068368478208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:58:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678089310638080[0;39m 生成今日电子书快照开始
2023-05-27 13:58:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678089310638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678089310638080[0;39m ==> Parameters: 
2023-05-27 13:58:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678089310638080[0;39m <==    Updates: 0
2023-05-27 13:58:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678089310638080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 13:58:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119678110315712512[0;39m 更新电子书下的文档数据开始
2023-05-27 13:58:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678110315712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:58:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678110315712512[0;39m ==> Parameters: 
2023-05-27 13:58:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678110315712512[0;39m <==    Updates: 8
2023-05-27 13:58:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119678110315712512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:58:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678110319906816[0;39m 生成今日电子书快照开始
2023-05-27 13:58:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678110319906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678110319906816[0;39m ==> Parameters: 
2023-05-27 13:58:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678110319906816[0;39m <==    Updates: 0
2023-05-27 13:58:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678110319906816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:58:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678131262066688[0;39m 生成今日电子书快照开始
2023-05-27 13:58:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678131262066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678131262066688[0;39m ==> Parameters: 
2023-05-27 13:58:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678131262066688[0;39m <==    Updates: 0
2023-05-27 13:58:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678131262066688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:58:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678152250363904[0;39m 生成今日电子书快照开始
2023-05-27 13:58:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678152250363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678152250363904[0;39m ==> Parameters: 
2023-05-27 13:58:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678152250363904[0;39m <==    Updates: 0
2023-05-27 13:58:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678152250363904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:58:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678173205106688[0;39m 生成今日电子书快照开始
2023-05-27 13:58:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678173205106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678173205106688[0;39m ==> Parameters: 
2023-05-27 13:58:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678173205106688[0;39m <==    Updates: 0
2023-05-27 13:58:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678173205106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:58:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678194172432384[0;39m 生成今日电子书快照开始
2023-05-27 13:58:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678194172432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678194172432384[0;39m ==> Parameters: 
2023-05-27 13:58:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678194172432384[0;39m <==    Updates: 0
2023-05-27 13:58:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678194172432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:58:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678215148146688[0;39m 生成今日电子书快照开始
2023-05-27 13:58:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678215148146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678215148146688[0;39m ==> Parameters: 
2023-05-27 13:58:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678215148146688[0;39m <==    Updates: 0
2023-05-27 13:58:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678215148146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:58:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678236128055296[0;39m 生成今日电子书快照开始
2023-05-27 13:58:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678236128055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678236128055296[0;39m ==> Parameters: 
2023-05-27 13:58:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678236128055296[0;39m <==    Updates: 0
2023-05-27 13:58:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678236128055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:58:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119678236136443904[0;39m 更新电子书下的文档数据开始
2023-05-27 13:58:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678236136443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:58:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678236136443904[0;39m ==> Parameters: 
2023-05-27 13:58:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678236136443904[0;39m <==    Updates: 8
2023-05-27 13:58:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119678236136443904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:58:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678257124741120[0;39m 生成今日电子书快照开始
2023-05-27 13:58:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678257124741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678257124741120[0;39m ==> Parameters: 
2023-05-27 13:58:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678257124741120[0;39m <==    Updates: 0
2023-05-27 13:58:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678257124741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:58:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678278100455424[0;39m 生成今日电子书快照开始
2023-05-27 13:58:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678278100455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678278100455424[0;39m ==> Parameters: 
2023-05-27 13:58:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678278100455424[0;39m <==    Updates: 0
2023-05-27 13:58:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678278100455424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:58:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678299071975424[0;39m 生成今日电子书快照开始
2023-05-27 13:58:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678299071975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678299071975424[0;39m ==> Parameters: 
2023-05-27 13:58:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678299071975424[0;39m <==    Updates: 0
2023-05-27 13:58:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678299071975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:58:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678320022523904[0;39m 生成今日电子书快照开始
2023-05-27 13:58:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678320022523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:58:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678320022523904[0;39m ==> Parameters: 
2023-05-27 13:58:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678320022523904[0;39m <==    Updates: 0
2023-05-27 13:58:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678320022523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:59:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678340968878080[0;39m 生成今日电子书快照开始
2023-05-27 13:59:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678340968878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678340968878080[0;39m ==> Parameters: 
2023-05-27 13:59:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678340968878080[0;39m <==    Updates: 0
2023-05-27 13:59:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678340968878080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:59:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678361944592384[0;39m 生成今日电子书快照开始
2023-05-27 13:59:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678361944592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678361944592384[0;39m ==> Parameters: 
2023-05-27 13:59:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678361944592384[0;39m <==    Updates: 0
2023-05-27 13:59:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678361944592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:59:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119678361952980992[0;39m 更新电子书下的文档数据开始
2023-05-27 13:59:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678361952980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:59:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678361952980992[0;39m ==> Parameters: 
2023-05-27 13:59:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678361952980992[0;39m <==    Updates: 8
2023-05-27 13:59:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119678361952980992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:59:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678382949666816[0;39m 生成今日电子书快照开始
2023-05-27 13:59:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678382949666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678382949666816[0;39m ==> Parameters: 
2023-05-27 13:59:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678382949666816[0;39m <==    Updates: 0
2023-05-27 13:59:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678382949666816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:59:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678403896020992[0;39m 生成今日电子书快照开始
2023-05-27 13:59:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678403896020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678403896020992[0;39m ==> Parameters: 
2023-05-27 13:59:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678403896020992[0;39m <==    Updates: 0
2023-05-27 13:59:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678403896020992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:59:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678424884318208[0;39m 生成今日电子书快照开始
2023-05-27 13:59:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678424884318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678424884318208[0;39m ==> Parameters: 
2023-05-27 13:59:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678424884318208[0;39m <==    Updates: 0
2023-05-27 13:59:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678424884318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:59:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678445830672384[0;39m 生成今日电子书快照开始
2023-05-27 13:59:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678445830672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678445830672384[0;39m ==> Parameters: 
2023-05-27 13:59:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678445830672384[0;39m <==    Updates: 0
2023-05-27 13:59:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678445830672384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 13:59:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678466789609472[0;39m 生成今日电子书快照开始
2023-05-27 13:59:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678466789609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678466789609472[0;39m ==> Parameters: 
2023-05-27 13:59:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678466789609472[0;39m <==    Updates: 0
2023-05-27 13:59:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678466789609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:59:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678487773712384[0;39m 生成今日电子书快照开始
2023-05-27 13:59:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678487773712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678487773712384[0;39m ==> Parameters: 
2023-05-27 13:59:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678487773712384[0;39m <==    Updates: 0
2023-05-27 13:59:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678487773712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:59:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119678487782100992[0;39m 更新电子书下的文档数据开始
2023-05-27 13:59:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678487782100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 13:59:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678487782100992[0;39m ==> Parameters: 
2023-05-27 13:59:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678487782100992[0;39m <==    Updates: 8
2023-05-27 13:59:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119678487782100992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 13:59:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678508791369728[0;39m 生成今日电子书快照开始
2023-05-27 13:59:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678508791369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678508791369728[0;39m ==> Parameters: 
2023-05-27 13:59:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678508791369728[0;39m <==    Updates: 0
2023-05-27 13:59:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678508791369728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 13:59:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678529712558080[0;39m 生成今日电子书快照开始
2023-05-27 13:59:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678529712558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678529712558080[0;39m ==> Parameters: 
2023-05-27 13:59:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678529712558080[0;39m <==    Updates: 0
2023-05-27 13:59:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678529712558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:59:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678550679883776[0;39m 生成今日电子书快照开始
2023-05-27 13:59:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678550679883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678550679883776[0;39m ==> Parameters: 
2023-05-27 13:59:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678550679883776[0;39m <==    Updates: 0
2023-05-27 13:59:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678550679883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 13:59:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678571676569600[0;39m 生成今日电子书快照开始
2023-05-27 13:59:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678571676569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 13:59:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678571676569600[0;39m ==> Parameters: 
2023-05-27 13:59:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678571676569600[0;39m <==    Updates: 0
2023-05-27 13:59:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678571676569600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:00:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678592622923776[0;39m 生成今日电子书快照开始
2023-05-27 14:00:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678592622923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678592622923776[0;39m ==> Parameters: 
2023-05-27 14:00:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678592622923776[0;39m <==    Updates: 0
2023-05-27 14:00:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678592622923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:00:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119678613627998208[0;39m 更新电子书下的文档数据开始
2023-05-27 14:00:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678613627998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:00:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678613627998208[0;39m ==> Parameters: 
2023-05-27 14:00:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678613627998208[0;39m <==    Updates: 8
2023-05-27 14:00:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119678613627998208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:00:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678613636386816[0;39m 生成今日电子书快照开始
2023-05-27 14:00:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678613636386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678613636386816[0;39m ==> Parameters: 
2023-05-27 14:00:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678613636386816[0;39m <==    Updates: 0
2023-05-27 14:00:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678613636386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:00:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678634582740992[0;39m 生成今日电子书快照开始
2023-05-27 14:00:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678634582740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678634582740992[0;39m ==> Parameters: 
2023-05-27 14:00:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678634582740992[0;39m <==    Updates: 0
2023-05-27 14:00:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678634582740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:00:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678655533289472[0;39m 生成今日电子书快照开始
2023-05-27 14:00:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678655533289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678655533289472[0;39m ==> Parameters: 
2023-05-27 14:00:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678655533289472[0;39m <==    Updates: 0
2023-05-27 14:00:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678655533289472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:00:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678676525780992[0;39m 生成今日电子书快照开始
2023-05-27 14:00:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678676525780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678676525780992[0;39m ==> Parameters: 
2023-05-27 14:00:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678676525780992[0;39m <==    Updates: 0
2023-05-27 14:00:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678676525780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:00:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678697497300992[0;39m 生成今日电子书快照开始
2023-05-27 14:00:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678697497300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678697497300992[0;39m ==> Parameters: 
2023-05-27 14:00:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678697497300992[0;39m <==    Updates: 0
2023-05-27 14:00:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678697497300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:00:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678718464626688[0;39m 生成今日电子书快照开始
2023-05-27 14:00:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678718464626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678718464626688[0;39m ==> Parameters: 
2023-05-27 14:00:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678718464626688[0;39m <==    Updates: 0
2023-05-27 14:00:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678718464626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:00:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119678739436146688[0;39m 更新电子书下的文档数据开始
2023-05-27 14:00:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678739436146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:00:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678739436146688[0;39m ==> Parameters: 
2023-05-27 14:00:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678739436146688[0;39m <==    Updates: 8
2023-05-27 14:00:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119678739436146688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:00:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678739444535296[0;39m 生成今日电子书快照开始
2023-05-27 14:00:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678739444535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678739444535296[0;39m ==> Parameters: 
2023-05-27 14:00:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678739444535296[0;39m <==    Updates: 0
2023-05-27 14:00:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678739444535296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:00:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678760399278080[0;39m 生成今日电子书快照开始
2023-05-27 14:00:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678760399278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678760399278080[0;39m ==> Parameters: 
2023-05-27 14:00:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678760399278080[0;39m <==    Updates: 0
2023-05-27 14:00:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678760399278080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:00:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678781421129728[0;39m 生成今日电子书快照开始
2023-05-27 14:00:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678781421129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678781421129728[0;39m ==> Parameters: 
2023-05-27 14:00:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678781421129728[0;39m <==    Updates: 0
2023-05-27 14:00:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678781421129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:00:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678802354900992[0;39m 生成今日电子书快照开始
2023-05-27 14:00:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678802354900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678802354900992[0;39m ==> Parameters: 
2023-05-27 14:00:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678802354900992[0;39m <==    Updates: 0
2023-05-27 14:00:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678802354900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:00:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678823339003904[0;39m 生成今日电子书快照开始
2023-05-27 14:00:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678823339003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:00:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678823339003904[0;39m ==> Parameters: 
2023-05-27 14:00:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678823339003904[0;39m <==    Updates: 0
2023-05-27 14:00:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678823339003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678844306329600[0;39m 生成今日电子书快照开始
2023-05-27 14:01:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678844306329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678844306329600[0;39m ==> Parameters: 
2023-05-27 14:01:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678844306329600[0;39m <==    Updates: 0
2023-05-27 14:01:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678844306329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119678865290432512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:01:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678865290432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:01:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678865290432512[0;39m ==> Parameters: 
2023-05-27 14:01:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678865290432512[0;39m <==    Updates: 8
2023-05-27 14:01:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119678865290432512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:01:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678865298821120[0;39m 生成今日电子书快照开始
2023-05-27 14:01:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678865298821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678865298821120[0;39m ==> Parameters: 
2023-05-27 14:01:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678865298821120[0;39m <==    Updates: 0
2023-05-27 14:01:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678865298821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678886253563904[0;39m 生成今日电子书快照开始
2023-05-27 14:01:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678886253563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678886253563904[0;39m ==> Parameters: 
2023-05-27 14:01:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678886253563904[0;39m <==    Updates: 0
2023-05-27 14:01:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678886253563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678907229278208[0;39m 生成今日电子书快照开始
2023-05-27 14:01:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678907229278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678907229278208[0;39m ==> Parameters: 
2023-05-27 14:01:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678907229278208[0;39m <==    Updates: 0
2023-05-27 14:01:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678907229278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678928196603904[0;39m 生成今日电子书快照开始
2023-05-27 14:01:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678928196603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678928196603904[0;39m ==> Parameters: 
2023-05-27 14:01:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678928196603904[0;39m <==    Updates: 0
2023-05-27 14:01:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678928196603904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:01:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678949184901120[0;39m 生成今日电子书快照开始
2023-05-27 14:01:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678949184901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678949184901120[0;39m ==> Parameters: 
2023-05-27 14:01:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678949184901120[0;39m <==    Updates: 0
2023-05-27 14:01:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678949184901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678970156421120[0;39m 生成今日电子书快照开始
2023-05-27 14:01:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678970156421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678970156421120[0;39m ==> Parameters: 
2023-05-27 14:01:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678970156421120[0;39m <==    Updates: 0
2023-05-27 14:01:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678970156421120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:01:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119678991111163904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:01:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678991111163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:01:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678991111163904[0;39m ==> Parameters: 
2023-05-27 14:01:35.101 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119678991111163904[0;39m <==    Updates: 8
2023-05-27 14:01:35.102 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119678991111163904[0;39m 更新电子书下的文档数据结束，耗时：93 毫秒
2023-05-27 14:01:35.102 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119678991501234176[0;39m 生成今日电子书快照开始
2023-05-27 14:01:35.102 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678991501234176[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:35.102 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678991501234176[0;39m ==> Parameters: 
2023-05-27 14:01:35.103 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119678991501234176[0;39m <==    Updates: 0
2023-05-27 14:01:35.104 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119678991501234176[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679012070100992[0;39m 生成今日电子书快照开始
2023-05-27 14:01:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679012070100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679012070100992[0;39m ==> Parameters: 
2023-05-27 14:01:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679012070100992[0;39m <==    Updates: 0
2023-05-27 14:01:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679012070100992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2023-05-27 14:01:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679033054203904[0;39m 生成今日电子书快照开始
2023-05-27 14:01:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679033054203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679033054203904[0;39m ==> Parameters: 
2023-05-27 14:01:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679033054203904[0;39m <==    Updates: 0
2023-05-27 14:01:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679033054203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679054017335296[0;39m 生成今日电子书快照开始
2023-05-27 14:01:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679054017335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679054017335296[0;39m ==> Parameters: 
2023-05-27 14:01:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679054017335296[0;39m <==    Updates: 0
2023-05-27 14:01:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679054017335296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:01:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679074988855296[0;39m 生成今日电子书快照开始
2023-05-27 14:01:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679074988855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:01:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679074988855296[0;39m ==> Parameters: 
2023-05-27 14:01:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679074988855296[0;39m <==    Updates: 0
2023-05-27 14:01:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679074988855296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:02:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679095951986688[0;39m 生成今日电子书快照开始
2023-05-27 14:02:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679095951986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679095951986688[0;39m ==> Parameters: 
2023-05-27 14:02:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679095951986688[0;39m <==    Updates: 0
2023-05-27 14:02:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679095951986688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 14:02:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119679116936089600[0;39m 更新电子书下的文档数据开始
2023-05-27 14:02:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679116936089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:02:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679116936089600[0;39m ==> Parameters: 
2023-05-27 14:02:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679116936089600[0;39m <==    Updates: 8
2023-05-27 14:02:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119679116936089600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:02:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679116944478208[0;39m 生成今日电子书快照开始
2023-05-27 14:02:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679116944478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679116944478208[0;39m ==> Parameters: 
2023-05-27 14:02:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679116944478208[0;39m <==    Updates: 0
2023-05-27 14:02:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679116944478208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 14:02:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679137911803904[0;39m 生成今日电子书快照开始
2023-05-27 14:02:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679137911803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679137911803904[0;39m ==> Parameters: 
2023-05-27 14:02:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679137911803904[0;39m <==    Updates: 0
2023-05-27 14:02:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679137911803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:02:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679158862352384[0;39m 生成今日电子书快照开始
2023-05-27 14:02:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679158862352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679158862352384[0;39m ==> Parameters: 
2023-05-27 14:02:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679158862352384[0;39m <==    Updates: 0
2023-05-27 14:02:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679158862352384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:02:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679179829678080[0;39m 生成今日电子书快照开始
2023-05-27 14:02:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679179829678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679179829678080[0;39m ==> Parameters: 
2023-05-27 14:02:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679179829678080[0;39m <==    Updates: 0
2023-05-27 14:02:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679179829678080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:02:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679200797003776[0;39m 生成今日电子书快照开始
2023-05-27 14:02:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679200797003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679200797003776[0;39m ==> Parameters: 
2023-05-27 14:02:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679200797003776[0;39m <==    Updates: 0
2023-05-27 14:02:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679200797003776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:02:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679221781106688[0;39m 生成今日电子书快照开始
2023-05-27 14:02:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679221781106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679221781106688[0;39m ==> Parameters: 
2023-05-27 14:02:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679221781106688[0;39m <==    Updates: 0
2023-05-27 14:02:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679221781106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:02:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679242781986816[0;39m 生成今日电子书快照开始
2023-05-27 14:02:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679242781986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679242781986816[0;39m ==> Parameters: 
2023-05-27 14:02:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679242781986816[0;39m <==    Updates: 0
2023-05-27 14:02:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679242781986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:02:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119679242790375424[0;39m 更新电子书下的文档数据开始
2023-05-27 14:02:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679242790375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:02:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679242790375424[0;39m ==> Parameters: 
2023-05-27 14:02:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679242790375424[0;39m <==    Updates: 8
2023-05-27 14:02:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119679242790375424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:02:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679263757701120[0;39m 生成今日电子书快照开始
2023-05-27 14:02:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679263757701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679263757701120[0;39m ==> Parameters: 
2023-05-27 14:02:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679263757701120[0;39m <==    Updates: 0
2023-05-27 14:02:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679263757701120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:02:45.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679284674695168[0;39m 生成今日电子书快照开始
2023-05-27 14:02:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679284674695168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679284674695168[0;39m ==> Parameters: 
2023-05-27 14:02:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679284674695168[0;39m <==    Updates: 0
2023-05-27 14:02:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679284674695168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:02:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679305650409472[0;39m 生成今日电子书快照开始
2023-05-27 14:02:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679305650409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679305650409472[0;39m ==> Parameters: 
2023-05-27 14:02:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679305650409472[0;39m <==    Updates: 0
2023-05-27 14:02:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679305650409472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:02:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679326676455424[0;39m 生成今日电子书快照开始
2023-05-27 14:02:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679326676455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:02:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679326676455424[0;39m ==> Parameters: 
2023-05-27 14:02:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679326676455424[0;39m <==    Updates: 0
2023-05-27 14:02:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679326676455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:03:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679347652169728[0;39m 生成今日电子书快照开始
2023-05-27 14:03:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679347652169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679347652169728[0;39m ==> Parameters: 
2023-05-27 14:03:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679347652169728[0;39m <==    Updates: 0
2023-05-27 14:03:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679347652169728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:03:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119679368577552384[0;39m 更新电子书下的文档数据开始
2023-05-27 14:03:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679368577552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:03:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679368577552384[0;39m ==> Parameters: 
2023-05-27 14:03:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679368577552384[0;39m <==    Updates: 8
2023-05-27 14:03:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119679368577552384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:03:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679368585940992[0;39m 生成今日电子书快照开始
2023-05-27 14:03:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679368585940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679368585940992[0;39m ==> Parameters: 
2023-05-27 14:03:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679368585940992[0;39m <==    Updates: 0
2023-05-27 14:03:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679368585940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:03:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679389570043904[0;39m 生成今日电子书快照开始
2023-05-27 14:03:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679389570043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679389570043904[0;39m ==> Parameters: 
2023-05-27 14:03:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679389570043904[0;39m <==    Updates: 0
2023-05-27 14:03:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679389570043904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:03:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679410558341120[0;39m 生成今日电子书快照开始
2023-05-27 14:03:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679410558341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679410558341120[0;39m ==> Parameters: 
2023-05-27 14:03:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679410558341120[0;39m <==    Updates: 0
2023-05-27 14:03:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679410558341120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:03:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679431496306688[0;39m 生成今日电子书快照开始
2023-05-27 14:03:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679431496306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679431496306688[0;39m ==> Parameters: 
2023-05-27 14:03:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679431496306688[0;39m <==    Updates: 0
2023-05-27 14:03:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679431496306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:03:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679452446855168[0;39m 生成今日电子书快照开始
2023-05-27 14:03:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679452446855168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679452446855168[0;39m ==> Parameters: 
2023-05-27 14:03:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679452446855168[0;39m <==    Updates: 0
2023-05-27 14:03:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679452446855168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:03:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679473464512512[0;39m 生成今日电子书快照开始
2023-05-27 14:03:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679473464512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679473464512512[0;39m ==> Parameters: 
2023-05-27 14:03:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679473464512512[0;39m <==    Updates: 0
2023-05-27 14:03:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679473464512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:03:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119679494452809728[0;39m 更新电子书下的文档数据开始
2023-05-27 14:03:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679494452809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:03:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679494452809728[0;39m ==> Parameters: 
2023-05-27 14:03:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679494452809728[0;39m <==    Updates: 8
2023-05-27 14:03:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119679494452809728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:03:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679494461198336[0;39m 生成今日电子书快照开始
2023-05-27 14:03:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679494461198336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679494461198336[0;39m ==> Parameters: 
2023-05-27 14:03:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679494461198336[0;39m <==    Updates: 0
2023-05-27 14:03:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679494461198336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:03:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679515369803776[0;39m 生成今日电子书快照开始
2023-05-27 14:03:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679515369803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679515369803776[0;39m ==> Parameters: 
2023-05-27 14:03:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679515369803776[0;39m <==    Updates: 0
2023-05-27 14:03:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679515369803776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:03:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679536341323776[0;39m 生成今日电子书快照开始
2023-05-27 14:03:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679536341323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679536341323776[0;39m ==> Parameters: 
2023-05-27 14:03:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679536341323776[0;39m <==    Updates: 0
2023-05-27 14:03:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679536341323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:03:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679557363175424[0;39m 生成今日电子书快照开始
2023-05-27 14:03:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679557363175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679557363175424[0;39m ==> Parameters: 
2023-05-27 14:03:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679557363175424[0;39m <==    Updates: 0
2023-05-27 14:03:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679557363175424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:03:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679578330501120[0;39m 生成今日电子书快照开始
2023-05-27 14:03:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679578330501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:03:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679578330501120[0;39m ==> Parameters: 
2023-05-27 14:03:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679578330501120[0;39m <==    Updates: 0
2023-05-27 14:03:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679578330501120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:04:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679599289438208[0;39m 生成今日电子书快照开始
2023-05-27 14:04:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679599289438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679599289438208[0;39m ==> Parameters: 
2023-05-27 14:04:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679599289438208[0;39m <==    Updates: 0
2023-05-27 14:04:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679599289438208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:04:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119679620239986688[0;39m 更新电子书下的文档数据开始
2023-05-27 14:04:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679620239986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:04:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679620239986688[0;39m ==> Parameters: 
2023-05-27 14:04:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679620239986688[0;39m <==    Updates: 8
2023-05-27 14:04:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119679620239986688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:04:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679620248375296[0;39m 生成今日电子书快照开始
2023-05-27 14:04:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679620248375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679620248375296[0;39m ==> Parameters: 
2023-05-27 14:04:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679620248375296[0;39m <==    Updates: 0
2023-05-27 14:04:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679620248375296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:04:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679641207312384[0;39m 生成今日电子书快照开始
2023-05-27 14:04:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679641207312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679641207312384[0;39m ==> Parameters: 
2023-05-27 14:04:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679641207312384[0;39m <==    Updates: 0
2023-05-27 14:04:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679641207312384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:04:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679662187220992[0;39m 生成今日电子书快照开始
2023-05-27 14:04:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679662187220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679662187220992[0;39m ==> Parameters: 
2023-05-27 14:04:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679662187220992[0;39m <==    Updates: 0
2023-05-27 14:04:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679662187220992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:04:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679683167129600[0;39m 生成今日电子书快照开始
2023-05-27 14:04:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679683167129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679683167129600[0;39m ==> Parameters: 
2023-05-27 14:04:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679683167129600[0;39m <==    Updates: 0
2023-05-27 14:04:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679683167129600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:04:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679704130260992[0;39m 生成今日电子书快照开始
2023-05-27 14:04:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679704130260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679704130260992[0;39m ==> Parameters: 
2023-05-27 14:04:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679704130260992[0;39m <==    Updates: 0
2023-05-27 14:04:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679704130260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:04:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679725122752512[0;39m 生成今日电子书快照开始
2023-05-27 14:04:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679725122752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679725122752512[0;39m ==> Parameters: 
2023-05-27 14:04:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679725122752512[0;39m <==    Updates: 0
2023-05-27 14:04:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679725122752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:04:35.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119679746048135168[0;39m 更新电子书下的文档数据开始
2023-05-27 14:04:35.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679746048135168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:04:35.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679746048135168[0;39m ==> Parameters: 
2023-05-27 14:04:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679746048135168[0;39m <==    Updates: 8
2023-05-27 14:04:35.001 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119679746048135168[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:04:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679746052329472[0;39m 生成今日电子书快照开始
2023-05-27 14:04:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679746052329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679746052329472[0;39m ==> Parameters: 
2023-05-27 14:04:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679746052329472[0;39m <==    Updates: 0
2023-05-27 14:04:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679746052329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:04:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679767074181120[0;39m 生成今日电子书快照开始
2023-05-27 14:04:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679767074181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679767074181120[0;39m ==> Parameters: 
2023-05-27 14:04:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679767074181120[0;39m <==    Updates: 0
2023-05-27 14:04:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679767074181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:04:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679788033118208[0;39m 生成今日电子书快照开始
2023-05-27 14:04:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679788033118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679788033118208[0;39m ==> Parameters: 
2023-05-27 14:04:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679788033118208[0;39m <==    Updates: 0
2023-05-27 14:04:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679788033118208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:04:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679808996249600[0;39m 生成今日电子书快照开始
2023-05-27 14:04:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679808996249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679808996249600[0;39m ==> Parameters: 
2023-05-27 14:04:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679808996249600[0;39m <==    Updates: 0
2023-05-27 14:04:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679808996249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:04:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679829946798080[0;39m 生成今日电子书快照开始
2023-05-27 14:04:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679829946798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:04:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679829946798080[0;39m ==> Parameters: 
2023-05-27 14:04:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679829946798080[0;39m <==    Updates: 0
2023-05-27 14:04:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679829946798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:05:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679850926706688[0;39m 生成今日电子书快照开始
2023-05-27 14:05:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679850926706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679850926706688[0;39m ==> Parameters: 
2023-05-27 14:05:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679850926706688[0;39m <==    Updates: 0
2023-05-27 14:05:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679850926706688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:05:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679871910809600[0;39m 生成今日电子书快照开始
2023-05-27 14:05:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679871910809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679871910809600[0;39m ==> Parameters: 
2023-05-27 14:05:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679871910809600[0;39m <==    Updates: 0
2023-05-27 14:05:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679871910809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:05:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119679871919198208[0;39m 更新电子书下的文档数据开始
2023-05-27 14:05:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679871919198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:05:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679871919198208[0;39m ==> Parameters: 
2023-05-27 14:05:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679871919198208[0;39m <==    Updates: 8
2023-05-27 14:05:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119679871919198208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:05:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679892873940992[0;39m 生成今日电子书快照开始
2023-05-27 14:05:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679892873940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679892873940992[0;39m ==> Parameters: 
2023-05-27 14:05:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679892873940992[0;39m <==    Updates: 0
2023-05-27 14:05:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679892873940992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:05:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679913832878080[0;39m 生成今日电子书快照开始
2023-05-27 14:05:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679913832878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679913832878080[0;39m ==> Parameters: 
2023-05-27 14:05:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679913832878080[0;39m <==    Updates: 0
2023-05-27 14:05:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679913832878080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:05:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679934812786688[0;39m 生成今日电子书快照开始
2023-05-27 14:05:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679934812786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679934812786688[0;39m ==> Parameters: 
2023-05-27 14:05:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679934812786688[0;39m <==    Updates: 0
2023-05-27 14:05:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679934812786688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:05:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679955784306688[0;39m 生成今日电子书快照开始
2023-05-27 14:05:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679955784306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679955784306688[0;39m ==> Parameters: 
2023-05-27 14:05:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679955784306688[0;39m <==    Updates: 0
2023-05-27 14:05:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679955784306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:05:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679976760020992[0;39m 生成今日电子书快照开始
2023-05-27 14:05:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679976760020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679976760020992[0;39m ==> Parameters: 
2023-05-27 14:05:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679976760020992[0;39m <==    Updates: 0
2023-05-27 14:05:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679976760020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:05:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119679997752512512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:05:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679997752512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:05:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679997752512512[0;39m ==> Parameters: 
2023-05-27 14:05:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119679997752512512[0;39m <==    Updates: 8
2023-05-27 14:05:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119679997752512512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:05:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119679997760901120[0;39m 生成今日电子书快照开始
2023-05-27 14:05:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679997760901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679997760901120[0;39m ==> Parameters: 
2023-05-27 14:05:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119679997760901120[0;39m <==    Updates: 0
2023-05-27 14:05:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119679997760901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:05:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680018703060992[0;39m 生成今日电子书快照开始
2023-05-27 14:05:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680018703060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680018703060992[0;39m ==> Parameters: 
2023-05-27 14:05:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680018703060992[0;39m <==    Updates: 0
2023-05-27 14:05:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680018703060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:05:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680039699746816[0;39m 生成今日电子书快照开始
2023-05-27 14:05:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680039699746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680039699746816[0;39m ==> Parameters: 
2023-05-27 14:05:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680039699746816[0;39m <==    Updates: 0
2023-05-27 14:05:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680039699746816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:05:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680060637712384[0;39m 生成今日电子书快照开始
2023-05-27 14:05:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680060637712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680060637712384[0;39m ==> Parameters: 
2023-05-27 14:05:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680060637712384[0;39m <==    Updates: 0
2023-05-27 14:05:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680060637712384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:05:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680081626009600[0;39m 生成今日电子书快照开始
2023-05-27 14:05:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680081626009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:05:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680081626009600[0;39m ==> Parameters: 
2023-05-27 14:05:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680081626009600[0;39m <==    Updates: 0
2023-05-27 14:05:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680081626009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680102572363776[0;39m 生成今日电子书快照开始
2023-05-27 14:06:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680102572363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680102572363776[0;39m ==> Parameters: 
2023-05-27 14:06:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680102572363776[0;39m <==    Updates: 0
2023-05-27 14:06:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680102572363776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:06:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119680123552272384[0;39m 更新电子书下的文档数据开始
2023-05-27 14:06:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680123552272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:06:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680123552272384[0;39m ==> Parameters: 
2023-05-27 14:06:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680123552272384[0;39m <==    Updates: 8
2023-05-27 14:06:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119680123552272384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:06:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680123556466688[0;39m 生成今日电子书快照开始
2023-05-27 14:06:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680123556466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680123556466688[0;39m ==> Parameters: 
2023-05-27 14:06:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680123556466688[0;39m <==    Updates: 0
2023-05-27 14:06:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680123556466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680144544763904[0;39m 生成今日电子书快照开始
2023-05-27 14:06:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680144544763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680144544763904[0;39m ==> Parameters: 
2023-05-27 14:06:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680144544763904[0;39m <==    Updates: 0
2023-05-27 14:06:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680144544763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680165541449728[0;39m 生成今日电子书快照开始
2023-05-27 14:06:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680165541449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680165541449728[0;39m ==> Parameters: 
2023-05-27 14:06:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680165541449728[0;39m <==    Updates: 0
2023-05-27 14:06:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680165541449728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680186512969728[0;39m 生成今日电子书快照开始
2023-05-27 14:06:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680186512969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680186512969728[0;39m ==> Parameters: 
2023-05-27 14:06:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680186512969728[0;39m <==    Updates: 0
2023-05-27 14:06:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680186512969728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680207438352384[0;39m 生成今日电子书快照开始
2023-05-27 14:06:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680207438352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680207438352384[0;39m ==> Parameters: 
2023-05-27 14:06:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680207438352384[0;39m <==    Updates: 0
2023-05-27 14:06:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680207438352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680228443426816[0;39m 生成今日电子书快照开始
2023-05-27 14:06:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680228443426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680228443426816[0;39m ==> Parameters: 
2023-05-27 14:06:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680228443426816[0;39m <==    Updates: 0
2023-05-27 14:06:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680228443426816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680249368809472[0;39m 生成今日电子书快照开始
2023-05-27 14:06:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680249368809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680249368809472[0;39m ==> Parameters: 
2023-05-27 14:06:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680249368809472[0;39m <==    Updates: 0
2023-05-27 14:06:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680249368809472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119680249377198080[0;39m 更新电子书下的文档数据开始
2023-05-27 14:06:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680249377198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:06:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680249377198080[0;39m ==> Parameters: 
2023-05-27 14:06:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680249377198080[0;39m <==    Updates: 8
2023-05-27 14:06:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119680249377198080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:06:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680270365495296[0;39m 生成今日电子书快照开始
2023-05-27 14:06:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680270365495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680270365495296[0;39m ==> Parameters: 
2023-05-27 14:06:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680270365495296[0;39m <==    Updates: 0
2023-05-27 14:06:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680270365495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680291316043776[0;39m 生成今日电子书快照开始
2023-05-27 14:06:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680291316043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680291316043776[0;39m ==> Parameters: 
2023-05-27 14:06:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680291316043776[0;39m <==    Updates: 0
2023-05-27 14:06:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680291316043776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680312295952384[0;39m 生成今日电子书快照开始
2023-05-27 14:06:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680312295952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680312295952384[0;39m ==> Parameters: 
2023-05-27 14:06:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680312295952384[0;39m <==    Updates: 0
2023-05-27 14:06:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680312295952384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:06:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680333301026816[0;39m 生成今日电子书快照开始
2023-05-27 14:06:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680333301026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:06:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680333301026816[0;39m ==> Parameters: 
2023-05-27 14:06:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680333301026816[0;39m <==    Updates: 0
2023-05-27 14:06:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680333301026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:07:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680354234798080[0;39m 生成今日电子书快照开始
2023-05-27 14:07:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680354234798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680354234798080[0;39m ==> Parameters: 
2023-05-27 14:07:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680354234798080[0;39m <==    Updates: 0
2023-05-27 14:07:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680354234798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:07:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680375223095296[0;39m 生成今日电子书快照开始
2023-05-27 14:07:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680375223095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680375223095296[0;39m ==> Parameters: 
2023-05-27 14:07:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680375223095296[0;39m <==    Updates: 0
2023-05-27 14:07:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680375223095296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:07:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119680375227289600[0;39m 更新电子书下的文档数据开始
2023-05-27 14:07:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680375227289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:07:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680375227289600[0;39m ==> Parameters: 
2023-05-27 14:07:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680375227289600[0;39m <==    Updates: 8
2023-05-27 14:07:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119680375227289600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:07:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680396228169728[0;39m 生成今日电子书快照开始
2023-05-27 14:07:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680396228169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680396228169728[0;39m ==> Parameters: 
2023-05-27 14:07:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680396228169728[0;39m <==    Updates: 0
2023-05-27 14:07:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680396228169728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:07:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680417191301120[0;39m 生成今日电子书快照开始
2023-05-27 14:07:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680417191301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680417191301120[0;39m ==> Parameters: 
2023-05-27 14:07:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680417191301120[0;39m <==    Updates: 0
2023-05-27 14:07:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680417191301120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:07:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680438120878080[0;39m 生成今日电子书快照开始
2023-05-27 14:07:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680438120878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680438120878080[0;39m ==> Parameters: 
2023-05-27 14:07:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680438120878080[0;39m <==    Updates: 0
2023-05-27 14:07:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680438120878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:07:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680459130146816[0;39m 生成今日电子书快照开始
2023-05-27 14:07:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680459130146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680459130146816[0;39m ==> Parameters: 
2023-05-27 14:07:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680459130146816[0;39m <==    Updates: 0
2023-05-27 14:07:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680459130146816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:07:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680480110055424[0;39m 生成今日电子书快照开始
2023-05-27 14:07:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680480110055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680480110055424[0;39m ==> Parameters: 
2023-05-27 14:07:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680480110055424[0;39m <==    Updates: 0
2023-05-27 14:07:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680480110055424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:07:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119680501085769728[0;39m 更新电子书下的文档数据开始
2023-05-27 14:07:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680501085769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:07:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680501085769728[0;39m ==> Parameters: 
2023-05-27 14:07:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680501085769728[0;39m <==    Updates: 8
2023-05-27 14:07:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119680501085769728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:07:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680501089964032[0;39m 生成今日电子书快照开始
2023-05-27 14:07:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680501089964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680501089964032[0;39m ==> Parameters: 
2023-05-27 14:07:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680501089964032[0;39m <==    Updates: 0
2023-05-27 14:07:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680501089964032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:07:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680522032123904[0;39m 生成今日电子书快照开始
2023-05-27 14:07:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680522032123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680522032123904[0;39m ==> Parameters: 
2023-05-27 14:07:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680522032123904[0;39m <==    Updates: 0
2023-05-27 14:07:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680522032123904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:07:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680542986866688[0;39m 生成今日电子书快照开始
2023-05-27 14:07:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680542986866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680542986866688[0;39m ==> Parameters: 
2023-05-27 14:07:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680542986866688[0;39m <==    Updates: 0
2023-05-27 14:07:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680542986866688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:07:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680563958386688[0;39m 生成今日电子书快照开始
2023-05-27 14:07:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680563958386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680563958386688[0;39m ==> Parameters: 
2023-05-27 14:07:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680563958386688[0;39m <==    Updates: 0
2023-05-27 14:07:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680563958386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:07:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680584955072512[0;39m 生成今日电子书快照开始
2023-05-27 14:07:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680584955072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:07:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680584955072512[0;39m ==> Parameters: 
2023-05-27 14:07:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680584955072512[0;39m <==    Updates: 0
2023-05-27 14:07:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680584955072512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680605930786816[0;39m 生成今日电子书快照开始
2023-05-27 14:08:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680605930786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680605930786816[0;39m ==> Parameters: 
2023-05-27 14:08:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680605930786816[0;39m <==    Updates: 0
2023-05-27 14:08:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680605930786816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:08:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680626885529600[0;39m 生成今日电子书快照开始
2023-05-27 14:08:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680626885529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680626885529600[0;39m ==> Parameters: 
2023-05-27 14:08:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680626885529600[0;39m <==    Updates: 0
2023-05-27 14:08:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680626885529600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119680626893918208[0;39m 更新电子书下的文档数据开始
2023-05-27 14:08:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680626893918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:08:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680626893918208[0;39m ==> Parameters: 
2023-05-27 14:08:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680626893918208[0;39m <==    Updates: 8
2023-05-27 14:08:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119680626893918208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:08:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680647840272384[0;39m 生成今日电子书快照开始
2023-05-27 14:08:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680647840272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680647840272384[0;39m ==> Parameters: 
2023-05-27 14:08:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680647840272384[0;39m <==    Updates: 0
2023-05-27 14:08:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680647840272384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:08:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680668828569600[0;39m 生成今日电子书快照开始
2023-05-27 14:08:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680668828569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680668828569600[0;39m ==> Parameters: 
2023-05-27 14:08:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680668828569600[0;39m <==    Updates: 0
2023-05-27 14:08:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680668828569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680689825255424[0;39m 生成今日电子书快照开始
2023-05-27 14:08:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680689825255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680689825255424[0;39m ==> Parameters: 
2023-05-27 14:08:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680689825255424[0;39m <==    Updates: 0
2023-05-27 14:08:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680689825255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680710754832384[0;39m 生成今日电子书快照开始
2023-05-27 14:08:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680710754832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680710754832384[0;39m ==> Parameters: 
2023-05-27 14:08:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680710754832384[0;39m <==    Updates: 0
2023-05-27 14:08:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680710754832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680731751518208[0;39m 生成今日电子书快照开始
2023-05-27 14:08:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680731751518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680731751518208[0;39m ==> Parameters: 
2023-05-27 14:08:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680731751518208[0;39m <==    Updates: 0
2023-05-27 14:08:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680731751518208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680752710455296[0;39m 生成今日电子书快照开始
2023-05-27 14:08:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680752710455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680752710455296[0;39m ==> Parameters: 
2023-05-27 14:08:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680752710455296[0;39m <==    Updates: 0
2023-05-27 14:08:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680752710455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119680752718843904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:08:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680752718843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:08:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680752718843904[0;39m ==> Parameters: 
2023-05-27 14:08:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680752718843904[0;39m <==    Updates: 8
2023-05-27 14:08:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119680752718843904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:08:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680773694558208[0;39m 生成今日电子书快照开始
2023-05-27 14:08:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680773694558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680773694558208[0;39m ==> Parameters: 
2023-05-27 14:08:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680773694558208[0;39m <==    Updates: 0
2023-05-27 14:08:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680773694558208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680794661883904[0;39m 生成今日电子书快照开始
2023-05-27 14:08:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680794661883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680794661883904[0;39m ==> Parameters: 
2023-05-27 14:08:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680794661883904[0;39m <==    Updates: 0
2023-05-27 14:08:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680794661883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680815641792512[0;39m 生成今日电子书快照开始
2023-05-27 14:08:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680815641792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680815641792512[0;39m ==> Parameters: 
2023-05-27 14:08:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680815641792512[0;39m <==    Updates: 0
2023-05-27 14:08:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680815641792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:08:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680836621701120[0;39m 生成今日电子书快照开始
2023-05-27 14:08:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680836621701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:08:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680836621701120[0;39m ==> Parameters: 
2023-05-27 14:08:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680836621701120[0;39m <==    Updates: 0
2023-05-27 14:08:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680836621701120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:09:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680857589026816[0;39m 生成今日电子书快照开始
2023-05-27 14:09:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680857589026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680857589026816[0;39m ==> Parameters: 
2023-05-27 14:09:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680857589026816[0;39m <==    Updates: 0
2023-05-27 14:09:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680857589026816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:09:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680878547963904[0;39m 生成今日电子书快照开始
2023-05-27 14:09:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680878547963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680878547963904[0;39m ==> Parameters: 
2023-05-27 14:09:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680878547963904[0;39m <==    Updates: 0
2023-05-27 14:09:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680878547963904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:09:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119680878556352512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:09:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680878556352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:09:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680878556352512[0;39m ==> Parameters: 
2023-05-27 14:09:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119680878556352512[0;39m <==    Updates: 8
2023-05-27 14:09:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119680878556352512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:09:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680899506900992[0;39m 生成今日电子书快照开始
2023-05-27 14:09:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680899506900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680899506900992[0;39m ==> Parameters: 
2023-05-27 14:09:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680899506900992[0;39m <==    Updates: 0
2023-05-27 14:09:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680899506900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:09:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680920486809600[0;39m 生成今日电子书快照开始
2023-05-27 14:09:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680920486809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680920486809600[0;39m ==> Parameters: 
2023-05-27 14:09:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680920486809600[0;39m <==    Updates: 0
2023-05-27 14:09:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680920486809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:09:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680941449940992[0;39m 生成今日电子书快照开始
2023-05-27 14:09:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680941449940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680941449940992[0;39m ==> Parameters: 
2023-05-27 14:09:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680941449940992[0;39m <==    Updates: 0
2023-05-27 14:09:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680941449940992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:09:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680962421460992[0;39m 生成今日电子书快照开始
2023-05-27 14:09:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680962421460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680962421460992[0;39m ==> Parameters: 
2023-05-27 14:09:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680962421460992[0;39m <==    Updates: 0
2023-05-27 14:09:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680962421460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:09:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119680983413952512[0;39m 生成今日电子书快照开始
2023-05-27 14:09:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680983413952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680983413952512[0;39m ==> Parameters: 
2023-05-27 14:09:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119680983413952512[0;39m <==    Updates: 0
2023-05-27 14:09:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119680983413952512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:09:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119681004385472512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:09:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681004385472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:09:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681004385472512[0;39m ==> Parameters: 
2023-05-27 14:09:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681004385472512[0;39m <==    Updates: 8
2023-05-27 14:09:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119681004385472512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:09:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681004389666816[0;39m 生成今日电子书快照开始
2023-05-27 14:09:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681004389666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681004389666816[0;39m ==> Parameters: 
2023-05-27 14:09:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681004389666816[0;39m <==    Updates: 0
2023-05-27 14:09:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681004389666816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:09:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681025348603904[0;39m 生成今日电子书快照开始
2023-05-27 14:09:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681025348603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681025348603904[0;39m ==> Parameters: 
2023-05-27 14:09:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681025348603904[0;39m <==    Updates: 0
2023-05-27 14:09:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681025348603904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:09:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681046307540992[0;39m 生成今日电子书快照开始
2023-05-27 14:09:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681046307540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681046307540992[0;39m ==> Parameters: 
2023-05-27 14:09:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681046307540992[0;39m <==    Updates: 0
2023-05-27 14:09:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681046307540992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:09:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681067308421120[0;39m 生成今日电子书快照开始
2023-05-27 14:09:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681067308421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681067308421120[0;39m ==> Parameters: 
2023-05-27 14:09:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681067308421120[0;39m <==    Updates: 0
2023-05-27 14:09:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681067308421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:09:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681088288329728[0;39m 生成今日电子书快照开始
2023-05-27 14:09:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681088288329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:09:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681088288329728[0;39m ==> Parameters: 
2023-05-27 14:09:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681088288329728[0;39m <==    Updates: 0
2023-05-27 14:09:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681088288329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681109251461120[0;39m 生成今日电子书快照开始
2023-05-27 14:10:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681109251461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681109251461120[0;39m ==> Parameters: 
2023-05-27 14:10:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681109251461120[0;39m <==    Updates: 0
2023-05-27 14:10:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681109251461120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:10:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681130227175424[0;39m 生成今日电子书快照开始
2023-05-27 14:10:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681130227175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681130227175424[0;39m ==> Parameters: 
2023-05-27 14:10:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681130227175424[0;39m <==    Updates: 0
2023-05-27 14:10:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681130227175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119681130235564032[0;39m 更新电子书下的文档数据开始
2023-05-27 14:10:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681130235564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:10:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681130235564032[0;39m ==> Parameters: 
2023-05-27 14:10:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681130235564032[0;39m <==    Updates: 8
2023-05-27 14:10:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119681130235564032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:10:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681151152558080[0;39m 生成今日电子书快照开始
2023-05-27 14:10:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681151152558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681151152558080[0;39m ==> Parameters: 
2023-05-27 14:10:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681151152558080[0;39m <==    Updates: 0
2023-05-27 14:10:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681151152558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681172128272384[0;39m 生成今日电子书快照开始
2023-05-27 14:10:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681172128272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681172128272384[0;39m ==> Parameters: 
2023-05-27 14:10:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681172128272384[0;39m <==    Updates: 0
2023-05-27 14:10:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681172128272384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:10:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681193108180992[0;39m 生成今日电子书快照开始
2023-05-27 14:10:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681193108180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681193108180992[0;39m ==> Parameters: 
2023-05-27 14:10:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681193108180992[0;39m <==    Updates: 0
2023-05-27 14:10:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681193108180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681214109061120[0;39m 生成今日电子书快照开始
2023-05-27 14:10:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681214109061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681214109061120[0;39m ==> Parameters: 
2023-05-27 14:10:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681214109061120[0;39m <==    Updates: 0
2023-05-27 14:10:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681214109061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681235088969728[0;39m 生成今日电子书快照开始
2023-05-27 14:10:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681235088969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681235088969728[0;39m ==> Parameters: 
2023-05-27 14:10:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681235088969728[0;39m <==    Updates: 0
2023-05-27 14:10:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681235088969728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:10:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681256022740992[0;39m 生成今日电子书快照开始
2023-05-27 14:10:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681256022740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681256022740992[0;39m ==> Parameters: 
2023-05-27 14:10:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681256022740992[0;39m <==    Updates: 0
2023-05-27 14:10:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681256022740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119681256031129600[0;39m 更新电子书下的文档数据开始
2023-05-27 14:10:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681256031129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:10:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681256031129600[0;39m ==> Parameters: 
2023-05-27 14:10:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681256031129600[0;39m <==    Updates: 8
2023-05-27 14:10:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119681256031129600[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-27 14:10:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681277002649600[0;39m 生成今日电子书快照开始
2023-05-27 14:10:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681277002649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681277002649600[0;39m ==> Parameters: 
2023-05-27 14:10:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681277002649600[0;39m <==    Updates: 0
2023-05-27 14:10:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681277002649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681297978363904[0;39m 生成今日电子书快照开始
2023-05-27 14:10:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681297978363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681297978363904[0;39m ==> Parameters: 
2023-05-27 14:10:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681297978363904[0;39m <==    Updates: 0
2023-05-27 14:10:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681297978363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681318945689600[0;39m 生成今日电子书快照开始
2023-05-27 14:10:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681318945689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681318945689600[0;39m ==> Parameters: 
2023-05-27 14:10:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681318945689600[0;39m <==    Updates: 0
2023-05-27 14:10:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681318945689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:10:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681339892043776[0;39m 生成今日电子书快照开始
2023-05-27 14:10:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681339892043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:10:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681339892043776[0;39m ==> Parameters: 
2023-05-27 14:10:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681339892043776[0;39m <==    Updates: 0
2023-05-27 14:10:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681339892043776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:11:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681360897118208[0;39m 生成今日电子书快照开始
2023-05-27 14:11:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681360897118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681360897118208[0;39m ==> Parameters: 
2023-05-27 14:11:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681360897118208[0;39m <==    Updates: 0
2023-05-27 14:11:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681360897118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:11:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119681381872832512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:11:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681381872832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:11:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681381872832512[0;39m ==> Parameters: 
2023-05-27 14:11:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681381872832512[0;39m <==    Updates: 8
2023-05-27 14:11:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119681381872832512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:11:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681381877026816[0;39m 生成今日电子书快照开始
2023-05-27 14:11:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681381877026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681381877026816[0;39m ==> Parameters: 
2023-05-27 14:11:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681381877026816[0;39m <==    Updates: 0
2023-05-27 14:11:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681381877026816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:11:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681402861129728[0;39m 生成今日电子书快照开始
2023-05-27 14:11:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681402861129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681402861129728[0;39m ==> Parameters: 
2023-05-27 14:11:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681402861129728[0;39m <==    Updates: 0
2023-05-27 14:11:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681402861129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:11:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681423786512384[0;39m 生成今日电子书快照开始
2023-05-27 14:11:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681423786512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681423786512384[0;39m ==> Parameters: 
2023-05-27 14:11:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681423786512384[0;39m <==    Updates: 0
2023-05-27 14:11:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681423786512384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:11:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681444770615296[0;39m 生成今日电子书快照开始
2023-05-27 14:11:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681444770615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681444770615296[0;39m ==> Parameters: 
2023-05-27 14:11:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681444770615296[0;39m <==    Updates: 0
2023-05-27 14:11:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681444770615296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:11:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681465763106816[0;39m 生成今日电子书快照开始
2023-05-27 14:11:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681465763106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681465763106816[0;39m ==> Parameters: 
2023-05-27 14:11:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681465763106816[0;39m <==    Updates: 0
2023-05-27 14:11:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681465763106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:11:30.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681486684295168[0;39m 生成今日电子书快照开始
2023-05-27 14:11:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681486684295168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681486684295168[0;39m ==> Parameters: 
2023-05-27 14:11:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681486684295168[0;39m <==    Updates: 0
2023-05-27 14:11:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681486684295168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:11:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119681507710341120[0;39m 更新电子书下的文档数据开始
2023-05-27 14:11:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681507710341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:11:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681507710341120[0;39m ==> Parameters: 
2023-05-27 14:11:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681507710341120[0;39m <==    Updates: 8
2023-05-27 14:11:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119681507710341120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:11:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681507718729728[0;39m 生成今日电子书快照开始
2023-05-27 14:11:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681507718729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681507718729728[0;39m ==> Parameters: 
2023-05-27 14:11:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681507718729728[0;39m <==    Updates: 0
2023-05-27 14:11:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681507718729728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:11:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681528677666816[0;39m 生成今日电子书快照开始
2023-05-27 14:11:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681528677666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681528677666816[0;39m ==> Parameters: 
2023-05-27 14:11:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681528677666816[0;39m <==    Updates: 0
2023-05-27 14:11:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681528677666816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 14:11:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681549661769728[0;39m 生成今日电子书快照开始
2023-05-27 14:11:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681549661769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681549661769728[0;39m ==> Parameters: 
2023-05-27 14:11:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681549661769728[0;39m <==    Updates: 0
2023-05-27 14:11:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681549661769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:11:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681570587152384[0;39m 生成今日电子书快照开始
2023-05-27 14:11:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681570587152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681570587152384[0;39m ==> Parameters: 
2023-05-27 14:11:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681570587152384[0;39m <==    Updates: 0
2023-05-27 14:11:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681570587152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:11:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681591583838208[0;39m 生成今日电子书快照开始
2023-05-27 14:11:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681591583838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:11:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681591583838208[0;39m ==> Parameters: 
2023-05-27 14:11:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681591583838208[0;39m <==    Updates: 0
2023-05-27 14:11:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681591583838208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:12:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681612542775296[0;39m 生成今日电子书快照开始
2023-05-27 14:12:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681612542775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681612542775296[0;39m ==> Parameters: 
2023-05-27 14:12:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681612542775296[0;39m <==    Updates: 0
2023-05-27 14:12:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681612542775296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:12:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119681633539461120[0;39m 更新电子书下的文档数据开始
2023-05-27 14:12:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681633539461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:12:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681633539461120[0;39m ==> Parameters: 
2023-05-27 14:12:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681633539461120[0;39m <==    Updates: 8
2023-05-27 14:12:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119681633539461120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:12:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681633543655424[0;39m 生成今日电子书快照开始
2023-05-27 14:12:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681633543655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681633543655424[0;39m ==> Parameters: 
2023-05-27 14:12:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681633543655424[0;39m <==    Updates: 0
2023-05-27 14:12:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681633543655424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:12:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681654502592512[0;39m 生成今日电子书快照开始
2023-05-27 14:12:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681654502592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681654502592512[0;39m ==> Parameters: 
2023-05-27 14:12:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681654502592512[0;39m <==    Updates: 0
2023-05-27 14:12:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681654502592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:12:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681675440558080[0;39m 生成今日电子书快照开始
2023-05-27 14:12:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681675440558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681675440558080[0;39m ==> Parameters: 
2023-05-27 14:12:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681675440558080[0;39m <==    Updates: 0
2023-05-27 14:12:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681675440558080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:12:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681696416272384[0;39m 生成今日电子书快照开始
2023-05-27 14:12:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681696416272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681696416272384[0;39m ==> Parameters: 
2023-05-27 14:12:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681696416272384[0;39m <==    Updates: 0
2023-05-27 14:12:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681696416272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:12:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681717391986688[0;39m 生成今日电子书快照开始
2023-05-27 14:12:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681717391986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681717391986688[0;39m ==> Parameters: 
2023-05-27 14:12:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681717391986688[0;39m <==    Updates: 0
2023-05-27 14:12:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681717391986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:12:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681738346729472[0;39m 生成今日电子书快照开始
2023-05-27 14:12:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681738346729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681738346729472[0;39m ==> Parameters: 
2023-05-27 14:12:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681738346729472[0;39m <==    Updates: 0
2023-05-27 14:12:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681738346729472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:12:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119681759360192512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:12:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681759360192512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:12:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681759360192512[0;39m ==> Parameters: 
2023-05-27 14:12:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681759360192512[0;39m <==    Updates: 8
2023-05-27 14:12:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119681759360192512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:12:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681759368581120[0;39m 生成今日电子书快照开始
2023-05-27 14:12:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681759368581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681759368581120[0;39m ==> Parameters: 
2023-05-27 14:12:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681759368581120[0;39m <==    Updates: 0
2023-05-27 14:12:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681759368581120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:12:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681780302352384[0;39m 生成今日电子书快照开始
2023-05-27 14:12:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681780302352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681780302352384[0;39m ==> Parameters: 
2023-05-27 14:12:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681780302352384[0;39m <==    Updates: 0
2023-05-27 14:12:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681780302352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:12:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681801294843904[0;39m 生成今日电子书快照开始
2023-05-27 14:12:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681801294843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681801294843904[0;39m ==> Parameters: 
2023-05-27 14:12:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681801294843904[0;39m <==    Updates: 0
2023-05-27 14:12:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681801294843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:12:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681822266363904[0;39m 生成今日电子书快照开始
2023-05-27 14:12:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681822266363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681822266363904[0;39m ==> Parameters: 
2023-05-27 14:12:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681822266363904[0;39m <==    Updates: 0
2023-05-27 14:12:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681822266363904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:12:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681843254661120[0;39m 生成今日电子书快照开始
2023-05-27 14:12:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681843254661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:12:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681843254661120[0;39m ==> Parameters: 
2023-05-27 14:12:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681843254661120[0;39m <==    Updates: 0
2023-05-27 14:12:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681843254661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681864180043776[0;39m 生成今日电子书快照开始
2023-05-27 14:13:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681864180043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681864180043776[0;39m ==> Parameters: 
2023-05-27 14:13:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681864180043776[0;39m <==    Updates: 0
2023-05-27 14:13:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681864180043776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119681885193506816[0;39m 更新电子书下的文档数据开始
2023-05-27 14:13:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681885193506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:13:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681885193506816[0;39m ==> Parameters: 
2023-05-27 14:13:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119681885193506816[0;39m <==    Updates: 8
2023-05-27 14:13:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119681885193506816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:13:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681885201895424[0;39m 生成今日电子书快照开始
2023-05-27 14:13:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681885201895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681885201895424[0;39m ==> Parameters: 
2023-05-27 14:13:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681885201895424[0;39m <==    Updates: 0
2023-05-27 14:13:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681885201895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681906131472384[0;39m 生成今日电子书快照开始
2023-05-27 14:13:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681906131472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681906131472384[0;39m ==> Parameters: 
2023-05-27 14:13:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681906131472384[0;39m <==    Updates: 0
2023-05-27 14:13:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681906131472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681927119769600[0;39m 生成今日电子书快照开始
2023-05-27 14:13:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681927119769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681927119769600[0;39m ==> Parameters: 
2023-05-27 14:13:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681927119769600[0;39m <==    Updates: 0
2023-05-27 14:13:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681927119769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681948091289600[0;39m 生成今日电子书快照开始
2023-05-27 14:13:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681948091289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681948091289600[0;39m ==> Parameters: 
2023-05-27 14:13:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681948091289600[0;39m <==    Updates: 0
2023-05-27 14:13:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681948091289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681969046032384[0;39m 生成今日电子书快照开始
2023-05-27 14:13:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681969046032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681969046032384[0;39m ==> Parameters: 
2023-05-27 14:13:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681969046032384[0;39m <==    Updates: 0
2023-05-27 14:13:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681969046032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119681990063689728[0;39m 生成今日电子书快照开始
2023-05-27 14:13:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681990063689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681990063689728[0;39m ==> Parameters: 
2023-05-27 14:13:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119681990063689728[0;39m <==    Updates: 0
2023-05-27 14:13:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119681990063689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:35.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119682010972295168[0;39m 更新电子书下的文档数据开始
2023-05-27 14:13:35.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682010972295168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:13:35.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682010972295168[0;39m ==> Parameters: 
2023-05-27 14:13:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682010972295168[0;39m <==    Updates: 8
2023-05-27 14:13:35.001 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119682010972295168[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:13:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682010976489472[0;39m 生成今日电子书快照开始
2023-05-27 14:13:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682010976489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682010976489472[0;39m ==> Parameters: 
2023-05-27 14:13:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682010976489472[0;39m <==    Updates: 0
2023-05-27 14:13:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682010976489472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682031989952512[0;39m 生成今日电子书快照开始
2023-05-27 14:13:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682031989952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682031989952512[0;39m ==> Parameters: 
2023-05-27 14:13:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682031989952512[0;39m <==    Updates: 0
2023-05-27 14:13:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682031989952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682052957278208[0;39m 生成今日电子书快照开始
2023-05-27 14:13:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682052957278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682052957278208[0;39m ==> Parameters: 
2023-05-27 14:13:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682052957278208[0;39m <==    Updates: 0
2023-05-27 14:13:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682052957278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682073920409600[0;39m 生成今日电子书快照开始
2023-05-27 14:13:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682073920409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682073920409600[0;39m ==> Parameters: 
2023-05-27 14:13:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682073920409600[0;39m <==    Updates: 0
2023-05-27 14:13:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682073920409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:13:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682094908706816[0;39m 生成今日电子书快照开始
2023-05-27 14:13:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682094908706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:13:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682094908706816[0;39m ==> Parameters: 
2023-05-27 14:13:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682094908706816[0;39m <==    Updates: 0
2023-05-27 14:13:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682094908706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682115850866688[0;39m 生成今日电子书快照开始
2023-05-27 14:14:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682115850866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682115850866688[0;39m ==> Parameters: 
2023-05-27 14:14:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682115850866688[0;39m <==    Updates: 0
2023-05-27 14:14:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682115850866688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:14:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682136830775296[0;39m 生成今日电子书快照开始
2023-05-27 14:14:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682136830775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682136830775296[0;39m ==> Parameters: 
2023-05-27 14:14:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682136830775296[0;39m <==    Updates: 0
2023-05-27 14:14:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682136830775296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119682136839163904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:14:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682136839163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:14:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682136839163904[0;39m ==> Parameters: 
2023-05-27 14:14:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682136839163904[0;39m <==    Updates: 8
2023-05-27 14:14:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119682136839163904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:14:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682157789712384[0;39m 生成今日电子书快照开始
2023-05-27 14:14:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682157789712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682157789712384[0;39m ==> Parameters: 
2023-05-27 14:14:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682157789712384[0;39m <==    Updates: 0
2023-05-27 14:14:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682157789712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682178778009600[0;39m 生成今日电子书快照开始
2023-05-27 14:14:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682178778009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682178778009600[0;39m ==> Parameters: 
2023-05-27 14:14:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682178778009600[0;39m <==    Updates: 0
2023-05-27 14:14:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682178778009600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:14:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682199774695424[0;39m 生成今日电子书快照开始
2023-05-27 14:14:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682199774695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682199774695424[0;39m ==> Parameters: 
2023-05-27 14:14:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682199774695424[0;39m <==    Updates: 0
2023-05-27 14:14:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682199774695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682220700078080[0;39m 生成今日电子书快照开始
2023-05-27 14:14:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682220700078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682220700078080[0;39m ==> Parameters: 
2023-05-27 14:14:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682220700078080[0;39m <==    Updates: 0
2023-05-27 14:14:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682220700078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682241692569600[0;39m 生成今日电子书快照开始
2023-05-27 14:14:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682241692569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682241692569600[0;39m ==> Parameters: 
2023-05-27 14:14:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682241692569600[0;39m <==    Updates: 0
2023-05-27 14:14:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682241692569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682262693449728[0;39m 生成今日电子书快照开始
2023-05-27 14:14:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682262693449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682262693449728[0;39m ==> Parameters: 
2023-05-27 14:14:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682262693449728[0;39m <==    Updates: 0
2023-05-27 14:14:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682262693449728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119682262701838336[0;39m 更新电子书下的文档数据开始
2023-05-27 14:14:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682262701838336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:14:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682262701838336[0;39m ==> Parameters: 
2023-05-27 14:14:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682262701838336[0;39m <==    Updates: 8
2023-05-27 14:14:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119682262701838336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:14:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682283652386816[0;39m 生成今日电子书快照开始
2023-05-27 14:14:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682283652386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682283652386816[0;39m ==> Parameters: 
2023-05-27 14:14:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682283652386816[0;39m <==    Updates: 0
2023-05-27 14:14:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682283652386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682304636489728[0;39m 生成今日电子书快照开始
2023-05-27 14:14:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682304636489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682304636489728[0;39m ==> Parameters: 
2023-05-27 14:14:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682304636489728[0;39m <==    Updates: 0
2023-05-27 14:14:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682304636489728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682325599621120[0;39m 生成今日电子书快照开始
2023-05-27 14:14:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682325599621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682325599621120[0;39m ==> Parameters: 
2023-05-27 14:14:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682325599621120[0;39m <==    Updates: 0
2023-05-27 14:14:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682325599621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:14:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682346579529728[0;39m 生成今日电子书快照开始
2023-05-27 14:14:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682346579529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:14:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682346579529728[0;39m ==> Parameters: 
2023-05-27 14:14:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682346579529728[0;39m <==    Updates: 0
2023-05-27 14:14:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682346579529728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682367504912384[0;39m 生成今日电子书快照开始
2023-05-27 14:15:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682367504912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682367504912384[0;39m ==> Parameters: 
2023-05-27 14:15:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682367504912384[0;39m <==    Updates: 0
2023-05-27 14:15:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682367504912384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:15:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682388489015296[0;39m 生成今日电子书快照开始
2023-05-27 14:15:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682388489015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682388489015296[0;39m ==> Parameters: 
2023-05-27 14:15:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682388489015296[0;39m <==    Updates: 0
2023-05-27 14:15:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682388489015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119682388497403904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:15:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682388497403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:15:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682388497403904[0;39m ==> Parameters: 
2023-05-27 14:15:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682388497403904[0;39m <==    Updates: 8
2023-05-27 14:15:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119682388497403904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:15:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682409498284032[0;39m 生成今日电子书快照开始
2023-05-27 14:15:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682409498284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682409498284032[0;39m ==> Parameters: 
2023-05-27 14:15:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682409498284032[0;39m <==    Updates: 0
2023-05-27 14:15:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682409498284032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682430444638208[0;39m 生成今日电子书快照开始
2023-05-27 14:15:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682430444638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682430444638208[0;39m ==> Parameters: 
2023-05-27 14:15:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682430444638208[0;39m <==    Updates: 0
2023-05-27 14:15:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682430444638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682451386798080[0;39m 生成今日电子书快照开始
2023-05-27 14:15:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682451386798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682451386798080[0;39m ==> Parameters: 
2023-05-27 14:15:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682451386798080[0;39m <==    Updates: 0
2023-05-27 14:15:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682451386798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682472396066816[0;39m 生成今日电子书快照开始
2023-05-27 14:15:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682472396066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682472396066816[0;39m ==> Parameters: 
2023-05-27 14:15:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682472396066816[0;39m <==    Updates: 0
2023-05-27 14:15:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682472396066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682493375975424[0;39m 生成今日电子书快照开始
2023-05-27 14:15:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682493375975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682493375975424[0;39m ==> Parameters: 
2023-05-27 14:15:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682493375975424[0;39m <==    Updates: 0
2023-05-27 14:15:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682493375975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119682514309746688[0;39m 更新电子书下的文档数据开始
2023-05-27 14:15:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682514309746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:15:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682514309746688[0;39m ==> Parameters: 
2023-05-27 14:15:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682514309746688[0;39m <==    Updates: 8
2023-05-27 14:15:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119682514309746688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:15:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682514318135296[0;39m 生成今日电子书快照开始
2023-05-27 14:15:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682514318135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682514318135296[0;39m ==> Parameters: 
2023-05-27 14:15:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682514318135296[0;39m <==    Updates: 0
2023-05-27 14:15:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682514318135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682535289655296[0;39m 生成今日电子书快照开始
2023-05-27 14:15:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682535289655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682535289655296[0;39m ==> Parameters: 
2023-05-27 14:15:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682535289655296[0;39m <==    Updates: 0
2023-05-27 14:15:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682535289655296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682556290535424[0;39m 生成今日电子书快照开始
2023-05-27 14:15:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682556290535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682556290535424[0;39m ==> Parameters: 
2023-05-27 14:15:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682556290535424[0;39m <==    Updates: 0
2023-05-27 14:15:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682556290535424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:15:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682577220112384[0;39m 生成今日电子书快照开始
2023-05-27 14:15:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682577220112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682577220112384[0;39m ==> Parameters: 
2023-05-27 14:15:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682577220112384[0;39m <==    Updates: 0
2023-05-27 14:15:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682577220112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:15:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682598216798208[0;39m 生成今日电子书快照开始
2023-05-27 14:15:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682598216798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:15:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682598216798208[0;39m ==> Parameters: 
2023-05-27 14:15:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682598216798208[0;39m <==    Updates: 0
2023-05-27 14:15:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682598216798208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:16:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682619154763776[0;39m 生成今日电子书快照开始
2023-05-27 14:16:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682619154763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682619154763776[0;39m ==> Parameters: 
2023-05-27 14:16:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682619154763776[0;39m <==    Updates: 0
2023-05-27 14:16:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682619154763776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:16:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119682640155643904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:16:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682640155643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:16:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682640155643904[0;39m ==> Parameters: 
2023-05-27 14:16:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682640155643904[0;39m <==    Updates: 8
2023-05-27 14:16:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119682640155643904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:16:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682640159838208[0;39m 生成今日电子书快照开始
2023-05-27 14:16:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682640159838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682640159838208[0;39m ==> Parameters: 
2023-05-27 14:16:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682640159838208[0;39m <==    Updates: 0
2023-05-27 14:16:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682640159838208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:16:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682661143941120[0;39m 生成今日电子书快照开始
2023-05-27 14:16:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682661143941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682661143941120[0;39m ==> Parameters: 
2023-05-27 14:16:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682661143941120[0;39m <==    Updates: 0
2023-05-27 14:16:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682661143941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:16:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682682090295296[0;39m 生成今日电子书快照开始
2023-05-27 14:16:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682682090295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682682090295296[0;39m ==> Parameters: 
2023-05-27 14:16:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682682090295296[0;39m <==    Updates: 0
2023-05-27 14:16:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682682090295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:16:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682703045038080[0;39m 生成今日电子书快照开始
2023-05-27 14:16:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682703045038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682703045038080[0;39m ==> Parameters: 
2023-05-27 14:16:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682703045038080[0;39m <==    Updates: 0
2023-05-27 14:16:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682703045038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:16:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682724033335296[0;39m 生成今日电子书快照开始
2023-05-27 14:16:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682724033335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682724033335296[0;39m ==> Parameters: 
2023-05-27 14:16:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682724033335296[0;39m <==    Updates: 0
2023-05-27 14:16:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682724033335296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:16:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682745042604032[0;39m 生成今日电子书快照开始
2023-05-27 14:16:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682745042604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682745042604032[0;39m ==> Parameters: 
2023-05-27 14:16:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682745042604032[0;39m <==    Updates: 0
2023-05-27 14:16:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682745042604032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:16:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682765993152512[0;39m 生成今日电子书快照开始
2023-05-27 14:16:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682765993152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682765993152512[0;39m ==> Parameters: 
2023-05-27 14:16:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682765993152512[0;39m <==    Updates: 0
2023-05-27 14:16:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682765993152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:16:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119682766001541120[0;39m 更新电子书下的文档数据开始
2023-05-27 14:16:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682766001541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:16:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682766001541120[0;39m ==> Parameters: 
2023-05-27 14:16:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682766001541120[0;39m <==    Updates: 8
2023-05-27 14:16:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119682766001541120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:16:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682786968866816[0;39m 生成今日电子书快照开始
2023-05-27 14:16:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682786968866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682786968866816[0;39m ==> Parameters: 
2023-05-27 14:16:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682786968866816[0;39m <==    Updates: 0
2023-05-27 14:16:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682786968866816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:16:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682807936192512[0;39m 生成今日电子书快照开始
2023-05-27 14:16:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682807936192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682807936192512[0;39m ==> Parameters: 
2023-05-27 14:16:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682807936192512[0;39m <==    Updates: 0
2023-05-27 14:16:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682807936192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:16:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682828895129600[0;39m 生成今日电子书快照开始
2023-05-27 14:16:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682828895129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682828895129600[0;39m ==> Parameters: 
2023-05-27 14:16:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682828895129600[0;39m <==    Updates: 0
2023-05-27 14:16:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682828895129600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:16:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682849900204032[0;39m 生成今日电子书快照开始
2023-05-27 14:16:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682849900204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:16:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682849900204032[0;39m ==> Parameters: 
2023-05-27 14:16:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682849900204032[0;39m <==    Updates: 0
2023-05-27 14:16:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682849900204032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682870808809472[0;39m 生成今日电子书快照开始
2023-05-27 14:17:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682870808809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682870808809472[0;39m ==> Parameters: 
2023-05-27 14:17:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682870808809472[0;39m <==    Updates: 0
2023-05-27 14:17:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682870808809472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:17:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119682891797106688[0;39m 更新电子书下的文档数据开始
2023-05-27 14:17:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682891797106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:17:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682891797106688[0;39m ==> Parameters: 
2023-05-27 14:17:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119682891797106688[0;39m <==    Updates: 8
2023-05-27 14:17:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119682891797106688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:17:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682891801300992[0;39m 生成今日电子书快照开始
2023-05-27 14:17:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682891801300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682891801300992[0;39m ==> Parameters: 
2023-05-27 14:17:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682891801300992[0;39m <==    Updates: 0
2023-05-27 14:17:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682891801300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682912802181120[0;39m 生成今日电子书快照开始
2023-05-27 14:17:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682912802181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682912802181120[0;39m ==> Parameters: 
2023-05-27 14:17:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682912802181120[0;39m <==    Updates: 0
2023-05-27 14:17:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682912802181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682933719175168[0;39m 生成今日电子书快照开始
2023-05-27 14:17:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682933719175168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682933719175168[0;39m ==> Parameters: 
2023-05-27 14:17:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682933719175168[0;39m <==    Updates: 0
2023-05-27 14:17:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682933719175168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:17:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682954724249600[0;39m 生成今日电子书快照开始
2023-05-27 14:17:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682954724249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682954724249600[0;39m ==> Parameters: 
2023-05-27 14:17:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682954724249600[0;39m <==    Updates: 0
2023-05-27 14:17:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682954724249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682975720935424[0;39m 生成今日电子书快照开始
2023-05-27 14:17:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682975720935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682975720935424[0;39m ==> Parameters: 
2023-05-27 14:17:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682975720935424[0;39m <==    Updates: 0
2023-05-27 14:17:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682975720935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119682996688261120[0;39m 生成今日电子书快照开始
2023-05-27 14:17:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682996688261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682996688261120[0;39m ==> Parameters: 
2023-05-27 14:17:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119682996688261120[0;39m <==    Updates: 0
2023-05-27 14:17:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119682996688261120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:17:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683017643003904[0;39m 生成今日电子书快照开始
2023-05-27 14:17:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683017643003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683017643003904[0;39m ==> Parameters: 
2023-05-27 14:17:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683017643003904[0;39m <==    Updates: 0
2023-05-27 14:17:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683017643003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119683017651392512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:17:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683017651392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:17:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683017651392512[0;39m ==> Parameters: 
2023-05-27 14:17:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683017651392512[0;39m <==    Updates: 8
2023-05-27 14:17:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119683017651392512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:17:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683038622912512[0;39m 生成今日电子书快照开始
2023-05-27 14:17:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683038622912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683038622912512[0;39m ==> Parameters: 
2023-05-27 14:17:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683038622912512[0;39m <==    Updates: 0
2023-05-27 14:17:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683038622912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683059573460992[0;39m 生成今日电子书快照开始
2023-05-27 14:17:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683059573460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683059573460992[0;39m ==> Parameters: 
2023-05-27 14:17:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683059573460992[0;39m <==    Updates: 0
2023-05-27 14:17:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683059573460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683080565952512[0;39m 生成今日电子书快照开始
2023-05-27 14:17:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683080565952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683080565952512[0;39m ==> Parameters: 
2023-05-27 14:17:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683080565952512[0;39m <==    Updates: 0
2023-05-27 14:17:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683080565952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:17:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683101512306688[0;39m 生成今日电子书快照开始
2023-05-27 14:17:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683101512306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:17:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683101512306688[0;39m ==> Parameters: 
2023-05-27 14:17:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683101512306688[0;39m <==    Updates: 0
2023-05-27 14:17:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683101512306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683122488020992[0;39m 生成今日电子书快照开始
2023-05-27 14:18:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683122488020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683122488020992[0;39m ==> Parameters: 
2023-05-27 14:18:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683122488020992[0;39m <==    Updates: 0
2023-05-27 14:18:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683122488020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683143438569472[0;39m 生成今日电子书快照开始
2023-05-27 14:18:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683143438569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683143438569472[0;39m ==> Parameters: 
2023-05-27 14:18:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683143438569472[0;39m <==    Updates: 0
2023-05-27 14:18:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683143438569472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119683143446958080[0;39m 更新电子书下的文档数据开始
2023-05-27 14:18:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683143446958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:18:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683143446958080[0;39m ==> Parameters: 
2023-05-27 14:18:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683143446958080[0;39m <==    Updates: 8
2023-05-27 14:18:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119683143446958080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:18:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683164473004032[0;39m 生成今日电子书快照开始
2023-05-27 14:18:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683164473004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683164473004032[0;39m ==> Parameters: 
2023-05-27 14:18:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683164473004032[0;39m <==    Updates: 0
2023-05-27 14:18:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683164473004032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:18:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683185423552512[0;39m 生成今日电子书快照开始
2023-05-27 14:18:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683185423552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683185423552512[0;39m ==> Parameters: 
2023-05-27 14:18:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683185423552512[0;39m <==    Updates: 0
2023-05-27 14:18:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683185423552512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683206407655424[0;39m 生成今日电子书快照开始
2023-05-27 14:18:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683206407655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683206407655424[0;39m ==> Parameters: 
2023-05-27 14:18:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683206407655424[0;39m <==    Updates: 0
2023-05-27 14:18:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683206407655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683227387564032[0;39m 生成今日电子书快照开始
2023-05-27 14:18:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683227387564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683227387564032[0;39m ==> Parameters: 
2023-05-27 14:18:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683227387564032[0;39m <==    Updates: 0
2023-05-27 14:18:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683227387564032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683248346501120[0;39m 生成今日电子书快照开始
2023-05-27 14:18:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683248346501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683248346501120[0;39m ==> Parameters: 
2023-05-27 14:18:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683248346501120[0;39m <==    Updates: 0
2023-05-27 14:18:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683248346501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683269288660992[0;39m 生成今日电子书快照开始
2023-05-27 14:18:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683269288660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683269288660992[0;39m ==> Parameters: 
2023-05-27 14:18:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683269288660992[0;39m <==    Updates: 0
2023-05-27 14:18:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683269288660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119683269301243904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:18:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683269301243904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:18:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683269301243904[0;39m ==> Parameters: 
2023-05-27 14:18:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683269301243904[0;39m <==    Updates: 8
2023-05-27 14:18:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119683269301243904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:18:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683290281152512[0;39m 生成今日电子书快照开始
2023-05-27 14:18:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683290281152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683290281152512[0;39m ==> Parameters: 
2023-05-27 14:18:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683290281152512[0;39m <==    Updates: 0
2023-05-27 14:18:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683290281152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683311223312384[0;39m 生成今日电子书快照开始
2023-05-27 14:18:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683311223312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683311223312384[0;39m ==> Parameters: 
2023-05-27 14:18:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683311223312384[0;39m <==    Updates: 0
2023-05-27 14:18:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683311223312384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683332190638080[0;39m 生成今日电子书快照开始
2023-05-27 14:18:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683332190638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683332190638080[0;39m ==> Parameters: 
2023-05-27 14:18:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683332190638080[0;39m <==    Updates: 0
2023-05-27 14:18:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683332190638080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:18:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683353183129600[0;39m 生成今日电子书快照开始
2023-05-27 14:18:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683353183129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:18:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683353183129600[0;39m ==> Parameters: 
2023-05-27 14:18:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683353183129600[0;39m <==    Updates: 0
2023-05-27 14:18:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683353183129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:19:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683374167232512[0;39m 生成今日电子书快照开始
2023-05-27 14:19:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683374167232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683374167232512[0;39m ==> Parameters: 
2023-05-27 14:19:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683374167232512[0;39m <==    Updates: 0
2023-05-27 14:19:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683374167232512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:19:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683395113586688[0;39m 生成今日电子书快照开始
2023-05-27 14:19:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683395113586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683395113586688[0;39m ==> Parameters: 
2023-05-27 14:19:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683395113586688[0;39m <==    Updates: 0
2023-05-27 14:19:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683395113586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:19:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119683395121975296[0;39m 更新电子书下的文档数据开始
2023-05-27 14:19:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683395121975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:19:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683395121975296[0;39m ==> Parameters: 
2023-05-27 14:19:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683395121975296[0;39m <==    Updates: 8
2023-05-27 14:19:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119683395121975296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:19:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683416101883904[0;39m 生成今日电子书快照开始
2023-05-27 14:19:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683416101883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683416101883904[0;39m ==> Parameters: 
2023-05-27 14:19:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683416101883904[0;39m <==    Updates: 0
2023-05-27 14:19:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683416101883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:19:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683437060820992[0;39m 生成今日电子书快照开始
2023-05-27 14:19:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683437060820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683437060820992[0;39m ==> Parameters: 
2023-05-27 14:19:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683437060820992[0;39m <==    Updates: 0
2023-05-27 14:19:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683437060820992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:19:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683458074284032[0;39m 生成今日电子书快照开始
2023-05-27 14:19:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683458074284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683458074284032[0;39m ==> Parameters: 
2023-05-27 14:19:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683458074284032[0;39m <==    Updates: 0
2023-05-27 14:19:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683458074284032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:19:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683479020638208[0;39m 生成今日电子书快照开始
2023-05-27 14:19:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683479020638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683479020638208[0;39m ==> Parameters: 
2023-05-27 14:19:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683479020638208[0;39m <==    Updates: 0
2023-05-27 14:19:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683479020638208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:19:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683500017324032[0;39m 生成今日电子书快照开始
2023-05-27 14:19:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683500017324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683500017324032[0;39m ==> Parameters: 
2023-05-27 14:19:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683500017324032[0;39m <==    Updates: 0
2023-05-27 14:19:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683500017324032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:19:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683520942706688[0;39m 生成今日电子书快照开始
2023-05-27 14:19:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683520942706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683520942706688[0;39m ==> Parameters: 
2023-05-27 14:19:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683520942706688[0;39m <==    Updates: 0
2023-05-27 14:19:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683520942706688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:19:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119683520946900992[0;39m 更新电子书下的文档数据开始
2023-05-27 14:19:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683520946900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:19:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683520946900992[0;39m ==> Parameters: 
2023-05-27 14:19:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683520946900992[0;39m <==    Updates: 8
2023-05-27 14:19:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119683520946900992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:19:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683541931003904[0;39m 生成今日电子书快照开始
2023-05-27 14:19:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683541931003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683541931003904[0;39m ==> Parameters: 
2023-05-27 14:19:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683541931003904[0;39m <==    Updates: 0
2023-05-27 14:19:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683541931003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:19:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683562873163776[0;39m 生成今日电子书快照开始
2023-05-27 14:19:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683562873163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683562873163776[0;39m ==> Parameters: 
2023-05-27 14:19:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683562873163776[0;39m <==    Updates: 0
2023-05-27 14:19:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683562873163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:19:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683583878238208[0;39m 生成今日电子书快照开始
2023-05-27 14:19:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683583878238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683583878238208[0;39m ==> Parameters: 
2023-05-27 14:19:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683583878238208[0;39m <==    Updates: 0
2023-05-27 14:19:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683583878238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:19:55.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683604807815168[0;39m 生成今日电子书快照开始
2023-05-27 14:19:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683604807815168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:19:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683604807815168[0;39m ==> Parameters: 
2023-05-27 14:19:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683604807815168[0;39m <==    Updates: 0
2023-05-27 14:19:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683604807815168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:20:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683625812889600[0;39m 生成今日电子书快照开始
2023-05-27 14:20:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683625812889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683625812889600[0;39m ==> Parameters: 
2023-05-27 14:20:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683625812889600[0;39m <==    Updates: 0
2023-05-27 14:20:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683625812889600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:20:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683646805381120[0;39m 生成今日电子书快照开始
2023-05-27 14:20:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683646805381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683646805381120[0;39m ==> Parameters: 
2023-05-27 14:20:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683646805381120[0;39m <==    Updates: 0
2023-05-27 14:20:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683646805381120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119683646813769728[0;39m 更新电子书下的文档数据开始
2023-05-27 14:20:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683646813769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:20:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683646813769728[0;39m ==> Parameters: 
2023-05-27 14:20:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683646813769728[0;39m <==    Updates: 8
2023-05-27 14:20:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119683646813769728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:20:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683667789484032[0;39m 生成今日电子书快照开始
2023-05-27 14:20:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683667789484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683667789484032[0;39m ==> Parameters: 
2023-05-27 14:20:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683667789484032[0;39m <==    Updates: 0
2023-05-27 14:20:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683667789484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683688744226816[0;39m 生成今日电子书快照开始
2023-05-27 14:20:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683688744226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683688744226816[0;39m ==> Parameters: 
2023-05-27 14:20:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683688744226816[0;39m <==    Updates: 0
2023-05-27 14:20:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683688744226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683709719941120[0;39m 生成今日电子书快照开始
2023-05-27 14:20:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683709719941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683709719941120[0;39m ==> Parameters: 
2023-05-27 14:20:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683709719941120[0;39m <==    Updates: 0
2023-05-27 14:20:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683709719941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683730666295296[0;39m 生成今日电子书快照开始
2023-05-27 14:20:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683730666295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683730666295296[0;39m ==> Parameters: 
2023-05-27 14:20:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683730666295296[0;39m <==    Updates: 0
2023-05-27 14:20:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683730666295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683751662981120[0;39m 生成今日电子书快照开始
2023-05-27 14:20:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683751662981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683751662981120[0;39m ==> Parameters: 
2023-05-27 14:20:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683751662981120[0;39m <==    Updates: 0
2023-05-27 14:20:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683751662981120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683772605140992[0;39m 生成今日电子书快照开始
2023-05-27 14:20:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683772605140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683772605140992[0;39m ==> Parameters: 
2023-05-27 14:20:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683772605140992[0;39m <==    Updates: 0
2023-05-27 14:20:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683772605140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119683772617723904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:20:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683772617723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:20:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683772617723904[0;39m ==> Parameters: 
2023-05-27 14:20:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683772617723904[0;39m <==    Updates: 8
2023-05-27 14:20:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119683772617723904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:20:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683793610215424[0;39m 生成今日电子书快照开始
2023-05-27 14:20:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683793610215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683793610215424[0;39m ==> Parameters: 
2023-05-27 14:20:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683793610215424[0;39m <==    Updates: 0
2023-05-27 14:20:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683793610215424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683814564958208[0;39m 生成今日电子书快照开始
2023-05-27 14:20:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683814564958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683814564958208[0;39m ==> Parameters: 
2023-05-27 14:20:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683814564958208[0;39m <==    Updates: 0
2023-05-27 14:20:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683814564958208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 14:20:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683835528089600[0;39m 生成今日电子书快照开始
2023-05-27 14:20:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683835528089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683835528089600[0;39m ==> Parameters: 
2023-05-27 14:20:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683835528089600[0;39m <==    Updates: 0
2023-05-27 14:20:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683835528089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:20:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683856478638080[0;39m 生成今日电子书快照开始
2023-05-27 14:20:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683856478638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:20:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683856478638080[0;39m ==> Parameters: 
2023-05-27 14:20:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683856478638080[0;39m <==    Updates: 0
2023-05-27 14:20:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683856478638080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683877504684032[0;39m 生成今日电子书快照开始
2023-05-27 14:21:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683877504684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683877504684032[0;39m ==> Parameters: 
2023-05-27 14:21:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683877504684032[0;39m <==    Updates: 0
2023-05-27 14:21:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683877504684032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119683898451038208[0;39m 更新电子书下的文档数据开始
2023-05-27 14:21:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683898451038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:21:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683898451038208[0;39m ==> Parameters: 
2023-05-27 14:21:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119683898451038208[0;39m <==    Updates: 8
2023-05-27 14:21:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119683898451038208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:21:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683898455232512[0;39m 生成今日电子书快照开始
2023-05-27 14:21:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683898455232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683898455232512[0;39m ==> Parameters: 
2023-05-27 14:21:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683898455232512[0;39m <==    Updates: 0
2023-05-27 14:21:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683898455232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683919443529728[0;39m 生成今日电子书快照开始
2023-05-27 14:21:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683919443529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683919443529728[0;39m ==> Parameters: 
2023-05-27 14:21:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683919443529728[0;39m <==    Updates: 0
2023-05-27 14:21:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683919443529728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:21:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683940360523776[0;39m 生成今日电子书快照开始
2023-05-27 14:21:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683940360523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683940360523776[0;39m ==> Parameters: 
2023-05-27 14:21:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683940360523776[0;39m <==    Updates: 0
2023-05-27 14:21:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683940360523776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683961336238080[0;39m 生成今日电子书快照开始
2023-05-27 14:21:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683961336238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683961336238080[0;39m ==> Parameters: 
2023-05-27 14:21:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683961336238080[0;39m <==    Updates: 0
2023-05-27 14:21:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683961336238080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119683982332923904[0;39m 生成今日电子书快照开始
2023-05-27 14:21:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683982332923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683982332923904[0;39m ==> Parameters: 
2023-05-27 14:21:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119683982332923904[0;39m <==    Updates: 0
2023-05-27 14:21:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119683982332923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:30.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684003266695168[0;39m 生成今日电子书快照开始
2023-05-27 14:21:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684003266695168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684003266695168[0;39m ==> Parameters: 
2023-05-27 14:21:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684003266695168[0;39m <==    Updates: 0
2023-05-27 14:21:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684003266695168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119684024271769600[0;39m 更新电子书下的文档数据开始
2023-05-27 14:21:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684024271769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:21:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684024271769600[0;39m ==> Parameters: 
2023-05-27 14:21:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684024271769600[0;39m <==    Updates: 8
2023-05-27 14:21:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119684024271769600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:21:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684024275963904[0;39m 生成今日电子书快照开始
2023-05-27 14:21:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684024275963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684024275963904[0;39m ==> Parameters: 
2023-05-27 14:21:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684024275963904[0;39m <==    Updates: 0
2023-05-27 14:21:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684024275963904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684045272649728[0;39m 生成今日电子书快照开始
2023-05-27 14:21:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684045272649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684045272649728[0;39m ==> Parameters: 
2023-05-27 14:21:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684045272649728[0;39m <==    Updates: 0
2023-05-27 14:21:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684045272649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684066239975424[0;39m 生成今日电子书快照开始
2023-05-27 14:21:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684066239975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684066239975424[0;39m ==> Parameters: 
2023-05-27 14:21:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684066239975424[0;39m <==    Updates: 0
2023-05-27 14:21:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684066239975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:21:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684087190523904[0;39m 生成今日电子书快照开始
2023-05-27 14:21:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684087190523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684087190523904[0;39m ==> Parameters: 
2023-05-27 14:21:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684087190523904[0;39m <==    Updates: 0
2023-05-27 14:21:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684087190523904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:21:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684108174626816[0;39m 生成今日电子书快照开始
2023-05-27 14:21:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684108174626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:21:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684108174626816[0;39m ==> Parameters: 
2023-05-27 14:21:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684108174626816[0;39m <==    Updates: 0
2023-05-27 14:21:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684108174626816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:22:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684129112592384[0;39m 生成今日电子书快照开始
2023-05-27 14:22:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684129112592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684129112592384[0;39m ==> Parameters: 
2023-05-27 14:22:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684129112592384[0;39m <==    Updates: 0
2023-05-27 14:22:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684129112592384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:22:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684150084112384[0;39m 生成今日电子书快照开始
2023-05-27 14:22:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684150084112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684150084112384[0;39m ==> Parameters: 
2023-05-27 14:22:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684150084112384[0;39m <==    Updates: 0
2023-05-27 14:22:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684150084112384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:22:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119684150096695296[0;39m 更新电子书下的文档数据开始
2023-05-27 14:22:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684150096695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:22:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684150096695296[0;39m ==> Parameters: 
2023-05-27 14:22:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684150096695296[0;39m <==    Updates: 8
2023-05-27 14:22:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119684150096695296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:22:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684171051438080[0;39m 生成今日电子书快照开始
2023-05-27 14:22:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684171051438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684171051438080[0;39m ==> Parameters: 
2023-05-27 14:22:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684171051438080[0;39m <==    Updates: 0
2023-05-27 14:22:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684171051438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:22:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684192022958080[0;39m 生成今日电子书快照开始
2023-05-27 14:22:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684192022958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684192022958080[0;39m ==> Parameters: 
2023-05-27 14:22:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684192022958080[0;39m <==    Updates: 0
2023-05-27 14:22:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684192022958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:22:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684213011255296[0;39m 生成今日电子书快照开始
2023-05-27 14:22:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684213011255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684213011255296[0;39m ==> Parameters: 
2023-05-27 14:22:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684213011255296[0;39m <==    Updates: 0
2023-05-27 14:22:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684213011255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:22:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684233965998080[0;39m 生成今日电子书快照开始
2023-05-27 14:22:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684233965998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684233965998080[0;39m ==> Parameters: 
2023-05-27 14:22:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684233965998080[0;39m <==    Updates: 0
2023-05-27 14:22:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684233965998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:22:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684254954295296[0;39m 生成今日电子书快照开始
2023-05-27 14:22:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684254954295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684254954295296[0;39m ==> Parameters: 
2023-05-27 14:22:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684254954295296[0;39m <==    Updates: 0
2023-05-27 14:22:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684254954295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:22:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119684275930009600[0;39m 更新电子书下的文档数据开始
2023-05-27 14:22:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684275930009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:22:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684275930009600[0;39m ==> Parameters: 
2023-05-27 14:22:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684275930009600[0;39m <==    Updates: 8
2023-05-27 14:22:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119684275930009600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:22:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684275938398208[0;39m 生成今日电子书快照开始
2023-05-27 14:22:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684275938398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684275938398208[0;39m ==> Parameters: 
2023-05-27 14:22:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684275938398208[0;39m <==    Updates: 0
2023-05-27 14:22:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684275938398208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:22:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684296926695424[0;39m 生成今日电子书快照开始
2023-05-27 14:22:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684296926695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684296926695424[0;39m ==> Parameters: 
2023-05-27 14:22:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684296926695424[0;39m <==    Updates: 0
2023-05-27 14:22:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684296926695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:22:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684317881438208[0;39m 生成今日电子书快照开始
2023-05-27 14:22:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684317881438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684317881438208[0;39m ==> Parameters: 
2023-05-27 14:22:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684317881438208[0;39m <==    Updates: 0
2023-05-27 14:22:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684317881438208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2023-05-27 14:22:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684338873929728[0;39m 生成今日电子书快照开始
2023-05-27 14:22:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684338873929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684338873929728[0;39m ==> Parameters: 
2023-05-27 14:22:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684338873929728[0;39m <==    Updates: 0
2023-05-27 14:22:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684338873929728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:22:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684359811895296[0;39m 生成今日电子书快照开始
2023-05-27 14:22:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684359811895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:22:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684359811895296[0;39m ==> Parameters: 
2023-05-27 14:22:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684359811895296[0;39m <==    Updates: 0
2023-05-27 14:22:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684359811895296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:23:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684380804386816[0;39m 生成今日电子书快照开始
2023-05-27 14:23:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684380804386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684380804386816[0;39m ==> Parameters: 
2023-05-27 14:23:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684380804386816[0;39m <==    Updates: 0
2023-05-27 14:23:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684380804386816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:23:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684401759129600[0;39m 生成今日电子书快照开始
2023-05-27 14:23:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684401759129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684401759129600[0;39m ==> Parameters: 
2023-05-27 14:23:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684401759129600[0;39m <==    Updates: 0
2023-05-27 14:23:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684401759129600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:23:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119684401771712512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:23:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684401771712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:23:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684401771712512[0;39m ==> Parameters: 
2023-05-27 14:23:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684401771712512[0;39m <==    Updates: 8
2023-05-27 14:23:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119684401771712512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:23:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684422747426816[0;39m 生成今日电子书快照开始
2023-05-27 14:23:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684422747426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684422747426816[0;39m ==> Parameters: 
2023-05-27 14:23:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684422747426816[0;39m <==    Updates: 0
2023-05-27 14:23:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684422747426816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:23:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684443689586688[0;39m 生成今日电子书快照开始
2023-05-27 14:23:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684443689586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684443689586688[0;39m ==> Parameters: 
2023-05-27 14:23:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684443689586688[0;39m <==    Updates: 0
2023-05-27 14:23:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684443689586688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:23:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684464690466816[0;39m 生成今日电子书快照开始
2023-05-27 14:23:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684464690466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684464690466816[0;39m ==> Parameters: 
2023-05-27 14:23:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684464690466816[0;39m <==    Updates: 0
2023-05-27 14:23:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684464690466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:23:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684485628432384[0;39m 生成今日电子书快照开始
2023-05-27 14:23:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684485628432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684485628432384[0;39m ==> Parameters: 
2023-05-27 14:23:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684485628432384[0;39m <==    Updates: 0
2023-05-27 14:23:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684485628432384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:23:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684506625118208[0;39m 生成今日电子书快照开始
2023-05-27 14:23:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684506625118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684506625118208[0;39m ==> Parameters: 
2023-05-27 14:23:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684506625118208[0;39m <==    Updates: 0
2023-05-27 14:23:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684506625118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:23:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119684527617609728[0;39m 更新电子书下的文档数据开始
2023-05-27 14:23:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684527617609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:23:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684527617609728[0;39m ==> Parameters: 
2023-05-27 14:23:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684527617609728[0;39m <==    Updates: 8
2023-05-27 14:23:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119684527617609728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:23:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684527625998336[0;39m 生成今日电子书快照开始
2023-05-27 14:23:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684527625998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684527625998336[0;39m ==> Parameters: 
2023-05-27 14:23:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684527625998336[0;39m <==    Updates: 0
2023-05-27 14:23:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684527625998336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:23:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684548580741120[0;39m 生成今日电子书快照开始
2023-05-27 14:23:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684548580741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684548580741120[0;39m ==> Parameters: 
2023-05-27 14:23:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684548580741120[0;39m <==    Updates: 0
2023-05-27 14:23:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684548580741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:23:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684569518706688[0;39m 生成今日电子书快照开始
2023-05-27 14:23:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684569518706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684569518706688[0;39m ==> Parameters: 
2023-05-27 14:23:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684569518706688[0;39m <==    Updates: 0
2023-05-27 14:23:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684569518706688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:23:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684590507003904[0;39m 生成今日电子书快照开始
2023-05-27 14:23:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684590507003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684590507003904[0;39m ==> Parameters: 
2023-05-27 14:23:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684590507003904[0;39m <==    Updates: 0
2023-05-27 14:23:50.110 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684590507003904[0;39m 生成今日电子书快照结束，耗时：101 毫秒
2023-05-27 14:23:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684611495301120[0;39m 生成今日电子书快照开始
2023-05-27 14:23:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684611495301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:23:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684611495301120[0;39m ==> Parameters: 
2023-05-27 14:23:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684611495301120[0;39m <==    Updates: 0
2023-05-27 14:23:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684611495301120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:24:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684632420683776[0;39m 生成今日电子书快照开始
2023-05-27 14:24:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684632420683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684632420683776[0;39m ==> Parameters: 
2023-05-27 14:24:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684632420683776[0;39m <==    Updates: 0
2023-05-27 14:24:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684632420683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:24:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119684653404786688[0;39m 更新电子书下的文档数据开始
2023-05-27 14:24:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684653404786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:24:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684653404786688[0;39m ==> Parameters: 
2023-05-27 14:24:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684653404786688[0;39m <==    Updates: 8
2023-05-27 14:24:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119684653404786688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:24:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684653408980992[0;39m 生成今日电子书快照开始
2023-05-27 14:24:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684653408980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684653408980992[0;39m ==> Parameters: 
2023-05-27 14:24:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684653408980992[0;39m <==    Updates: 0
2023-05-27 14:24:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684653408980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:24:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684674397278208[0;39m 生成今日电子书快照开始
2023-05-27 14:24:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684674397278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684674397278208[0;39m ==> Parameters: 
2023-05-27 14:24:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684674397278208[0;39m <==    Updates: 0
2023-05-27 14:24:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684674397278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:24:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684695364603904[0;39m 生成今日电子书快照开始
2023-05-27 14:24:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684695364603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684695364603904[0;39m ==> Parameters: 
2023-05-27 14:24:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684695364603904[0;39m <==    Updates: 0
2023-05-27 14:24:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684695364603904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:24:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684716331929600[0;39m 生成今日电子书快照开始
2023-05-27 14:24:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684716331929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684716331929600[0;39m ==> Parameters: 
2023-05-27 14:24:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684716331929600[0;39m <==    Updates: 0
2023-05-27 14:24:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684716331929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:24:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684737316032512[0;39m 生成今日电子书快照开始
2023-05-27 14:24:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684737316032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684737316032512[0;39m ==> Parameters: 
2023-05-27 14:24:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684737316032512[0;39m <==    Updates: 0
2023-05-27 14:24:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684737316032512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:24:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684758304329728[0;39m 生成今日电子书快照开始
2023-05-27 14:24:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684758304329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684758304329728[0;39m ==> Parameters: 
2023-05-27 14:24:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684758304329728[0;39m <==    Updates: 0
2023-05-27 14:24:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684758304329728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:24:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684779271655424[0;39m 生成今日电子书快照开始
2023-05-27 14:24:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684779271655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684779271655424[0;39m ==> Parameters: 
2023-05-27 14:24:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684779271655424[0;39m <==    Updates: 0
2023-05-27 14:24:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684779271655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:24:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119684779280044032[0;39m 更新电子书下的文档数据开始
2023-05-27 14:24:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684779280044032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:24:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684779280044032[0;39m ==> Parameters: 
2023-05-27 14:24:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684779280044032[0;39m <==    Updates: 8
2023-05-27 14:24:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119684779280044032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:24:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684800213815296[0;39m 生成今日电子书快照开始
2023-05-27 14:24:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684800213815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684800213815296[0;39m ==> Parameters: 
2023-05-27 14:24:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684800213815296[0;39m <==    Updates: 0
2023-05-27 14:24:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684800213815296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:24:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684821185335296[0;39m 生成今日电子书快照开始
2023-05-27 14:24:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684821185335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684821185335296[0;39m ==> Parameters: 
2023-05-27 14:24:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684821185335296[0;39m <==    Updates: 0
2023-05-27 14:24:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684821185335296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:24:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684842140078080[0;39m 生成今日电子书快照开始
2023-05-27 14:24:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684842140078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684842140078080[0;39m ==> Parameters: 
2023-05-27 14:24:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684842140078080[0;39m <==    Updates: 0
2023-05-27 14:24:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684842140078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:24:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684863115792384[0;39m 生成今日电子书快照开始
2023-05-27 14:24:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684863115792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:24:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684863115792384[0;39m ==> Parameters: 
2023-05-27 14:24:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684863115792384[0;39m <==    Updates: 0
2023-05-27 14:24:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684863115792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:25:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684884133449728[0;39m 生成今日电子书快照开始
2023-05-27 14:25:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684884133449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684884133449728[0;39m ==> Parameters: 
2023-05-27 14:25:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684884133449728[0;39m <==    Updates: 0
2023-05-27 14:25:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684884133449728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:25:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119684905104969728[0;39m 更新电子书下的文档数据开始
2023-05-27 14:25:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684905104969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:25:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684905104969728[0;39m ==> Parameters: 
2023-05-27 14:25:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119684905104969728[0;39m <==    Updates: 8
2023-05-27 14:25:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119684905104969728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:25:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684905109164032[0;39m 生成今日电子书快照开始
2023-05-27 14:25:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684905109164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684905109164032[0;39m ==> Parameters: 
2023-05-27 14:25:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684905109164032[0;39m <==    Updates: 0
2023-05-27 14:25:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684905109164032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:25:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684926013575168[0;39m 生成今日电子书快照开始
2023-05-27 14:25:10.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684926013575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684926013575168[0;39m ==> Parameters: 
2023-05-27 14:25:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684926013575168[0;39m <==    Updates: 0
2023-05-27 14:25:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684926013575168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:25:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684947039621120[0;39m 生成今日电子书快照开始
2023-05-27 14:25:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684947039621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684947039621120[0;39m ==> Parameters: 
2023-05-27 14:25:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684947039621120[0;39m <==    Updates: 0
2023-05-27 14:25:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684947039621120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:25:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684967973392384[0;39m 生成今日电子书快照开始
2023-05-27 14:25:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684967973392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684967973392384[0;39m ==> Parameters: 
2023-05-27 14:25:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684967973392384[0;39m <==    Updates: 0
2023-05-27 14:25:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684967973392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:25:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119684988978466816[0;39m 生成今日电子书快照开始
2023-05-27 14:25:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684988978466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684988978466816[0;39m ==> Parameters: 
2023-05-27 14:25:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119684988978466816[0;39m <==    Updates: 0
2023-05-27 14:25:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119684988978466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:25:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685009916432384[0;39m 生成今日电子书快照开始
2023-05-27 14:25:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685009916432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685009916432384[0;39m ==> Parameters: 
2023-05-27 14:25:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685009916432384[0;39m <==    Updates: 0
2023-05-27 14:25:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685009916432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:25:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119685030908923904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:25:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685030908923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:25:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685030908923904[0;39m ==> Parameters: 
2023-05-27 14:25:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685030908923904[0;39m <==    Updates: 8
2023-05-27 14:25:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119685030908923904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:25:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685030913118208[0;39m 生成今日电子书快照开始
2023-05-27 14:25:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685030913118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685030913118208[0;39m ==> Parameters: 
2023-05-27 14:25:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685030913118208[0;39m <==    Updates: 0
2023-05-27 14:25:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685030913118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:25:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685051863666688[0;39m 生成今日电子书快照开始
2023-05-27 14:25:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685051863666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685051863666688[0;39m ==> Parameters: 
2023-05-27 14:25:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685051863666688[0;39m <==    Updates: 0
2023-05-27 14:25:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685051863666688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:25:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685072851963904[0;39m 生成今日电子书快照开始
2023-05-27 14:25:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685072851963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685072851963904[0;39m ==> Parameters: 
2023-05-27 14:25:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685072851963904[0;39m <==    Updates: 0
2023-05-27 14:25:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685072851963904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:25:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685093848649728[0;39m 生成今日电子书快照开始
2023-05-27 14:25:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685093848649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685093848649728[0;39m ==> Parameters: 
2023-05-27 14:25:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685093848649728[0;39m <==    Updates: 0
2023-05-27 14:25:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685093848649728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:25:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685114782420992[0;39m 生成今日电子书快照开始
2023-05-27 14:25:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685114782420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:25:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685114782420992[0;39m ==> Parameters: 
2023-05-27 14:25:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685114782420992[0;39m <==    Updates: 0
2023-05-27 14:25:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685114782420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685135732969472[0;39m 生成今日电子书快照开始
2023-05-27 14:26:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685135732969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685135732969472[0;39m ==> Parameters: 
2023-05-27 14:26:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685135732969472[0;39m <==    Updates: 0
2023-05-27 14:26:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685135732969472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:26:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119685156742238208[0;39m 更新电子书下的文档数据开始
2023-05-27 14:26:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685156742238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:26:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685156742238208[0;39m ==> Parameters: 
2023-05-27 14:26:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685156742238208[0;39m <==    Updates: 8
2023-05-27 14:26:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119685156742238208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:26:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685156750626816[0;39m 生成今日电子书快照开始
2023-05-27 14:26:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685156750626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685156750626816[0;39m ==> Parameters: 
2023-05-27 14:26:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685156750626816[0;39m <==    Updates: 0
2023-05-27 14:26:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685156750626816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:26:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685177671815168[0;39m 生成今日电子书快照开始
2023-05-27 14:26:10.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685177671815168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685177671815168[0;39m ==> Parameters: 
2023-05-27 14:26:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685177671815168[0;39m <==    Updates: 0
2023-05-27 14:26:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685177671815168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:26:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685198693666816[0;39m 生成今日电子书快照开始
2023-05-27 14:26:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685198693666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685198693666816[0;39m ==> Parameters: 
2023-05-27 14:26:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685198693666816[0;39m <==    Updates: 0
2023-05-27 14:26:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685198693666816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685219652603904[0;39m 生成今日电子书快照开始
2023-05-27 14:26:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685219652603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685219652603904[0;39m ==> Parameters: 
2023-05-27 14:26:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685219652603904[0;39m <==    Updates: 0
2023-05-27 14:26:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685219652603904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685240653484032[0;39m 生成今日电子书快照开始
2023-05-27 14:26:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685240653484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685240653484032[0;39m ==> Parameters: 
2023-05-27 14:26:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685240653484032[0;39m <==    Updates: 0
2023-05-27 14:26:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685240653484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685261620809728[0;39m 生成今日电子书快照开始
2023-05-27 14:26:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685261620809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685261620809728[0;39m ==> Parameters: 
2023-05-27 14:26:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685261620809728[0;39m <==    Updates: 0
2023-05-27 14:26:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685261620809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119685282592329728[0;39m 更新电子书下的文档数据开始
2023-05-27 14:26:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685282592329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:26:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685282592329728[0;39m ==> Parameters: 
2023-05-27 14:26:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685282592329728[0;39m <==    Updates: 8
2023-05-27 14:26:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119685282592329728[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-27 14:26:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685282592329729[0;39m 生成今日电子书快照开始
2023-05-27 14:26:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685282592329729[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685282592329729[0;39m ==> Parameters: 
2023-05-27 14:26:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685282592329729[0;39m <==    Updates: 0
2023-05-27 14:26:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685282592329729[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685303542878208[0;39m 生成今日电子书快照开始
2023-05-27 14:26:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685303542878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685303542878208[0;39m ==> Parameters: 
2023-05-27 14:26:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685303542878208[0;39m <==    Updates: 0
2023-05-27 14:26:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685303542878208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685324497620992[0;39m 生成今日电子书快照开始
2023-05-27 14:26:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685324497620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685324497620992[0;39m ==> Parameters: 
2023-05-27 14:26:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685324497620992[0;39m <==    Updates: 0
2023-05-27 14:26:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685324497620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685345490112512[0;39m 生成今日电子书快照开始
2023-05-27 14:26:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685345490112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685345490112512[0;39m ==> Parameters: 
2023-05-27 14:26:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685345490112512[0;39m <==    Updates: 0
2023-05-27 14:26:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685345490112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:26:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685366428078080[0;39m 生成今日电子书快照开始
2023-05-27 14:26:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685366428078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:26:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685366428078080[0;39m ==> Parameters: 
2023-05-27 14:26:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685366428078080[0;39m <==    Updates: 0
2023-05-27 14:26:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685366428078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685387412180992[0;39m 生成今日电子书快照开始
2023-05-27 14:27:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685387412180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685387412180992[0;39m ==> Parameters: 
2023-05-27 14:27:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685387412180992[0;39m <==    Updates: 0
2023-05-27 14:27:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685387412180992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:27:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685408396283904[0;39m 生成今日电子书快照开始
2023-05-27 14:27:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685408396283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685408396283904[0;39m ==> Parameters: 
2023-05-27 14:27:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685408396283904[0;39m <==    Updates: 0
2023-05-27 14:27:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685408396283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119685408404672512[0;39m 更新电子书下的文档数据开始
2023-05-27 14:27:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685408404672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:27:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685408404672512[0;39m ==> Parameters: 
2023-05-27 14:27:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685408404672512[0;39m <==    Updates: 8
2023-05-27 14:27:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119685408404672512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:27:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685429363609600[0;39m 生成今日电子书快照开始
2023-05-27 14:27:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685429363609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685429363609600[0;39m ==> Parameters: 
2023-05-27 14:27:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685429363609600[0;39m <==    Updates: 0
2023-05-27 14:27:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685429363609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685450305769472[0;39m 生成今日电子书快照开始
2023-05-27 14:27:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685450305769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685450305769472[0;39m ==> Parameters: 
2023-05-27 14:27:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685450305769472[0;39m <==    Updates: 0
2023-05-27 14:27:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685450305769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685471319232512[0;39m 生成今日电子书快照开始
2023-05-27 14:27:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685471319232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685471319232512[0;39m ==> Parameters: 
2023-05-27 14:27:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685471319232512[0;39m <==    Updates: 0
2023-05-27 14:27:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685471319232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685492269780992[0;39m 生成今日电子书快照开始
2023-05-27 14:27:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685492269780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685492269780992[0;39m ==> Parameters: 
2023-05-27 14:27:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685492269780992[0;39m <==    Updates: 0
2023-05-27 14:27:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685492269780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685513274855424[0;39m 生成今日电子书快照开始
2023-05-27 14:27:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685513274855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685513274855424[0;39m ==> Parameters: 
2023-05-27 14:27:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685513274855424[0;39m <==    Updates: 0
2023-05-27 14:27:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685513274855424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:27:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685534217015296[0;39m 生成今日电子书快照开始
2023-05-27 14:27:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685534217015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685534217015296[0;39m ==> Parameters: 
2023-05-27 14:27:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685534217015296[0;39m <==    Updates: 0
2023-05-27 14:27:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685534217015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119685534225403904[0;39m 更新电子书下的文档数据开始
2023-05-27 14:27:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685534225403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:27:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685534225403904[0;39m ==> Parameters: 
2023-05-27 14:27:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685534225403904[0;39m <==    Updates: 8
2023-05-27 14:27:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119685534225403904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:27:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685555217895424[0;39m 生成今日电子书快照开始
2023-05-27 14:27:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685555217895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685555217895424[0;39m ==> Parameters: 
2023-05-27 14:27:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685555217895424[0;39m <==    Updates: 0
2023-05-27 14:27:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685555217895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685576189415424[0;39m 生成今日电子书快照开始
2023-05-27 14:27:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685576189415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685576189415424[0;39m ==> Parameters: 
2023-05-27 14:27:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685576189415424[0;39m <==    Updates: 0
2023-05-27 14:27:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685576189415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685597152546816[0;39m 生成今日电子书快照开始
2023-05-27 14:27:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685597152546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685597152546816[0;39m ==> Parameters: 
2023-05-27 14:27:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685597152546816[0;39m <==    Updates: 0
2023-05-27 14:27:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685597152546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:27:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685618115678208[0;39m 生成今日电子书快照开始
2023-05-27 14:27:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685618115678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:27:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685618115678208[0;39m ==> Parameters: 
2023-05-27 14:27:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685618115678208[0;39m <==    Updates: 0
2023-05-27 14:27:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685618115678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:00.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685639045255168[0;39m 生成今日电子书快照开始
2023-05-27 14:28:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685639045255168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685639045255168[0;39m ==> Parameters: 
2023-05-27 14:28:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685639045255168[0;39m <==    Updates: 0
2023-05-27 14:28:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685639045255168[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 14:28:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685660033552384[0;39m 生成今日电子书快照开始
2023-05-27 14:28:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685660033552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685660033552384[0;39m ==> Parameters: 
2023-05-27 14:28:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685660033552384[0;39m <==    Updates: 0
2023-05-27 14:28:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685660033552384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:28:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119685660037746688[0;39m 更新电子书下的文档数据开始
2023-05-27 14:28:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685660037746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:28:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685660037746688[0;39m ==> Parameters: 
2023-05-27 14:28:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685660037746688[0;39m <==    Updates: 8
2023-05-27 14:28:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119685660037746688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:28:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685681000878080[0;39m 生成今日电子书快照开始
2023-05-27 14:28:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685681000878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685681000878080[0;39m ==> Parameters: 
2023-05-27 14:28:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685681000878080[0;39m <==    Updates: 0
2023-05-27 14:28:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685681000878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685702014341120[0;39m 生成今日电子书快照开始
2023-05-27 14:28:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685702014341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685702014341120[0;39m ==> Parameters: 
2023-05-27 14:28:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685702014341120[0;39m <==    Updates: 0
2023-05-27 14:28:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685702014341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685722964889600[0;39m 生成今日电子书快照开始
2023-05-27 14:28:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685722964889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685722964889600[0;39m ==> Parameters: 
2023-05-27 14:28:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685722964889600[0;39m <==    Updates: 0
2023-05-27 14:28:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685722964889600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:28:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685743961575424[0;39m 生成今日电子书快照开始
2023-05-27 14:28:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685743961575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685743961575424[0;39m ==> Parameters: 
2023-05-27 14:28:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685743961575424[0;39m <==    Updates: 0
2023-05-27 14:28:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685743961575424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685764891152384[0;39m 生成今日电子书快照开始
2023-05-27 14:28:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685764891152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685764891152384[0;39m ==> Parameters: 
2023-05-27 14:28:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685764891152384[0;39m <==    Updates: 0
2023-05-27 14:28:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685764891152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685785900421120[0;39m 生成今日电子书快照开始
2023-05-27 14:28:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685785900421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685785900421120[0;39m ==> Parameters: 
2023-05-27 14:28:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685785900421120[0;39m <==    Updates: 0
2023-05-27 14:28:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685785900421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119685785908809728[0;39m 更新电子书下的文档数据开始
2023-05-27 14:28:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685785908809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:28:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685785908809728[0;39m ==> Parameters: 
2023-05-27 14:28:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685785908809728[0;39m <==    Updates: 8
2023-05-27 14:28:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119685785908809728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:28:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685806876135424[0;39m 生成今日电子书快照开始
2023-05-27 14:28:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685806876135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685806876135424[0;39m ==> Parameters: 
2023-05-27 14:28:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685806876135424[0;39m <==    Updates: 0
2023-05-27 14:28:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685806876135424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685827839266816[0;39m 生成今日电子书快照开始
2023-05-27 14:28:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685827839266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685827839266816[0;39m ==> Parameters: 
2023-05-27 14:28:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685827839266816[0;39m <==    Updates: 0
2023-05-27 14:28:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685827839266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685848785620992[0;39m 生成今日电子书快照开始
2023-05-27 14:28:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685848785620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685848785620992[0;39m ==> Parameters: 
2023-05-27 14:28:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685848785620992[0;39m <==    Updates: 0
2023-05-27 14:28:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685848785620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:28:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685869740363776[0;39m 生成今日电子书快照开始
2023-05-27 14:28:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685869740363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:28:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685869740363776[0;39m ==> Parameters: 
2023-05-27 14:28:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685869740363776[0;39m <==    Updates: 0
2023-05-27 14:28:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685869740363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685890737049600[0;39m 生成今日电子书快照开始
2023-05-27 14:29:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685890737049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685890737049600[0;39m ==> Parameters: 
2023-05-27 14:29:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685890737049600[0;39m <==    Updates: 0
2023-05-27 14:29:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685890737049600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 14:29:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685911712763904[0;39m 生成今日电子书快照开始
2023-05-27 14:29:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685911712763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685911712763904[0;39m ==> Parameters: 
2023-05-27 14:29:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685911712763904[0;39m <==    Updates: 0
2023-05-27 14:29:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685911712763904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:29:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119685911716958208[0;39m 更新电子书下的文档数据开始
2023-05-27 14:29:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685911716958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:29:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685911716958208[0;39m ==> Parameters: 
2023-05-27 14:29:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119685911716958208[0;39m <==    Updates: 8
2023-05-27 14:29:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119685911716958208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:29:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685932675895296[0;39m 生成今日电子书快照开始
2023-05-27 14:29:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685932675895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685932675895296[0;39m ==> Parameters: 
2023-05-27 14:29:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685932675895296[0;39m <==    Updates: 0
2023-05-27 14:29:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685932675895296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685953672581120[0;39m 生成今日电子书快照开始
2023-05-27 14:29:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685953672581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685953672581120[0;39m ==> Parameters: 
2023-05-27 14:29:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685953672581120[0;39m <==    Updates: 0
2023-05-27 14:29:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685953672581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685974623129600[0;39m 生成今日电子书快照开始
2023-05-27 14:29:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685974623129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685974623129600[0;39m ==> Parameters: 
2023-05-27 14:29:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685974623129600[0;39m <==    Updates: 0
2023-05-27 14:29:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685974623129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119685995594649600[0;39m 生成今日电子书快照开始
2023-05-27 14:29:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685995594649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685995594649600[0;39m ==> Parameters: 
2023-05-27 14:29:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119685995594649600[0;39m <==    Updates: 0
2023-05-27 14:29:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119685995594649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686016566169600[0;39m 生成今日电子书快照开始
2023-05-27 14:29:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686016566169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686016566169600[0;39m ==> Parameters: 
2023-05-27 14:29:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686016566169600[0;39m <==    Updates: 0
2023-05-27 14:29:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686016566169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119686037520912384[0;39m 更新电子书下的文档数据开始
2023-05-27 14:29:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686037520912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:29:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686037520912384[0;39m ==> Parameters: 
2023-05-27 14:29:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686037520912384[0;39m <==    Updates: 8
2023-05-27 14:29:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119686037520912384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:29:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686037529300992[0;39m 生成今日电子书快照开始
2023-05-27 14:29:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686037529300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686037529300992[0;39m ==> Parameters: 
2023-05-27 14:29:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686037529300992[0;39m <==    Updates: 0
2023-05-27 14:29:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686037529300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:29:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686058538569728[0;39m 生成今日电子书快照开始
2023-05-27 14:29:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686058538569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686058538569728[0;39m ==> Parameters: 
2023-05-27 14:29:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686058538569728[0;39m <==    Updates: 0
2023-05-27 14:29:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686058538569728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686079493312512[0;39m 生成今日电子书快照开始
2023-05-27 14:29:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686079493312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686079493312512[0;39m ==> Parameters: 
2023-05-27 14:29:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686079493312512[0;39m <==    Updates: 0
2023-05-27 14:29:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686079493312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686100443860992[0;39m 生成今日电子书快照开始
2023-05-27 14:29:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686100443860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686100443860992[0;39m ==> Parameters: 
2023-05-27 14:29:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686100443860992[0;39m <==    Updates: 0
2023-05-27 14:29:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686100443860992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:29:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686121432158208[0;39m 生成今日电子书快照开始
2023-05-27 14:29:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686121432158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:29:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686121432158208[0;39m ==> Parameters: 
2023-05-27 14:29:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686121432158208[0;39m <==    Updates: 0
2023-05-27 14:29:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686121432158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686142428844032[0;39m 生成今日电子书快照开始
2023-05-27 14:30:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686142428844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686142428844032[0;39m ==> Parameters: 
2023-05-27 14:30:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686142428844032[0;39m <==    Updates: 0
2023-05-27 14:30:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686142428844032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686163337449472[0;39m 生成今日电子书快照开始
2023-05-27 14:30:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686163337449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686163337449472[0;39m ==> Parameters: 
2023-05-27 14:30:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686163337449472[0;39m <==    Updates: 0
2023-05-27 14:30:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686163337449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119686163350032384[0;39m 更新电子书下的文档数据开始
2023-05-27 14:30:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686163350032384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:30:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686163350032384[0;39m ==> Parameters: 
2023-05-27 14:30:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686163350032384[0;39m <==    Updates: 8
2023-05-27 14:30:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119686163350032384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-27 14:30:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686184346718208[0;39m 生成今日电子书快照开始
2023-05-27 14:30:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686184346718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686184346718208[0;39m ==> Parameters: 
2023-05-27 14:30:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686184346718208[0;39m <==    Updates: 0
2023-05-27 14:30:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686184346718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686205305655296[0;39m 生成今日电子书快照开始
2023-05-27 14:30:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686205305655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686205305655296[0;39m ==> Parameters: 
2023-05-27 14:30:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686205305655296[0;39m <==    Updates: 0
2023-05-27 14:30:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686205305655296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:30:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686226256203776[0;39m 生成今日电子书快照开始
2023-05-27 14:30:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686226256203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686226256203776[0;39m ==> Parameters: 
2023-05-27 14:30:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686226256203776[0;39m <==    Updates: 0
2023-05-27 14:30:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686226256203776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:22.202 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119402354251534336[0;39m 连接关闭，token：dSsO5iEYw3，session id：3！当前连接数：0
2023-05-27 14:30:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686247290638336[0;39m 生成今日电子书快照开始
2023-05-27 14:30:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686247290638336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686247290638336[0;39m ==> Parameters: 
2023-05-27 14:30:25.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686247290638336[0;39m <==    Updates: 0
2023-05-27 14:30:25.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686247290638336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686268253769728[0;39m 生成今日电子书快照开始
2023-05-27 14:30:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686268253769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686268253769728[0;39m ==> Parameters: 
2023-05-27 14:30:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686268253769728[0;39m <==    Updates: 0
2023-05-27 14:30:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686268253769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:32.614 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119402634842083328[0;39m 有新连接：token：6E3i6W98rG，session id：4，当前连接数：1
2023-05-27 14:30:32.701 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686279519670274[0;39m ------------- 开始 -------------
2023-05-27 14:30:32.701 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686279519670272[0;39m ------------- 开始 -------------
2023-05-27 14:30:32.701 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686279519670273[0;39m ------------- 开始 -------------
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686279519670274[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686279519670272[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686279519670273[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686279519670274[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686279519670272[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686279519670273[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686279519670274[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686279519670272[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:32.703 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686279519670273[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:32.704 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686279519670273[0;39m 请求参数: []
2023-05-27 14:30:32.704 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686279519670272[0;39m 请求参数: []
2023-05-27 14:30:32.704 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686279519670274[0;39m 请求参数: []
2023-05-27 14:30:32.709 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686279519670273[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:32.708 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686279519670272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:32.709 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686279519670272[0;39m ==> Parameters: 
2023-05-27 14:30:32.709 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686279519670273[0;39m ==> Parameters: 
2023-05-27 14:30:32.710 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686279519670274[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 14:30:32.711 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686279519670274[0;39m ==> Parameters: 
2023-05-27 14:30:32.713 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==    Columns: id, parent, name, sort
2023-05-27 14:30:32.713 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686279519670273[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 14:30:32.713 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686279519670272[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 14:30:32.713 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 14:30:32.714 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686279519670272[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 14:30:32.714 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686279519670273[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 14:30:32.714 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 14:30:32.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 14:30:32.715 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686279519670273[0;39m <==      Total: 1
2023-05-27 14:30:32.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 14:30:32.715 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686279519670272[0;39m <==        Row: 2023-05-27, 436, 68, 0, 0
2023-05-27 14:30:32.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 14:30:32.715 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686279519670272[0;39m <==      Total: 2
2023-05-27 14:30:32.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 14:30:32.716 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 14:30:32.716 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686279519670272[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":436,"viewIncrease":0,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 14:30:32.716 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 14:30:32.716 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686279519670272[0;39m ------------- 结束 耗时：15 ms -------------
2023-05-27 14:30:32.716 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686279519670273[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 14:30:32.717 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686279519670273[0;39m ------------- 结束 耗时：16 ms -------------
2023-05-27 14:30:32.717 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 14:30:32.717 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 14:30:32.717 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 14:30:32.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 14:30:32.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 14:30:32.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 14:30:32.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 14:30:32.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686279519670274[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 14:30:32.720 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686279519670274[0;39m <==      Total: 16
2023-05-27 14:30:32.722 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686279519670274[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 14:30:32.722 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686279519670274[0;39m ------------- 结束 耗时：21 ms -------------
2023-05-27 14:30:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686289183346688[0;39m 生成今日电子书快照开始
2023-05-27 14:30:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686289183346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686289183346688[0;39m ==> Parameters: 
2023-05-27 14:30:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686289183346688[0;39m <==    Updates: 0
2023-05-27 14:30:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686289183346688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:30:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119686289195929600[0;39m 更新电子书下的文档数据开始
2023-05-27 14:30:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686289195929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:30:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686289195929600[0;39m ==> Parameters: 
2023-05-27 14:30:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686289195929600[0;39m <==    Updates: 8
2023-05-27 14:30:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119686289195929600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:30:35.330 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686290546495488[0;39m ------------- 开始 -------------
2023-05-27 14:30:35.330 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686290546495488[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-27 14:30:35.330 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686290546495488[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2023-05-27 14:30:35.331 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686290546495488[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:35.331 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686290546495488[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2023-05-27 14:30:35.617 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m119686290546495488[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-05-27 14:30:35.631 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m119686290546495488[0;39m ==> Parameters: 201(Long)
2023-05-27 14:30:35.631 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m119686290546495488[0;39m <==    Columns: count(0)
2023-05-27 14:30:35.632 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m119686290546495488[0;39m <==        Row: 1
2023-05-27 14:30:35.632 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m119686290546495488[0;39m <==      Total: 1
2023-05-27 14:30:35.674 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m119686290546495488[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-05-27 14:30:35.675 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m119686290546495488[0;39m ==> Parameters: 201(Long), 1000(Integer)
2023-05-27 14:30:35.675 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m119686290546495488[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-27 14:30:35.675 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m119686290546495488[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架11, /image/cover1.png, 4, 80, 14
2023-05-27 14:30:35.676 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m119686290546495488[0;39m <==      Total: 1
2023-05-27 14:30:35.676 INFO  com.zs.wikibb.service.EbookService                :46  
                [32m119686290546495488[0;39m 总行数：1
2023-05-27 14:30:35.676 INFO  com.zs.wikibb.service.EbookService                :47  
                [32m119686290546495488[0;39m 总页数：1
2023-05-27 14:30:35.677 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686290546495488[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架11","docCount":4,"id":1,"name":"Spring Boot 入门教程","viewCount":80,"voteCount":14}],"total":1},"success":true}
2023-05-27 14:30:35.677 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686290546495488[0;39m ------------- 结束 耗时：347 ms -------------
2023-05-27 14:30:36.852 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686296930226176[0;39m ------------- 开始 -------------
2023-05-27 14:30:36.852 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686296930226176[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2023-05-27 14:30:36.852 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686296930226176[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2023-05-27 14:30:36.852 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686296930226176[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:36.852 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686296930226176[0;39m 请求参数: [1]
2023-05-27 14:30:36.860 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686296930226176[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-27 14:30:36.861 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686296930226176[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:36.861 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686296930226176[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-27 14:30:36.862 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686296930226176[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 44, 6
2023-05-27 14:30:36.862 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686296930226176[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 17, 4
2023-05-27 14:30:36.863 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686296930226176[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 13, 2
2023-05-27 14:30:36.863 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686296930226176[0;39m <==        Row: 3, 1, 0, 文档2, 2, 6, 2
2023-05-27 14:30:36.863 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686296930226176[0;39m <==      Total: 4
2023-05-27 14:30:36.864 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686296930226176[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":44,"voteCount":6},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":17,"voteCount":4},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":13,"voteCount":2},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":6,"voteCount":2}],"success":true}
2023-05-27 14:30:36.864 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686296930226176[0;39m ------------- 结束 耗时：13 ms -------------
2023-05-27 14:30:36.879 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686297043472384[0;39m ------------- 开始 -------------
2023-05-27 14:30:36.879 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686297043472384[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-27 14:30:36.879 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686297043472384[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2023-05-27 14:30:36.880 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686297043472384[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:36.880 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686297043472384[0;39m 请求参数: [1]
2023-05-27 14:30:36.880 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686297043472384[0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-27 14:30:36.880 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686297043472384[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:36.882 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686297043472384[0;39m <==    Columns: id, content
2023-05-27 14:30:36.882 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686297043472384[0;39m <==        Row: 1, <<BLOB>>
2023-05-27 14:30:36.883 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686297043472384[0;39m <==      Total: 1
2023-05-27 14:30:36.883 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686297043472384[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2023-05-27 14:30:36.884 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686297043472384[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:36.966 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686297043472384[0;39m <==    Updates: 1
2023-05-27 14:30:36.967 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686297043472384[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2023-05-27 14:30:36.967 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686297043472384[0;39m ------------- 结束 耗时：88 ms -------------
2023-05-27 14:30:38.745 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119402527484678144[0;39m 连接关闭，token：6E3i6W98rG，session id：4！当前连接数：0
2023-05-27 14:30:39.268 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119402401479397376[0;39m 有新连接：token：oZ7WyC0GvD，session id：5，当前连接数：1
2023-05-27 14:30:39.292 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686307164327936[0;39m ------------- 开始 -------------
2023-05-27 14:30:39.293 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686307164327936[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2023-05-27 14:30:39.293 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686307164327936[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2023-05-27 14:30:39.293 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686307164327936[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:39.293 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686307164327936[0;39m 请求参数: [1]
2023-05-27 14:30:39.294 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686307164327936[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-27 14:30:39.294 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686307164327936[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:39.295 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686307164327936[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-27 14:30:39.296 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686307164327936[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 45, 6
2023-05-27 14:30:39.296 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686307164327936[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 17, 4
2023-05-27 14:30:39.297 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686307164327936[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 13, 2
2023-05-27 14:30:39.297 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686307164327936[0;39m <==        Row: 3, 1, 0, 文档2, 2, 6, 2
2023-05-27 14:30:39.297 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686307164327936[0;39m <==      Total: 4
2023-05-27 14:30:39.297 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686307164327936[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":45,"voteCount":6},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":17,"voteCount":4},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":13,"voteCount":2},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":6,"voteCount":2}],"success":true}
2023-05-27 14:30:39.298 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686307164327936[0;39m ------------- 结束 耗时：6 ms -------------
2023-05-27 14:30:39.344 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686307382431744[0;39m ------------- 开始 -------------
2023-05-27 14:30:39.344 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686307382431744[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-27 14:30:39.345 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686307382431744[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2023-05-27 14:30:39.345 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686307382431744[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:39.346 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686307382431744[0;39m 请求参数: [1]
2023-05-27 14:30:39.346 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686307382431744[0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-27 14:30:39.346 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686307382431744[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:39.347 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686307382431744[0;39m <==    Columns: id, content
2023-05-27 14:30:39.348 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686307382431744[0;39m <==        Row: 1, <<BLOB>>
2023-05-27 14:30:39.349 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686307382431744[0;39m <==      Total: 1
2023-05-27 14:30:39.349 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686307382431744[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2023-05-27 14:30:39.350 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686307382431744[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:39.371 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686307382431744[0;39m <==    Updates: 1
2023-05-27 14:30:39.372 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686307382431744[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2023-05-27 14:30:39.372 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686307382431744[0;39m ------------- 结束 耗时：28 ms -------------
2023-05-27 14:30:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686310133895168[0;39m 生成今日电子书快照开始
2023-05-27 14:30:40.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686310133895168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686310133895168[0;39m ==> Parameters: 
2023-05-27 14:30:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686310133895168[0;39m <==    Updates: 0
2023-05-27 14:30:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686310133895168[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-27 14:30:41.661 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686317100634112[0;39m ------------- 开始 -------------
2023-05-27 14:30:41.662 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686317100634112[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/4 GET
2023-05-27 14:30:41.662 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686317100634112[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2023-05-27 14:30:41.662 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686317100634112[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:41.662 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686317100634112[0;39m 请求参数: [4]
2023-05-27 14:30:41.662 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686317100634112[0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-27 14:30:41.663 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686317100634112[0;39m ==> Parameters: 4(Long)
2023-05-27 14:30:41.666 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686317100634112[0;39m <==      Total: 0
2023-05-27 14:30:41.666 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686317100634112[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2023-05-27 14:30:41.666 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686317100634112[0;39m ==> Parameters: 4(Long)
2023-05-27 14:30:41.686 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686317100634112[0;39m <==    Updates: 1
2023-05-27 14:30:41.686 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686317100634112[0;39m 返回结果: {"content":"","success":true}
2023-05-27 14:30:41.686 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686317100634112[0;39m ------------- 结束 耗时：25 ms -------------
2023-05-27 14:30:42.909 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119686279519670272[0;39m 连接关闭，token：oZ7WyC0GvD，session id：5！当前连接数：0
2023-05-27 14:30:43.060 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119686279519670274[0;39m 有新连接：token：z1tkpJysWe，session id：6，当前连接数：1
2023-05-27 14:30:43.076 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686323035574272[0;39m ------------- 开始 -------------
2023-05-27 14:30:43.076 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686323035574272[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2023-05-27 14:30:43.076 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686323035574272[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2023-05-27 14:30:43.076 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686323035574272[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:43.076 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686323035574272[0;39m 请求参数: [1]
2023-05-27 14:30:43.077 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686323035574272[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-27 14:30:43.078 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686323035574272[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:43.079 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686323035574272[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-27 14:30:43.079 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686323035574272[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 46, 6
2023-05-27 14:30:43.080 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686323035574272[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 17, 4
2023-05-27 14:30:43.080 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686323035574272[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 14, 2
2023-05-27 14:30:43.080 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686323035574272[0;39m <==        Row: 3, 1, 0, 文档2, 2, 6, 2
2023-05-27 14:30:43.080 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686323035574272[0;39m <==      Total: 4
2023-05-27 14:30:43.081 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686323035574272[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":46,"voteCount":6},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":17,"voteCount":4},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":14,"voteCount":2},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":6,"voteCount":2}],"success":true}
2023-05-27 14:30:43.081 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686323035574272[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:30:43.116 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686323203346432[0;39m ------------- 开始 -------------
2023-05-27 14:30:43.116 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686323203346432[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-27 14:30:43.116 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686323203346432[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2023-05-27 14:30:43.116 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686323203346432[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:43.117 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686323203346432[0;39m 请求参数: [1]
2023-05-27 14:30:43.117 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686323203346432[0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-27 14:30:43.117 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686323203346432[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:43.118 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686323203346432[0;39m <==    Columns: id, content
2023-05-27 14:30:43.118 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686323203346432[0;39m <==        Row: 1, <<BLOB>>
2023-05-27 14:30:43.118 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686323203346432[0;39m <==      Total: 1
2023-05-27 14:30:43.119 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686323203346432[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2023-05-27 14:30:43.119 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686323203346432[0;39m ==> Parameters: 1(Long)
2023-05-27 14:30:43.132 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686323203346432[0;39m <==    Updates: 1
2023-05-27 14:30:43.133 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686323203346432[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2023-05-27 14:30:43.133 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686323203346432[0;39m ------------- 结束 耗时：17 ms -------------
2023-05-27 14:30:44.979 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686331017334784[0;39m ------------- 开始 -------------
2023-05-27 14:30:44.979 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686331017334785[0;39m ------------- 开始 -------------
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686331017334784[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686331021529088[0;39m ------------- 开始 -------------
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686331017334785[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686331017334784[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686331021529088[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686331017334784[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686331017334785[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686331021529088[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686331017334784[0;39m 请求参数: []
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686331017334785[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686331021529088[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686331017334785[0;39m 请求参数: []
2023-05-27 14:30:44.980 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686331021529088[0;39m 请求参数: []
2023-05-27 14:30:44.981 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686331017334784[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:44.981 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686331017334785[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:44.981 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686331017334784[0;39m ==> Parameters: 
2023-05-27 14:30:44.981 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686331017334785[0;39m ==> Parameters: 
2023-05-27 14:30:44.981 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686331021529088[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 14:30:44.981 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686331021529088[0;39m ==> Parameters: 
2023-05-27 14:30:44.982 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686331017334784[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 14:30:44.982 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686331017334785[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 14:30:44.982 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686331017334785[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 14:30:44.982 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686331017334784[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 14:30:44.982 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686331017334785[0;39m <==      Total: 1
2023-05-27 14:30:44.982 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686331017334784[0;39m <==        Row: 2023-05-27, 436, 68, 0, 0
2023-05-27 14:30:44.983 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686331017334785[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 14:30:44.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==    Columns: id, parent, name, sort
2023-05-27 14:30:44.983 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686331017334785[0;39m ------------- 结束 耗时：4 ms -------------
2023-05-27 14:30:44.983 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686331017334784[0;39m <==      Total: 2
2023-05-27 14:30:44.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 14:30:44.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 14:30:44.983 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686331017334784[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":436,"viewIncrease":0,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 14:30:44.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 14:30:44.984 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686331017334784[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:30:44.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 14:30:44.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 14:30:44.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 14:30:44.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 14:30:44.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 14:30:44.986 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 14:30:44.986 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 14:30:44.986 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 14:30:44.986 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 14:30:44.987 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 14:30:44.987 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 14:30:44.987 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 14:30:44.987 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686331021529088[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 14:30:44.987 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686331021529088[0;39m <==      Total: 16
2023-05-27 14:30:44.988 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686331021529088[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 14:30:44.988 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686331021529088[0;39m ------------- 结束 耗时：8 ms -------------
2023-05-27 14:30:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686331126386688[0;39m 生成今日电子书快照开始
2023-05-27 14:30:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686331126386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686331126386688[0;39m ==> Parameters: 
2023-05-27 14:30:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686331126386688[0;39m <==    Updates: 0
2023-05-27 14:30:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686331126386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:46.616 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119686307164327936[0;39m 连接关闭，token：z1tkpJysWe，session id：6！当前连接数：0
2023-05-27 14:30:46.783 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119686307382431744[0;39m 有新连接：token：g0b3tvGSpZ，session id：7，当前连接数：1
2023-05-27 14:30:46.823 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686338751631362[0;39m ------------- 开始 -------------
2023-05-27 14:30:46.823 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686338751631360[0;39m ------------- 开始 -------------
2023-05-27 14:30:46.823 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686338751631362[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 14:30:46.823 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686338751631361[0;39m ------------- 开始 -------------
2023-05-27 14:30:46.823 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686338751631360[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686338751631362[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686338751631361[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686338751631360[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686338751631362[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686338751631361[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686338751631360[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686338751631362[0;39m 请求参数: []
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686338751631361[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686338751631360[0;39m 请求参数: []
2023-05-27 14:30:46.824 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686338751631361[0;39m 请求参数: []
2023-05-27 14:30:46.825 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686338751631362[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 14:30:46.825 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686338751631360[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:46.825 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686338751631361[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:46.825 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686338751631362[0;39m ==> Parameters: 
2023-05-27 14:30:46.825 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686338751631360[0;39m ==> Parameters: 
2023-05-27 14:30:46.825 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686338751631361[0;39m ==> Parameters: 
2023-05-27 14:30:46.826 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686338751631360[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 14:30:46.826 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==    Columns: id, parent, name, sort
2023-05-27 14:30:46.826 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686338751631361[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 14:30:46.826 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 14:30:46.827 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686338751631360[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 14:30:46.827 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686338751631361[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 14:30:46.827 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 14:30:46.827 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 14:30:46.827 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686338751631360[0;39m <==      Total: 1
2023-05-27 14:30:46.828 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 14:30:46.828 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 14:30:46.828 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686338751631360[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 14:30:46.828 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686338751631360[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:30:46.828 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 14:30:46.828 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 14:30:46.829 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 14:30:46.829 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 14:30:46.829 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 14:30:46.830 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 14:30:46.830 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 14:30:46.831 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 14:30:46.831 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 14:30:46.832 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 14:30:46.832 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686338751631362[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 14:30:46.833 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686338751631362[0;39m <==      Total: 16
2023-05-27 14:30:46.834 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686338751631362[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 14:30:46.834 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686338751631362[0;39m ------------- 结束 耗时：11 ms -------------
2023-05-27 14:30:46.921 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686338751631361[0;39m <==        Row: 2023-05-27, 436, 68, 0, 0
2023-05-27 14:30:46.921 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686338751631361[0;39m <==      Total: 2
2023-05-27 14:30:46.922 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686338751631361[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":436,"viewIncrease":0,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 14:30:46.922 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686338751631361[0;39m ------------- 结束 耗时：99 ms -------------
2023-05-27 14:30:48.043 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119686323035574272[0;39m 连接关闭，token：g0b3tvGSpZ，session id：7！当前连接数：0
2023-05-27 14:30:48.195 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119686323203346432[0;39m 有新连接：token：uIVZpQ1V61，session id：8，当前连接数：1
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686344653017088[0;39m ------------- 开始 -------------
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686344653017089[0;39m ------------- 开始 -------------
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686344653017090[0;39m ------------- 开始 -------------
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686344653017088[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686344653017089[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686344653017090[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686344653017088[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686344653017089[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686344653017090[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686344653017089[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686344653017088[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:48.230 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686344653017090[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:48.231 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686344653017090[0;39m 请求参数: []
2023-05-27 14:30:48.231 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686344653017089[0;39m 请求参数: []
2023-05-27 14:30:48.231 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686344653017088[0;39m 请求参数: []
2023-05-27 14:30:48.231 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686344653017088[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:48.231 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686344653017089[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:48.231 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686344653017090[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 14:30:48.232 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686344653017089[0;39m ==> Parameters: 
2023-05-27 14:30:48.232 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686344653017090[0;39m ==> Parameters: 
2023-05-27 14:30:48.232 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686344653017088[0;39m ==> Parameters: 
2023-05-27 14:30:48.233 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686344653017088[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 14:30:48.233 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==    Columns: id, parent, name, sort
2023-05-27 14:30:48.233 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686344653017089[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 14:30:48.233 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 14:30:48.233 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686344653017089[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 14:30:48.233 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686344653017088[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 14:30:48.233 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 14:30:48.234 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686344653017089[0;39m <==      Total: 1
2023-05-27 14:30:48.234 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686344653017088[0;39m <==        Row: 2023-05-27, 436, 68, 0, 0
2023-05-27 14:30:48.234 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 14:30:48.234 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686344653017089[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 14:30:48.234 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686344653017088[0;39m <==      Total: 2
2023-05-27 14:30:48.234 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 14:30:48.234 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686344653017089[0;39m ------------- 结束 耗时：4 ms -------------
2023-05-27 14:30:48.234 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 14:30:48.234 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686344653017088[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":436,"viewIncrease":0,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 14:30:48.235 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686344653017088[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:30:48.235 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 14:30:48.235 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 14:30:48.235 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 14:30:48.236 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 14:30:48.236 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 14:30:48.236 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 14:30:48.237 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 14:30:48.237 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 14:30:48.238 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 14:30:48.238 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 14:30:48.238 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686344653017090[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 14:30:48.239 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686344653017090[0;39m <==      Total: 16
2023-05-27 14:30:48.240 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686344653017090[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 14:30:48.240 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686344653017090[0;39m ------------- 结束 耗时：10 ms -------------
2023-05-27 14:30:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686352089518080[0;39m 生成今日电子书快照开始
2023-05-27 14:30:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686352089518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686352089518080[0;39m ==> Parameters: 
2023-05-27 14:30:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686352089518080[0;39m <==    Updates: 0
2023-05-27 14:30:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686352089518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:50.736 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119686307164327936[0;39m 连接关闭，token：uIVZpQ1V61，session id：8！当前连接数：0
2023-05-27 14:30:50.985 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119686307382431744[0;39m 有新连接：token：XJNqCnvFBJ，session id：9，当前连接数：1
2023-05-27 14:30:51.020 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686356355125248[0;39m ------------- 开始 -------------
2023-05-27 14:30:51.020 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686356355125249[0;39m ------------- 开始 -------------
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686356355125249[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686356355125248[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686356359319552[0;39m ------------- 开始 -------------
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686356355125249[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686356355125248[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686356359319552[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686356355125249[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686356355125248[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686356359319552[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686356355125249[0;39m 请求参数: []
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686356355125248[0;39m 请求参数: []
2023-05-27 14:30:51.021 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686356359319552[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:51.022 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686356359319552[0;39m 请求参数: []
2023-05-27 14:30:51.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686356355125249[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:51.022 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686356355125248[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:30:51.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686356355125249[0;39m ==> Parameters: 
2023-05-27 14:30:51.022 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686356355125248[0;39m ==> Parameters: 
2023-05-27 14:30:51.023 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686356355125249[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 14:30:51.023 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686356355125248[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 14:30:51.023 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686356355125249[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 14:30:51.023 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686356355125248[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 14:30:51.023 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686356355125248[0;39m <==      Total: 1
2023-05-27 14:30:51.023 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686356355125249[0;39m <==        Row: 2023-05-27, 436, 68, 0, 0
2023-05-27 14:30:51.024 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686356355125248[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 14:30:51.024 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686356355125248[0;39m ------------- 结束 耗时：4 ms -------------
2023-05-27 14:30:51.024 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686356355125249[0;39m <==      Total: 2
2023-05-27 14:30:51.025 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686356355125249[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":436,"viewIncrease":0,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 14:30:51.025 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686356355125249[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:30:51.039 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686356359319552[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 14:30:51.040 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686356359319552[0;39m ==> Parameters: 
2023-05-27 14:30:51.041 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==    Columns: id, parent, name, sort
2023-05-27 14:30:51.041 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 14:30:51.041 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 14:30:51.042 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 14:30:51.042 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 14:30:51.042 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 14:30:51.042 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 14:30:51.042 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 14:30:51.043 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 14:30:51.043 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 14:30:51.043 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 14:30:51.043 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 14:30:51.043 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 14:30:51.044 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 14:30:51.044 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 14:30:51.044 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 14:30:51.044 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686356359319552[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 14:30:51.044 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686356359319552[0;39m <==      Total: 16
2023-05-27 14:30:51.046 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686356359319552[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 14:30:51.046 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686356359319552[0;39m ------------- 结束 耗时：25 ms -------------
2023-05-27 14:30:53.095 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686365058306048[0;39m ------------- 开始 -------------
2023-05-27 14:30:53.095 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686365058306048[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-27 14:30:53.096 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686365058306048[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2023-05-27 14:30:53.096 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686365058306048[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:53.096 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686365058306048[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2023-05-27 14:30:53.099 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m119686365058306048[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-05-27 14:30:53.099 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m119686365058306048[0;39m ==> Parameters: 101(Long)
2023-05-27 14:30:53.100 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m119686365058306048[0;39m <==    Columns: count(0)
2023-05-27 14:30:53.100 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m119686365058306048[0;39m <==        Row: 1
2023-05-27 14:30:53.100 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m119686365058306048[0;39m <==      Total: 1
2023-05-27 14:30:53.101 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m119686365058306048[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-05-27 14:30:53.101 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m119686365058306048[0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-05-27 14:30:53.102 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m119686365058306048[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-27 14:30:53.102 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m119686365058306048[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 20, 2
2023-05-27 14:30:53.102 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m119686365058306048[0;39m <==      Total: 1
2023-05-27 14:30:53.103 INFO  com.zs.wikibb.service.EbookService                :46  
                [32m119686365058306048[0;39m 总行数：1
2023-05-27 14:30:53.103 INFO  com.zs.wikibb.service.EbookService                :47  
                [32m119686365058306048[0;39m 总页数：1
2023-05-27 14:30:53.103 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686365058306048[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":20,"voteCount":2}],"total":1},"success":true}
2023-05-27 14:30:53.103 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686365058306048[0;39m ------------- 结束 耗时：8 ms -------------
2023-05-27 14:30:54.233 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686369831424000[0;39m ------------- 开始 -------------
2023-05-27 14:30:54.234 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686369831424000[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2023-05-27 14:30:54.234 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686369831424000[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2023-05-27 14:30:54.234 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686369831424000[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:54.234 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686369831424000[0;39m 请求参数: [6]
2023-05-27 14:30:54.235 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686369831424000[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-27 14:30:54.236 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686369831424000[0;39m ==> Parameters: 6(Long)
2023-05-27 14:30:54.236 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686369831424000[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-27 14:30:54.237 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686369831424000[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 20, 2
2023-05-27 14:30:54.237 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686369831424000[0;39m <==      Total: 1
2023-05-27 14:30:54.237 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686369831424000[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":20,"voteCount":2}],"success":true}
2023-05-27 14:30:54.238 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686369831424000[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:30:54.245 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686369881755648[0;39m ------------- 开始 -------------
2023-05-27 14:30:54.245 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686369881755648[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202703460804726784 GET
2023-05-27 14:30:54.245 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686369881755648[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2023-05-27 14:30:54.245 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686369881755648[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:54.245 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686369881755648[0;39m 请求参数: [202703460804726784]
2023-05-27 14:30:54.245 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686369881755648[0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-27 14:30:54.246 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686369881755648[0;39m ==> Parameters: 202703460804726784(Long)
2023-05-27 14:30:54.247 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686369881755648[0;39m <==    Columns: id, content
2023-05-27 14:30:54.247 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686369881755648[0;39m <==        Row: 202703460804726784, <<BLOB>>
2023-05-27 14:30:54.247 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686369881755648[0;39m <==      Total: 1
2023-05-27 14:30:54.248 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686369881755648[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2023-05-27 14:30:54.249 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686369881755648[0;39m ==> Parameters: 202703460804726784(Long)
2023-05-27 14:30:54.332 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686369881755648[0;39m <==    Updates: 1
2023-05-27 14:30:54.332 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686369881755648[0;39m 返回结果: {"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1><div></div></blockquote><p><img src=\"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F1113%2F052420110515%2F200524110515-2-1200.jpg&amp;refer=http%3A%2F%2Fimg.jj20.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1661402253&amp;t=52f6d22e4bcf7c1080a5abd8bf8db32b\" style=\"max-width:100%;\"><br></p>","success":true}
2023-05-27 14:30:54.332 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686369881755648[0;39m ------------- 结束 耗时：87 ms -------------
2023-05-27 14:30:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686373061038080[0;39m 生成今日电子书快照开始
2023-05-27 14:30:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686373061038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:30:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686373061038080[0;39m ==> Parameters: 
2023-05-27 14:30:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686373061038080[0;39m <==    Updates: 0
2023-05-27 14:30:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686373061038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:30:55.568 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119686344653017088[0;39m 连接关闭，token：XJNqCnvFBJ，session id：9！当前连接数：0
2023-05-27 14:30:55.723 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119686344653017090[0;39m 有新连接：token：ZV9w5902IQ，session id：a，当前连接数：1
2023-05-27 14:30:55.736 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686376135462912[0;39m ------------- 开始 -------------
2023-05-27 14:30:55.737 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686376135462912[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2023-05-27 14:30:55.737 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686376135462912[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2023-05-27 14:30:55.737 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686376135462912[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:55.737 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686376135462912[0;39m 请求参数: [6]
2023-05-27 14:30:55.738 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686376135462912[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-27 14:30:55.739 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686376135462912[0;39m ==> Parameters: 6(Long)
2023-05-27 14:30:55.740 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686376135462912[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-27 14:30:55.740 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686376135462912[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 21, 2
2023-05-27 14:30:55.740 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686376135462912[0;39m <==      Total: 1
2023-05-27 14:30:55.741 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686376135462912[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":21,"voteCount":2}],"success":true}
2023-05-27 14:30:55.741 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686376135462912[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:30:55.774 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686376294846464[0;39m ------------- 开始 -------------
2023-05-27 14:30:55.775 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686376294846464[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202703460804726784 GET
2023-05-27 14:30:55.775 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686376294846464[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2023-05-27 14:30:55.776 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686376294846464[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:55.776 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686376294846464[0;39m 请求参数: [202703460804726784]
2023-05-27 14:30:55.777 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686376294846464[0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-27 14:30:55.777 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686376294846464[0;39m ==> Parameters: 202703460804726784(Long)
2023-05-27 14:30:55.778 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686376294846464[0;39m <==    Columns: id, content
2023-05-27 14:30:55.778 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686376294846464[0;39m <==        Row: 202703460804726784, <<BLOB>>
2023-05-27 14:30:55.779 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686376294846464[0;39m <==      Total: 1
2023-05-27 14:30:55.779 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686376294846464[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2023-05-27 14:30:55.780 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686376294846464[0;39m ==> Parameters: 202703460804726784(Long)
2023-05-27 14:30:55.789 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686376294846464[0;39m <==    Updates: 1
2023-05-27 14:30:55.789 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686376294846464[0;39m 返回结果: {"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1><div></div></blockquote><p><img src=\"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F1113%2F052420110515%2F200524110515-2-1200.jpg&amp;refer=http%3A%2F%2Fimg.jj20.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1661402253&amp;t=52f6d22e4bcf7c1080a5abd8bf8db32b\" style=\"max-width:100%;\"><br></p>","success":true}
2023-05-27 14:30:55.790 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686376294846464[0;39m ------------- 结束 耗时：16 ms -------------
2023-05-27 14:30:56.845 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686380786946048[0;39m ------------- 开始 -------------
2023-05-27 14:30:56.845 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686380786946048[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202703460804726784 GET
2023-05-27 14:30:56.845 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686380786946048[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2023-05-27 14:30:56.845 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686380786946048[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:56.845 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686380786946048[0;39m 请求参数: [202703460804726784]
2023-05-27 14:30:59.080 INFO  com.zs.wikibb.utils.RedisUtil                     :28  
                [32m119686380786946048[0;39m key已存在：DOC_VOTE_202703460804726784_127.0.0.1
2023-05-27 14:30:59.112 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :45  
                [32m119686380786946048[0;39m 业务异常：您已点赞过
2023-05-27 14:30:59.113 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m119686380786946048[0;39m Resolved [com.zs.wikibb.exception.BusinessException: 您已点赞过]
2023-05-27 14:30:59.114 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686390303821824[0;39m ------------- 开始 -------------
2023-05-27 14:30:59.115 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686390303821824[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202703460804726784 GET
2023-05-27 14:30:59.115 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686390303821824[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2023-05-27 14:30:59.115 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686390303821824[0;39m 远程地址: 127.0.0.1
2023-05-27 14:30:59.115 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686390303821824[0;39m 请求参数: [202703460804726784]
2023-05-27 14:30:59.143 INFO  com.zs.wikibb.utils.RedisUtil                     :28  
                [32m119686390303821824[0;39m key已存在：DOC_VOTE_202703460804726784_127.0.0.1
2023-05-27 14:30:59.143 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :45  
                [32m119686390303821824[0;39m 业务异常：您已点赞过
2023-05-27 14:30:59.144 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m119686390303821824[0;39m Resolved [com.zs.wikibb.exception.BusinessException: 您已点赞过]
2023-05-27 14:31:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686394078695424[0;39m 生成今日电子书快照开始
2023-05-27 14:31:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686394078695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686394078695424[0;39m ==> Parameters: 
2023-05-27 14:31:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686394078695424[0;39m <==    Updates: 0
2023-05-27 14:31:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686394078695424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:31:01.214 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119686356359319552[0;39m 连接关闭，token：ZV9w5902IQ，session id：a！当前连接数：0
2023-05-27 14:31:01.367 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119686365058306048[0;39m 有新连接：token：7JcokNn5WA，session id：b，当前连接数：1
2023-05-27 14:31:01.381 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686399812308992[0;39m ------------- 开始 -------------
2023-05-27 14:31:01.382 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686399812308992[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2023-05-27 14:31:01.382 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686399812308992[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2023-05-27 14:31:01.382 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686399812308992[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:01.382 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686399812308992[0;39m 请求参数: [6]
2023-05-27 14:31:01.383 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686399812308992[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-27 14:31:01.384 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686399812308992[0;39m ==> Parameters: 6(Long)
2023-05-27 14:31:01.385 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686399812308992[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-27 14:31:01.385 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m119686399812308992[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 22, 2
2023-05-27 14:31:01.385 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m119686399812308992[0;39m <==      Total: 1
2023-05-27 14:31:01.386 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686399812308992[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":22,"voteCount":2}],"success":true}
2023-05-27 14:31:01.386 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686399812308992[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:31:01.420 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686399975886848[0;39m ------------- 开始 -------------
2023-05-27 14:31:01.420 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686399975886848[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202703460804726784 GET
2023-05-27 14:31:01.420 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686399975886848[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2023-05-27 14:31:01.421 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686399975886848[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:01.421 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686399975886848[0;39m 请求参数: [202703460804726784]
2023-05-27 14:31:01.421 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686399975886848[0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-27 14:31:01.422 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686399975886848[0;39m ==> Parameters: 202703460804726784(Long)
2023-05-27 14:31:01.423 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686399975886848[0;39m <==    Columns: id, content
2023-05-27 14:31:01.424 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m119686399975886848[0;39m <==        Row: 202703460804726784, <<BLOB>>
2023-05-27 14:31:01.425 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m119686399975886848[0;39m <==      Total: 1
2023-05-27 14:31:01.425 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686399975886848[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2023-05-27 14:31:01.426 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686399975886848[0;39m ==> Parameters: 202703460804726784(Long)
2023-05-27 14:31:01.449 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m119686399975886848[0;39m <==    Updates: 1
2023-05-27 14:31:01.450 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686399975886848[0;39m 返回结果: {"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1><div></div></blockquote><p><img src=\"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.jj20.com%2Fup%2Fallimg%2F1113%2F052420110515%2F200524110515-2-1200.jpg&amp;refer=http%3A%2F%2Fimg.jj20.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1661402253&amp;t=52f6d22e4bcf7c1080a5abd8bf8db32b\" style=\"max-width:100%;\"><br></p>","success":true}
2023-05-27 14:31:01.450 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686399975886848[0;39m ------------- 结束 耗时：30 ms -------------
2023-05-27 14:31:02.670 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686405218766848[0;39m ------------- 开始 -------------
2023-05-27 14:31:02.670 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686405218766849[0;39m ------------- 开始 -------------
2023-05-27 14:31:02.670 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686405218766848[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 14:31:02.670 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686405218766850[0;39m ------------- 开始 -------------
2023-05-27 14:31:02.670 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686405218766849[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686405218766850[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686405218766848[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686405218766849[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686405218766850[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686405218766848[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686405218766850[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686405218766849[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686405218766848[0;39m 请求参数: []
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686405218766850[0;39m 请求参数: []
2023-05-27 14:31:02.671 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686405218766849[0;39m 请求参数: []
2023-05-27 14:31:02.671 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686405218766848[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:31:02.671 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686405218766849[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:31:02.671 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686405218766850[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 14:31:02.672 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686405218766849[0;39m ==> Parameters: 
2023-05-27 14:31:02.672 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686405218766850[0;39m ==> Parameters: 
2023-05-27 14:31:02.672 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686405218766848[0;39m ==> Parameters: 
2023-05-27 14:31:02.672 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686405218766848[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 14:31:02.672 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==    Columns: id, parent, name, sort
2023-05-27 14:31:02.672 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686405218766849[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 14:31:02.673 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 14:31:02.673 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686405218766848[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 14:31:02.673 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686405218766849[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 14:31:02.673 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 14:31:02.673 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686405218766848[0;39m <==      Total: 1
2023-05-27 14:31:02.673 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 14:31:02.673 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686405218766848[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 14:31:02.673 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 14:31:02.673 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686405218766848[0;39m ------------- 结束 耗时：3 ms -------------
2023-05-27 14:31:02.673 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686405218766849[0;39m <==        Row: 2023-05-27, 436, 68, 0, 0
2023-05-27 14:31:02.674 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 14:31:02.674 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686405218766849[0;39m <==      Total: 2
2023-05-27 14:31:02.674 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 14:31:02.674 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686405218766849[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":436,"viewIncrease":0,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 14:31:02.674 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686405218766849[0;39m ------------- 结束 耗时：4 ms -------------
2023-05-27 14:31:02.674 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 14:31:02.674 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 14:31:02.675 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 14:31:02.675 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 14:31:02.675 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 14:31:02.675 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 14:31:02.676 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 14:31:02.676 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 14:31:02.677 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 14:31:02.677 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686405218766850[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 14:31:02.677 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686405218766850[0;39m <==      Total: 16
2023-05-27 14:31:02.678 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686405218766850[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 14:31:02.679 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686405218766850[0;39m ------------- 结束 耗时：9 ms -------------
2023-05-27 14:31:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119686415025049600[0;39m 更新电子书下的文档数据开始
2023-05-27 14:31:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686415025049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:31:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686415025049600[0;39m ==> Parameters: 
2023-05-27 14:31:05.029 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686415025049600[0;39m <==    Updates: 8
2023-05-27 14:31:05.029 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119686415025049600[0;39m 更新电子书下的文档数据结束，耗时：21 毫秒
2023-05-27 14:31:05.029 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686415113129984[0;39m 生成今日电子书快照开始
2023-05-27 14:31:05.030 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686415113129984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:05.030 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686415113129984[0;39m ==> Parameters: 
2023-05-27 14:31:05.060 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686415113129984[0;39m <==    Updates: 0
2023-05-27 14:31:05.060 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686415113129984[0;39m 生成今日电子书快照结束，耗时：30 毫秒
2023-05-27 14:31:07.741 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119686376294846464[0;39m 连接关闭，token：7JcokNn5WA，session id：b！当前连接数：0
2023-05-27 14:31:07.892 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119686380786946048[0;39m 有新连接：token：bJCyCoOWMx，session id：c，当前连接数：1
2023-05-27 14:31:07.928 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686427272417280[0;39m ------------- 开始 -------------
2023-05-27 14:31:07.928 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686427272417281[0;39m ------------- 开始 -------------
2023-05-27 14:31:07.929 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686427272417280[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 14:31:07.929 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686427272417281[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 14:31:07.929 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686427272417280[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 14:31:07.929 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686427272417281[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 14:31:07.929 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686427272417280[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:07.929 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686427272417281[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:07.929 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686427276611584[0;39m ------------- 开始 -------------
2023-05-27 14:31:07.929 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686427272417280[0;39m 请求参数: []
2023-05-27 14:31:07.930 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686427272417281[0;39m 请求参数: []
2023-05-27 14:31:07.930 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686427276611584[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 14:31:07.930 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686427276611584[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 14:31:07.930 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686427272417281[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:31:07.930 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686427272417280[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:31:07.930 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686427276611584[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:07.930 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686427272417281[0;39m ==> Parameters: 
2023-05-27 14:31:07.930 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686427276611584[0;39m 请求参数: []
2023-05-27 14:31:07.930 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686427272417280[0;39m ==> Parameters: 
2023-05-27 14:31:07.931 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686427276611584[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 14:31:07.931 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686427272417281[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 14:31:07.931 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686427272417280[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 14:31:07.931 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686427276611584[0;39m ==> Parameters: 
2023-05-27 14:31:07.931 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686427272417281[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 14:31:07.932 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686427272417280[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 14:31:07.932 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686427272417280[0;39m <==      Total: 1
2023-05-27 14:31:07.932 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686427272417281[0;39m <==        Row: 2023-05-27, 443, 68, 7, 0
2023-05-27 14:31:07.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==    Columns: id, parent, name, sort
2023-05-27 14:31:07.932 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686427272417280[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 14:31:07.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 14:31:07.932 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686427272417281[0;39m <==      Total: 2
2023-05-27 14:31:07.933 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686427272417280[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:31:07.933 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686427272417281[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":443,"viewIncrease":7,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 14:31:07.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 14:31:07.933 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686427272417281[0;39m ------------- 结束 耗时：5 ms -------------
2023-05-27 14:31:07.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 14:31:07.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 14:31:07.934 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 14:31:07.934 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 14:31:07.934 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 14:31:07.935 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 14:31:07.935 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 14:31:07.935 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 14:31:07.936 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 14:31:07.936 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 14:31:07.936 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 14:31:07.936 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 14:31:07.937 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 14:31:07.937 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686427276611584[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 14:31:07.937 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686427276611584[0;39m <==      Total: 16
2023-05-27 14:31:07.938 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686427276611584[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 14:31:07.938 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686427276611584[0;39m ------------- 结束 耗时：9 ms -------------
2023-05-27 14:31:09.029 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m119686399812308992[0;39m 连接关闭，token：bJCyCoOWMx，session id：c！当前连接数：0
2023-05-27 14:31:09.910 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m119686399975886848[0;39m 有新连接：token：Ag41euQ6TF，session id：d，当前连接数：1
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686435749105665[0;39m ------------- 开始 -------------
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686435749105664[0;39m ------------- 开始 -------------
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686435749105665[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686435749105664[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m119686435749105666[0;39m ------------- 开始 -------------
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686435749105664[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686435749105665[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m119686435749105666[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686435749105664[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686435749105665[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m119686435749105666[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686435749105665[0;39m 请求参数: []
2023-05-27 14:31:09.949 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686435749105664[0;39m 请求参数: []
2023-05-27 14:31:09.950 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m119686435749105666[0;39m 远程地址: 127.0.0.1
2023-05-27 14:31:09.950 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m119686435749105666[0;39m 请求参数: []
2023-05-27 14:31:09.950 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686435749105664[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:31:09.950 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686435749105665[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-27 14:31:09.950 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686435749105664[0;39m ==> Parameters: 
2023-05-27 14:31:09.950 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686435749105665[0;39m ==> Parameters: 
2023-05-27 14:31:09.950 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686435749105666[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-27 14:31:09.951 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686435749105666[0;39m ==> Parameters: 
2023-05-27 14:31:09.951 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686435749105665[0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-27 14:31:09.951 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686435749105664[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-27 14:31:09.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==    Columns: id, parent, name, sort
2023-05-27 14:31:09.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-27 14:31:09.951 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m119686435749105665[0;39m <==        Row: 2023-05-26, 436, 68
2023-05-27 14:31:09.951 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686435749105664[0;39m <==        Row: 2023-05-26, 436, 68, 436, 68
2023-05-27 14:31:09.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 101, 100, Vue, 101
2023-05-27 14:31:09.952 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m119686435749105665[0;39m <==      Total: 1
2023-05-27 14:31:09.952 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m119686435749105664[0;39m <==        Row: 2023-05-27, 443, 68, 7, 0
2023-05-27 14:31:09.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-27 14:31:09.952 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686435749105665[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":0,"viewIncrease":436,"voteCount":0,"voteIncrease":68}],"success":true}
2023-05-27 14:31:09.952 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m119686435749105664[0;39m <==      Total: 2
2023-05-27 14:31:09.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 200, 0, Java, 200
2023-05-27 14:31:09.952 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686435749105665[0;39m ------------- 结束 耗时：3 ms -------------
2023-05-27 14:31:09.953 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686435749105664[0;39m 返回结果: {"content":[{"date":1685030400000,"viewCount":436,"viewIncrease":436,"voteCount":68,"voteIncrease":68},{"date":1685116800000,"viewCount":443,"viewIncrease":7,"voteCount":68,"voteIncrease":0}],"success":true}
2023-05-27 14:31:09.953 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-27 14:31:09.953 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686435749105664[0;39m ------------- 结束 耗时：4 ms -------------
2023-05-27 14:31:09.953 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-27 14:31:09.953 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2023-05-27 14:31:09.954 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 300, 0, Python, 300
2023-05-27 14:31:09.954 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-27 14:31:09.954 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-27 14:31:09.955 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 400, 0, 数据库, 400
2023-05-27 14:31:09.955 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 401, 400, MySQL, 401
2023-05-27 14:31:09.955 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 500, 0, 其它, 500
2023-05-27 14:31:09.956 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 501, 500, 服务器, 501
2023-05-27 14:31:09.956 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-27 14:31:09.956 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m119686435749105666[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-27 14:31:09.957 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m119686435749105666[0;39m <==      Total: 16
2023-05-27 14:31:09.958 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m119686435749105666[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-27 14:31:09.958 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m119686435749105666[0;39m ------------- 结束 耗时：9 ms -------------
2023-05-27 14:31:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686436000763904[0;39m 生成今日电子书快照开始
2023-05-27 14:31:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686436000763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686436000763904[0;39m ==> Parameters: 
2023-05-27 14:31:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686436000763904[0;39m <==    Updates: 0
2023-05-27 14:31:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686436000763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:31:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686456968089600[0;39m 生成今日电子书快照开始
2023-05-27 14:31:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686456968089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686456968089600[0;39m ==> Parameters: 
2023-05-27 14:31:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686456968089600[0;39m <==    Updates: 0
2023-05-27 14:31:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686456968089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:31:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686477973164032[0;39m 生成今日电子书快照开始
2023-05-27 14:31:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686477973164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686477973164032[0;39m ==> Parameters: 
2023-05-27 14:31:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686477973164032[0;39m <==    Updates: 0
2023-05-27 14:31:20.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686477973164032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:31:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686498877575168[0;39m 生成今日电子书快照开始
2023-05-27 14:31:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686498877575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686498877575168[0;39m ==> Parameters: 
2023-05-27 14:31:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686498877575168[0;39m <==    Updates: 0
2023-05-27 14:31:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686498877575168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:31:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686519861678080[0;39m 生成今日电子书快照开始
2023-05-27 14:31:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686519861678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686519861678080[0;39m ==> Parameters: 
2023-05-27 14:31:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686519861678080[0;39m <==    Updates: 0
2023-05-27 14:31:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686519861678080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:31:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119686540837392384[0;39m 更新电子书下的文档数据开始
2023-05-27 14:31:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686540837392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:31:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686540837392384[0;39m ==> Parameters: 
2023-05-27 14:31:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686540837392384[0;39m <==    Updates: 8
2023-05-27 14:31:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119686540837392384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:31:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686540841586688[0;39m 生成今日电子书快照开始
2023-05-27 14:31:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686540841586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686540841586688[0;39m ==> Parameters: 
2023-05-27 14:31:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686540841586688[0;39m <==    Updates: 0
2023-05-27 14:31:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686540841586688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:31:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686561813106688[0;39m 生成今日电子书快照开始
2023-05-27 14:31:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686561813106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686561813106688[0;39m ==> Parameters: 
2023-05-27 14:31:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686561813106688[0;39m <==    Updates: 0
2023-05-27 14:31:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686561813106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:31:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686582809792512[0;39m 生成今日电子书快照开始
2023-05-27 14:31:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686582809792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686582809792512[0;39m ==> Parameters: 
2023-05-27 14:31:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686582809792512[0;39m <==    Updates: 0
2023-05-27 14:31:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686582809792512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:31:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686603760340992[0;39m 生成今日电子书快照开始
2023-05-27 14:31:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686603760340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686603760340992[0;39m ==> Parameters: 
2023-05-27 14:31:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686603760340992[0;39m <==    Updates: 0
2023-05-27 14:31:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686603760340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:31:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686624761221120[0;39m 生成今日电子书快照开始
2023-05-27 14:31:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686624761221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:31:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686624761221120[0;39m ==> Parameters: 
2023-05-27 14:31:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686624761221120[0;39m <==    Updates: 0
2023-05-27 14:31:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686624761221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686645724352512[0;39m 生成今日电子书快照开始
2023-05-27 14:32:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686645724352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686645724352512[0;39m ==> Parameters: 
2023-05-27 14:32:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686645724352512[0;39m <==    Updates: 0
2023-05-27 14:32:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686645724352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686666662318080[0;39m 生成今日电子书快照开始
2023-05-27 14:32:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686666662318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686666662318080[0;39m ==> Parameters: 
2023-05-27 14:32:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686666662318080[0;39m <==    Updates: 0
2023-05-27 14:32:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686666662318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119686666670706688[0;39m 更新电子书下的文档数据开始
2023-05-27 14:32:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686666670706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:32:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686666670706688[0;39m ==> Parameters: 
2023-05-27 14:32:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686666670706688[0;39m <==    Updates: 8
2023-05-27 14:32:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119686666670706688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:32:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686687654809600[0;39m 生成今日电子书快照开始
2023-05-27 14:32:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686687654809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686687654809600[0;39m ==> Parameters: 
2023-05-27 14:32:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686687654809600[0;39m <==    Updates: 0
2023-05-27 14:32:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686687654809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686708596969472[0;39m 生成今日电子书快照开始
2023-05-27 14:32:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686708596969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686708596969472[0;39m ==> Parameters: 
2023-05-27 14:32:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686708596969472[0;39m <==    Updates: 0
2023-05-27 14:32:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686708596969472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:32:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686729610432512[0;39m 生成今日电子书快照开始
2023-05-27 14:32:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686729610432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686729610432512[0;39m ==> Parameters: 
2023-05-27 14:32:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686729610432512[0;39m <==    Updates: 0
2023-05-27 14:32:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686729610432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686750573563904[0;39m 生成今日电子书快照开始
2023-05-27 14:32:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686750573563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686750573563904[0;39m ==> Parameters: 
2023-05-27 14:32:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686750573563904[0;39m <==    Updates: 0
2023-05-27 14:32:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686750573563904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:32:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686771557666816[0;39m 生成今日电子书快照开始
2023-05-27 14:32:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686771557666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686771557666816[0;39m ==> Parameters: 
2023-05-27 14:32:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686771557666816[0;39m <==    Updates: 0
2023-05-27 14:32:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686771557666816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686792495632384[0;39m 生成今日电子书快照开始
2023-05-27 14:32:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686792495632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686792495632384[0;39m ==> Parameters: 
2023-05-27 14:32:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686792495632384[0;39m <==    Updates: 0
2023-05-27 14:32:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686792495632384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119686792504020992[0;39m 更新电子书下的文档数据开始
2023-05-27 14:32:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686792504020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:32:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686792504020992[0;39m ==> Parameters: 
2023-05-27 14:32:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686792504020992[0;39m <==    Updates: 8
2023-05-27 14:32:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119686792504020992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:32:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686813496512512[0;39m 生成今日电子书快照开始
2023-05-27 14:32:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686813496512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686813496512512[0;39m ==> Parameters: 
2023-05-27 14:32:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686813496512512[0;39m <==    Updates: 0
2023-05-27 14:32:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686813496512512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:32:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686834459643904[0;39m 生成今日电子书快照开始
2023-05-27 14:32:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686834459643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686834459643904[0;39m ==> Parameters: 
2023-05-27 14:32:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686834459643904[0;39m <==    Updates: 0
2023-05-27 14:32:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686834459643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686855456329728[0;39m 生成今日电子书快照开始
2023-05-27 14:32:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686855456329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686855456329728[0;39m ==> Parameters: 
2023-05-27 14:32:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686855456329728[0;39m <==    Updates: 0
2023-05-27 14:32:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686855456329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:32:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686876390100992[0;39m 生成今日电子书快照开始
2023-05-27 14:32:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686876390100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:32:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686876390100992[0;39m ==> Parameters: 
2023-05-27 14:32:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686876390100992[0;39m <==    Updates: 0
2023-05-27 14:32:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686876390100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:33:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686897382592512[0;39m 生成今日电子书快照开始
2023-05-27 14:33:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686897382592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686897382592512[0;39m ==> Parameters: 
2023-05-27 14:33:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686897382592512[0;39m <==    Updates: 0
2023-05-27 14:33:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686897382592512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:33:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119686918362501120[0;39m 更新电子书下的文档数据开始
2023-05-27 14:33:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686918362501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:33:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686918362501120[0;39m ==> Parameters: 
2023-05-27 14:33:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119686918362501120[0;39m <==    Updates: 8
2023-05-27 14:33:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119686918362501120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:33:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686918366695424[0;39m 生成今日电子书快照开始
2023-05-27 14:33:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686918366695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686918366695424[0;39m ==> Parameters: 
2023-05-27 14:33:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686918366695424[0;39m <==    Updates: 0
2023-05-27 14:33:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686918366695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:33:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686939300466688[0;39m 生成今日电子书快照开始
2023-05-27 14:33:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686939300466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686939300466688[0;39m ==> Parameters: 
2023-05-27 14:33:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686939300466688[0;39m <==    Updates: 0
2023-05-27 14:33:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686939300466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:33:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686960280375296[0;39m 生成今日电子书快照开始
2023-05-27 14:33:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686960280375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686960280375296[0;39m ==> Parameters: 
2023-05-27 14:33:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686960280375296[0;39m <==    Updates: 0
2023-05-27 14:33:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686960280375296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:33:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119686981243506688[0;39m 生成今日电子书快照开始
2023-05-27 14:33:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686981243506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686981243506688[0;39m ==> Parameters: 
2023-05-27 14:33:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119686981243506688[0;39m <==    Updates: 0
2023-05-27 14:33:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119686981243506688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:33:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687002215026688[0;39m 生成今日电子书快照开始
2023-05-27 14:33:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687002215026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687002215026688[0;39m ==> Parameters: 
2023-05-27 14:33:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687002215026688[0;39m <==    Updates: 0
2023-05-27 14:33:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687002215026688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:33:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687023182352384[0;39m 生成今日电子书快照开始
2023-05-27 14:33:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687023182352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687023182352384[0;39m ==> Parameters: 
2023-05-27 14:33:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687023182352384[0;39m <==    Updates: 0
2023-05-27 14:33:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687023182352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:33:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119687044145483776[0;39m 更新电子书下的文档数据开始
2023-05-27 14:33:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687044145483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:33:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687044145483776[0;39m ==> Parameters: 
2023-05-27 14:33:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687044145483776[0;39m <==    Updates: 8
2023-05-27 14:33:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119687044145483776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:33:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687044149678080[0;39m 生成今日电子书快照开始
2023-05-27 14:33:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687044149678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687044149678080[0;39m ==> Parameters: 
2023-05-27 14:33:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687044149678080[0;39m <==    Updates: 0
2023-05-27 14:33:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687044149678080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:33:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687065121198080[0;39m 生成今日电子书快照开始
2023-05-27 14:33:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687065121198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687065121198080[0;39m ==> Parameters: 
2023-05-27 14:33:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687065121198080[0;39m <==    Updates: 0
2023-05-27 14:33:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687065121198080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:33:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687086092718080[0;39m 生成今日电子书快照开始
2023-05-27 14:33:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687086092718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687086092718080[0;39m ==> Parameters: 
2023-05-27 14:33:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687086092718080[0;39m <==    Updates: 0
2023-05-27 14:33:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687086092718080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:33:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687107110375424[0;39m 生成今日电子书快照开始
2023-05-27 14:33:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687107110375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687107110375424[0;39m ==> Parameters: 
2023-05-27 14:33:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687107110375424[0;39m <==    Updates: 0
2023-05-27 14:33:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687107110375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:33:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687128077701120[0;39m 生成今日电子书快照开始
2023-05-27 14:33:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687128077701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:33:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687128077701120[0;39m ==> Parameters: 
2023-05-27 14:33:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687128077701120[0;39m <==    Updates: 0
2023-05-27 14:33:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687128077701120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:34:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687149007278080[0;39m 生成今日电子书快照开始
2023-05-27 14:34:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687149007278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:34:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687149007278080[0;39m ==> Parameters: 
2023-05-27 14:34:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687149007278080[0;39m <==    Updates: 0
2023-05-27 14:34:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687149007278080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-27 14:34:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687170016546816[0;39m 生成今日电子书快照开始
2023-05-27 14:34:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687170016546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:34:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687170016546816[0;39m ==> Parameters: 
2023-05-27 14:34:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687170016546816[0;39m <==    Updates: 0
2023-05-27 14:34:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687170016546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:34:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119687170024935424[0;39m 更新电子书下的文档数据开始
2023-05-27 14:34:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687170024935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:34:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687170024935424[0;39m ==> Parameters: 
2023-05-27 14:34:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687170024935424[0;39m <==    Updates: 8
2023-05-27 14:34:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119687170024935424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-27 14:34:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687190954512384[0;39m 生成今日电子书快照开始
2023-05-27 14:34:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687190954512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:34:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687190954512384[0;39m ==> Parameters: 
2023-05-27 14:34:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687190954512384[0;39m <==    Updates: 0
2023-05-27 14:34:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687190954512384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:34:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687211921838080[0;39m 生成今日电子书快照开始
2023-05-27 14:34:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687211921838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:34:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687211921838080[0;39m ==> Parameters: 
2023-05-27 14:34:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687211921838080[0;39m <==    Updates: 0
2023-05-27 14:34:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687211921838080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-27 14:34:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687232884969472[0;39m 生成今日电子书快照开始
2023-05-27 14:34:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687232884969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:34:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687232884969472[0;39m ==> Parameters: 
2023-05-27 14:34:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687232884969472[0;39m <==    Updates: 0
2023-05-27 14:34:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687232884969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:34:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687253890043904[0;39m 生成今日电子书快照开始
2023-05-27 14:34:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687253890043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:34:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687253890043904[0;39m ==> Parameters: 
2023-05-27 14:34:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687253890043904[0;39m <==    Updates: 0
2023-05-27 14:34:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687253890043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:34:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687274874146816[0;39m 生成今日电子书快照开始
2023-05-27 14:34:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687274874146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:34:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687274874146816[0;39m ==> Parameters: 
2023-05-27 14:34:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687274874146816[0;39m <==    Updates: 0
2023-05-27 14:34:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687274874146816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:34:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119687295799529472[0;39m 生成今日电子书快照开始
2023-05-27 14:34:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687295799529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-27 14:34:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687295799529472[0;39m ==> Parameters: 
2023-05-27 14:34:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119687295799529472[0;39m <==    Updates: 0
2023-05-27 14:34:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119687295799529472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-27 14:34:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119687295807918080[0;39m 更新电子书下的文档数据开始
2023-05-27 14:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687295807918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-27 14:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687295807918080[0;39m ==> Parameters: 
2023-05-27 14:34:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119687295807918080[0;39m <==    Updates: 8
2023-05-27 14:34:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119687295807918080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
