2022-07-27 20:26:07.085 INFO  org.hibernate.validator.internal.util.Version     :21  
                [32m                  [0;39m HV000001: Hibernate Validator 6.2.3.Final
2022-07-27 20:26:07.113 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 48580 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-27 20:26:07.115 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-27 20:26:07.225 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2022-07-27 20:26:07.295 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2022-07-27 20:26:13.139 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-27 20:26:13.141 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-27 20:26:13.176 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2022-07-27 20:26:15.013 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-27 20:26:15.022 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-27 20:26:15.023 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-27 20:26:15.023 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-27 20:26:15.135 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-27 20:26:15.136 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 7840 ms
2022-07-27 20:26:16.794 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-27 20:26:16.816 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-27 20:26:16.855 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-27 20:26:16.871 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 14.235 seconds (JVM running for 22.778)
2022-07-27 20:26:16.874 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-27 20:26:16.874 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-27 20:26:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473680098398208[0;39m 生成今日电子书快照开始
2022-07-27 20:26:20.033 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m207473680098398208[0;39m HikariPool-1 - Starting...
2022-07-27 20:26:20.237 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m207473680098398208[0;39m HikariPool-1 - Start completed.
2022-07-27 20:26:20.243 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473680098398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:26:20.264 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473680098398208[0;39m ==> Parameters: 
2022-07-27 20:26:20.316 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473680098398208[0;39m <==    Updates: 7
2022-07-27 20:26:20.318 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473680098398208[0;39m 生成今日电子书快照结束，耗时：308 毫秒
2022-07-27 20:26:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473701082501120[0;39m 生成今日电子书快照开始
2022-07-27 20:26:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473701082501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:26:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473701082501120[0;39m ==> Parameters: 
2022-07-27 20:26:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473701082501120[0;39m <==    Updates: 0
2022-07-27 20:26:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473701082501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:26:28.027 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-27 20:26:28.028 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-27 20:26:28.029 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 1 ms
2022-07-27 20:26:28.192 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-27 20:26:28.193 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/
2022-07-27 20:26:28.193 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m                  [0;39m 登录校验开始，token：null
2022-07-27 20:26:28.194 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :49  
                [32m                  [0;39m token为空，请求被拦截
2022-07-27 20:26:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473722020466688[0;39m 生成今日电子书快照开始
2022-07-27 20:26:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473722020466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:26:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473722020466688[0;39m ==> Parameters: 
2022-07-27 20:26:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473722020466688[0;39m <==    Updates: 0
2022-07-27 20:26:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473722020466688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:26:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207473743021346816[0;39m 更新电子书下的文档数据开始
2022-07-27 20:26:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473743021346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:26:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473743021346816[0;39m ==> Parameters: 
2022-07-27 20:26:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473743021346816[0;39m <==    Updates: 7
2022-07-27 20:26:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207473743021346816[0;39m 更新电子书下的文档数据结束，耗时：7 毫秒
2022-07-27 20:26:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473743050706944[0;39m 生成今日电子书快照开始
2022-07-27 20:26:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473743050706944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:26:35.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473743050706944[0;39m ==> Parameters: 
2022-07-27 20:26:35.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473743050706944[0;39m <==    Updates: 0
2022-07-27 20:26:35.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473743050706944[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:26:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473763959312384[0;39m 生成今日电子书快照开始
2022-07-27 20:26:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473763959312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:26:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473763959312384[0;39m ==> Parameters: 
2022-07-27 20:26:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473763959312384[0;39m <==    Updates: 0
2022-07-27 20:26:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473763959312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:26:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473784926638080[0;39m 生成今日电子书快照开始
2022-07-27 20:26:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473784926638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:26:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473784926638080[0;39m ==> Parameters: 
2022-07-27 20:26:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473784926638080[0;39m <==    Updates: 0
2022-07-27 20:26:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473784926638080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:26:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473805944295424[0;39m 生成今日电子书快照开始
2022-07-27 20:26:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473805944295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:26:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473805944295424[0;39m ==> Parameters: 
2022-07-27 20:26:50.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473805944295424[0;39m <==    Updates: 0
2022-07-27 20:26:50.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473805944295424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 20:26:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473826878066688[0;39m 生成今日电子书快照开始
2022-07-27 20:26:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473826878066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:26:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473826878066688[0;39m ==> Parameters: 
2022-07-27 20:26:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473826878066688[0;39m <==    Updates: 0
2022-07-27 20:26:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473826878066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:27:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473847853780992[0;39m 生成今日电子书快照开始
2022-07-27 20:27:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473847853780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473847853780992[0;39m ==> Parameters: 
2022-07-27 20:27:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473847853780992[0;39m <==    Updates: 0
2022-07-27 20:27:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473847853780992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:27:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207473868858855424[0;39m 更新电子书下的文档数据开始
2022-07-27 20:27:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473868858855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:27:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473868858855424[0;39m ==> Parameters: 
2022-07-27 20:27:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473868858855424[0;39m <==    Updates: 7
2022-07-27 20:27:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207473868858855424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:27:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473868871438336[0;39m 生成今日电子书快照开始
2022-07-27 20:27:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473868871438336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473868871438336[0;39m ==> Parameters: 
2022-07-27 20:27:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473868871438336[0;39m <==    Updates: 0
2022-07-27 20:27:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473868871438336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:27:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473889813598208[0;39m 生成今日电子书快照开始
2022-07-27 20:27:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473889813598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473889813598208[0;39m ==> Parameters: 
2022-07-27 20:27:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473889813598208[0;39m <==    Updates: 0
2022-07-27 20:27:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473889813598208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:27:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473910764146688[0;39m 生成今日电子书快照开始
2022-07-27 20:27:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473910764146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473910764146688[0;39m ==> Parameters: 
2022-07-27 20:27:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473910764146688[0;39m <==    Updates: 0
2022-07-27 20:27:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473910764146688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:27:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473931735666688[0;39m 生成今日电子书快照开始
2022-07-27 20:27:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473931735666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473931735666688[0;39m ==> Parameters: 
2022-07-27 20:27:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473931735666688[0;39m <==    Updates: 0
2022-07-27 20:27:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473931735666688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:27:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473952694603776[0;39m 生成今日电子书快照开始
2022-07-27 20:27:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473952694603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473952694603776[0;39m ==> Parameters: 
2022-07-27 20:27:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473952694603776[0;39m <==    Updates: 0
2022-07-27 20:27:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473952694603776[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:27:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473973708066816[0;39m 生成今日电子书快照开始
2022-07-27 20:27:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473973708066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473973708066816[0;39m ==> Parameters: 
2022-07-27 20:27:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473973708066816[0;39m <==    Updates: 0
2022-07-27 20:27:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473973708066816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:27:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207473994658615296[0;39m 更新电子书下的文档数据开始
2022-07-27 20:27:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473994658615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:27:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473994658615296[0;39m ==> Parameters: 
2022-07-27 20:27:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207473994658615296[0;39m <==    Updates: 7
2022-07-27 20:27:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207473994658615296[0;39m 更新电子书下的文档数据结束，耗时：8 毫秒
2022-07-27 20:27:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207473994696364032[0;39m 生成今日电子书快照开始
2022-07-27 20:27:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473994696364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473994696364032[0;39m ==> Parameters: 
2022-07-27 20:27:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207473994696364032[0;39m <==    Updates: 0
2022-07-27 20:27:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207473994696364032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:27:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474015642718208[0;39m 生成今日电子书快照开始
2022-07-27 20:27:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474015642718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474015642718208[0;39m ==> Parameters: 
2022-07-27 20:27:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474015642718208[0;39m <==    Updates: 0
2022-07-27 20:27:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474015642718208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:27:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474036601655296[0;39m 生成今日电子书快照开始
2022-07-27 20:27:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474036601655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474036601655296[0;39m ==> Parameters: 
2022-07-27 20:27:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474036601655296[0;39m <==    Updates: 0
2022-07-27 20:27:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474036601655296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:27:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474057560592384[0;39m 生成今日电子书快照开始
2022-07-27 20:27:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474057560592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474057560592384[0;39m ==> Parameters: 
2022-07-27 20:27:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474057560592384[0;39m <==    Updates: 0
2022-07-27 20:27:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474057560592384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:27:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474078578249728[0;39m 生成今日电子书快照开始
2022-07-27 20:27:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474078578249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:27:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474078578249728[0;39m ==> Parameters: 
2022-07-27 20:27:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474078578249728[0;39m <==    Updates: 0
2022-07-27 20:27:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474078578249728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:27:55.426 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：ZXHCyQ1bVr，session id：0，当前连接数：1
2022-07-27 20:27:56.625 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474085326884866[0;39m ------------- 开始 -------------
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474085326884865[0;39m ------------- 开始 -------------
2022-07-27 20:27:56.625 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474085326884864[0;39m ------------- 开始 -------------
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474085326884864[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474085326884866[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474085326884865[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474085326884864[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474085326884866[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474085326884865[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474085326884864[0;39m 远程地址: 127.0.0.1
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474085326884866[0;39m 远程地址: 127.0.0.1
2022-07-27 20:27:56.626 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474085326884865[0;39m 远程地址: 127.0.0.1
2022-07-27 20:27:56.667 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474085326884864[0;39m 请求参数: []
2022-07-27 20:27:56.667 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474085326884866[0;39m 请求参数: []
2022-07-27 20:27:56.667 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474085326884865[0;39m 请求参数: []
2022-07-27 20:27:56.696 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m207474085326884865[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-27 20:27:56.696 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m207474085326884864[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-27 20:27:56.696 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m207474085326884865[0;39m ==> Parameters: 
2022-07-27 20:27:56.696 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m207474085326884864[0;39m ==> Parameters: 
2022-07-27 20:27:56.714 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207474085326884866[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-27 20:27:56.715 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207474085326884866[0;39m ==> Parameters: 
2022-07-27 20:27:56.716 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207474085326884865[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-27 20:27:56.716 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==    Columns: id, parent, name, sort
2022-07-27 20:27:56.716 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m207474085326884864[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-27 20:27:56.716 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-27 20:27:56.717 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m207474085326884864[0;39m <==        Row: 2022-07-26, 219, 43, 219, 43
2022-07-27 20:27:56.717 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207474085326884865[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-27 20:27:56.717 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 101, 100, Vue, 101
2022-07-27 20:27:56.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-27 20:27:56.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 200, 0, Java, 200
2022-07-27 20:27:56.718 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m207474085326884864[0;39m <==        Row: 2022-07-27, 219, 43, 0, 0
2022-07-27 20:27:56.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-27 20:27:56.718 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207474085326884865[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-27 20:27:56.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-27 20:27:56.719 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m207474085326884864[0;39m <==      Total: 2
2022-07-27 20:27:56.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-27 20:27:56.719 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207474085326884865[0;39m <==        Row: 2022-07-14, 47, 13
2022-07-27 20:27:56.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 300, 0, Python, 300
2022-07-27 20:27:56.719 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207474085326884865[0;39m <==        Row: 2022-07-16, 153, 37
2022-07-27 20:27:56.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-27 20:27:56.720 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207474085326884865[0;39m <==        Row: 2022-07-17, 2, 0
2022-07-27 20:27:56.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-27 20:27:56.720 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207474085326884865[0;39m <==        Row: 2022-07-20, 166, 38
2022-07-27 20:27:56.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-27 20:27:56.721 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207474085326884865[0;39m <==        Row: 2022-07-26, 219, 43
2022-07-27 20:27:56.721 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m207474085326884865[0;39m <==      Total: 7
2022-07-27 20:27:56.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-27 20:27:56.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 500, 0, 其它, 500
2022-07-27 20:27:56.722 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-27 20:27:56.722 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-27 20:27:56.723 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474085326884866[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-27 20:27:56.724 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207474085326884866[0;39m <==      Total: 16
2022-07-27 20:27:56.749 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474085326884866[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-27 20:27:56.749 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474085326884866[0;39m ------------- 结束 耗时：125 ms -------------
2022-07-27 20:27:56.751 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474085326884865[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6},{"date":1657728000000,"viewCount":0,"viewIncrease":47,"voteCount":0,"voteIncrease":13},{"date":1657900800000,"viewCount":0,"viewIncrease":153,"voteCount":0,"voteIncrease":37},{"date":1657987200000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":0},{"date":1658246400000,"viewCount":0,"viewIncrease":166,"voteCount":0,"voteIncrease":38},{"date":1658764800000,"viewCount":0,"viewIncrease":219,"voteCount":0,"voteIncrease":43}],"success":true}
2022-07-27 20:27:56.751 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474085326884864[0;39m 返回结果: {"content":[{"date":1658764800000,"viewCount":219,"viewIncrease":219,"voteCount":43,"voteIncrease":43},{"date":1658851200000,"viewCount":219,"viewIncrease":0,"voteCount":43,"voteIncrease":0}],"success":true}
2022-07-27 20:27:56.751 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474085326884865[0;39m ------------- 结束 耗时：127 ms -------------
2022-07-27 20:27:56.751 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474085326884864[0;39m ------------- 结束 耗时：127 ms -------------
2022-07-27 20:28:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474099528798208[0;39m 生成今日电子书快照开始
2022-07-27 20:28:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474099528798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474099528798208[0;39m ==> Parameters: 
2022-07-27 20:28:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474099528798208[0;39m <==    Updates: 0
2022-07-27 20:28:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474099528798208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:28:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474120479346688[0;39m 生成今日电子书快照开始
2022-07-27 20:28:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474120479346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474120479346688[0;39m ==> Parameters: 
2022-07-27 20:28:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474120479346688[0;39m <==    Updates: 0
2022-07-27 20:28:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474120479346688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 20:28:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207474120508706816[0;39m 更新电子书下的文档数据开始
2022-07-27 20:28:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474120508706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:28:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474120508706816[0;39m ==> Parameters: 
2022-07-27 20:28:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474120508706816[0;39m <==    Updates: 7
2022-07-27 20:28:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207474120508706816[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-27 20:28:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474141488615424[0;39m 生成今日电子书快照开始
2022-07-27 20:28:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474141488615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474141488615424[0;39m ==> Parameters: 
2022-07-27 20:28:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474141488615424[0;39m <==    Updates: 0
2022-07-27 20:28:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474141488615424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:28:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474162443358208[0;39m 生成今日电子书快照开始
2022-07-27 20:28:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474162443358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474162443358208[0;39m ==> Parameters: 
2022-07-27 20:28:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474162443358208[0;39m <==    Updates: 0
2022-07-27 20:28:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474162443358208[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:28:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474183406489600[0;39m 生成今日电子书快照开始
2022-07-27 20:28:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474183406489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474183406489600[0;39m ==> Parameters: 
2022-07-27 20:28:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474183406489600[0;39m <==    Updates: 0
2022-07-27 20:28:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474183406489600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:28:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474204361232384[0;39m 生成今日电子书快照开始
2022-07-27 20:28:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474204361232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474204361232384[0;39m ==> Parameters: 
2022-07-27 20:28:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474204361232384[0;39m <==    Updates: 0
2022-07-27 20:28:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474204361232384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:28:28.740 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474220031152128[0;39m ------------- 开始 -------------
2022-07-27 20:28:28.740 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474220031152128[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-27 20:28:28.740 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474220031152128[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-27 20:28:28.741 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474220031152128[0;39m 远程地址: 127.0.0.1
2022-07-27 20:28:28.742 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474220031152128[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-27 20:28:28.994 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474220031152128[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-27 20:28:28.995 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474220031152128[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-27 20:28:28.996 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m207474220031152128[0;39m <==    Columns: count(0)
2022-07-27 20:28:28.996 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m207474220031152128[0;39m <==        Row: 1
2022-07-27 20:28:28.997 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474220031152128[0;39m <==      Total: 1
2022-07-27 20:28:28.998 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474220031152128[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-27 20:28:28.999 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474220031152128[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-27 20:28:29.000 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474220031152128[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-27 20:28:29.000 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474220031152128[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 12, 102, 18
2022-07-27 20:28:29.000 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474220031152128[0;39m <==      Total: 1
2022-07-27 20:28:29.001 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m207474220031152128[0;39m 总行数：1
2022-07-27 20:28:29.002 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m207474220031152128[0;39m 总页数：1
2022-07-27 20:28:29.009 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474220031152128[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":12,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":102,"voteCount":18}],"total":1},"success":true}
2022-07-27 20:28:29.009 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474220031152128[0;39m ------------- 结束 耗时：269 ms -------------
2022-07-27 20:28:29.979 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474225227894784[0;39m ------------- 开始 -------------
2022-07-27 20:28:29.980 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474225227894784[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-27 20:28:29.980 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474225227894784[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-27 20:28:29.980 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474225227894784[0;39m 远程地址: 127.0.0.1
2022-07-27 20:28:29.981 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474225227894784[0;39m 请求参数: [202714600712572928]
2022-07-27 20:28:29.986 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207474225227894784[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-27 20:28:29.987 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207474225227894784[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-27 20:28:29.987 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 20:28:29.988 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 23, 2
2022-07-27 20:28:29.988 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 24, 3
2022-07-27 20:28:29.988 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 23, 2
2022-07-27 20:28:29.989 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 12, 2
2022-07-27 20:28:29.989 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 4, 2
2022-07-27 20:28:29.989 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-27 20:28:29.989 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-27 20:28:29.990 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 3, 1
2022-07-27 20:28:29.990 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-27 20:28:29.990 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-27 20:28:29.991 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-27 20:28:29.991 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474225227894784[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-27 20:28:29.991 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207474225227894784[0;39m <==      Total: 12
2022-07-27 20:28:29.998 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474225227894784[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":23,"voteCount":2},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":24,"voteCount":3},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":23,"voteCount":2},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":12,"voteCount":2},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":4,"voteCount":2},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-27 20:28:29.998 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474225227894784[0;39m ------------- 结束 耗时：19 ms -------------
2022-07-27 20:28:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474225324363776[0;39m 生成今日电子书快照开始
2022-07-27 20:28:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474225324363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474225324363776[0;39m ==> Parameters: 
2022-07-27 20:28:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474225324363776[0;39m <==    Updates: 0
2022-07-27 20:28:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474225324363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:28:30.018 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474225391472640[0;39m ------------- 开始 -------------
2022-07-27 20:28:30.019 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474225391472640[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-27 20:28:30.019 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474225391472640[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 20:28:30.019 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474225391472640[0;39m 远程地址: 127.0.0.1
2022-07-27 20:28:30.019 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474225391472640[0;39m 请求参数: [202714909656616960]
2022-07-27 20:28:30.020 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474225391472640[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 20:28:30.020 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474225391472640[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-27 20:28:30.025 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474225391472640[0;39m <==    Columns: id, content
2022-07-27 20:28:30.025 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474225391472640[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-27 20:28:30.026 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474225391472640[0;39m <==      Total: 1
2022-07-27 20:28:30.027 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474225391472640[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 20:28:30.027 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474225391472640[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-27 20:28:30.055 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474225391472640[0;39m <==    Updates: 1
2022-07-27 20:28:30.055 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474225391472640[0;39m 返回结果: {"content":"<blockquote><h2><b>前端：</b>Vue CLI(生成一个前端框架)、Vue3、Ant Design Vue(UI组件)、router、vuex、axios</h2><p><br></p><h2><b>后端：</b>SpringBoot核心知识体系AOP、拦截器、过滤器、异步化、定时任务、websocket、多环境、缓存、消息队列...</h2></blockquote>","success":true}
2022-07-27 20:28:30.055 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474225391472640[0;39m ------------- 结束 耗时：37 ms -------------
2022-07-27 20:28:31.603 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474232039444480[0;39m ------------- 开始 -------------
2022-07-27 20:28:31.604 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474232039444480[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-27 20:28:31.604 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474232039444480[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 20:28:31.604 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474232039444480[0;39m 远程地址: 127.0.0.1
2022-07-27 20:28:31.604 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474232039444480[0;39m 请求参数: [202715069841281024]
2022-07-27 20:28:31.605 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474232039444480[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 20:28:31.605 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474232039444480[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-27 20:28:31.606 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474232039444480[0;39m <==    Columns: id, content
2022-07-27 20:28:31.606 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474232039444480[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-27 20:28:31.606 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474232039444480[0;39m <==      Total: 1
2022-07-27 20:28:31.607 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474232039444480[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 20:28:31.607 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474232039444480[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-27 20:28:31.625 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474232039444480[0;39m <==    Updates: 1
2022-07-27 20:28:31.626 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474232039444480[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id=\"lbj1m\"></h2><h2 id=\"y1h2i\"></h2><h3 id=\"g91hj\"></h3><h1 id=\"vfo4x\"></h1><h4 id=\"t6wlk\"><h2 id=\"y3p29\"><xmp>2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp> 正常情况：user？id=1</xmp><xmp> Restful：/user/1</xmp></h2></h4></blockquote><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-27 20:28:31.626 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474232039444480[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-27 20:28:32.090 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474234082070528[0;39m ------------- 开始 -------------
2022-07-27 20:28:32.090 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474234082070528[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715172312322048 GET
2022-07-27 20:28:32.090 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474234082070528[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 20:28:32.090 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474234082070528[0;39m 远程地址: 127.0.0.1
2022-07-27 20:28:32.091 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474234082070528[0;39m 请求参数: [202715172312322048]
2022-07-27 20:28:32.091 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474234082070528[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 20:28:32.091 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474234082070528[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-27 20:28:32.092 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474234082070528[0;39m <==    Columns: id, content
2022-07-27 20:28:32.092 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474234082070528[0;39m <==        Row: 202715172312322048, <<BLOB>>
2022-07-27 20:28:32.093 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474234082070528[0;39m <==      Total: 1
2022-07-27 20:28:32.093 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474234082070528[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 20:28:32.094 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474234082070528[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-27 20:28:32.111 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474234082070528[0;39m <==    Updates: 1
2022-07-27 20:28:32.111 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474234082070528[0;39m 返回结果: {"content":"<blockquote><ul><li><font size=\"4\" face=\"楷体\">数据库准备</font></li><li><font size=\"4\" face=\"楷体\">IDEA关联数据库</font></li><li><font size=\"4\" face=\"楷体\">集成Mybatis（持久层（Mapper/Dao）框架，访问数据库）</font></li><li><font size=\"4\" face=\"楷体\">Mybatis Generator的使用</font></li></ul></blockquote><p>&nbsp; &nbsp; &nbsp; &nbsp; <font size=\"4\" face=\"楷体\" style=\"background-color: rgb(249, 150, 59);\">1.&nbsp;</font><font size=\"3\"><b style=\"background-color: rgb(249, 150, 59);\">持久层框架：Mybatis，Hiberate有什么区别？</b></font></p><p>&nbsp; &nbsp;&nbsp;&nbsp;<span style=\"background-color: rgb(238, 236, 224);\">&nbsp;&nbsp;&nbsp;<font size=\"3\" style=\"\">前者是半自动（需自己写sql）的，后者是全自动的</font></span></p><p>&nbsp; &nbsp; &nbsp;&nbsp;<font face=\"宋体\">&nbsp;<b style=\"\"><font size=\"3\" style=\"background-color: rgb(249, 150, 59);\">&nbsp;2. 如何集成Mybatis？</font></b></font></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=\"3\" style=\"background-color: rgb(238, 236, 224);\">先在pom文件集成Mybatis和Mysql——&gt;配置数据源（applicaiton.yml）&nbsp;</font><span style=\"background-color: rgb(238, 236, 224);\"><font size=\"3\" style=\"\"><br></font></span></p><hr><p style=\"line-height:1.6;\">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i><font color=\"#c24f4a\">&nbsp;&nbsp;&nbsp;<u style=\"background-color: rgb(238, 236, 224);\"><font size=\"4\">记得在application.java 加入mapperScan扫描注解</font></u></font></i></p><pre type=\"Java\"><code><xmp>　　　　# 配置mybatis所有Mapper.xml所在的路径，使其被识别</xmp><xmp><br></xmp><xmp>　　　　mybatis.mapper-locations=classpath:/mapper/**/*.xml</xmp></code></pre><p>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></p><hr><p>&nbsp; &nbsp; &nbsp; &nbsp; <b><font size=\"3\" face=\"宋体\" style=\"background-color: rgb(249, 150, 59);\">3. 集成Mybatis官方代码生成器？</font></b><br></p><p style=\"text-align:center;\">&nbsp;<span style=\"background-color: rgb(238, 236, 224);\"><b> &nbsp;先在pom文件集成插件，然后在相对路径下新建：</b></span><b style=\"background-color: rgb(238, 236, 224);\">generator-config.xml</b><br></p><pre type=\"Java\"><code><xmp>  <!-- mybatis generator 自动生成代码插件 -->\n            <plugin>\n                <groupId>org.mybatis.generator</groupId>\n                <artifactId>mybatis-generator-maven-plugin</artifactId>\n                <version>1.4.0</version>\n                <configuration>\n                    <configurationFile>src/main/resources/generator/generator-config.xml</configurationFile>\n                    <overwrite>true</overwrite>\n                    <verbose>true</verbose>\n                </configuration>\n                <dependencies>\n                    <dependency>\n                        <groupId>mysql</groupId>\n                        <artifactId>mysql-connector-java</artifactId>\n                        <version>8.0.22</version>\n                    </dependency>\n                </dependencies>\n            </plugin></xmp></code></pre><p style=\"text-align:center;\"><b style=\"background-color: rgb(238, 236, 224);\">增加启动命令，点击Edit Configuration——add maven——Command line：mybatis-generator:generate -e</b></p><p style=\"text-align:center;\"><img src=\"https://i.postimg.cc/Y08Kc8Tz/1658809334271.png\" style=\"max-width:100%;\" width=\"30%\"></p><hr><p style=\"text-align:left;\"><b><font size=\"3\" style=\"background-color: rgb(249, 150, 59);\">4. 项目的后端会有很多的接口，为了让前端能够统一处理逻辑（登录校验、权限校验），需要统一后端的返回值。（CommonResp：通用的返回类）</font></b></p><p style=\"text-align:left;\">&nbsp; &nbsp; &nbsp; &nbsp;<span style=\"background-color: rgb(238, 236, 224);\"><font size=\"3\"> req类：因为当获取前端的值较多或者是多个值时，req中的所有值中会自动映射看前端需要那个值。</font><b><font size=\"3\" style=\"\"><br></font></b></span></p><p style=\"text-align:left;\"><span style=\"background-color: rgb(238, 236, 224);\">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font size=\"3\"><span style=\"background-color: rgb(238, 236, 224);\">resp类：返回值，作用和req一样。</span><br></font></p><p style=\"text-align:left;\">&nbsp; &nbsp;<span style=\"background-color: rgb(194, 79, 74);\"> &nbsp;</span><font size=\"3\"><strike style=\"background-color: rgb(194, 79, 74);\"> &nbsp; 注：controller不要出现实体类</strike><span style=\"background-color: rgb(238, 236, 224);\"><br></span></font></p><p style=\"text-align:left;\"><font size=\"3\"><strike style=\"background-color: rgb(194, 79, 74);\"><br></strike></font></p><p style=\"text-align:left;\"><b style=\"background-color: rgb(249, 150, 59);\">4. 制作CopyUtil封装BeanUtils</b><br></p><p style=\"text-align:left;\">&nbsp; &nbsp; <font size=\"3\" style=\"background-color: rgb(238, 236, 224);\">里面包含单体复制和实体复制，因为controller不能出现实体类的值，避免外界人士看到，所以把实体类的值赋值到resp中，就用到了BeanUtil实现赋值。本次编写了一个CopyUtils里面封装了单体复制和列表复制，可以使用更少的代码实现一样的功能</font><b><br></b></p><p style=\"text-align:left;\"><font size=\"3\" style=\"background-color: rgb(238, 236, 224);\"><br></font></p><p style=\"text-align:left;\"><b style=\"background-color: rgb(249, 150, 59);\">5. 泛型和object的区别？</b><font size=\"3\" style=\"background-color: rgb(238, 236, 224);\"><br></font></p><p style=\"text-align:left;\">&nbsp; &nbsp; &nbsp;<span style=\"background-color: rgb(238, 236, 224);\">1. 使用泛型不需要做强制类型转换<b style=\"\"><br></b></span></p><p style=\"text-align:left;\"><span style=\"background-color: rgb(238, 236, 224);\">&nbsp; &nbsp; 2. 编译时更安全。<strong>如果使用Object类的话，你没法保证返回的类型一定是Foo，也许是其它类型。这时你就会在运行时得到一个类型转换异常（ClassCastException）</strong></span><br></p><p style=\"text-align:left;\"><span style=\"background-color: rgb(238, 236, 224);\"><strong><br></strong></span></p><p>&nbsp; &nbsp;&nbsp;<strong>泛型引用</strong></p><pre><code>　　　　String result = doSomeThing(\"参数是String\");</code></pre><p>&nbsp; &nbsp;&nbsp;<strong>Object引用</strong></p><pre><code>　　　　String result = (String)doSomeThing(\"参数是String\");</code></pre>","success":true}
2022-07-27 20:28:32.112 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474234082070528[0;39m ------------- 结束 耗时：22 ms -------------
2022-07-27 20:28:33.269 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474239027154944[0;39m ------------- 开始 -------------
2022-07-27 20:28:33.269 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474239027154944[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715279778779136 GET
2022-07-27 20:28:33.269 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474239027154944[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 20:28:33.270 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474239027154944[0;39m 远程地址: 127.0.0.1
2022-07-27 20:28:33.270 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474239027154944[0;39m 请求参数: [202715279778779136]
2022-07-27 20:28:33.270 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474239027154944[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 20:28:33.271 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474239027154944[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-27 20:28:33.272 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474239027154944[0;39m <==    Columns: id, content
2022-07-27 20:28:33.272 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474239027154944[0;39m <==        Row: 202715279778779136, <<BLOB>>
2022-07-27 20:28:33.272 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474239027154944[0;39m <==      Total: 1
2022-07-27 20:28:33.273 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474239027154944[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 20:28:33.273 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474239027154944[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-27 20:28:33.287 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474239027154944[0;39m <==    Updates: 1
2022-07-27 20:28:33.287 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474239027154944[0;39m 返回结果: {"content":"<blockquote><ul><li><p><font size=\"4\" style=\"font-weight: bold;\">介绍一下Vue和Vue CLI</font><br><font size=\"3\" style=\"\" face=\"宋体\">Vue CLI（需要安装Node.js）是一个基于Vue.js进行快速开发的完整系统，即</font><font size=\"3\" face=\"宋体\">Vue CLI=Vue.js+一堆组件</font><br></p></li><li><p><b style=\"font-size: large;\">安装Vue CLI，并创建Vue CLI项目</b><br><font size=\"3\" face=\"Times New Roman\">1. npm install -g @vue/cli@4.5.9<br>2. vue create web<br>3. 新建运行窗口：右击web项目中的package.json 找到 “show npm scripts”</font></p></li><li><font style=\"\"><b style=\"font-size: 1em;\">集成Ant Design Vue（前端框架中的Element UI不支持vue3）</b><br><br><font size=\"3\" face=\"Times New Roman\">1. 在IDEA的cmd中首先<span style=\"background-color: rgb(139, 170, 74);\">cd 前端项目名——npm install ant-design-vue --save<br></span></font></font>2. 在main.ts（集成第三方库）中导入</li></ul></blockquote><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p>","success":true}
2022-07-27 20:28:33.287 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474239027154944[0;39m ------------- 结束 耗时：18 ms -------------
2022-07-27 20:28:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207474246350409728[0;39m 更新电子书下的文档数据开始
2022-07-27 20:28:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474246350409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:28:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474246350409728[0;39m ==> Parameters: 
2022-07-27 20:28:35.036 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474246350409728[0;39m <==    Updates: 7
2022-07-27 20:28:35.037 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207474246350409728[0;39m 更新电子书下的文档数据结束，耗时：22 毫秒
2022-07-27 20:28:35.037 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474246442684416[0;39m 生成今日电子书快照开始
2022-07-27 20:28:35.037 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474246442684416[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:35.037 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474246442684416[0;39m ==> Parameters: 
2022-07-27 20:28:35.067 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474246442684416[0;39m <==    Updates: 0
2022-07-27 20:28:35.067 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474246442684416[0;39m 生成今日电子书快照结束，耗时：30 毫秒
2022-07-27 20:28:35.434 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474248107823104[0;39m ------------- 开始 -------------
2022-07-27 20:28:35.434 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474248107823104[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715322204164096 GET
2022-07-27 20:28:35.434 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474248107823104[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 20:28:35.434 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474248107823104[0;39m 远程地址: 127.0.0.1
2022-07-27 20:28:35.434 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474248107823104[0;39m 请求参数: [202715322204164096]
2022-07-27 20:28:35.435 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474248107823104[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 20:28:35.435 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474248107823104[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 20:28:35.436 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474248107823104[0;39m <==    Columns: id, content
2022-07-27 20:28:35.436 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207474248107823104[0;39m <==        Row: 202715322204164096, <<BLOB>>
2022-07-27 20:28:35.436 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207474248107823104[0;39m <==      Total: 1
2022-07-27 20:28:35.436 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474248107823104[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 20:28:35.437 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474248107823104[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 20:28:35.445 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207474248107823104[0;39m <==    Updates: 1
2022-07-27 20:28:35.445 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474248107823104[0;39m 返回结果: {"content":"","success":true}
2022-07-27 20:28:35.445 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474248107823104[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-27 20:28:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474267288375296[0;39m 生成今日电子书快照开始
2022-07-27 20:28:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474267288375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474267288375296[0;39m ==> Parameters: 
2022-07-27 20:28:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474267288375296[0;39m <==    Updates: 0
2022-07-27 20:28:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474267288375296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:28:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474288272478208[0;39m 生成今日电子书快照开始
2022-07-27 20:28:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474288272478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474288272478208[0;39m ==> Parameters: 
2022-07-27 20:28:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474288272478208[0;39m <==    Updates: 0
2022-07-27 20:28:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474288272478208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:28:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474309256581120[0;39m 生成今日电子书快照开始
2022-07-27 20:28:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474309256581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474309256581120[0;39m ==> Parameters: 
2022-07-27 20:28:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474309256581120[0;39m <==    Updates: 0
2022-07-27 20:28:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474309256581120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:28:55.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474330173575168[0;39m 生成今日电子书快照开始
2022-07-27 20:28:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474330173575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:28:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474330173575168[0;39m ==> Parameters: 
2022-07-27 20:28:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474330173575168[0;39m <==    Updates: 0
2022-07-27 20:28:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474330173575168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:29:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474351187038208[0;39m 生成今日电子书快照开始
2022-07-27 20:29:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474351187038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474351187038208[0;39m ==> Parameters: 
2022-07-27 20:29:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474351187038208[0;39m <==    Updates: 0
2022-07-27 20:29:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474351187038208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:29:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207474372137586688[0;39m 更新电子书下的文档数据开始
2022-07-27 20:29:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474372137586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:29:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474372137586688[0;39m ==> Parameters: 
2022-07-27 20:29:05.104 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474372137586688[0;39m <==    Updates: 7
2022-07-27 20:29:05.104 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207474372137586688[0;39m 更新电子书下的文档数据结束，耗时：99 毫秒
2022-07-27 20:29:05.105 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474372557017088[0;39m 生成今日电子书快照开始
2022-07-27 20:29:05.105 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474372557017088[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:05.105 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474372557017088[0;39m ==> Parameters: 
2022-07-27 20:29:05.136 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474372557017088[0;39m <==    Updates: 0
2022-07-27 20:29:05.137 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474372557017088[0;39m 生成今日电子书快照结束，耗时：32 毫秒
2022-07-27 20:29:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474393142661120[0;39m 生成今日电子书快照开始
2022-07-27 20:29:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474393142661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474393142661120[0;39m ==> Parameters: 
2022-07-27 20:29:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474393142661120[0;39m <==    Updates: 0
2022-07-27 20:29:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474393142661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:29:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474414109986816[0;39m 生成今日电子书快照开始
2022-07-27 20:29:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474414109986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474414109986816[0;39m ==> Parameters: 
2022-07-27 20:29:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474414109986816[0;39m <==    Updates: 0
2022-07-27 20:29:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474414109986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:29:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474435094089728[0;39m 生成今日电子书快照开始
2022-07-27 20:29:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474435094089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474435094089728[0;39m ==> Parameters: 
2022-07-27 20:29:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474435094089728[0;39m <==    Updates: 0
2022-07-27 20:29:20.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474435094089728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:29:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474456032055296[0;39m 生成今日电子书快照开始
2022-07-27 20:29:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474456032055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474456032055296[0;39m ==> Parameters: 
2022-07-27 20:29:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474456032055296[0;39m <==    Updates: 0
2022-07-27 20:29:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474456032055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:29:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474476995186688[0;39m 生成今日电子书快照开始
2022-07-27 20:29:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474476995186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474476995186688[0;39m ==> Parameters: 
2022-07-27 20:29:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474476995186688[0;39m <==    Updates: 0
2022-07-27 20:29:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474476995186688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:29:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207474497975095296[0;39m 更新电子书下的文档数据开始
2022-07-27 20:29:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474497975095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:29:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474497975095296[0;39m ==> Parameters: 
2022-07-27 20:29:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474497975095296[0;39m <==    Updates: 7
2022-07-27 20:29:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207474497975095296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:29:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474497983483904[0;39m 生成今日电子书快照开始
2022-07-27 20:29:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474497983483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474497983483904[0;39m ==> Parameters: 
2022-07-27 20:29:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474497983483904[0;39m <==    Updates: 0
2022-07-27 20:29:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474497983483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:29:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474518946615296[0;39m 生成今日电子书快照开始
2022-07-27 20:29:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474518946615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474518946615296[0;39m ==> Parameters: 
2022-07-27 20:29:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474518946615296[0;39m <==    Updates: 0
2022-07-27 20:29:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474518946615296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:29:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474539905552384[0;39m 生成今日电子书快照开始
2022-07-27 20:29:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474539905552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474539905552384[0;39m ==> Parameters: 
2022-07-27 20:29:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474539905552384[0;39m <==    Updates: 0
2022-07-27 20:29:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474539905552384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:29:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474560910626816[0;39m 生成今日电子书快照开始
2022-07-27 20:29:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474560910626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474560910626816[0;39m ==> Parameters: 
2022-07-27 20:29:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474560910626816[0;39m <==    Updates: 0
2022-07-27 20:29:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474560910626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:29:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474581890535424[0;39m 生成今日电子书快照开始
2022-07-27 20:29:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474581890535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:29:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474581890535424[0;39m ==> Parameters: 
2022-07-27 20:29:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474581890535424[0;39m <==    Updates: 0
2022-07-27 20:29:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474581890535424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:30:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474602845278208[0;39m 生成今日电子书快照开始
2022-07-27 20:30:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474602845278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474602845278208[0;39m ==> Parameters: 
2022-07-27 20:30:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474602845278208[0;39m <==    Updates: 0
2022-07-27 20:30:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474602845278208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:30:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207474623800020992[0;39m 更新电子书下的文档数据开始
2022-07-27 20:30:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474623800020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:30:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474623800020992[0;39m ==> Parameters: 
2022-07-27 20:30:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474623800020992[0;39m <==    Updates: 7
2022-07-27 20:30:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207474623800020992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:30:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474623804215296[0;39m 生成今日电子书快照开始
2022-07-27 20:30:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474623804215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474623804215296[0;39m ==> Parameters: 
2022-07-27 20:30:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474623804215296[0;39m <==    Updates: 0
2022-07-27 20:30:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474623804215296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:30:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474644796706816[0;39m 生成今日电子书快照开始
2022-07-27 20:30:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474644796706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474644796706816[0;39m ==> Parameters: 
2022-07-27 20:30:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474644796706816[0;39m <==    Updates: 0
2022-07-27 20:30:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474644796706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:30:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474665764032512[0;39m 生成今日电子书快照开始
2022-07-27 20:30:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474665764032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474665764032512[0;39m ==> Parameters: 
2022-07-27 20:30:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474665764032512[0;39m <==    Updates: 0
2022-07-27 20:30:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474665764032512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:30:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474686706192384[0;39m 生成今日电子书快照开始
2022-07-27 20:30:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474686706192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474686706192384[0;39m ==> Parameters: 
2022-07-27 20:30:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474686706192384[0;39m <==    Updates: 0
2022-07-27 20:30:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474686706192384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:30:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474707681906688[0;39m 生成今日电子书快照开始
2022-07-27 20:30:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474707681906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474707681906688[0;39m ==> Parameters: 
2022-07-27 20:30:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474707681906688[0;39m <==    Updates: 0
2022-07-27 20:30:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474707681906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:30:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474728670203904[0;39m 生成今日电子书快照开始
2022-07-27 20:30:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474728670203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474728670203904[0;39m ==> Parameters: 
2022-07-27 20:30:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474728670203904[0;39m <==    Updates: 0
2022-07-27 20:30:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474728670203904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:30:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474749624946688[0;39m 生成今日电子书快照开始
2022-07-27 20:30:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474749624946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474749624946688[0;39m ==> Parameters: 
2022-07-27 20:30:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474749624946688[0;39m <==    Updates: 0
2022-07-27 20:30:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474749624946688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:30:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207474749637529600[0;39m 更新电子书下的文档数据开始
2022-07-27 20:30:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474749637529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:30:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474749637529600[0;39m ==> Parameters: 
2022-07-27 20:30:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474749637529600[0;39m <==    Updates: 7
2022-07-27 20:30:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207474749637529600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:30:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474770588078080[0;39m 生成今日电子书快照开始
2022-07-27 20:30:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474770588078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474770588078080[0;39m ==> Parameters: 
2022-07-27 20:30:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474770588078080[0;39m <==    Updates: 0
2022-07-27 20:30:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474770588078080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:30:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474791614124032[0;39m 生成今日电子书快照开始
2022-07-27 20:30:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474791614124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474791614124032[0;39m ==> Parameters: 
2022-07-27 20:30:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474791614124032[0;39m <==    Updates: 0
2022-07-27 20:30:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474791614124032[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 20:30:46.683 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474798606028800[0;39m ------------- 开始 -------------
2022-07-27 20:30:46.684 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474798606028800[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/login POST
2022-07-27 20:30:46.684 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474798606028800[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.login
2022-07-27 20:30:46.684 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474798606028800[0;39m 远程地址: 127.0.0.1
2022-07-27 20:30:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474798606028800[0;39m 请求参数: [{"loginName":"test"}]
2022-07-27 20:30:46.691 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m207474798606028800[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki WHERE ( login_name = ? )
2022-07-27 20:30:46.691 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m207474798606028800[0;39m ==> Parameters: test(String)
2022-07-27 20:30:46.696 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m207474798606028800[0;39m <==    Columns: id, login_name, name, password
2022-07-27 20:30:46.697 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m207474798606028800[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-27 20:30:46.697 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m207474798606028800[0;39m <==      Total: 1
2022-07-27 20:30:46.703 INFO  com.zs.wikibb.controller.UserwikiController       :83  
                [32m207474798606028800[0;39m 生成单点登录token，并放入redis中
2022-07-27 20:30:48.060 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474798606028800[0;39m 返回结果: {"content":{"id":1,"loginName":"test","name":"测试","token":"207474798689914880"},"success":true}
2022-07-27 20:30:48.060 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474798606028800[0;39m ------------- 结束 耗时：1377 ms -------------
2022-07-27 20:30:49.122 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474808835936256[0;39m ------------- 开始 -------------
2022-07-27 20:30:49.123 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474808835936256[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-27 20:30:49.123 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474808835936256[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-27 20:30:49.123 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474808835936256[0;39m 远程地址: 127.0.0.1
2022-07-27 20:30:49.124 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474808835936256[0;39m 请求参数: []
2022-07-27 20:30:49.124 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207474808835936256[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-27 20:30:49.125 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207474808835936256[0;39m ==> Parameters: 
2022-07-27 20:30:49.126 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==    Columns: id, parent, name, sort
2022-07-27 20:30:49.126 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-27 20:30:49.126 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 101, 100, Vue, 101
2022-07-27 20:30:49.127 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-27 20:30:49.127 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 200, 0, Java, 200
2022-07-27 20:30:49.127 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-27 20:30:49.128 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-27 20:30:49.128 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-27 20:30:49.129 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 300, 0, Python, 300
2022-07-27 20:30:49.129 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-27 20:30:49.130 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-27 20:30:49.130 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-27 20:30:49.130 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-27 20:30:49.130 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 500, 0, 其它, 500
2022-07-27 20:30:49.131 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-27 20:30:49.131 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-27 20:30:49.131 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207474808835936256[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-27 20:30:49.131 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207474808835936256[0;39m <==      Total: 16
2022-07-27 20:30:49.133 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474808835936256[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-27 20:30:49.133 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474808835936256[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-27 20:30:49.146 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474808936599552[0;39m ------------- 开始 -------------
2022-07-27 20:30:49.146 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474808936599552[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-27 20:30:49.146 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474808936599552[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-27 20:30:49.146 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474808936599552[0;39m 远程地址: 127.0.0.1
2022-07-27 20:30:49.146 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474808936599552[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-27 20:30:49.148 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474808936599552[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-27 20:30:49.148 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474808936599552[0;39m ==> Parameters: 
2022-07-27 20:30:49.149 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m207474808936599552[0;39m <==    Columns: count(0)
2022-07-27 20:30:49.150 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m207474808936599552[0;39m <==        Row: 7
2022-07-27 20:30:49.150 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474808936599552[0;39m <==      Total: 1
2022-07-27 20:30:49.151 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474808936599552[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-27 20:30:49.151 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474808936599552[0;39m ==> Parameters: 4(Integer)
2022-07-27 20:30:49.153 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474808936599552[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-27 20:30:49.153 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474808936599552[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 69, 13
2022-07-27 20:30:49.153 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474808936599552[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 38, 10
2022-07-27 20:30:49.154 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474808936599552[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-27 20:30:49.154 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474808936599552[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 0
2022-07-27 20:30:49.154 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474808936599552[0;39m <==      Total: 4
2022-07-27 20:30:49.154 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m207474808936599552[0;39m 总行数：7
2022-07-27 20:30:49.154 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m207474808936599552[0;39m 总页数：2
2022-07-27 20:30:49.155 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474808936599552[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":69,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":38,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":1,"voteCount":0}],"total":7},"success":true}
2022-07-27 20:30:49.155 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474808936599552[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-27 20:30:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474812573061120[0;39m 生成今日电子书快照开始
2022-07-27 20:30:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474812573061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474812573061120[0;39m ==> Parameters: 
2022-07-27 20:30:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474812573061120[0;39m <==    Updates: 0
2022-07-27 20:30:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474812573061120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:30:50.769 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474815743954944[0;39m ------------- 开始 -------------
2022-07-27 20:30:50.769 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474815743954944[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-27 20:30:50.769 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474815743954944[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-27 20:30:50.769 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474815743954944[0;39m 远程地址: 127.0.0.1
2022-07-27 20:30:50.769 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474815743954944[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-27 20:30:50.771 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474815743954944[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-27 20:30:50.771 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474815743954944[0;39m ==> Parameters: 
2022-07-27 20:30:50.773 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m207474815743954944[0;39m <==    Columns: count(0)
2022-07-27 20:30:50.773 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m207474815743954944[0;39m <==        Row: 7
2022-07-27 20:30:50.773 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207474815743954944[0;39m <==      Total: 1
2022-07-27 20:30:50.774 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474815743954944[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-27 20:30:50.774 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474815743954944[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-27 20:30:50.776 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474815743954944[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-27 20:30:50.776 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474815743954944[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-27 20:30:50.777 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474815743954944[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 8, 1
2022-07-27 20:30:50.777 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207474815743954944[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 12, 107, 18
2022-07-27 20:30:50.778 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207474815743954944[0;39m <==      Total: 3
2022-07-27 20:30:50.778 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m207474815743954944[0;39m 总行数：7
2022-07-27 20:30:50.778 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m207474815743954944[0;39m 总页数：2
2022-07-27 20:30:50.779 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474815743954944[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":8,"voteCount":1},{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":12,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":107,"voteCount":18}],"total":7},"success":true}
2022-07-27 20:30:50.780 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474815743954944[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-27 20:30:52.113 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207474821381099520[0;39m ------------- 开始 -------------
2022-07-27 20:30:52.113 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207474821381099520[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-27 20:30:52.113 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207474821381099520[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-27 20:30:52.113 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207474821381099520[0;39m 远程地址: 127.0.0.1
2022-07-27 20:30:52.113 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207474821381099520[0;39m 请求参数: [202714600712572928]
2022-07-27 20:30:52.115 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207474821381099520[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-27 20:30:52.116 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207474821381099520[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-27 20:30:52.118 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 20:30:52.118 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 24, 2
2022-07-27 20:30:52.119 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 25, 3
2022-07-27 20:30:52.119 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 24, 2
2022-07-27 20:30:52.120 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 13, 2
2022-07-27 20:30:52.122 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 5, 2
2022-07-27 20:30:52.123 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-27 20:30:52.123 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-27 20:30:52.124 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 3, 1
2022-07-27 20:30:52.124 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-27 20:30:52.124 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-27 20:30:52.125 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-27 20:30:52.125 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207474821381099520[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-27 20:30:52.125 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207474821381099520[0;39m <==      Total: 12
2022-07-27 20:30:52.129 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207474821381099520[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":25,"voteCount":3},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":13,"voteCount":2},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-27 20:30:52.129 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207474821381099520[0;39m ------------- 结束 耗时：16 ms -------------
2022-07-27 20:30:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474833536192512[0;39m 生成今日电子书快照开始
2022-07-27 20:30:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474833536192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:30:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474833536192512[0;39m ==> Parameters: 
2022-07-27 20:30:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474833536192512[0;39m <==    Updates: 0
2022-07-27 20:30:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474833536192512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:31:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474854486740992[0;39m 生成今日电子书快照开始
2022-07-27 20:31:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474854486740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474854486740992[0;39m ==> Parameters: 
2022-07-27 20:31:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474854486740992[0;39m <==    Updates: 0
2022-07-27 20:31:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474854486740992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 20:31:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207474875479232512[0;39m 更新电子书下的文档数据开始
2022-07-27 20:31:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474875479232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:31:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474875479232512[0;39m ==> Parameters: 
2022-07-27 20:31:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207474875479232512[0;39m <==    Updates: 7
2022-07-27 20:31:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207474875479232512[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-27 20:31:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474875500204032[0;39m 生成今日电子书快照开始
2022-07-27 20:31:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474875500204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474875500204032[0;39m ==> Parameters: 
2022-07-27 20:31:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474875500204032[0;39m <==    Updates: 0
2022-07-27 20:31:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474875500204032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:31:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474896438169600[0;39m 生成今日电子书快照开始
2022-07-27 20:31:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474896438169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474896438169600[0;39m ==> Parameters: 
2022-07-27 20:31:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474896438169600[0;39m <==    Updates: 0
2022-07-27 20:31:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474896438169600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:31:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474917392912384[0;39m 生成今日电子书快照开始
2022-07-27 20:31:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474917392912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474917392912384[0;39m ==> Parameters: 
2022-07-27 20:31:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474917392912384[0;39m <==    Updates: 0
2022-07-27 20:31:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474917392912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:31:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474938410569728[0;39m 生成今日电子书快照开始
2022-07-27 20:31:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474938410569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474938410569728[0;39m ==> Parameters: 
2022-07-27 20:31:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474938410569728[0;39m <==    Updates: 0
2022-07-27 20:31:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474938410569728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:31:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474959356923904[0;39m 生成今日电子书快照开始
2022-07-27 20:31:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474959356923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474959356923904[0;39m ==> Parameters: 
2022-07-27 20:31:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474959356923904[0;39m <==    Updates: 0
2022-07-27 20:31:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474959356923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:31:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207474980332638208[0;39m 生成今日电子书快照开始
2022-07-27 20:31:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474980332638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474980332638208[0;39m ==> Parameters: 
2022-07-27 20:31:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207474980332638208[0;39m <==    Updates: 0
2022-07-27 20:31:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207474980332638208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:31:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475001299963904[0;39m 生成今日电子书快照开始
2022-07-27 20:31:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475001299963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475001299963904[0;39m ==> Parameters: 
2022-07-27 20:31:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475001299963904[0;39m <==    Updates: 0
2022-07-27 20:31:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475001299963904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:31:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207475001312546816[0;39m 更新电子书下的文档数据开始
2022-07-27 20:31:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475001312546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:31:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475001312546816[0;39m ==> Parameters: 
2022-07-27 20:31:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475001312546816[0;39m <==    Updates: 7
2022-07-27 20:31:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207475001312546816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:31:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475022263095296[0;39m 生成今日电子书快照开始
2022-07-27 20:31:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475022263095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475022263095296[0;39m ==> Parameters: 
2022-07-27 20:31:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475022263095296[0;39m <==    Updates: 0
2022-07-27 20:31:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475022263095296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:31:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475043234615296[0;39m 生成今日电子书快照开始
2022-07-27 20:31:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475043234615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475043234615296[0;39m ==> Parameters: 
2022-07-27 20:31:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475043234615296[0;39m <==    Updates: 0
2022-07-27 20:31:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475043234615296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:31:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475064189358080[0;39m 生成今日电子书快照开始
2022-07-27 20:31:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475064189358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475064189358080[0;39m ==> Parameters: 
2022-07-27 20:31:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475064189358080[0;39m <==    Updates: 0
2022-07-27 20:31:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475064189358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:31:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475085190238208[0;39m 生成今日电子书快照开始
2022-07-27 20:31:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475085190238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:31:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475085190238208[0;39m ==> Parameters: 
2022-07-27 20:31:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475085190238208[0;39m <==    Updates: 0
2022-07-27 20:31:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475085190238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:32:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475106149175296[0;39m 生成今日电子书快照开始
2022-07-27 20:32:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475106149175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475106149175296[0;39m ==> Parameters: 
2022-07-27 20:32:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475106149175296[0;39m <==    Updates: 0
2022-07-27 20:32:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475106149175296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:32:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475127103918080[0;39m 生成今日电子书快照开始
2022-07-27 20:32:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475127103918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475127103918080[0;39m ==> Parameters: 
2022-07-27 20:32:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475127103918080[0;39m <==    Updates: 0
2022-07-27 20:32:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475127103918080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:32:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207475127116500992[0;39m 更新电子书下的文档数据开始
2022-07-27 20:32:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475127116500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:32:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475127116500992[0;39m ==> Parameters: 
2022-07-27 20:32:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475127116500992[0;39m <==    Updates: 7
2022-07-27 20:32:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207475127116500992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:32:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475148092215296[0;39m 生成今日电子书快照开始
2022-07-27 20:32:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475148092215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475148092215296[0;39m ==> Parameters: 
2022-07-27 20:32:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475148092215296[0;39m <==    Updates: 0
2022-07-27 20:32:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475148092215296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:32:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475169076318208[0;39m 生成今日电子书快照开始
2022-07-27 20:32:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475169076318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475169076318208[0;39m ==> Parameters: 
2022-07-27 20:32:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475169076318208[0;39m <==    Updates: 0
2022-07-27 20:32:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475169076318208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:32:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475190010089472[0;39m 生成今日电子书快照开始
2022-07-27 20:32:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475190010089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475190010089472[0;39m ==> Parameters: 
2022-07-27 20:32:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475190010089472[0;39m <==    Updates: 0
2022-07-27 20:32:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475190010089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:32:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475211010969600[0;39m 生成今日电子书快照开始
2022-07-27 20:32:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475211010969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475211010969600[0;39m ==> Parameters: 
2022-07-27 20:32:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475211010969600[0;39m <==    Updates: 0
2022-07-27 20:32:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475211010969600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:32:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475231990878208[0;39m 生成今日电子书快照开始
2022-07-27 20:32:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475231990878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475231990878208[0;39m ==> Parameters: 
2022-07-27 20:32:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475231990878208[0;39m <==    Updates: 0
2022-07-27 20:32:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475231990878208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:32:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475252974981120[0;39m 生成今日电子书快照开始
2022-07-27 20:32:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475252974981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475252974981120[0;39m ==> Parameters: 
2022-07-27 20:32:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475252974981120[0;39m <==    Updates: 0
2022-07-27 20:32:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475252974981120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:32:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207475252987564032[0;39m 更新电子书下的文档数据开始
2022-07-27 20:32:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475252987564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:32:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475252987564032[0;39m ==> Parameters: 
2022-07-27 20:32:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475252987564032[0;39m <==    Updates: 7
2022-07-27 20:32:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207475252987564032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:32:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475273912946688[0;39m 生成今日电子书快照开始
2022-07-27 20:32:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475273912946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475273912946688[0;39m ==> Parameters: 
2022-07-27 20:32:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475273912946688[0;39m <==    Updates: 0
2022-07-27 20:32:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475273912946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:32:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475294913826816[0;39m 生成今日电子书快照开始
2022-07-27 20:32:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475294913826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475294913826816[0;39m ==> Parameters: 
2022-07-27 20:32:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475294913826816[0;39m <==    Updates: 0
2022-07-27 20:32:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475294913826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:32:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475315902124032[0;39m 生成今日电子书快照开始
2022-07-27 20:32:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475315902124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475315902124032[0;39m ==> Parameters: 
2022-07-27 20:32:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475315902124032[0;39m <==    Updates: 0
2022-07-27 20:32:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475315902124032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:32:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475336823312384[0;39m 生成今日电子书快照开始
2022-07-27 20:32:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475336823312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:32:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475336823312384[0;39m ==> Parameters: 
2022-07-27 20:32:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475336823312384[0;39m <==    Updates: 0
2022-07-27 20:32:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475336823312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:33:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475357799026688[0;39m 生成今日电子书快照开始
2022-07-27 20:33:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475357799026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475357799026688[0;39m ==> Parameters: 
2022-07-27 20:33:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475357799026688[0;39m <==    Updates: 0
2022-07-27 20:33:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475357799026688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:33:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475378762158080[0;39m 生成今日电子书快照开始
2022-07-27 20:33:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475378762158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475378762158080[0;39m ==> Parameters: 
2022-07-27 20:33:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475378762158080[0;39m <==    Updates: 0
2022-07-27 20:33:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475378762158080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:33:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207475378774740992[0;39m 更新电子书下的文档数据开始
2022-07-27 20:33:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475378774740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:33:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475378774740992[0;39m ==> Parameters: 
2022-07-27 20:33:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475378774740992[0;39m <==    Updates: 7
2022-07-27 20:33:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207475378774740992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:33:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475399775621120[0;39m 生成今日电子书快照开始
2022-07-27 20:33:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475399775621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475399775621120[0;39m ==> Parameters: 
2022-07-27 20:33:10.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475399775621120[0;39m <==    Updates: 0
2022-07-27 20:33:10.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475399775621120[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:33:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475420701003776[0;39m 生成今日电子书快照开始
2022-07-27 20:33:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475420701003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475420701003776[0;39m ==> Parameters: 
2022-07-27 20:33:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475420701003776[0;39m <==    Updates: 0
2022-07-27 20:33:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475420701003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:33:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475441693495296[0;39m 生成今日电子书快照开始
2022-07-27 20:33:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475441693495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475441693495296[0;39m ==> Parameters: 
2022-07-27 20:33:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475441693495296[0;39m <==    Updates: 0
2022-07-27 20:33:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475441693495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:33:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475462639849472[0;39m 生成今日电子书快照开始
2022-07-27 20:33:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475462639849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475462639849472[0;39m ==> Parameters: 
2022-07-27 20:33:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475462639849472[0;39m <==    Updates: 0
2022-07-27 20:33:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475462639849472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:33:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475483649118208[0;39m 生成今日电子书快照开始
2022-07-27 20:33:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475483649118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475483649118208[0;39m ==> Parameters: 
2022-07-27 20:33:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475483649118208[0;39m <==    Updates: 0
2022-07-27 20:33:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475483649118208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:33:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207475504608055296[0;39m 更新电子书下的文档数据开始
2022-07-27 20:33:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475504608055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:33:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475504608055296[0;39m ==> Parameters: 
2022-07-27 20:33:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475504608055296[0;39m <==    Updates: 7
2022-07-27 20:33:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207475504608055296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:33:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475504616443904[0;39m 生成今日电子书快照开始
2022-07-27 20:33:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475504616443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475504616443904[0;39m ==> Parameters: 
2022-07-27 20:33:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475504616443904[0;39m <==    Updates: 0
2022-07-27 20:33:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475504616443904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:33:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475525575380992[0;39m 生成今日电子书快照开始
2022-07-27 20:33:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475525575380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475525575380992[0;39m ==> Parameters: 
2022-07-27 20:33:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475525575380992[0;39m <==    Updates: 0
2022-07-27 20:33:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475525575380992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:33:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475546546900992[0;39m 生成今日电子书快照开始
2022-07-27 20:33:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475546546900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475546546900992[0;39m ==> Parameters: 
2022-07-27 20:33:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475546546900992[0;39m <==    Updates: 0
2022-07-27 20:33:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475546546900992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:33:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475567522615296[0;39m 生成今日电子书快照开始
2022-07-27 20:33:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475567522615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475567522615296[0;39m ==> Parameters: 
2022-07-27 20:33:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475567522615296[0;39m <==    Updates: 0
2022-07-27 20:33:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475567522615296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:33:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475588468969472[0;39m 生成今日电子书快照开始
2022-07-27 20:33:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475588468969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:33:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475588468969472[0;39m ==> Parameters: 
2022-07-27 20:33:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475588468969472[0;39m <==    Updates: 0
2022-07-27 20:33:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475588468969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:34:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475609469849600[0;39m 生成今日电子书快照开始
2022-07-27 20:34:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475609469849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475609469849600[0;39m ==> Parameters: 
2022-07-27 20:34:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475609469849600[0;39m <==    Updates: 0
2022-07-27 20:34:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475609469849600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:34:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207475630420398080[0;39m 更新电子书下的文档数据开始
2022-07-27 20:34:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475630420398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:34:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475630420398080[0;39m ==> Parameters: 
2022-07-27 20:34:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475630420398080[0;39m <==    Updates: 7
2022-07-27 20:34:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207475630420398080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:34:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475630428786688[0;39m 生成今日电子书快照开始
2022-07-27 20:34:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475630428786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475630428786688[0;39m ==> Parameters: 
2022-07-27 20:34:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475630428786688[0;39m <==    Updates: 0
2022-07-27 20:34:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475630428786688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:34:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475651429666816[0;39m 生成今日电子书快照开始
2022-07-27 20:34:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475651429666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475651429666816[0;39m ==> Parameters: 
2022-07-27 20:34:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475651429666816[0;39m <==    Updates: 0
2022-07-27 20:34:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475651429666816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:34:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475672401186816[0;39m 生成今日电子书快照开始
2022-07-27 20:34:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475672401186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475672401186816[0;39m ==> Parameters: 
2022-07-27 20:34:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475672401186816[0;39m <==    Updates: 0
2022-07-27 20:34:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475672401186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:34:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475693364318208[0;39m 生成今日电子书快照开始
2022-07-27 20:34:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475693364318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475693364318208[0;39m ==> Parameters: 
2022-07-27 20:34:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475693364318208[0;39m <==    Updates: 0
2022-07-27 20:34:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475693364318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:34:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475714352615424[0;39m 生成今日电子书快照开始
2022-07-27 20:34:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475714352615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475714352615424[0;39m ==> Parameters: 
2022-07-27 20:34:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475714352615424[0;39m <==    Updates: 0
2022-07-27 20:34:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475714352615424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:34:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475735282192384[0;39m 生成今日电子书快照开始
2022-07-27 20:34:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475735282192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475735282192384[0;39m ==> Parameters: 
2022-07-27 20:34:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475735282192384[0;39m <==    Updates: 0
2022-07-27 20:34:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475735282192384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:34:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207475756287266816[0;39m 更新电子书下的文档数据开始
2022-07-27 20:34:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475756287266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:34:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475756287266816[0;39m ==> Parameters: 
2022-07-27 20:34:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475756287266816[0;39m <==    Updates: 7
2022-07-27 20:34:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207475756287266816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:34:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475756295655424[0;39m 生成今日电子书快照开始
2022-07-27 20:34:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475756295655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475756295655424[0;39m ==> Parameters: 
2022-07-27 20:34:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475756295655424[0;39m <==    Updates: 0
2022-07-27 20:34:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475756295655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:34:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475777225232384[0;39m 生成今日电子书快照开始
2022-07-27 20:34:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475777225232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475777225232384[0;39m ==> Parameters: 
2022-07-27 20:34:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475777225232384[0;39m <==    Updates: 0
2022-07-27 20:34:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475777225232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:34:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475798221918208[0;39m 生成今日电子书快照开始
2022-07-27 20:34:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475798221918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475798221918208[0;39m ==> Parameters: 
2022-07-27 20:34:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475798221918208[0;39m <==    Updates: 0
2022-07-27 20:34:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475798221918208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:34:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475819201826816[0;39m 生成今日电子书快照开始
2022-07-27 20:34:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475819201826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475819201826816[0;39m ==> Parameters: 
2022-07-27 20:34:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475819201826816[0;39m <==    Updates: 0
2022-07-27 20:34:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475819201826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:34:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475840148180992[0;39m 生成今日电子书快照开始
2022-07-27 20:34:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475840148180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:34:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475840148180992[0;39m ==> Parameters: 
2022-07-27 20:34:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475840148180992[0;39m <==    Updates: 0
2022-07-27 20:34:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475840148180992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:35:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475861144866816[0;39m 生成今日电子书快照开始
2022-07-27 20:35:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475861144866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475861144866816[0;39m ==> Parameters: 
2022-07-27 20:35:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475861144866816[0;39m <==    Updates: 0
2022-07-27 20:35:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475861144866816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:35:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475882074443776[0;39m 生成今日电子书快照开始
2022-07-27 20:35:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475882074443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475882074443776[0;39m ==> Parameters: 
2022-07-27 20:35:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475882074443776[0;39m <==    Updates: 0
2022-07-27 20:35:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475882074443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:35:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207475882082832384[0;39m 更新电子书下的文档数据开始
2022-07-27 20:35:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475882082832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:35:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475882082832384[0;39m ==> Parameters: 
2022-07-27 20:35:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207475882082832384[0;39m <==    Updates: 7
2022-07-27 20:35:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207475882082832384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:35:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475903087906816[0;39m 生成今日电子书快照开始
2022-07-27 20:35:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475903087906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475903087906816[0;39m ==> Parameters: 
2022-07-27 20:35:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475903087906816[0;39m <==    Updates: 0
2022-07-27 20:35:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475903087906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:35:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475924038455296[0;39m 生成今日电子书快照开始
2022-07-27 20:35:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475924038455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475924038455296[0;39m ==> Parameters: 
2022-07-27 20:35:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475924038455296[0;39m <==    Updates: 0
2022-07-27 20:35:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475924038455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:35:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475945018363904[0;39m 生成今日电子书快照开始
2022-07-27 20:35:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475945018363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475945018363904[0;39m ==> Parameters: 
2022-07-27 20:35:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475945018363904[0;39m <==    Updates: 0
2022-07-27 20:35:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475945018363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:35:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475965981495296[0;39m 生成今日电子书快照开始
2022-07-27 20:35:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475965981495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475965981495296[0;39m ==> Parameters: 
2022-07-27 20:35:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475965981495296[0;39m <==    Updates: 0
2022-07-27 20:35:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475965981495296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:35:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207475986969792512[0;39m 生成今日电子书快照开始
2022-07-27 20:35:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475986969792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475986969792512[0;39m ==> Parameters: 
2022-07-27 20:35:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207475986969792512[0;39m <==    Updates: 0
2022-07-27 20:35:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207475986969792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:35:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207476007924535296[0;39m 更新电子书下的文档数据开始
2022-07-27 20:35:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476007924535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:35:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476007924535296[0;39m ==> Parameters: 
2022-07-27 20:35:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476007924535296[0;39m <==    Updates: 7
2022-07-27 20:35:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207476007924535296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:35:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476007932923904[0;39m 生成今日电子书快照开始
2022-07-27 20:35:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476007932923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476007932923904[0;39m ==> Parameters: 
2022-07-27 20:35:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476007932923904[0;39m <==    Updates: 0
2022-07-27 20:35:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476007932923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:35:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476028904443904[0;39m 生成今日电子书快照开始
2022-07-27 20:35:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476028904443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476028904443904[0;39m ==> Parameters: 
2022-07-27 20:35:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476028904443904[0;39m <==    Updates: 0
2022-07-27 20:35:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476028904443904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:35:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476049896935424[0;39m 生成今日电子书快照开始
2022-07-27 20:35:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476049896935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476049896935424[0;39m ==> Parameters: 
2022-07-27 20:35:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476049896935424[0;39m <==    Updates: 0
2022-07-27 20:35:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476049896935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:35:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476070868455424[0;39m 生成今日电子书快照开始
2022-07-27 20:35:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476070868455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476070868455424[0;39m ==> Parameters: 
2022-07-27 20:35:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476070868455424[0;39m <==    Updates: 0
2022-07-27 20:35:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476070868455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:35:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476091823198208[0;39m 生成今日电子书快照开始
2022-07-27 20:35:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476091823198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:35:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476091823198208[0;39m ==> Parameters: 
2022-07-27 20:35:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476091823198208[0;39m <==    Updates: 0
2022-07-27 20:35:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476091823198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:36:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476112765358080[0;39m 生成今日电子书快照开始
2022-07-27 20:36:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476112765358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476112765358080[0;39m ==> Parameters: 
2022-07-27 20:36:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476112765358080[0;39m <==    Updates: 0
2022-07-27 20:36:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476112765358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:36:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207476133732683776[0;39m 更新电子书下的文档数据开始
2022-07-27 20:36:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476133732683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:36:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476133732683776[0;39m ==> Parameters: 
2022-07-27 20:36:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476133732683776[0;39m <==    Updates: 7
2022-07-27 20:36:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207476133732683776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:36:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476133736878080[0;39m 生成今日电子书快照开始
2022-07-27 20:36:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476133736878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476133736878080[0;39m ==> Parameters: 
2022-07-27 20:36:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476133736878080[0;39m <==    Updates: 0
2022-07-27 20:36:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476133736878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:36:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476154708398080[0;39m 生成今日电子书快照开始
2022-07-27 20:36:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476154708398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476154708398080[0;39m ==> Parameters: 
2022-07-27 20:36:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476154708398080[0;39m <==    Updates: 0
2022-07-27 20:36:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476154708398080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:36:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476175688306688[0;39m 生成今日电子书快照开始
2022-07-27 20:36:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476175688306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476175688306688[0;39m ==> Parameters: 
2022-07-27 20:36:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476175688306688[0;39m <==    Updates: 0
2022-07-27 20:36:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476175688306688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:36:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476196689186816[0;39m 生成今日电子书快照开始
2022-07-27 20:36:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476196689186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476196689186816[0;39m ==> Parameters: 
2022-07-27 20:36:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476196689186816[0;39m <==    Updates: 0
2022-07-27 20:36:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476196689186816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:36:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476217622958080[0;39m 生成今日电子书快照开始
2022-07-27 20:36:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476217622958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476217622958080[0;39m ==> Parameters: 
2022-07-27 20:36:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476217622958080[0;39m <==    Updates: 0
2022-07-27 20:36:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476217622958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:36:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476238623838208[0;39m 生成今日电子书快照开始
2022-07-27 20:36:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476238623838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476238623838208[0;39m ==> Parameters: 
2022-07-27 20:36:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476238623838208[0;39m <==    Updates: 0
2022-07-27 20:36:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476238623838208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:36:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476259582775296[0;39m 生成今日电子书快照开始
2022-07-27 20:36:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476259582775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476259582775296[0;39m ==> Parameters: 
2022-07-27 20:36:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476259582775296[0;39m <==    Updates: 0
2022-07-27 20:36:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476259582775296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:36:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207476259595358208[0;39m 更新电子书下的文档数据开始
2022-07-27 20:36:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476259595358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:36:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476259595358208[0;39m ==> Parameters: 
2022-07-27 20:36:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476259595358208[0;39m <==    Updates: 7
2022-07-27 20:36:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207476259595358208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:36:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476280571072512[0;39m 生成今日电子书快照开始
2022-07-27 20:36:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476280571072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476280571072512[0;39m ==> Parameters: 
2022-07-27 20:36:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476280571072512[0;39m <==    Updates: 0
2022-07-27 20:36:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476280571072512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:36:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476301521620992[0;39m 生成今日电子书快照开始
2022-07-27 20:36:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476301521620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476301521620992[0;39m ==> Parameters: 
2022-07-27 20:36:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476301521620992[0;39m <==    Updates: 0
2022-07-27 20:36:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476301521620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:36:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476322522501120[0;39m 生成今日电子书快照开始
2022-07-27 20:36:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476322522501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476322522501120[0;39m ==> Parameters: 
2022-07-27 20:36:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476322522501120[0;39m <==    Updates: 0
2022-07-27 20:36:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476322522501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:36:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476343510798336[0;39m 生成今日电子书快照开始
2022-07-27 20:36:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476343510798336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:36:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476343510798336[0;39m ==> Parameters: 
2022-07-27 20:36:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476343510798336[0;39m <==    Updates: 0
2022-07-27 20:36:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476343510798336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:37:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476364436180992[0;39m 生成今日电子书快照开始
2022-07-27 20:37:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476364436180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476364436180992[0;39m ==> Parameters: 
2022-07-27 20:37:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476364436180992[0;39m <==    Updates: 0
2022-07-27 20:37:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476364436180992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:37:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476385424478208[0;39m 生成今日电子书快照开始
2022-07-27 20:37:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476385424478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476385424478208[0;39m ==> Parameters: 
2022-07-27 20:37:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476385424478208[0;39m <==    Updates: 0
2022-07-27 20:37:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476385424478208[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:37:05.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207476385462226944[0;39m 更新电子书下的文档数据开始
2022-07-27 20:37:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476385462226944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:37:05.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476385462226944[0;39m ==> Parameters: 
2022-07-27 20:37:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476385462226944[0;39m <==    Updates: 7
2022-07-27 20:37:05.023 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207476385462226944[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-27 20:37:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476406395998208[0;39m 生成今日电子书快照开始
2022-07-27 20:37:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476406395998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476406395998208[0;39m ==> Parameters: 
2022-07-27 20:37:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476406395998208[0;39m <==    Updates: 0
2022-07-27 20:37:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476406395998208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:37:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476427354935296[0;39m 生成今日电子书快照开始
2022-07-27 20:37:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476427354935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476427354935296[0;39m ==> Parameters: 
2022-07-27 20:37:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476427354935296[0;39m <==    Updates: 0
2022-07-27 20:37:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476427354935296[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:37:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476448355815424[0;39m 生成今日电子书快照开始
2022-07-27 20:37:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476448355815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476448355815424[0;39m ==> Parameters: 
2022-07-27 20:37:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476448355815424[0;39m <==    Updates: 0
2022-07-27 20:37:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476448355815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:37:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476469302169600[0;39m 生成今日电子书快照开始
2022-07-27 20:37:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476469302169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476469302169600[0;39m ==> Parameters: 
2022-07-27 20:37:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476469302169600[0;39m <==    Updates: 0
2022-07-27 20:37:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476469302169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:37:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476490265300992[0;39m 生成今日电子书快照开始
2022-07-27 20:37:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476490265300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476490265300992[0;39m ==> Parameters: 
2022-07-27 20:37:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476490265300992[0;39m <==    Updates: 0
2022-07-27 20:37:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476490265300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:37:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476511253598208[0;39m 生成今日电子书快照开始
2022-07-27 20:37:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476511253598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476511253598208[0;39m ==> Parameters: 
2022-07-27 20:37:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476511253598208[0;39m <==    Updates: 0
2022-07-27 20:37:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476511253598208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:37:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207476511261986816[0;39m 更新电子书下的文档数据开始
2022-07-27 20:37:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476511261986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:37:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476511261986816[0;39m ==> Parameters: 
2022-07-27 20:37:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476511261986816[0;39m <==    Updates: 7
2022-07-27 20:37:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207476511261986816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:37:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476532204146688[0;39m 生成今日电子书快照开始
2022-07-27 20:37:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476532204146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476532204146688[0;39m ==> Parameters: 
2022-07-27 20:37:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476532204146688[0;39m <==    Updates: 0
2022-07-27 20:37:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476532204146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:37:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476553163083776[0;39m 生成今日电子书快照开始
2022-07-27 20:37:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476553163083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476553163083776[0;39m ==> Parameters: 
2022-07-27 20:37:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476553163083776[0;39m <==    Updates: 0
2022-07-27 20:37:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476553163083776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:37:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476574176546816[0;39m 生成今日电子书快照开始
2022-07-27 20:37:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476574176546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476574176546816[0;39m ==> Parameters: 
2022-07-27 20:37:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476574176546816[0;39m <==    Updates: 0
2022-07-27 20:37:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476574176546816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:37:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476595143872512[0;39m 生成今日电子书快照开始
2022-07-27 20:37:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476595143872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:37:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476595143872512[0;39m ==> Parameters: 
2022-07-27 20:37:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476595143872512[0;39m <==    Updates: 0
2022-07-27 20:37:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476595143872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:38:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476616123781120[0;39m 生成今日电子书快照开始
2022-07-27 20:38:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476616123781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476616123781120[0;39m ==> Parameters: 
2022-07-27 20:38:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476616123781120[0;39m <==    Updates: 0
2022-07-27 20:38:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476616123781120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:38:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207476637078523904[0;39m 更新电子书下的文档数据开始
2022-07-27 20:38:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476637078523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476637078523904[0;39m ==> Parameters: 
2022-07-27 20:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476637078523904[0;39m <==    Updates: 7
2022-07-27 20:38:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207476637078523904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:38:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476637086912512[0;39m 生成今日电子书快照开始
2022-07-27 20:38:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476637086912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476637086912512[0;39m ==> Parameters: 
2022-07-27 20:38:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476637086912512[0;39m <==    Updates: 0
2022-07-27 20:38:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476637086912512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:38:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476658062626816[0;39m 生成今日电子书快照开始
2022-07-27 20:38:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476658062626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476658062626816[0;39m ==> Parameters: 
2022-07-27 20:38:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476658062626816[0;39m <==    Updates: 0
2022-07-27 20:38:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476658062626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:38:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476679034146816[0;39m 生成今日电子书快照开始
2022-07-27 20:38:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476679034146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476679034146816[0;39m ==> Parameters: 
2022-07-27 20:38:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476679034146816[0;39m <==    Updates: 0
2022-07-27 20:38:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476679034146816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:38:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476699997278208[0;39m 生成今日电子书快照开始
2022-07-27 20:38:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476699997278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476699997278208[0;39m ==> Parameters: 
2022-07-27 20:38:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476699997278208[0;39m <==    Updates: 0
2022-07-27 20:38:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476699997278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:38:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476720960409600[0;39m 生成今日电子书快照开始
2022-07-27 20:38:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476720960409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476720960409600[0;39m ==> Parameters: 
2022-07-27 20:38:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476720960409600[0;39m <==    Updates: 0
2022-07-27 20:38:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476720960409600[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 20:38:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476741927735296[0;39m 生成今日电子书快照开始
2022-07-27 20:38:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476741927735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476741927735296[0;39m ==> Parameters: 
2022-07-27 20:38:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476741927735296[0;39m <==    Updates: 0
2022-07-27 20:38:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476741927735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:38:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207476762903449600[0;39m 更新电子书下的文档数据开始
2022-07-27 20:38:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476762903449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:38:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476762903449600[0;39m ==> Parameters: 
2022-07-27 20:38:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476762903449600[0;39m <==    Updates: 7
2022-07-27 20:38:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207476762903449600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:38:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476762911838208[0;39m 生成今日电子书快照开始
2022-07-27 20:38:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476762911838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476762911838208[0;39m ==> Parameters: 
2022-07-27 20:38:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476762911838208[0;39m <==    Updates: 0
2022-07-27 20:38:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476762911838208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:38:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476783845609472[0;39m 生成今日电子书快照开始
2022-07-27 20:38:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476783845609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476783845609472[0;39m ==> Parameters: 
2022-07-27 20:38:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476783845609472[0;39m <==    Updates: 0
2022-07-27 20:38:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476783845609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:38:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476804846489600[0;39m 生成今日电子书快照开始
2022-07-27 20:38:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476804846489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476804846489600[0;39m ==> Parameters: 
2022-07-27 20:38:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476804846489600[0;39m <==    Updates: 0
2022-07-27 20:38:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476804846489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:38:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476825801232384[0;39m 生成今日电子书快照开始
2022-07-27 20:38:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476825801232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476825801232384[0;39m ==> Parameters: 
2022-07-27 20:38:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476825801232384[0;39m <==    Updates: 0
2022-07-27 20:38:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476825801232384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:38:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476846793723904[0;39m 生成今日电子书快照开始
2022-07-27 20:38:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476846793723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:38:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476846793723904[0;39m ==> Parameters: 
2022-07-27 20:38:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476846793723904[0;39m <==    Updates: 0
2022-07-27 20:38:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476846793723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:39:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476867752660992[0;39m 生成今日电子书快照开始
2022-07-27 20:39:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476867752660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476867752660992[0;39m ==> Parameters: 
2022-07-27 20:39:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476867752660992[0;39m <==    Updates: 0
2022-07-27 20:39:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476867752660992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:39:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207476888711598080[0;39m 更新电子书下的文档数据开始
2022-07-27 20:39:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476888711598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:39:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476888711598080[0;39m ==> Parameters: 
2022-07-27 20:39:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207476888711598080[0;39m <==    Updates: 7
2022-07-27 20:39:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207476888711598080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:39:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476888719986688[0;39m 生成今日电子书快照开始
2022-07-27 20:39:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476888719986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476888719986688[0;39m ==> Parameters: 
2022-07-27 20:39:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476888719986688[0;39m <==    Updates: 0
2022-07-27 20:39:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476888719986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:39:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476909729255424[0;39m 生成今日电子书快照开始
2022-07-27 20:39:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476909729255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476909729255424[0;39m ==> Parameters: 
2022-07-27 20:39:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476909729255424[0;39m <==    Updates: 0
2022-07-27 20:39:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476909729255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:39:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476930671415296[0;39m 生成今日电子书快照开始
2022-07-27 20:39:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476930671415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476930671415296[0;39m ==> Parameters: 
2022-07-27 20:39:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476930671415296[0;39m <==    Updates: 0
2022-07-27 20:39:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476930671415296[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:39:20.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476951613575168[0;39m 生成今日电子书快照开始
2022-07-27 20:39:20.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476951613575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476951613575168[0;39m ==> Parameters: 
2022-07-27 20:39:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476951613575168[0;39m <==    Updates: 0
2022-07-27 20:39:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476951613575168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:39:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476972622843904[0;39m 生成今日电子书快照开始
2022-07-27 20:39:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476972622843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476972622843904[0;39m ==> Parameters: 
2022-07-27 20:39:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476972622843904[0;39m <==    Updates: 0
2022-07-27 20:39:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476972622843904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:39:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207476993590169600[0;39m 生成今日电子书快照开始
2022-07-27 20:39:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476993590169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476993590169600[0;39m ==> Parameters: 
2022-07-27 20:39:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207476993590169600[0;39m <==    Updates: 0
2022-07-27 20:39:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207476993590169600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:39:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477014557495296[0;39m 生成今日电子书快照开始
2022-07-27 20:39:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477014557495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477014557495296[0;39m ==> Parameters: 
2022-07-27 20:39:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477014557495296[0;39m <==    Updates: 0
2022-07-27 20:39:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477014557495296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:39:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207477014565883904[0;39m 更新电子书下的文档数据开始
2022-07-27 20:39:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477014565883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:39:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477014565883904[0;39m ==> Parameters: 
2022-07-27 20:39:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477014565883904[0;39m <==    Updates: 7
2022-07-27 20:39:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207477014565883904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:39:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477035508043776[0;39m 生成今日电子书快照开始
2022-07-27 20:39:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477035508043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477035508043776[0;39m ==> Parameters: 
2022-07-27 20:39:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477035508043776[0;39m <==    Updates: 0
2022-07-27 20:39:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477035508043776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:39:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477056500535296[0;39m 生成今日电子书快照开始
2022-07-27 20:39:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477056500535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477056500535296[0;39m ==> Parameters: 
2022-07-27 20:39:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477056500535296[0;39m <==    Updates: 0
2022-07-27 20:39:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477056500535296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:39:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477077476249600[0;39m 生成今日电子书快照开始
2022-07-27 20:39:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477077476249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477077476249600[0;39m ==> Parameters: 
2022-07-27 20:39:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477077476249600[0;39m <==    Updates: 0
2022-07-27 20:39:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477077476249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:39:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477098447769600[0;39m 生成今日电子书快照开始
2022-07-27 20:39:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477098447769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:39:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477098447769600[0;39m ==> Parameters: 
2022-07-27 20:39:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477098447769600[0;39m <==    Updates: 0
2022-07-27 20:39:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477098447769600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:40:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477119406706688[0;39m 生成今日电子书快照开始
2022-07-27 20:40:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477119406706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477119406706688[0;39m ==> Parameters: 
2022-07-27 20:40:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477119406706688[0;39m <==    Updates: 0
2022-07-27 20:40:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477119406706688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:40:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477140403392512[0;39m 生成今日电子书快照开始
2022-07-27 20:40:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477140403392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477140403392512[0;39m ==> Parameters: 
2022-07-27 20:40:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477140403392512[0;39m <==    Updates: 0
2022-07-27 20:40:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477140403392512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:40:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207477140415975424[0;39m 更新电子书下的文档数据开始
2022-07-27 20:40:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477140415975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:40:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477140415975424[0;39m ==> Parameters: 
2022-07-27 20:40:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477140415975424[0;39m <==    Updates: 7
2022-07-27 20:40:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207477140415975424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:40:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477161383301120[0;39m 生成今日电子书快照开始
2022-07-27 20:40:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477161383301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477161383301120[0;39m ==> Parameters: 
2022-07-27 20:40:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477161383301120[0;39m <==    Updates: 0
2022-07-27 20:40:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477161383301120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:40:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477182333849600[0;39m 生成今日电子书快照开始
2022-07-27 20:40:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477182333849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477182333849600[0;39m ==> Parameters: 
2022-07-27 20:40:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477182333849600[0;39m <==    Updates: 0
2022-07-27 20:40:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477182333849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:40:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477203296980992[0;39m 生成今日电子书快照开始
2022-07-27 20:40:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477203296980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477203296980992[0;39m ==> Parameters: 
2022-07-27 20:40:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477203296980992[0;39m <==    Updates: 0
2022-07-27 20:40:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477203296980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:40:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477224281083904[0;39m 生成今日电子书快照开始
2022-07-27 20:40:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477224281083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477224281083904[0;39m ==> Parameters: 
2022-07-27 20:40:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477224281083904[0;39m <==    Updates: 0
2022-07-27 20:40:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477224281083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:40:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477245260992512[0;39m 生成今日电子书快照开始
2022-07-27 20:40:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477245260992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477245260992512[0;39m ==> Parameters: 
2022-07-27 20:40:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477245260992512[0;39m <==    Updates: 0
2022-07-27 20:40:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477245260992512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:40:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477266211540992[0;39m 生成今日电子书快照开始
2022-07-27 20:40:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477266211540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477266211540992[0;39m ==> Parameters: 
2022-07-27 20:40:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477266211540992[0;39m <==    Updates: 0
2022-07-27 20:40:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477266211540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:40:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207477266224123904[0;39m 更新电子书下的文档数据开始
2022-07-27 20:40:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477266224123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:40:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477266224123904[0;39m ==> Parameters: 
2022-07-27 20:40:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477266224123904[0;39m <==    Updates: 7
2022-07-27 20:40:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207477266224123904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:40:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477287191449600[0;39m 生成今日电子书快照开始
2022-07-27 20:40:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477287191449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477287191449600[0;39m ==> Parameters: 
2022-07-27 20:40:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477287191449600[0;39m <==    Updates: 0
2022-07-27 20:40:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477287191449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:40:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477308154580992[0;39m 生成今日电子书快照开始
2022-07-27 20:40:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477308154580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477308154580992[0;39m ==> Parameters: 
2022-07-27 20:40:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477308154580992[0;39m <==    Updates: 0
2022-07-27 20:40:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477308154580992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:40:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477329163849728[0;39m 生成今日电子书快照开始
2022-07-27 20:40:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477329163849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477329163849728[0;39m ==> Parameters: 
2022-07-27 20:40:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477329163849728[0;39m <==    Updates: 0
2022-07-27 20:40:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477329163849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:40:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477350114398208[0;39m 生成今日电子书快照开始
2022-07-27 20:40:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477350114398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:40:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477350114398208[0;39m ==> Parameters: 
2022-07-27 20:40:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477350114398208[0;39m <==    Updates: 0
2022-07-27 20:40:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477350114398208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:41:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477371052363776[0;39m 生成今日电子书快照开始
2022-07-27 20:41:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477371052363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477371052363776[0;39m ==> Parameters: 
2022-07-27 20:41:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477371052363776[0;39m <==    Updates: 0
2022-07-27 20:41:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477371052363776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:41:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207477392057438208[0;39m 更新电子书下的文档数据开始
2022-07-27 20:41:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477392057438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:41:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477392057438208[0;39m ==> Parameters: 
2022-07-27 20:41:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477392057438208[0;39m <==    Updates: 7
2022-07-27 20:41:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207477392057438208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:41:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477392065826816[0;39m 生成今日电子书快照开始
2022-07-27 20:41:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477392065826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477392065826816[0;39m ==> Parameters: 
2022-07-27 20:41:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477392065826816[0;39m <==    Updates: 0
2022-07-27 20:41:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477392065826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477413041541120[0;39m 生成今日电子书快照开始
2022-07-27 20:41:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477413041541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477413041541120[0;39m ==> Parameters: 
2022-07-27 20:41:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477413041541120[0;39m <==    Updates: 0
2022-07-27 20:41:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477413041541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477433971118080[0;39m 生成今日电子书快照开始
2022-07-27 20:41:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477433971118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477433971118080[0;39m ==> Parameters: 
2022-07-27 20:41:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477433971118080[0;39m <==    Updates: 0
2022-07-27 20:41:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477433971118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477454946832384[0;39m 生成今日电子书快照开始
2022-07-27 20:41:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477454946832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477454946832384[0;39m ==> Parameters: 
2022-07-27 20:41:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477454946832384[0;39m <==    Updates: 0
2022-07-27 20:41:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477454946832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477475960295424[0;39m 生成今日电子书快照开始
2022-07-27 20:41:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477475960295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477475960295424[0;39m ==> Parameters: 
2022-07-27 20:41:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477475960295424[0;39m <==    Updates: 0
2022-07-27 20:41:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477475960295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477496931815424[0;39m 生成今日电子书快照开始
2022-07-27 20:41:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477496931815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477496931815424[0;39m ==> Parameters: 
2022-07-27 20:41:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477496931815424[0;39m <==    Updates: 0
2022-07-27 20:41:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477496931815424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:41:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207477517886558208[0;39m 更新电子书下的文档数据开始
2022-07-27 20:41:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477517886558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:41:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477517886558208[0;39m ==> Parameters: 
2022-07-27 20:41:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477517886558208[0;39m <==    Updates: 7
2022-07-27 20:41:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207477517886558208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:41:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477517894946816[0;39m 生成今日电子书快照开始
2022-07-27 20:41:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477517894946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477517894946816[0;39m ==> Parameters: 
2022-07-27 20:41:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477517894946816[0;39m <==    Updates: 0
2022-07-27 20:41:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477517894946816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477538862272512[0;39m 生成今日电子书快照开始
2022-07-27 20:41:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477538862272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477538862272512[0;39m ==> Parameters: 
2022-07-27 20:41:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477538862272512[0;39m <==    Updates: 0
2022-07-27 20:41:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477538862272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477559791849472[0;39m 生成今日电子书快照开始
2022-07-27 20:41:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477559791849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477559791849472[0;39m ==> Parameters: 
2022-07-27 20:41:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477559791849472[0;39m <==    Updates: 0
2022-07-27 20:41:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477559791849472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477580826284032[0;39m 生成今日电子书快照开始
2022-07-27 20:41:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477580826284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477580826284032[0;39m ==> Parameters: 
2022-07-27 20:41:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477580826284032[0;39m <==    Updates: 0
2022-07-27 20:41:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477580826284032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:41:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477601747472384[0;39m 生成今日电子书快照开始
2022-07-27 20:41:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477601747472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:41:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477601747472384[0;39m ==> Parameters: 
2022-07-27 20:41:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477601747472384[0;39m <==    Updates: 0
2022-07-27 20:41:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477601747472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:42:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477622714798080[0;39m 生成今日电子书快照开始
2022-07-27 20:42:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477622714798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477622714798080[0;39m ==> Parameters: 
2022-07-27 20:42:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477622714798080[0;39m <==    Updates: 0
2022-07-27 20:42:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477622714798080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:42:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207477643732455424[0;39m 更新电子书下的文档数据开始
2022-07-27 20:42:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477643732455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:42:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477643732455424[0;39m ==> Parameters: 
2022-07-27 20:42:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477643732455424[0;39m <==    Updates: 7
2022-07-27 20:42:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207477643732455424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:42:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477643736649728[0;39m 生成今日电子书快照开始
2022-07-27 20:42:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477643736649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477643736649728[0;39m ==> Parameters: 
2022-07-27 20:42:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477643736649728[0;39m <==    Updates: 0
2022-07-27 20:42:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477643736649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:42:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477664687198208[0;39m 生成今日电子书快照开始
2022-07-27 20:42:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477664687198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477664687198208[0;39m ==> Parameters: 
2022-07-27 20:42:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477664687198208[0;39m <==    Updates: 0
2022-07-27 20:42:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477664687198208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:42:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477685637746688[0;39m 生成今日电子书快照开始
2022-07-27 20:42:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477685637746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477685637746688[0;39m ==> Parameters: 
2022-07-27 20:42:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477685637746688[0;39m <==    Updates: 0
2022-07-27 20:42:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477685637746688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 20:42:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477706617655296[0;39m 生成今日电子书快照开始
2022-07-27 20:42:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477706617655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477706617655296[0;39m ==> Parameters: 
2022-07-27 20:42:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477706617655296[0;39m <==    Updates: 0
2022-07-27 20:42:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477706617655296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:42:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477727572398080[0;39m 生成今日电子书快照开始
2022-07-27 20:42:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477727572398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477727572398080[0;39m ==> Parameters: 
2022-07-27 20:42:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477727572398080[0;39m <==    Updates: 0
2022-07-27 20:42:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477727572398080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:42:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477748539723776[0;39m 生成今日电子书快照开始
2022-07-27 20:42:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477748539723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:30.109 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477748539723776[0;39m ==> Parameters: 
2022-07-27 20:42:30.110 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477748539723776[0;39m <==    Updates: 0
2022-07-27 20:42:30.111 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477748539723776[0;39m 生成今日电子书快照结束，耗时：109 毫秒
2022-07-27 20:42:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477769561575424[0;39m 生成今日电子书快照开始
2022-07-27 20:42:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477769561575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477769561575424[0;39m ==> Parameters: 
2022-07-27 20:42:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477769561575424[0;39m <==    Updates: 0
2022-07-27 20:42:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477769561575424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:42:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207477769574158336[0;39m 更新电子书下的文档数据开始
2022-07-27 20:42:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477769574158336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:42:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477769574158336[0;39m ==> Parameters: 
2022-07-27 20:42:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477769574158336[0;39m <==    Updates: 7
2022-07-27 20:42:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207477769574158336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:42:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477790478569472[0;39m 生成今日电子书快照开始
2022-07-27 20:42:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477790478569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477790478569472[0;39m ==> Parameters: 
2022-07-27 20:42:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477790478569472[0;39m <==    Updates: 0
2022-07-27 20:42:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477790478569472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:42:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477811492032512[0;39m 生成今日电子书快照开始
2022-07-27 20:42:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477811492032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477811492032512[0;39m ==> Parameters: 
2022-07-27 20:42:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477811492032512[0;39m <==    Updates: 0
2022-07-27 20:42:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477811492032512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:42:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477832434192384[0;39m 生成今日电子书快照开始
2022-07-27 20:42:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477832434192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477832434192384[0;39m ==> Parameters: 
2022-07-27 20:42:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477832434192384[0;39m <==    Updates: 0
2022-07-27 20:42:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477832434192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:42:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477853409906688[0;39m 生成今日电子书快照开始
2022-07-27 20:42:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477853409906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:42:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477853409906688[0;39m ==> Parameters: 
2022-07-27 20:42:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477853409906688[0;39m <==    Updates: 0
2022-07-27 20:42:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477853409906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:43:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477874373038080[0;39m 生成今日电子书快照开始
2022-07-27 20:43:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477874373038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477874373038080[0;39m ==> Parameters: 
2022-07-27 20:43:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477874373038080[0;39m <==    Updates: 0
2022-07-27 20:43:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477874373038080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:43:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207477895365529600[0;39m 更新电子书下的文档数据开始
2022-07-27 20:43:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477895365529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:43:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477895365529600[0;39m ==> Parameters: 
2022-07-27 20:43:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207477895365529600[0;39m <==    Updates: 7
2022-07-27 20:43:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207477895365529600[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-27 20:43:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477895390695424[0;39m 生成今日电子书快照开始
2022-07-27 20:43:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477895390695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477895390695424[0;39m ==> Parameters: 
2022-07-27 20:43:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477895390695424[0;39m <==    Updates: 0
2022-07-27 20:43:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477895390695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:43:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477916341243904[0;39m 生成今日电子书快照开始
2022-07-27 20:43:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477916341243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477916341243904[0;39m ==> Parameters: 
2022-07-27 20:43:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477916341243904[0;39m <==    Updates: 0
2022-07-27 20:43:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477916341243904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:43:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477937312763904[0;39m 生成今日电子书快照开始
2022-07-27 20:43:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477937312763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477937312763904[0;39m ==> Parameters: 
2022-07-27 20:43:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477937312763904[0;39m <==    Updates: 0
2022-07-27 20:43:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477937312763904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:43:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477958284283904[0;39m 生成今日电子书快照开始
2022-07-27 20:43:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477958284283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477958284283904[0;39m ==> Parameters: 
2022-07-27 20:43:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477958284283904[0;39m <==    Updates: 0
2022-07-27 20:43:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477958284283904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:43:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207477979222249472[0;39m 生成今日电子书快照开始
2022-07-27 20:43:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477979222249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477979222249472[0;39m ==> Parameters: 
2022-07-27 20:43:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207477979222249472[0;39m <==    Updates: 0
2022-07-27 20:43:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207477979222249472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:43:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478000248295424[0;39m 生成今日电子书快照开始
2022-07-27 20:43:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478000248295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478000248295424[0;39m ==> Parameters: 
2022-07-27 20:43:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478000248295424[0;39m <==    Updates: 0
2022-07-27 20:43:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478000248295424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:43:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478021173678080[0;39m 生成今日电子书快照开始
2022-07-27 20:43:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478021173678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478021173678080[0;39m ==> Parameters: 
2022-07-27 20:43:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478021173678080[0;39m <==    Updates: 0
2022-07-27 20:43:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478021173678080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:43:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207478021186260992[0;39m 更新电子书下的文档数据开始
2022-07-27 20:43:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478021186260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:43:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478021186260992[0;39m ==> Parameters: 
2022-07-27 20:43:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478021186260992[0;39m <==    Updates: 7
2022-07-27 20:43:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207478021186260992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:43:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478042195529728[0;39m 生成今日电子书快照开始
2022-07-27 20:43:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478042195529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478042195529728[0;39m ==> Parameters: 
2022-07-27 20:43:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478042195529728[0;39m <==    Updates: 0
2022-07-27 20:43:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478042195529728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:43:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478063133495296[0;39m 生成今日电子书快照开始
2022-07-27 20:43:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478063133495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478063133495296[0;39m ==> Parameters: 
2022-07-27 20:43:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478063133495296[0;39m <==    Updates: 0
2022-07-27 20:43:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478063133495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:43:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478084117598208[0;39m 生成今日电子书快照开始
2022-07-27 20:43:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478084117598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478084117598208[0;39m ==> Parameters: 
2022-07-27 20:43:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478084117598208[0;39m <==    Updates: 0
2022-07-27 20:43:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478084117598208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:43:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478105068146688[0;39m 生成今日电子书快照开始
2022-07-27 20:43:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478105068146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:43:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478105068146688[0;39m ==> Parameters: 
2022-07-27 20:43:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478105068146688[0;39m <==    Updates: 0
2022-07-27 20:43:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478105068146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:44:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478126064832512[0;39m 生成今日电子书快照开始
2022-07-27 20:44:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478126064832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478126064832512[0;39m ==> Parameters: 
2022-07-27 20:44:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478126064832512[0;39m <==    Updates: 0
2022-07-27 20:44:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478126064832512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:44:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478147053129728[0;39m 生成今日电子书快照开始
2022-07-27 20:44:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478147053129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478147053129728[0;39m ==> Parameters: 
2022-07-27 20:44:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478147053129728[0;39m <==    Updates: 0
2022-07-27 20:44:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478147053129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:44:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207478147061518336[0;39m 更新电子书下的文档数据开始
2022-07-27 20:44:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478147061518336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:44:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478147061518336[0;39m ==> Parameters: 
2022-07-27 20:44:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478147061518336[0;39m <==    Updates: 7
2022-07-27 20:44:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207478147061518336[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:44:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478167970123776[0;39m 生成今日电子书快照开始
2022-07-27 20:44:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478167970123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478167970123776[0;39m ==> Parameters: 
2022-07-27 20:44:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478167970123776[0;39m <==    Updates: 0
2022-07-27 20:44:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478167970123776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:44:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478188941643776[0;39m 生成今日电子书快照开始
2022-07-27 20:44:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478188941643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478188941643776[0;39m ==> Parameters: 
2022-07-27 20:44:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478188941643776[0;39m <==    Updates: 0
2022-07-27 20:44:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478188941643776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:44:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478209955106816[0;39m 生成今日电子书快照开始
2022-07-27 20:44:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478209955106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478209955106816[0;39m ==> Parameters: 
2022-07-27 20:44:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478209955106816[0;39m <==    Updates: 0
2022-07-27 20:44:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478209955106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:44:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478230905655296[0;39m 生成今日电子书快照开始
2022-07-27 20:44:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478230905655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478230905655296[0;39m ==> Parameters: 
2022-07-27 20:44:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478230905655296[0;39m <==    Updates: 0
2022-07-27 20:44:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478230905655296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:44:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478251914924032[0;39m 生成今日电子书快照开始
2022-07-27 20:44:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478251914924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478251914924032[0;39m ==> Parameters: 
2022-07-27 20:44:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478251914924032[0;39m <==    Updates: 0
2022-07-27 20:44:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478251914924032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:44:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207478272836112384[0;39m 更新电子书下的文档数据开始
2022-07-27 20:44:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478272836112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:44:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478272836112384[0;39m ==> Parameters: 
2022-07-27 20:44:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478272836112384[0;39m <==    Updates: 7
2022-07-27 20:44:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207478272836112384[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-27 20:44:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478272865472512[0;39m 生成今日电子书快照开始
2022-07-27 20:44:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478272865472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478272865472512[0;39m ==> Parameters: 
2022-07-27 20:44:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478272865472512[0;39m <==    Updates: 0
2022-07-27 20:44:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478272865472512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:44:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478293832798208[0;39m 生成今日电子书快照开始
2022-07-27 20:44:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478293832798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478293832798208[0;39m ==> Parameters: 
2022-07-27 20:44:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478293832798208[0;39m <==    Updates: 0
2022-07-27 20:44:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478293832798208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:44:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478314787540992[0;39m 生成今日电子书快照开始
2022-07-27 20:44:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478314787540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478314787540992[0;39m ==> Parameters: 
2022-07-27 20:44:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478314787540992[0;39m <==    Updates: 0
2022-07-27 20:44:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478314787540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:44:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478335750672384[0;39m 生成今日电子书快照开始
2022-07-27 20:44:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478335750672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478335750672384[0;39m ==> Parameters: 
2022-07-27 20:44:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478335750672384[0;39m <==    Updates: 0
2022-07-27 20:44:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478335750672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:44:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478356768329728[0;39m 生成今日电子书快照开始
2022-07-27 20:44:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478356768329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:44:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478356768329728[0;39m ==> Parameters: 
2022-07-27 20:44:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478356768329728[0;39m <==    Updates: 0
2022-07-27 20:44:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478356768329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:45:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478377706295296[0;39m 生成今日电子书快照开始
2022-07-27 20:45:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478377706295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478377706295296[0;39m ==> Parameters: 
2022-07-27 20:45:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478377706295296[0;39m <==    Updates: 0
2022-07-27 20:45:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478377706295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:45:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478398702981120[0;39m 生成今日电子书快照开始
2022-07-27 20:45:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478398702981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478398702981120[0;39m ==> Parameters: 
2022-07-27 20:45:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478398702981120[0;39m <==    Updates: 0
2022-07-27 20:45:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478398702981120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:45:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207478398711369728[0;39m 更新电子书下的文档数据开始
2022-07-27 20:45:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478398711369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:45:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478398711369728[0;39m ==> Parameters: 
2022-07-27 20:45:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478398711369728[0;39m <==    Updates: 7
2022-07-27 20:45:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207478398711369728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:45:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478419657723904[0;39m 生成今日电子书快照开始
2022-07-27 20:45:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478419657723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478419657723904[0;39m ==> Parameters: 
2022-07-27 20:45:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478419657723904[0;39m <==    Updates: 0
2022-07-27 20:45:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478419657723904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:45:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478440633438208[0;39m 生成今日电子书快照开始
2022-07-27 20:45:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478440633438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478440633438208[0;39m ==> Parameters: 
2022-07-27 20:45:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478440633438208[0;39m <==    Updates: 0
2022-07-27 20:45:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478440633438208[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:45:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478461609152512[0;39m 生成今日电子书快照开始
2022-07-27 20:45:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478461609152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478461609152512[0;39m ==> Parameters: 
2022-07-27 20:45:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478461609152512[0;39m <==    Updates: 0
2022-07-27 20:45:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478461609152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:45:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478482584866816[0;39m 生成今日电子书快照开始
2022-07-27 20:45:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478482584866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478482584866816[0;39m ==> Parameters: 
2022-07-27 20:45:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478482584866816[0;39m <==    Updates: 0
2022-07-27 20:45:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478482584866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:45:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478503564775424[0;39m 生成今日电子书快照开始
2022-07-27 20:45:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478503564775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478503564775424[0;39m ==> Parameters: 
2022-07-27 20:45:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478503564775424[0;39m <==    Updates: 0
2022-07-27 20:45:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478503564775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:45:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207478524502740992[0;39m 更新电子书下的文档数据开始
2022-07-27 20:45:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478524502740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:45:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478524502740992[0;39m ==> Parameters: 
2022-07-27 20:45:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478524502740992[0;39m <==    Updates: 7
2022-07-27 20:45:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207478524502740992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:45:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478524511129600[0;39m 生成今日电子书快照开始
2022-07-27 20:45:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478524511129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478524511129600[0;39m ==> Parameters: 
2022-07-27 20:45:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478524511129600[0;39m <==    Updates: 0
2022-07-27 20:45:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478524511129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:45:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478545453289472[0;39m 生成今日电子书快照开始
2022-07-27 20:45:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478545453289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478545453289472[0;39m ==> Parameters: 
2022-07-27 20:45:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478545453289472[0;39m <==    Updates: 0
2022-07-27 20:45:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478545453289472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:45:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478566429003776[0;39m 生成今日电子书快照开始
2022-07-27 20:45:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478566429003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478566429003776[0;39m ==> Parameters: 
2022-07-27 20:45:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478566429003776[0;39m <==    Updates: 0
2022-07-27 20:45:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478566429003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:45:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478587450855424[0;39m 生成今日电子书快照开始
2022-07-27 20:45:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478587450855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478587450855424[0;39m ==> Parameters: 
2022-07-27 20:45:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478587450855424[0;39m <==    Updates: 0
2022-07-27 20:45:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478587450855424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:45:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478608393015296[0;39m 生成今日电子书快照开始
2022-07-27 20:45:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478608393015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:45:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478608393015296[0;39m ==> Parameters: 
2022-07-27 20:45:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478608393015296[0;39m <==    Updates: 0
2022-07-27 20:45:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478608393015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:46:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478629377118208[0;39m 生成今日电子书快照开始
2022-07-27 20:46:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478629377118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478629377118208[0;39m ==> Parameters: 
2022-07-27 20:46:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478629377118208[0;39m <==    Updates: 0
2022-07-27 20:46:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478629377118208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:46:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478650369609728[0;39m 生成今日电子书快照开始
2022-07-27 20:46:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478650369609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478650369609728[0;39m ==> Parameters: 
2022-07-27 20:46:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478650369609728[0;39m <==    Updates: 0
2022-07-27 20:46:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478650369609728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:46:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207478650377998336[0;39m 更新电子书下的文档数据开始
2022-07-27 20:46:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478650377998336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:46:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478650377998336[0;39m ==> Parameters: 
2022-07-27 20:46:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478650377998336[0;39m <==    Updates: 7
2022-07-27 20:46:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207478650377998336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:46:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478671290798080[0;39m 生成今日电子书快照开始
2022-07-27 20:46:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478671290798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478671290798080[0;39m ==> Parameters: 
2022-07-27 20:46:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478671290798080[0;39m <==    Updates: 0
2022-07-27 20:46:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478671290798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:46:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478692304261120[0;39m 生成今日电子书快照开始
2022-07-27 20:46:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478692304261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478692304261120[0;39m ==> Parameters: 
2022-07-27 20:46:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478692304261120[0;39m <==    Updates: 0
2022-07-27 20:46:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478692304261120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:46:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478713288364032[0;39m 生成今日电子书快照开始
2022-07-27 20:46:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478713288364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478713288364032[0;39m ==> Parameters: 
2022-07-27 20:46:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478713288364032[0;39m <==    Updates: 0
2022-07-27 20:46:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478713288364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:46:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478734234718208[0;39m 生成今日电子书快照开始
2022-07-27 20:46:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478734234718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478734234718208[0;39m ==> Parameters: 
2022-07-27 20:46:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478734234718208[0;39m <==    Updates: 0
2022-07-27 20:46:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478734234718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:46:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478755185266688[0;39m 生成今日电子书快照开始
2022-07-27 20:46:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478755185266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478755185266688[0;39m ==> Parameters: 
2022-07-27 20:46:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478755185266688[0;39m <==    Updates: 0
2022-07-27 20:46:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478755185266688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:46:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207478776152592384[0;39m 更新电子书下的文档数据开始
2022-07-27 20:46:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478776152592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:46:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478776152592384[0;39m ==> Parameters: 
2022-07-27 20:46:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478776152592384[0;39m <==    Updates: 7
2022-07-27 20:46:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207478776152592384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:46:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478776160980992[0;39m 生成今日电子书快照开始
2022-07-27 20:46:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478776160980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478776160980992[0;39m ==> Parameters: 
2022-07-27 20:46:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478776160980992[0;39m <==    Updates: 0
2022-07-27 20:46:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478776160980992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:46:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478797170249728[0;39m 生成今日电子书快照开始
2022-07-27 20:46:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478797170249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478797170249728[0;39m ==> Parameters: 
2022-07-27 20:46:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478797170249728[0;39m <==    Updates: 0
2022-07-27 20:46:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478797170249728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:46:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478818095632384[0;39m 生成今日电子书快照开始
2022-07-27 20:46:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478818095632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478818095632384[0;39m ==> Parameters: 
2022-07-27 20:46:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478818095632384[0;39m <==    Updates: 0
2022-07-27 20:46:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478818095632384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:46:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478839100706816[0;39m 生成今日电子书快照开始
2022-07-27 20:46:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478839100706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478839100706816[0;39m ==> Parameters: 
2022-07-27 20:46:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478839100706816[0;39m <==    Updates: 0
2022-07-27 20:46:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478839100706816[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:46:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478860072226816[0;39m 生成今日电子书快照开始
2022-07-27 20:46:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478860072226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:46:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478860072226816[0;39m ==> Parameters: 
2022-07-27 20:46:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478860072226816[0;39m <==    Updates: 0
2022-07-27 20:46:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478860072226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:47:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478881018580992[0;39m 生成今日电子书快照开始
2022-07-27 20:47:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478881018580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478881018580992[0;39m ==> Parameters: 
2022-07-27 20:47:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478881018580992[0;39m <==    Updates: 0
2022-07-27 20:47:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478881018580992[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-27 20:47:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207478901998489600[0;39m 更新电子书下的文档数据开始
2022-07-27 20:47:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478901998489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:47:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478901998489600[0;39m ==> Parameters: 
2022-07-27 20:47:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207478901998489600[0;39m <==    Updates: 7
2022-07-27 20:47:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207478901998489600[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-27 20:47:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478902019461120[0;39m 生成今日电子书快照开始
2022-07-27 20:47:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478902019461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478902019461120[0;39m ==> Parameters: 
2022-07-27 20:47:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478902019461120[0;39m <==    Updates: 0
2022-07-27 20:47:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478902019461120[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:47:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478922965815296[0;39m 生成今日电子书快照开始
2022-07-27 20:47:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478922965815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478922965815296[0;39m ==> Parameters: 
2022-07-27 20:47:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478922965815296[0;39m <==    Updates: 0
2022-07-27 20:47:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478922965815296[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 20:47:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478943962501120[0;39m 生成今日电子书快照开始
2022-07-27 20:47:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478943962501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478943962501120[0;39m ==> Parameters: 
2022-07-27 20:47:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478943962501120[0;39m <==    Updates: 0
2022-07-27 20:47:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478943962501120[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:47:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478964917243904[0;39m 生成今日电子书快照开始
2022-07-27 20:47:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478964917243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478964917243904[0;39m ==> Parameters: 
2022-07-27 20:47:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478964917243904[0;39m <==    Updates: 0
2022-07-27 20:47:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478964917243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:47:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207478985884569600[0;39m 生成今日电子书快照开始
2022-07-27 20:47:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478985884569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478985884569600[0;39m ==> Parameters: 
2022-07-27 20:47:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207478985884569600[0;39m <==    Updates: 0
2022-07-27 20:47:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207478985884569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:47:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479006843506688[0;39m 生成今日电子书快照开始
2022-07-27 20:47:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479006843506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479006843506688[0;39m ==> Parameters: 
2022-07-27 20:47:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479006843506688[0;39m <==    Updates: 0
2022-07-27 20:47:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479006843506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:47:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479027844386816[0;39m 生成今日电子书快照开始
2022-07-27 20:47:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479027844386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479027844386816[0;39m ==> Parameters: 
2022-07-27 20:47:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479027844386816[0;39m <==    Updates: 0
2022-07-27 20:47:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479027844386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:47:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207479027852775424[0;39m 更新电子书下的文档数据开始
2022-07-27 20:47:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479027852775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:47:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479027852775424[0;39m ==> Parameters: 
2022-07-27 20:47:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479027852775424[0;39m <==    Updates: 7
2022-07-27 20:47:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207479027852775424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:47:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479048824295424[0;39m 生成今日电子书快照开始
2022-07-27 20:47:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479048824295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479048824295424[0;39m ==> Parameters: 
2022-07-27 20:47:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479048824295424[0;39m <==    Updates: 0
2022-07-27 20:47:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479048824295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:47:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479069749678080[0;39m 生成今日电子书快照开始
2022-07-27 20:47:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479069749678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479069749678080[0;39m ==> Parameters: 
2022-07-27 20:47:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479069749678080[0;39m <==    Updates: 0
2022-07-27 20:47:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479069749678080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:47:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479090775724032[0;39m 生成今日电子书快照开始
2022-07-27 20:47:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479090775724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479090775724032[0;39m ==> Parameters: 
2022-07-27 20:47:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479090775724032[0;39m <==    Updates: 0
2022-07-27 20:47:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479090775724032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:47:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479111701106688[0;39m 生成今日电子书快照开始
2022-07-27 20:47:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479111701106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:47:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479111701106688[0;39m ==> Parameters: 
2022-07-27 20:47:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479111701106688[0;39m <==    Updates: 0
2022-07-27 20:47:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479111701106688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:48:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479132681015296[0;39m 生成今日电子书快照开始
2022-07-27 20:48:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479132681015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479132681015296[0;39m ==> Parameters: 
2022-07-27 20:48:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479132681015296[0;39m <==    Updates: 0
2022-07-27 20:48:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479132681015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207479153686089728[0;39m 更新电子书下的文档数据开始
2022-07-27 20:48:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479153686089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:48:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479153686089728[0;39m ==> Parameters: 
2022-07-27 20:48:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479153686089728[0;39m <==    Updates: 7
2022-07-27 20:48:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207479153686089728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:48:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479153694478336[0;39m 生成今日电子书快照开始
2022-07-27 20:48:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479153694478336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479153694478336[0;39m ==> Parameters: 
2022-07-27 20:48:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479153694478336[0;39m <==    Updates: 0
2022-07-27 20:48:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479153694478336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479174624055296[0;39m 生成今日电子书快照开始
2022-07-27 20:48:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479174624055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479174624055296[0;39m ==> Parameters: 
2022-07-27 20:48:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479174624055296[0;39m <==    Updates: 0
2022-07-27 20:48:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479174624055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479195599769600[0;39m 生成今日电子书快照开始
2022-07-27 20:48:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479195599769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479195599769600[0;39m ==> Parameters: 
2022-07-27 20:48:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479195599769600[0;39m <==    Updates: 0
2022-07-27 20:48:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479195599769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479216571289600[0;39m 生成今日电子书快照开始
2022-07-27 20:48:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479216571289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479216571289600[0;39m ==> Parameters: 
2022-07-27 20:48:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479216571289600[0;39m <==    Updates: 0
2022-07-27 20:48:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479216571289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479237538615296[0;39m 生成今日电子书快照开始
2022-07-27 20:48:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479237538615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479237538615296[0;39m ==> Parameters: 
2022-07-27 20:48:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479237538615296[0;39m <==    Updates: 0
2022-07-27 20:48:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479237538615296[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:48:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479258543689728[0;39m 生成今日电子书快照开始
2022-07-27 20:48:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479258543689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479258543689728[0;39m ==> Parameters: 
2022-07-27 20:48:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479258543689728[0;39m <==    Updates: 0
2022-07-27 20:48:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479258543689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479279469072384[0;39m 生成今日电子书快照开始
2022-07-27 20:48:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479279469072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479279469072384[0;39m ==> Parameters: 
2022-07-27 20:48:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479279469072384[0;39m <==    Updates: 0
2022-07-27 20:48:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479279469072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207479279477460992[0;39m 更新电子书下的文档数据开始
2022-07-27 20:48:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479279477460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:48:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479279477460992[0;39m ==> Parameters: 
2022-07-27 20:48:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479279477460992[0;39m <==    Updates: 7
2022-07-27 20:48:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207479279477460992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:48:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479300457369600[0;39m 生成今日电子书快照开始
2022-07-27 20:48:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479300457369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479300457369600[0;39m ==> Parameters: 
2022-07-27 20:48:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479300457369600[0;39m <==    Updates: 0
2022-07-27 20:48:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479300457369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479321420500992[0;39m 生成今日电子书快照开始
2022-07-27 20:48:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479321420500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479321420500992[0;39m ==> Parameters: 
2022-07-27 20:48:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479321420500992[0;39m <==    Updates: 0
2022-07-27 20:48:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479321420500992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:48:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479342425575424[0;39m 生成今日电子书快照开始
2022-07-27 20:48:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479342425575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479342425575424[0;39m ==> Parameters: 
2022-07-27 20:48:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479342425575424[0;39m <==    Updates: 0
2022-07-27 20:48:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479342425575424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:48:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479363359346688[0;39m 生成今日电子书快照开始
2022-07-27 20:48:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479363359346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:48:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479363359346688[0;39m ==> Parameters: 
2022-07-27 20:48:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479363359346688[0;39m <==    Updates: 0
2022-07-27 20:48:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479363359346688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:49:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479384347643904[0;39m 生成今日电子书快照开始
2022-07-27 20:49:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479384347643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479384347643904[0;39m ==> Parameters: 
2022-07-27 20:49:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479384347643904[0;39m <==    Updates: 0
2022-07-27 20:49:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479384347643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:49:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207479405319163904[0;39m 更新电子书下的文档数据开始
2022-07-27 20:49:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479405319163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:49:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479405319163904[0;39m ==> Parameters: 
2022-07-27 20:49:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479405319163904[0;39m <==    Updates: 7
2022-07-27 20:49:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207479405319163904[0;39m 更新电子书下的文档数据结束，耗时：7 毫秒
2022-07-27 20:49:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479405348524032[0;39m 生成今日电子书快照开始
2022-07-27 20:49:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479405348524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479405348524032[0;39m ==> Parameters: 
2022-07-27 20:49:05.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479405348524032[0;39m <==    Updates: 0
2022-07-27 20:49:05.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479405348524032[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 20:49:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479426278100992[0;39m 生成今日电子书快照开始
2022-07-27 20:49:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479426278100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479426278100992[0;39m ==> Parameters: 
2022-07-27 20:49:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479426278100992[0;39m <==    Updates: 0
2022-07-27 20:49:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479426278100992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:49:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479447278981120[0;39m 生成今日电子书快照开始
2022-07-27 20:49:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479447278981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479447278981120[0;39m ==> Parameters: 
2022-07-27 20:49:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479447278981120[0;39m <==    Updates: 0
2022-07-27 20:49:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479447278981120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:49:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479468221140992[0;39m 生成今日电子书快照开始
2022-07-27 20:49:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479468221140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479468221140992[0;39m ==> Parameters: 
2022-07-27 20:49:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479468221140992[0;39m <==    Updates: 0
2022-07-27 20:49:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479468221140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:49:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479489196855296[0;39m 生成今日电子书快照开始
2022-07-27 20:49:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479489196855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479489196855296[0;39m ==> Parameters: 
2022-07-27 20:49:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479489196855296[0;39m <==    Updates: 0
2022-07-27 20:49:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479489196855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:49:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479510180958208[0;39m 生成今日电子书快照开始
2022-07-27 20:49:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479510180958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479510180958208[0;39m ==> Parameters: 
2022-07-27 20:49:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479510180958208[0;39m <==    Updates: 0
2022-07-27 20:49:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479510180958208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:49:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207479531114729472[0;39m 更新电子书下的文档数据开始
2022-07-27 20:49:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479531114729472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:49:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479531114729472[0;39m ==> Parameters: 
2022-07-27 20:49:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479531114729472[0;39m <==    Updates: 7
2022-07-27 20:49:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207479531114729472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:49:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479531123118080[0;39m 生成今日电子书快照开始
2022-07-27 20:49:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479531123118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479531123118080[0;39m ==> Parameters: 
2022-07-27 20:49:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479531123118080[0;39m <==    Updates: 0
2022-07-27 20:49:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479531123118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:49:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479552090443776[0;39m 生成今日电子书快照开始
2022-07-27 20:49:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479552090443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479552090443776[0;39m ==> Parameters: 
2022-07-27 20:49:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479552090443776[0;39m <==    Updates: 0
2022-07-27 20:49:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479552090443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:49:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479573078740992[0;39m 生成今日电子书快照开始
2022-07-27 20:49:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479573078740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479573078740992[0;39m ==> Parameters: 
2022-07-27 20:49:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479573078740992[0;39m <==    Updates: 0
2022-07-27 20:49:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479573078740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:49:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479594071232512[0;39m 生成今日电子书快照开始
2022-07-27 20:49:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479594071232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479594071232512[0;39m ==> Parameters: 
2022-07-27 20:49:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479594071232512[0;39m <==    Updates: 0
2022-07-27 20:49:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479594071232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:49:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479615042752512[0;39m 生成今日电子书快照开始
2022-07-27 20:49:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479615042752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:49:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479615042752512[0;39m ==> Parameters: 
2022-07-27 20:49:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479615042752512[0;39m <==    Updates: 0
2022-07-27 20:49:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479615042752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479635984912384[0;39m 生成今日电子书快照开始
2022-07-27 20:50:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479635984912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479635984912384[0;39m ==> Parameters: 
2022-07-27 20:50:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479635984912384[0;39m <==    Updates: 0
2022-07-27 20:50:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479635984912384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:50:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207479656960626688[0;39m 更新电子书下的文档数据开始
2022-07-27 20:50:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479656960626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:50:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479656960626688[0;39m ==> Parameters: 
2022-07-27 20:50:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479656960626688[0;39m <==    Updates: 7
2022-07-27 20:50:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207479656960626688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:50:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479656969015296[0;39m 生成今日电子书快照开始
2022-07-27 20:50:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479656969015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479656969015296[0;39m ==> Parameters: 
2022-07-27 20:50:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479656969015296[0;39m <==    Updates: 0
2022-07-27 20:50:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479656969015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479677969895424[0;39m 生成今日电子书快照开始
2022-07-27 20:50:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479677969895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479677969895424[0;39m ==> Parameters: 
2022-07-27 20:50:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479677969895424[0;39m <==    Updates: 0
2022-07-27 20:50:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479677969895424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:50:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479698907860992[0;39m 生成今日电子书快照开始
2022-07-27 20:50:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479698907860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479698907860992[0;39m ==> Parameters: 
2022-07-27 20:50:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479698907860992[0;39m <==    Updates: 0
2022-07-27 20:50:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479698907860992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479719917129728[0;39m 生成今日电子书快照开始
2022-07-27 20:50:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479719917129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479719917129728[0;39m ==> Parameters: 
2022-07-27 20:50:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479719917129728[0;39m <==    Updates: 0
2022-07-27 20:50:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479719917129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479740892844032[0;39m 生成今日电子书快照开始
2022-07-27 20:50:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479740892844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479740892844032[0;39m ==> Parameters: 
2022-07-27 20:50:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479740892844032[0;39m <==    Updates: 0
2022-07-27 20:50:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479740892844032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479761843392512[0;39m 生成今日电子书快照开始
2022-07-27 20:50:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479761843392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479761843392512[0;39m ==> Parameters: 
2022-07-27 20:50:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479761843392512[0;39m <==    Updates: 0
2022-07-27 20:50:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479761843392512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207479782810718208[0;39m 更新电子书下的文档数据开始
2022-07-27 20:50:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479782810718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:50:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479782810718208[0;39m ==> Parameters: 
2022-07-27 20:50:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479782810718208[0;39m <==    Updates: 7
2022-07-27 20:50:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207479782810718208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:50:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479782819106816[0;39m 生成今日电子书快照开始
2022-07-27 20:50:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479782819106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479782819106816[0;39m ==> Parameters: 
2022-07-27 20:50:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479782819106816[0;39m <==    Updates: 0
2022-07-27 20:50:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479782819106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479803761266688[0;39m 生成今日电子书快照开始
2022-07-27 20:50:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479803761266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479803761266688[0;39m ==> Parameters: 
2022-07-27 20:50:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479803761266688[0;39m <==    Updates: 0
2022-07-27 20:50:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479803761266688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:50:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479824720203776[0;39m 生成今日电子书快照开始
2022-07-27 20:50:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479824720203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479824720203776[0;39m ==> Parameters: 
2022-07-27 20:50:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479824720203776[0;39m <==    Updates: 0
2022-07-27 20:50:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479824720203776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479845712695296[0;39m 生成今日电子书快照开始
2022-07-27 20:50:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479845712695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479845712695296[0;39m ==> Parameters: 
2022-07-27 20:50:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479845712695296[0;39m <==    Updates: 0
2022-07-27 20:50:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479845712695296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:50:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479866675826688[0;39m 生成今日电子书快照开始
2022-07-27 20:50:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479866675826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:50:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479866675826688[0;39m ==> Parameters: 
2022-07-27 20:50:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479866675826688[0;39m <==    Updates: 0
2022-07-27 20:50:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479866675826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479887693484032[0;39m 生成今日电子书快照开始
2022-07-27 20:51:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479887693484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479887693484032[0;39m ==> Parameters: 
2022-07-27 20:51:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479887693484032[0;39m <==    Updates: 0
2022-07-27 20:51:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479887693484032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:51:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479908639838208[0;39m 生成今日电子书快照开始
2022-07-27 20:51:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479908639838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479908639838208[0;39m ==> Parameters: 
2022-07-27 20:51:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479908639838208[0;39m <==    Updates: 0
2022-07-27 20:51:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479908639838208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 20:51:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207479908665004032[0;39m 更新电子书下的文档数据开始
2022-07-27 20:51:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479908665004032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:51:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479908665004032[0;39m ==> Parameters: 
2022-07-27 20:51:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207479908665004032[0;39m <==    Updates: 7
2022-07-27 20:51:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207479908665004032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:51:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479929611358208[0;39m 生成今日电子书快照开始
2022-07-27 20:51:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479929611358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479929611358208[0;39m ==> Parameters: 
2022-07-27 20:51:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479929611358208[0;39m <==    Updates: 0
2022-07-27 20:51:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479929611358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479950574489600[0;39m 生成今日电子书快照开始
2022-07-27 20:51:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479950574489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479950574489600[0;39m ==> Parameters: 
2022-07-27 20:51:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479950574489600[0;39m <==    Updates: 0
2022-07-27 20:51:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479950574489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479971554398208[0;39m 生成今日电子书快照开始
2022-07-27 20:51:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479971554398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479971554398208[0;39m ==> Parameters: 
2022-07-27 20:51:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479971554398208[0;39m <==    Updates: 0
2022-07-27 20:51:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479971554398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207479992488169472[0;39m 生成今日电子书快照开始
2022-07-27 20:51:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479992488169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479992488169472[0;39m ==> Parameters: 
2022-07-27 20:51:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207479992488169472[0;39m <==    Updates: 0
2022-07-27 20:51:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207479992488169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480013518409728[0;39m 生成今日电子书快照开始
2022-07-27 20:51:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480013518409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480013518409728[0;39m ==> Parameters: 
2022-07-27 20:51:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480013518409728[0;39m <==    Updates: 0
2022-07-27 20:51:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480013518409728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:51:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480034485735424[0;39m 生成今日电子书快照开始
2022-07-27 20:51:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480034485735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480034485735424[0;39m ==> Parameters: 
2022-07-27 20:51:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480034485735424[0;39m <==    Updates: 0
2022-07-27 20:51:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480034485735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207480034494124032[0;39m 更新电子书下的文档数据开始
2022-07-27 20:51:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480034494124032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:51:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480034494124032[0;39m ==> Parameters: 
2022-07-27 20:51:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480034494124032[0;39m <==    Updates: 7
2022-07-27 20:51:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207480034494124032[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:51:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480055461449728[0;39m 生成今日电子书快照开始
2022-07-27 20:51:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480055461449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480055461449728[0;39m ==> Parameters: 
2022-07-27 20:51:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480055461449728[0;39m <==    Updates: 0
2022-07-27 20:51:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480055461449728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480076437164032[0;39m 生成今日电子书快照开始
2022-07-27 20:51:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480076437164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480076437164032[0;39m ==> Parameters: 
2022-07-27 20:51:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480076437164032[0;39m <==    Updates: 0
2022-07-27 20:51:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480076437164032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480097354158080[0;39m 生成今日电子书快照开始
2022-07-27 20:51:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480097354158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480097354158080[0;39m ==> Parameters: 
2022-07-27 20:51:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480097354158080[0;39m <==    Updates: 0
2022-07-27 20:51:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480097354158080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:51:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480118376009728[0;39m 生成今日电子书快照开始
2022-07-27 20:51:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480118376009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:51:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480118376009728[0;39m ==> Parameters: 
2022-07-27 20:51:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480118376009728[0;39m <==    Updates: 0
2022-07-27 20:51:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480118376009728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:52:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480139297198080[0;39m 生成今日电子书快照开始
2022-07-27 20:52:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480139297198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480139297198080[0;39m ==> Parameters: 
2022-07-27 20:52:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480139297198080[0;39m <==    Updates: 0
2022-07-27 20:52:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480139297198080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:52:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207480160302272512[0;39m 更新电子书下的文档数据开始
2022-07-27 20:52:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480160302272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:52:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480160302272512[0;39m ==> Parameters: 
2022-07-27 20:52:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480160302272512[0;39m <==    Updates: 7
2022-07-27 20:52:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207480160302272512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:52:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480160310661120[0;39m 生成今日电子书快照开始
2022-07-27 20:52:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480160310661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480160310661120[0;39m ==> Parameters: 
2022-07-27 20:52:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480160310661120[0;39m <==    Updates: 0
2022-07-27 20:52:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480160310661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:52:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480181248626688[0;39m 生成今日电子书快照开始
2022-07-27 20:52:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480181248626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480181248626688[0;39m ==> Parameters: 
2022-07-27 20:52:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480181248626688[0;39m <==    Updates: 0
2022-07-27 20:52:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480181248626688[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-27 20:52:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480202245312512[0;39m 生成今日电子书快照开始
2022-07-27 20:52:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480202245312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480202245312512[0;39m ==> Parameters: 
2022-07-27 20:52:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480202245312512[0;39m <==    Updates: 0
2022-07-27 20:52:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480202245312512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:52:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480223187472384[0;39m 生成今日电子书快照开始
2022-07-27 20:52:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480223187472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480223187472384[0;39m ==> Parameters: 
2022-07-27 20:52:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480223187472384[0;39m <==    Updates: 0
2022-07-27 20:52:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480223187472384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:52:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480244184158208[0;39m 生成今日电子书快照开始
2022-07-27 20:52:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480244184158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480244184158208[0;39m ==> Parameters: 
2022-07-27 20:52:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480244184158208[0;39m <==    Updates: 0
2022-07-27 20:52:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480244184158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:52:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480265122123776[0;39m 生成今日电子书快照开始
2022-07-27 20:52:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480265122123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480265122123776[0;39m ==> Parameters: 
2022-07-27 20:52:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480265122123776[0;39m <==    Updates: 0
2022-07-27 20:52:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480265122123776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:52:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207480286143975424[0;39m 更新电子书下的文档数据开始
2022-07-27 20:52:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480286143975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:52:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480286143975424[0;39m ==> Parameters: 
2022-07-27 20:52:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480286143975424[0;39m <==    Updates: 7
2022-07-27 20:52:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207480286143975424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:52:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480286152364032[0;39m 生成今日电子书快照开始
2022-07-27 20:52:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480286152364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480286152364032[0;39m ==> Parameters: 
2022-07-27 20:52:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480286152364032[0;39m <==    Updates: 0
2022-07-27 20:52:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480286152364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:52:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480307086135296[0;39m 生成今日电子书快照开始
2022-07-27 20:52:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480307086135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480307086135296[0;39m ==> Parameters: 
2022-07-27 20:52:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480307086135296[0;39m <==    Updates: 0
2022-07-27 20:52:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480307086135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:52:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480328049266688[0;39m 生成今日电子书快照开始
2022-07-27 20:52:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480328049266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480328049266688[0;39m ==> Parameters: 
2022-07-27 20:52:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480328049266688[0;39m <==    Updates: 0
2022-07-27 20:52:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480328049266688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:52:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480349058535424[0;39m 生成今日电子书快照开始
2022-07-27 20:52:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480349058535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480349058535424[0;39m ==> Parameters: 
2022-07-27 20:52:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480349058535424[0;39m <==    Updates: 0
2022-07-27 20:52:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480349058535424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:52:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480369996500992[0;39m 生成今日电子书快照开始
2022-07-27 20:52:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480369996500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:52:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480369996500992[0;39m ==> Parameters: 
2022-07-27 20:52:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480369996500992[0;39m <==    Updates: 0
2022-07-27 20:52:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480369996500992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:53:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480390959632384[0;39m 生成今日电子书快照开始
2022-07-27 20:53:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480390959632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480390959632384[0;39m ==> Parameters: 
2022-07-27 20:53:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480390959632384[0;39m <==    Updates: 0
2022-07-27 20:53:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480390959632384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 20:53:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207480411956318208[0;39m 更新电子书下的文档数据开始
2022-07-27 20:53:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480411956318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:53:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480411956318208[0;39m ==> Parameters: 
2022-07-27 20:53:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480411956318208[0;39m <==    Updates: 7
2022-07-27 20:53:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207480411956318208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:53:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480411960512512[0;39m 生成今日电子书快照开始
2022-07-27 20:53:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480411960512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480411960512512[0;39m ==> Parameters: 
2022-07-27 20:53:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480411960512512[0;39m <==    Updates: 0
2022-07-27 20:53:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480411960512512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:53:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480432948809728[0;39m 生成今日电子书快照开始
2022-07-27 20:53:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480432948809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480432948809728[0;39m ==> Parameters: 
2022-07-27 20:53:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480432948809728[0;39m <==    Updates: 0
2022-07-27 20:53:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480432948809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:53:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480453895163904[0;39m 生成今日电子书快照开始
2022-07-27 20:53:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480453895163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480453895163904[0;39m ==> Parameters: 
2022-07-27 20:53:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480453895163904[0;39m <==    Updates: 0
2022-07-27 20:53:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480453895163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:53:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480474837323776[0;39m 生成今日电子书快照开始
2022-07-27 20:53:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480474837323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480474837323776[0;39m ==> Parameters: 
2022-07-27 20:53:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480474837323776[0;39m <==    Updates: 0
2022-07-27 20:53:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480474837323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:53:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480495867564032[0;39m 生成今日电子书快照开始
2022-07-27 20:53:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480495867564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480495867564032[0;39m ==> Parameters: 
2022-07-27 20:53:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480495867564032[0;39m <==    Updates: 0
2022-07-27 20:53:25.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480495867564032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:53:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480516784558080[0;39m 生成今日电子书快照开始
2022-07-27 20:53:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480516784558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480516784558080[0;39m ==> Parameters: 
2022-07-27 20:53:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480516784558080[0;39m <==    Updates: 0
2022-07-27 20:53:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480516784558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:53:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480537781243904[0;39m 生成今日电子书快照开始
2022-07-27 20:53:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480537781243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480537781243904[0;39m ==> Parameters: 
2022-07-27 20:53:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480537781243904[0;39m <==    Updates: 0
2022-07-27 20:53:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480537781243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:53:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207480537789632512[0;39m 更新电子书下的文档数据开始
2022-07-27 20:53:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480537789632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:53:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480537789632512[0;39m ==> Parameters: 
2022-07-27 20:53:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480537789632512[0;39m <==    Updates: 7
2022-07-27 20:53:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207480537789632512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:53:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480558782124032[0;39m 生成今日电子书快照开始
2022-07-27 20:53:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480558782124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480558782124032[0;39m ==> Parameters: 
2022-07-27 20:53:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480558782124032[0;39m <==    Updates: 0
2022-07-27 20:53:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480558782124032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:53:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480579707506688[0;39m 生成今日电子书快照开始
2022-07-27 20:53:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480579707506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480579707506688[0;39m ==> Parameters: 
2022-07-27 20:53:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480579707506688[0;39m <==    Updates: 0
2022-07-27 20:53:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480579707506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:53:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480600708386816[0;39m 生成今日电子书快照开始
2022-07-27 20:53:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480600708386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480600708386816[0;39m ==> Parameters: 
2022-07-27 20:53:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480600708386816[0;39m <==    Updates: 0
2022-07-27 20:53:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480600708386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:53:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480621650546688[0;39m 生成今日电子书快照开始
2022-07-27 20:53:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480621650546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:53:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480621650546688[0;39m ==> Parameters: 
2022-07-27 20:53:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480621650546688[0;39m <==    Updates: 0
2022-07-27 20:53:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480621650546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480642655621120[0;39m 生成今日电子书快照开始
2022-07-27 20:54:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480642655621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480642655621120[0;39m ==> Parameters: 
2022-07-27 20:54:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480642655621120[0;39m <==    Updates: 0
2022-07-27 20:54:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480642655621120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:54:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480663585198080[0;39m 生成今日电子书快照开始
2022-07-27 20:54:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480663585198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480663585198080[0;39m ==> Parameters: 
2022-07-27 20:54:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480663585198080[0;39m <==    Updates: 0
2022-07-27 20:54:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480663585198080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207480663593586688[0;39m 更新电子书下的文档数据开始
2022-07-27 20:54:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480663593586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:54:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480663593586688[0;39m ==> Parameters: 
2022-07-27 20:54:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480663593586688[0;39m <==    Updates: 7
2022-07-27 20:54:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207480663593586688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:54:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480684594466816[0;39m 生成今日电子书快照开始
2022-07-27 20:54:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480684594466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480684594466816[0;39m ==> Parameters: 
2022-07-27 20:54:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480684594466816[0;39m <==    Updates: 0
2022-07-27 20:54:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480684594466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480705574375424[0;39m 生成今日电子书快照开始
2022-07-27 20:54:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480705574375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480705574375424[0;39m ==> Parameters: 
2022-07-27 20:54:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480705574375424[0;39m <==    Updates: 0
2022-07-27 20:54:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480705574375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480726533312512[0;39m 生成今日电子书快照开始
2022-07-27 20:54:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480726533312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480726533312512[0;39m ==> Parameters: 
2022-07-27 20:54:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480726533312512[0;39m <==    Updates: 0
2022-07-27 20:54:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480726533312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480747479666688[0;39m 生成今日电子书快照开始
2022-07-27 20:54:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480747479666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480747479666688[0;39m ==> Parameters: 
2022-07-27 20:54:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480747479666688[0;39m <==    Updates: 0
2022-07-27 20:54:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480747479666688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:54:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480768476352512[0;39m 生成今日电子书快照开始
2022-07-27 20:54:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480768476352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480768476352512[0;39m ==> Parameters: 
2022-07-27 20:54:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480768476352512[0;39m <==    Updates: 0
2022-07-27 20:54:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480768476352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207480789426900992[0;39m 更新电子书下的文档数据开始
2022-07-27 20:54:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480789426900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:54:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480789426900992[0;39m ==> Parameters: 
2022-07-27 20:54:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480789426900992[0;39m <==    Updates: 7
2022-07-27 20:54:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207480789426900992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:54:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480789435289600[0;39m 生成今日电子书快照开始
2022-07-27 20:54:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480789435289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480789435289600[0;39m ==> Parameters: 
2022-07-27 20:54:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480789435289600[0;39m <==    Updates: 0
2022-07-27 20:54:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480789435289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480810394226688[0;39m 生成今日电子书快照开始
2022-07-27 20:54:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480810394226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480810394226688[0;39m ==> Parameters: 
2022-07-27 20:54:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480810394226688[0;39m <==    Updates: 0
2022-07-27 20:54:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480810394226688[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:54:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480831407689728[0;39m 生成今日电子书快照开始
2022-07-27 20:54:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480831407689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480831407689728[0;39m ==> Parameters: 
2022-07-27 20:54:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480831407689728[0;39m <==    Updates: 0
2022-07-27 20:54:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480831407689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480852333072384[0;39m 生成今日电子书快照开始
2022-07-27 20:54:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480852333072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480852333072384[0;39m ==> Parameters: 
2022-07-27 20:54:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480852333072384[0;39m <==    Updates: 0
2022-07-27 20:54:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480852333072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:54:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480873338146816[0;39m 生成今日电子书快照开始
2022-07-27 20:54:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480873338146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:54:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480873338146816[0;39m ==> Parameters: 
2022-07-27 20:54:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480873338146816[0;39m <==    Updates: 0
2022-07-27 20:54:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480873338146816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:55:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480894280306688[0;39m 生成今日电子书快照开始
2022-07-27 20:55:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480894280306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480894280306688[0;39m ==> Parameters: 
2022-07-27 20:55:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480894280306688[0;39m <==    Updates: 0
2022-07-27 20:55:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480894280306688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:55:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207480915272798208[0;39m 更新电子书下的文档数据开始
2022-07-27 20:55:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480915272798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:55:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480915272798208[0;39m ==> Parameters: 
2022-07-27 20:55:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207480915272798208[0;39m <==    Updates: 7
2022-07-27 20:55:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207480915272798208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:55:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480915281186816[0;39m 生成今日电子书快照开始
2022-07-27 20:55:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480915281186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480915281186816[0;39m ==> Parameters: 
2022-07-27 20:55:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480915281186816[0;39m <==    Updates: 0
2022-07-27 20:55:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480915281186816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:55:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480936235929600[0;39m 生成今日电子书快照开始
2022-07-27 20:55:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480936235929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480936235929600[0;39m ==> Parameters: 
2022-07-27 20:55:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480936235929600[0;39m <==    Updates: 0
2022-07-27 20:55:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480936235929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:55:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480957190672384[0;39m 生成今日电子书快照开始
2022-07-27 20:55:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480957190672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480957190672384[0;39m ==> Parameters: 
2022-07-27 20:55:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480957190672384[0;39m <==    Updates: 0
2022-07-27 20:55:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480957190672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:55:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480978187358208[0;39m 生成今日电子书快照开始
2022-07-27 20:55:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480978187358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480978187358208[0;39m ==> Parameters: 
2022-07-27 20:55:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480978187358208[0;39m <==    Updates: 0
2022-07-27 20:55:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480978187358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:55:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207480999171461120[0;39m 生成今日电子书快照开始
2022-07-27 20:55:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480999171461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480999171461120[0;39m ==> Parameters: 
2022-07-27 20:55:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207480999171461120[0;39m <==    Updates: 0
2022-07-27 20:55:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207480999171461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:55:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481020105232384[0;39m 生成今日电子书快照开始
2022-07-27 20:55:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481020105232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481020105232384[0;39m ==> Parameters: 
2022-07-27 20:55:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481020105232384[0;39m <==    Updates: 0
2022-07-27 20:55:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481020105232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:55:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481041068363776[0;39m 生成今日电子书快照开始
2022-07-27 20:55:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481041068363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481041068363776[0;39m ==> Parameters: 
2022-07-27 20:55:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481041068363776[0;39m <==    Updates: 0
2022-07-27 20:55:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481041068363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:55:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207481041076752384[0;39m 更新电子书下的文档数据开始
2022-07-27 20:55:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481041076752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:55:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481041076752384[0;39m ==> Parameters: 
2022-07-27 20:55:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481041076752384[0;39m <==    Updates: 7
2022-07-27 20:55:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207481041076752384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:55:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481062052466688[0;39m 生成今日电子书快照开始
2022-07-27 20:55:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481062052466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481062052466688[0;39m ==> Parameters: 
2022-07-27 20:55:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481062052466688[0;39m <==    Updates: 0
2022-07-27 20:55:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481062052466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:55:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481083070124032[0;39m 生成今日电子书快照开始
2022-07-27 20:55:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481083070124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481083070124032[0;39m ==> Parameters: 
2022-07-27 20:55:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481083070124032[0;39m <==    Updates: 0
2022-07-27 20:55:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481083070124032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:55:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481104012283904[0;39m 生成今日电子书快照开始
2022-07-27 20:55:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481104012283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481104012283904[0;39m ==> Parameters: 
2022-07-27 20:55:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481104012283904[0;39m <==    Updates: 0
2022-07-27 20:55:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481104012283904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:55:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481124958638080[0;39m 生成今日电子书快照开始
2022-07-27 20:55:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481124958638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:55:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481124958638080[0;39m ==> Parameters: 
2022-07-27 20:55:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481124958638080[0;39m <==    Updates: 0
2022-07-27 20:55:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481124958638080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:56:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481145976295424[0;39m 生成今日电子书快照开始
2022-07-27 20:56:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481145976295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481145976295424[0;39m ==> Parameters: 
2022-07-27 20:56:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481145976295424[0;39m <==    Updates: 0
2022-07-27 20:56:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481145976295424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:56:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207481166914260992[0;39m 更新电子书下的文档数据开始
2022-07-27 20:56:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481166914260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:56:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481166914260992[0;39m ==> Parameters: 
2022-07-27 20:56:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481166914260992[0;39m <==    Updates: 7
2022-07-27 20:56:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207481166914260992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:56:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481166922649600[0;39m 生成今日电子书快照开始
2022-07-27 20:56:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481166922649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481166922649600[0;39m ==> Parameters: 
2022-07-27 20:56:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481166922649600[0;39m <==    Updates: 0
2022-07-27 20:56:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481166922649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:56:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481187915141120[0;39m 生成今日电子书快照开始
2022-07-27 20:56:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481187915141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481187915141120[0;39m ==> Parameters: 
2022-07-27 20:56:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481187915141120[0;39m <==    Updates: 0
2022-07-27 20:56:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481187915141120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:56:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481208836329472[0;39m 生成今日电子书快照开始
2022-07-27 20:56:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481208836329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481208836329472[0;39m ==> Parameters: 
2022-07-27 20:56:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481208836329472[0;39m <==    Updates: 0
2022-07-27 20:56:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481208836329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:56:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481229807849472[0;39m 生成今日电子书快照开始
2022-07-27 20:56:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481229807849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481229807849472[0;39m ==> Parameters: 
2022-07-27 20:56:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481229807849472[0;39m <==    Updates: 0
2022-07-27 20:56:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481229807849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:56:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481250804535296[0;39m 生成今日电子书快照开始
2022-07-27 20:56:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481250804535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481250804535296[0;39m ==> Parameters: 
2022-07-27 20:56:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481250804535296[0;39m <==    Updates: 0
2022-07-27 20:56:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481250804535296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:56:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481271805415424[0;39m 生成今日电子书快照开始
2022-07-27 20:56:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481271805415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481271805415424[0;39m ==> Parameters: 
2022-07-27 20:56:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481271805415424[0;39m <==    Updates: 0
2022-07-27 20:56:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481271805415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:56:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481292739186688[0;39m 生成今日电子书快照开始
2022-07-27 20:56:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481292739186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481292739186688[0;39m ==> Parameters: 
2022-07-27 20:56:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481292739186688[0;39m <==    Updates: 0
2022-07-27 20:56:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481292739186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:56:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207481292747575296[0;39m 更新电子书下的文档数据开始
2022-07-27 20:56:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481292747575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:56:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481292747575296[0;39m ==> Parameters: 
2022-07-27 20:56:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481292747575296[0;39m <==    Updates: 7
2022-07-27 20:56:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207481292747575296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:56:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481313748455424[0;39m 生成今日电子书快照开始
2022-07-27 20:56:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481313748455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481313748455424[0;39m ==> Parameters: 
2022-07-27 20:56:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481313748455424[0;39m <==    Updates: 0
2022-07-27 20:56:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481313748455424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:56:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481334682226688[0;39m 生成今日电子书快照开始
2022-07-27 20:56:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481334682226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481334682226688[0;39m ==> Parameters: 
2022-07-27 20:56:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481334682226688[0;39m <==    Updates: 0
2022-07-27 20:56:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481334682226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:56:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481355683106816[0;39m 生成今日电子书快照开始
2022-07-27 20:56:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481355683106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481355683106816[0;39m ==> Parameters: 
2022-07-27 20:56:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481355683106816[0;39m <==    Updates: 0
2022-07-27 20:56:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481355683106816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:56:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481376671404032[0;39m 生成今日电子书快照开始
2022-07-27 20:56:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481376671404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:56:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481376671404032[0;39m ==> Parameters: 
2022-07-27 20:56:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481376671404032[0;39m <==    Updates: 0
2022-07-27 20:56:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481376671404032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:57:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481397584203776[0;39m 生成今日电子书快照开始
2022-07-27 20:57:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481397584203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481397584203776[0;39m ==> Parameters: 
2022-07-27 20:57:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481397584203776[0;39m <==    Updates: 0
2022-07-27 20:57:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481397584203776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:57:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207481418606055424[0;39m 更新电子书下的文档数据开始
2022-07-27 20:57:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481418606055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:57:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481418606055424[0;39m ==> Parameters: 
2022-07-27 20:57:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481418606055424[0;39m <==    Updates: 7
2022-07-27 20:57:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207481418606055424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:57:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481418614444032[0;39m 生成今日电子书快照开始
2022-07-27 20:57:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481418614444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481418614444032[0;39m ==> Parameters: 
2022-07-27 20:57:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481418614444032[0;39m <==    Updates: 0
2022-07-27 20:57:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481418614444032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 20:57:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481439552409600[0;39m 生成今日电子书快照开始
2022-07-27 20:57:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481439552409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481439552409600[0;39m ==> Parameters: 
2022-07-27 20:57:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481439552409600[0;39m <==    Updates: 0
2022-07-27 20:57:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481439552409600[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 20:57:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481460544901120[0;39m 生成今日电子书快照开始
2022-07-27 20:57:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481460544901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481460544901120[0;39m ==> Parameters: 
2022-07-27 20:57:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481460544901120[0;39m <==    Updates: 0
2022-07-27 20:57:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481460544901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:57:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481481491255296[0;39m 生成今日电子书快照开始
2022-07-27 20:57:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481481491255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481481491255296[0;39m ==> Parameters: 
2022-07-27 20:57:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481481491255296[0;39m <==    Updates: 0
2022-07-27 20:57:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481481491255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:57:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481502475358208[0;39m 生成今日电子书快照开始
2022-07-27 20:57:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481502475358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481502475358208[0;39m ==> Parameters: 
2022-07-27 20:57:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481502475358208[0;39m <==    Updates: 0
2022-07-27 20:57:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481502475358208[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 20:57:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481523417518080[0;39m 生成今日电子书快照开始
2022-07-27 20:57:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481523417518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481523417518080[0;39m ==> Parameters: 
2022-07-27 20:57:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481523417518080[0;39m <==    Updates: 0
2022-07-27 20:57:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481523417518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:57:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207481544435175424[0;39m 更新电子书下的文档数据开始
2022-07-27 20:57:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481544435175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:57:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481544435175424[0;39m ==> Parameters: 
2022-07-27 20:57:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481544435175424[0;39m <==    Updates: 7
2022-07-27 20:57:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207481544435175424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:57:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481544439369728[0;39m 生成今日电子书快照开始
2022-07-27 20:57:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481544439369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481544439369728[0;39m ==> Parameters: 
2022-07-27 20:57:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481544439369728[0;39m <==    Updates: 0
2022-07-27 20:57:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481544439369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:57:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481565406695424[0;39m 生成今日电子书快照开始
2022-07-27 20:57:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481565406695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481565406695424[0;39m ==> Parameters: 
2022-07-27 20:57:40.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481565406695424[0;39m <==    Updates: 0
2022-07-27 20:57:40.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481565406695424[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 20:57:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481586348855296[0;39m 生成今日电子书快照开始
2022-07-27 20:57:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481586348855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481586348855296[0;39m ==> Parameters: 
2022-07-27 20:57:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481586348855296[0;39m <==    Updates: 0
2022-07-27 20:57:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481586348855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:57:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481607299403776[0;39m 生成今日电子书快照开始
2022-07-27 20:57:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481607299403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481607299403776[0;39m ==> Parameters: 
2022-07-27 20:57:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481607299403776[0;39m <==    Updates: 0
2022-07-27 20:57:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481607299403776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:57:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481628300283904[0;39m 生成今日电子书快照开始
2022-07-27 20:57:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481628300283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:57:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481628300283904[0;39m ==> Parameters: 
2022-07-27 20:57:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481628300283904[0;39m <==    Updates: 0
2022-07-27 20:57:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481628300283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:58:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481649246638080[0;39m 生成今日电子书快照开始
2022-07-27 20:58:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481649246638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481649246638080[0;39m ==> Parameters: 
2022-07-27 20:58:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481649246638080[0;39m <==    Updates: 0
2022-07-27 20:58:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481649246638080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:58:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481670239129600[0;39m 生成今日电子书快照开始
2022-07-27 20:58:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481670239129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481670239129600[0;39m ==> Parameters: 
2022-07-27 20:58:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481670239129600[0;39m <==    Updates: 0
2022-07-27 20:58:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481670239129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:58:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207481670247518208[0;39m 更新电子书下的文档数据开始
2022-07-27 20:58:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481670247518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:58:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481670247518208[0;39m ==> Parameters: 
2022-07-27 20:58:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481670247518208[0;39m <==    Updates: 7
2022-07-27 20:58:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207481670247518208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:58:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481691231621120[0;39m 生成今日电子书快照开始
2022-07-27 20:58:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481691231621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481691231621120[0;39m ==> Parameters: 
2022-07-27 20:58:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481691231621120[0;39m <==    Updates: 0
2022-07-27 20:58:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481691231621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:58:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481712169586688[0;39m 生成今日电子书快照开始
2022-07-27 20:58:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481712169586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481712169586688[0;39m ==> Parameters: 
2022-07-27 20:58:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481712169586688[0;39m <==    Updates: 0
2022-07-27 20:58:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481712169586688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:58:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481733183049728[0;39m 生成今日电子书快照开始
2022-07-27 20:58:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481733183049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481733183049728[0;39m ==> Parameters: 
2022-07-27 20:58:20.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481733183049728[0;39m <==    Updates: 0
2022-07-27 20:58:20.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481733183049728[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 20:58:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481754125209600[0;39m 生成今日电子书快照开始
2022-07-27 20:58:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481754125209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481754125209600[0;39m ==> Parameters: 
2022-07-27 20:58:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481754125209600[0;39m <==    Updates: 0
2022-07-27 20:58:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481754125209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:58:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481775121895424[0;39m 生成今日电子书快照开始
2022-07-27 20:58:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481775121895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481775121895424[0;39m ==> Parameters: 
2022-07-27 20:58:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481775121895424[0;39m <==    Updates: 0
2022-07-27 20:58:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481775121895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:58:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481796068249600[0;39m 生成今日电子书快照开始
2022-07-27 20:58:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481796068249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481796068249600[0;39m ==> Parameters: 
2022-07-27 20:58:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481796068249600[0;39m <==    Updates: 0
2022-07-27 20:58:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481796068249600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 20:58:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207481796080832512[0;39m 更新电子书下的文档数据开始
2022-07-27 20:58:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481796080832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:58:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481796080832512[0;39m ==> Parameters: 
2022-07-27 20:58:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481796080832512[0;39m <==    Updates: 7
2022-07-27 20:58:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207481796080832512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:58:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481817056546816[0;39m 生成今日电子书快照开始
2022-07-27 20:58:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481817056546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481817056546816[0;39m ==> Parameters: 
2022-07-27 20:58:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481817056546816[0;39m <==    Updates: 0
2022-07-27 20:58:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481817056546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:58:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481838036455424[0;39m 生成今日电子书快照开始
2022-07-27 20:58:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481838036455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481838036455424[0;39m ==> Parameters: 
2022-07-27 20:58:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481838036455424[0;39m <==    Updates: 0
2022-07-27 20:58:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481838036455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:58:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481859007975424[0;39m 生成今日电子书快照开始
2022-07-27 20:58:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481859007975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481859007975424[0;39m ==> Parameters: 
2022-07-27 20:58:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481859007975424[0;39m <==    Updates: 0
2022-07-27 20:58:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481859007975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:58:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481879924969472[0;39m 生成今日电子书快照开始
2022-07-27 20:58:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481879924969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:58:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481879924969472[0;39m ==> Parameters: 
2022-07-27 20:58:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481879924969472[0;39m <==    Updates: 0
2022-07-27 20:58:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481879924969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481900896489472[0;39m 生成今日电子书快照开始
2022-07-27 20:59:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481900896489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481900896489472[0;39m ==> Parameters: 
2022-07-27 20:59:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481900896489472[0;39m <==    Updates: 0
2022-07-27 20:59:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481900896489472[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 20:59:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481921905758208[0;39m 生成今日电子书快照开始
2022-07-27 20:59:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481921905758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481921905758208[0;39m ==> Parameters: 
2022-07-27 20:59:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481921905758208[0;39m <==    Updates: 0
2022-07-27 20:59:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481921905758208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207481921914146816[0;39m 更新电子书下的文档数据开始
2022-07-27 20:59:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481921914146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:59:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481921914146816[0;39m ==> Parameters: 
2022-07-27 20:59:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207481921914146816[0;39m <==    Updates: 7
2022-07-27 20:59:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207481921914146816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 20:59:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481942843723776[0;39m 生成今日电子书快照开始
2022-07-27 20:59:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481942843723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481942843723776[0;39m ==> Parameters: 
2022-07-27 20:59:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481942843723776[0;39m <==    Updates: 0
2022-07-27 20:59:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481942843723776[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 20:59:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481963857186816[0;39m 生成今日电子书快照开始
2022-07-27 20:59:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481963857186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481963857186816[0;39m ==> Parameters: 
2022-07-27 20:59:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481963857186816[0;39m <==    Updates: 0
2022-07-27 20:59:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481963857186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207481984803540992[0;39m 生成今日电子书快照开始
2022-07-27 20:59:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481984803540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481984803540992[0;39m ==> Parameters: 
2022-07-27 20:59:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207481984803540992[0;39m <==    Updates: 0
2022-07-27 20:59:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207481984803540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482005800226816[0;39m 生成今日电子书快照开始
2022-07-27 20:59:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482005800226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482005800226816[0;39m ==> Parameters: 
2022-07-27 20:59:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482005800226816[0;39m <==    Updates: 0
2022-07-27 20:59:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482005800226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482026750775296[0;39m 生成今日电子书快照开始
2022-07-27 20:59:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482026750775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482026750775296[0;39m ==> Parameters: 
2022-07-27 20:59:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482026750775296[0;39m <==    Updates: 0
2022-07-27 20:59:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482026750775296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482047726489600[0;39m 生成今日电子书快照开始
2022-07-27 20:59:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482047726489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482047726489600[0;39m ==> Parameters: 
2022-07-27 20:59:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482047726489600[0;39m <==    Updates: 0
2022-07-27 20:59:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482047726489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207482047734878208[0;39m 更新电子书下的文档数据开始
2022-07-27 20:59:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482047734878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 20:59:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482047734878208[0;39m ==> Parameters: 
2022-07-27 20:59:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482047734878208[0;39m <==    Updates: 7
2022-07-27 20:59:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207482047734878208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 20:59:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482068698009600[0;39m 生成今日电子书快照开始
2022-07-27 20:59:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482068698009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482068698009600[0;39m ==> Parameters: 
2022-07-27 20:59:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482068698009600[0;39m <==    Updates: 0
2022-07-27 20:59:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482068698009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482089648558080[0;39m 生成今日电子书快照开始
2022-07-27 20:59:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482089648558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482089648558080[0;39m ==> Parameters: 
2022-07-27 20:59:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482089648558080[0;39m <==    Updates: 0
2022-07-27 20:59:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482089648558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482110615883776[0;39m 生成今日电子书快照开始
2022-07-27 20:59:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482110615883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482110615883776[0;39m ==> Parameters: 
2022-07-27 20:59:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482110615883776[0;39m <==    Updates: 0
2022-07-27 20:59:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482110615883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 20:59:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482131591598080[0;39m 生成今日电子书快照开始
2022-07-27 20:59:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482131591598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 20:59:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482131591598080[0;39m ==> Parameters: 
2022-07-27 20:59:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482131591598080[0;39m <==    Updates: 0
2022-07-27 20:59:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482131591598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:00:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482152596672512[0;39m 生成今日电子书快照开始
2022-07-27 21:00:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482152596672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482152596672512[0;39m ==> Parameters: 
2022-07-27 21:00:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482152596672512[0;39m <==    Updates: 0
2022-07-27 21:00:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482152596672512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:00:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207482173551415296[0;39m 更新电子书下的文档数据开始
2022-07-27 21:00:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482173551415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:00:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482173551415296[0;39m ==> Parameters: 
2022-07-27 21:00:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482173551415296[0;39m <==    Updates: 7
2022-07-27 21:00:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207482173551415296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:00:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482173559803904[0;39m 生成今日电子书快照开始
2022-07-27 21:00:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482173559803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482173559803904[0;39m ==> Parameters: 
2022-07-27 21:00:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482173559803904[0;39m <==    Updates: 0
2022-07-27 21:00:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482173559803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:00:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482194548101120[0;39m 生成今日电子书快照开始
2022-07-27 21:00:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482194548101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482194548101120[0;39m ==> Parameters: 
2022-07-27 21:00:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482194548101120[0;39m <==    Updates: 0
2022-07-27 21:00:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482194548101120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:00:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482215511232512[0;39m 生成今日电子书快照开始
2022-07-27 21:00:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482215511232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482215511232512[0;39m ==> Parameters: 
2022-07-27 21:00:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482215511232512[0;39m <==    Updates: 0
2022-07-27 21:00:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482215511232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:00:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482236474363904[0;39m 生成今日电子书快照开始
2022-07-27 21:00:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482236474363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482236474363904[0;39m ==> Parameters: 
2022-07-27 21:00:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482236474363904[0;39m <==    Updates: 0
2022-07-27 21:00:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482236474363904[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 21:00:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482257408135168[0;39m 生成今日电子书快照开始
2022-07-27 21:00:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482257408135168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482257408135168[0;39m ==> Parameters: 
2022-07-27 21:00:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482257408135168[0;39m <==    Updates: 0
2022-07-27 21:00:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482257408135168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:00:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482278425792512[0;39m 生成今日电子书快照开始
2022-07-27 21:00:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482278425792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482278425792512[0;39m ==> Parameters: 
2022-07-27 21:00:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482278425792512[0;39m <==    Updates: 0
2022-07-27 21:00:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482278425792512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:00:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482299367952384[0;39m 生成今日电子书快照开始
2022-07-27 21:00:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482299367952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482299367952384[0;39m ==> Parameters: 
2022-07-27 21:00:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482299367952384[0;39m <==    Updates: 0
2022-07-27 21:00:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482299367952384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:00:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207482299376340992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:00:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482299376340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:00:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482299376340992[0;39m ==> Parameters: 
2022-07-27 21:00:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482299376340992[0;39m <==    Updates: 7
2022-07-27 21:00:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207482299376340992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:00:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482320326889472[0;39m 生成今日电子书快照开始
2022-07-27 21:00:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482320326889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482320326889472[0;39m ==> Parameters: 
2022-07-27 21:00:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482320326889472[0;39m <==    Updates: 0
2022-07-27 21:00:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482320326889472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:00:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482341315186688[0;39m 生成今日电子书快照开始
2022-07-27 21:00:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482341315186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482341315186688[0;39m ==> Parameters: 
2022-07-27 21:00:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482341315186688[0;39m <==    Updates: 0
2022-07-27 21:00:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482341315186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:00:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482362307678208[0;39m 生成今日电子书快照开始
2022-07-27 21:00:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482362307678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482362307678208[0;39m ==> Parameters: 
2022-07-27 21:00:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482362307678208[0;39m <==    Updates: 0
2022-07-27 21:00:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482362307678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:00:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482383304364032[0;39m 生成今日电子书快照开始
2022-07-27 21:00:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482383304364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:00:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482383304364032[0;39m ==> Parameters: 
2022-07-27 21:00:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482383304364032[0;39m <==    Updates: 0
2022-07-27 21:00:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482383304364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:01:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482404246523904[0;39m 生成今日电子书快照开始
2022-07-27 21:01:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482404246523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482404246523904[0;39m ==> Parameters: 
2022-07-27 21:01:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482404246523904[0;39m <==    Updates: 0
2022-07-27 21:01:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482404246523904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:01:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207482425197072384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:01:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482425197072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:01:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482425197072384[0;39m ==> Parameters: 
2022-07-27 21:01:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482425197072384[0;39m <==    Updates: 7
2022-07-27 21:01:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207482425197072384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:01:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482425201266688[0;39m 生成今日电子书快照开始
2022-07-27 21:01:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482425201266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482425201266688[0;39m ==> Parameters: 
2022-07-27 21:01:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482425201266688[0;39m <==    Updates: 0
2022-07-27 21:01:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482425201266688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:01:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482446164398080[0;39m 生成今日电子书快照开始
2022-07-27 21:01:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482446164398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482446164398080[0;39m ==> Parameters: 
2022-07-27 21:01:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482446164398080[0;39m <==    Updates: 0
2022-07-27 21:01:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482446164398080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:01:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482467165278208[0;39m 生成今日电子书快照开始
2022-07-27 21:01:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482467165278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482467165278208[0;39m ==> Parameters: 
2022-07-27 21:01:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482467165278208[0;39m <==    Updates: 0
2022-07-27 21:01:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482467165278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:01:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482488107438080[0;39m 生成今日电子书快照开始
2022-07-27 21:01:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482488107438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482488107438080[0;39m ==> Parameters: 
2022-07-27 21:01:20.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482488107438080[0;39m <==    Updates: 0
2022-07-27 21:01:20.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482488107438080[0;39m 生成今日电子书快照结束，耗时：18 毫秒
2022-07-27 21:01:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482509095735296[0;39m 生成今日电子书快照开始
2022-07-27 21:01:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482509095735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482509095735296[0;39m ==> Parameters: 
2022-07-27 21:01:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482509095735296[0;39m <==    Updates: 0
2022-07-27 21:01:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482509095735296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:01:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482530100809728[0;39m 生成今日电子书快照开始
2022-07-27 21:01:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482530100809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482530100809728[0;39m ==> Parameters: 
2022-07-27 21:01:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482530100809728[0;39m <==    Updates: 0
2022-07-27 21:01:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482530100809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:01:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482551038775296[0;39m 生成今日电子书快照开始
2022-07-27 21:01:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482551038775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482551038775296[0;39m ==> Parameters: 
2022-07-27 21:01:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482551038775296[0;39m <==    Updates: 0
2022-07-27 21:01:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482551038775296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:01:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207482551047163904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:01:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482551047163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:01:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482551047163904[0;39m ==> Parameters: 
2022-07-27 21:01:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482551047163904[0;39m <==    Updates: 7
2022-07-27 21:01:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207482551047163904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:01:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482572043849728[0;39m 生成今日电子书快照开始
2022-07-27 21:01:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482572043849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482572043849728[0;39m ==> Parameters: 
2022-07-27 21:01:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482572043849728[0;39m <==    Updates: 0
2022-07-27 21:01:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482572043849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:01:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482592981815296[0;39m 生成今日电子书快照开始
2022-07-27 21:01:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482592981815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482592981815296[0;39m ==> Parameters: 
2022-07-27 21:01:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482592981815296[0;39m <==    Updates: 0
2022-07-27 21:01:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482592981815296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:01:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482613978501120[0;39m 生成今日电子书快照开始
2022-07-27 21:01:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482613978501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482613978501120[0;39m ==> Parameters: 
2022-07-27 21:01:50.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482613978501120[0;39m <==    Updates: 0
2022-07-27 21:01:50.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482613978501120[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 21:01:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482634899689472[0;39m 生成今日电子书快照开始
2022-07-27 21:01:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482634899689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:01:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482634899689472[0;39m ==> Parameters: 
2022-07-27 21:01:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482634899689472[0;39m <==    Updates: 0
2022-07-27 21:01:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482634899689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:02:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482655896375296[0;39m 生成今日电子书快照开始
2022-07-27 21:02:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482655896375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482655896375296[0;39m ==> Parameters: 
2022-07-27 21:02:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482655896375296[0;39m <==    Updates: 0
2022-07-27 21:02:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482655896375296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:02:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207482676846923776[0;39m 更新电子书下的文档数据开始
2022-07-27 21:02:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482676846923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:02:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482676846923776[0;39m ==> Parameters: 
2022-07-27 21:02:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482676846923776[0;39m <==    Updates: 7
2022-07-27 21:02:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207482676846923776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:02:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482676855312384[0;39m 生成今日电子书快照开始
2022-07-27 21:02:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482676855312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482676855312384[0;39m ==> Parameters: 
2022-07-27 21:02:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482676855312384[0;39m <==    Updates: 0
2022-07-27 21:02:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482676855312384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:02:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482697822638080[0;39m 生成今日电子书快照开始
2022-07-27 21:02:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482697822638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482697822638080[0;39m ==> Parameters: 
2022-07-27 21:02:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482697822638080[0;39m <==    Updates: 0
2022-07-27 21:02:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482697822638080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:02:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482718806740992[0;39m 生成今日电子书快照开始
2022-07-27 21:02:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482718806740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482718806740992[0;39m ==> Parameters: 
2022-07-27 21:02:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482718806740992[0;39m <==    Updates: 0
2022-07-27 21:02:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482718806740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:02:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482739799232512[0;39m 生成今日电子书快照开始
2022-07-27 21:02:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482739799232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482739799232512[0;39m ==> Parameters: 
2022-07-27 21:02:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482739799232512[0;39m <==    Updates: 0
2022-07-27 21:02:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482739799232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:02:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482760728809472[0;39m 生成今日电子书快照开始
2022-07-27 21:02:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482760728809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482760728809472[0;39m ==> Parameters: 
2022-07-27 21:02:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482760728809472[0;39m <==    Updates: 0
2022-07-27 21:02:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482760728809472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:02:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482781729689600[0;39m 生成今日电子书快照开始
2022-07-27 21:02:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482781729689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482781729689600[0;39m ==> Parameters: 
2022-07-27 21:02:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482781729689600[0;39m <==    Updates: 0
2022-07-27 21:02:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482781729689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:02:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207482802717986816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:02:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482802717986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:02:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482802717986816[0;39m ==> Parameters: 
2022-07-27 21:02:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482802717986816[0;39m <==    Updates: 7
2022-07-27 21:02:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207482802717986816[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-27 21:02:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482802738958336[0;39m 生成今日电子书快照开始
2022-07-27 21:02:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482802738958336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482802738958336[0;39m ==> Parameters: 
2022-07-27 21:02:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482802738958336[0;39m <==    Updates: 0
2022-07-27 21:02:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482802738958336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:02:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482823664340992[0;39m 生成今日电子书快照开始
2022-07-27 21:02:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482823664340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482823664340992[0;39m ==> Parameters: 
2022-07-27 21:02:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482823664340992[0;39m <==    Updates: 0
2022-07-27 21:02:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482823664340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:02:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482844627472384[0;39m 生成今日电子书快照开始
2022-07-27 21:02:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482844627472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482844627472384[0;39m ==> Parameters: 
2022-07-27 21:02:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482844627472384[0;39m <==    Updates: 0
2022-07-27 21:02:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482844627472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:02:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482865611575296[0;39m 生成今日电子书快照开始
2022-07-27 21:02:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482865611575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482865611575296[0;39m ==> Parameters: 
2022-07-27 21:02:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482865611575296[0;39m <==    Updates: 0
2022-07-27 21:02:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482865611575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:02:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482886599872512[0;39m 生成今日电子书快照开始
2022-07-27 21:02:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482886599872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:02:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482886599872512[0;39m ==> Parameters: 
2022-07-27 21:02:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482886599872512[0;39m <==    Updates: 0
2022-07-27 21:02:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482886599872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:03:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482907571392512[0;39m 生成今日电子书快照开始
2022-07-27 21:03:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482907571392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482907571392512[0;39m ==> Parameters: 
2022-07-27 21:03:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482907571392512[0;39m <==    Updates: 0
2022-07-27 21:03:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482907571392512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:03:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482928505163776[0;39m 生成今日电子书快照开始
2022-07-27 21:03:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482928505163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482928505163776[0;39m ==> Parameters: 
2022-07-27 21:03:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482928505163776[0;39m <==    Updates: 0
2022-07-27 21:03:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482928505163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:03:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207482928513552384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:03:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482928513552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:03:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482928513552384[0;39m ==> Parameters: 
2022-07-27 21:03:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207482928513552384[0;39m <==    Updates: 7
2022-07-27 21:03:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207482928513552384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:03:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482949506043904[0;39m 生成今日电子书快照开始
2022-07-27 21:03:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482949506043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482949506043904[0;39m ==> Parameters: 
2022-07-27 21:03:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482949506043904[0;39m <==    Updates: 0
2022-07-27 21:03:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482949506043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:03:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482970498535424[0;39m 生成今日电子书快照开始
2022-07-27 21:03:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482970498535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482970498535424[0;39m ==> Parameters: 
2022-07-27 21:03:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482970498535424[0;39m <==    Updates: 0
2022-07-27 21:03:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482970498535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:03:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207482991470055424[0;39m 生成今日电子书快照开始
2022-07-27 21:03:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482991470055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482991470055424[0;39m ==> Parameters: 
2022-07-27 21:03:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207482991470055424[0;39m <==    Updates: 0
2022-07-27 21:03:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207482991470055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:03:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483012391243776[0;39m 生成今日电子书快照开始
2022-07-27 21:03:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483012391243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483012391243776[0;39m ==> Parameters: 
2022-07-27 21:03:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483012391243776[0;39m <==    Updates: 0
2022-07-27 21:03:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483012391243776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:03:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483033392123904[0;39m 生成今日电子书快照开始
2022-07-27 21:03:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483033392123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483033392123904[0;39m ==> Parameters: 
2022-07-27 21:03:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483033392123904[0;39m <==    Updates: 0
2022-07-27 21:03:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483033392123904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:03:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207483054384615424[0;39m 更新电子书下的文档数据开始
2022-07-27 21:03:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483054384615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:03:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483054384615424[0;39m ==> Parameters: 
2022-07-27 21:03:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483054384615424[0;39m <==    Updates: 7
2022-07-27 21:03:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207483054384615424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:03:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483054393004032[0;39m 生成今日电子书快照开始
2022-07-27 21:03:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483054393004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483054393004032[0;39m ==> Parameters: 
2022-07-27 21:03:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483054393004032[0;39m <==    Updates: 0
2022-07-27 21:03:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483054393004032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:03:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483075330969600[0;39m 生成今日电子书快照开始
2022-07-27 21:03:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483075330969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483075330969600[0;39m ==> Parameters: 
2022-07-27 21:03:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483075330969600[0;39m <==    Updates: 0
2022-07-27 21:03:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483075330969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:03:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483096336044032[0;39m 生成今日电子书快照开始
2022-07-27 21:03:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483096336044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483096336044032[0;39m ==> Parameters: 
2022-07-27 21:03:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483096336044032[0;39m <==    Updates: 0
2022-07-27 21:03:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483096336044032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:03:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483117278203904[0;39m 生成今日电子书快照开始
2022-07-27 21:03:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483117278203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483117278203904[0;39m ==> Parameters: 
2022-07-27 21:03:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483117278203904[0;39m <==    Updates: 0
2022-07-27 21:03:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483117278203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:03:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483138279084032[0;39m 生成今日电子书快照开始
2022-07-27 21:03:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483138279084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:03:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483138279084032[0;39m ==> Parameters: 
2022-07-27 21:03:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483138279084032[0;39m <==    Updates: 0
2022-07-27 21:03:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483138279084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483159238021120[0;39m 生成今日电子书快照开始
2022-07-27 21:04:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483159238021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483159238021120[0;39m ==> Parameters: 
2022-07-27 21:04:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483159238021120[0;39m <==    Updates: 0
2022-07-27 21:04:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483159238021120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:04:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207483180209541120[0;39m 更新电子书下的文档数据开始
2022-07-27 21:04:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483180209541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:04:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483180209541120[0;39m ==> Parameters: 
2022-07-27 21:04:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483180209541120[0;39m <==    Updates: 7
2022-07-27 21:04:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207483180209541120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:04:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483180217929728[0;39m 生成今日电子书快照开始
2022-07-27 21:04:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483180217929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483180217929728[0;39m ==> Parameters: 
2022-07-27 21:04:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483180217929728[0;39m <==    Updates: 0
2022-07-27 21:04:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483180217929728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:04:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483201176866816[0;39m 生成今日电子书快照开始
2022-07-27 21:04:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483201176866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483201176866816[0;39m ==> Parameters: 
2022-07-27 21:04:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483201176866816[0;39m <==    Updates: 0
2022-07-27 21:04:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483201176866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483222114832384[0;39m 生成今日电子书快照开始
2022-07-27 21:04:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483222114832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483222114832384[0;39m ==> Parameters: 
2022-07-27 21:04:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483222114832384[0;39m <==    Updates: 0
2022-07-27 21:04:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483222114832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483243115712512[0;39m 生成今日电子书快照开始
2022-07-27 21:04:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483243115712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483243115712512[0;39m ==> Parameters: 
2022-07-27 21:04:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483243115712512[0;39m <==    Updates: 0
2022-07-27 21:04:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483243115712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483264095621120[0;39m 生成今日电子书快照开始
2022-07-27 21:04:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483264095621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483264095621120[0;39m ==> Parameters: 
2022-07-27 21:04:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483264095621120[0;39m <==    Updates: 0
2022-07-27 21:04:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483264095621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483285021003776[0;39m 生成今日电子书快照开始
2022-07-27 21:04:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483285021003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483285021003776[0;39m ==> Parameters: 
2022-07-27 21:04:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483285021003776[0;39m <==    Updates: 0
2022-07-27 21:04:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483285021003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483306026078208[0;39m 生成今日电子书快照开始
2022-07-27 21:04:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483306026078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483306026078208[0;39m ==> Parameters: 
2022-07-27 21:04:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483306026078208[0;39m <==    Updates: 0
2022-07-27 21:04:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483306026078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207483306034466816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:04:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483306034466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:04:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483306034466816[0;39m ==> Parameters: 
2022-07-27 21:04:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483306034466816[0;39m <==    Updates: 7
2022-07-27 21:04:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207483306034466816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:04:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483327018569728[0;39m 生成今日电子书快照开始
2022-07-27 21:04:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483327018569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483327018569728[0;39m ==> Parameters: 
2022-07-27 21:04:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483327018569728[0;39m <==    Updates: 0
2022-07-27 21:04:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483327018569728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483347981701120[0;39m 生成今日电子书快照开始
2022-07-27 21:04:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483347981701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483347981701120[0;39m ==> Parameters: 
2022-07-27 21:04:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483347981701120[0;39m <==    Updates: 0
2022-07-27 21:04:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483347981701120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:04:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483368915472384[0;39m 生成今日电子书快照开始
2022-07-27 21:04:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483368915472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483368915472384[0;39m ==> Parameters: 
2022-07-27 21:04:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483368915472384[0;39m <==    Updates: 0
2022-07-27 21:04:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483368915472384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:04:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483389912158208[0;39m 生成今日电子书快照开始
2022-07-27 21:04:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483389912158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:04:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483389912158208[0;39m ==> Parameters: 
2022-07-27 21:04:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483389912158208[0;39m <==    Updates: 0
2022-07-27 21:04:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483389912158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483410883678208[0;39m 生成今日电子书快照开始
2022-07-27 21:05:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483410883678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483410883678208[0;39m ==> Parameters: 
2022-07-27 21:05:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483410883678208[0;39m <==    Updates: 0
2022-07-27 21:05:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483410883678208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:05:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483431880364032[0;39m 生成今日电子书快照开始
2022-07-27 21:05:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483431880364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483431880364032[0;39m ==> Parameters: 
2022-07-27 21:05:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483431880364032[0;39m <==    Updates: 0
2022-07-27 21:05:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483431880364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207483431888752640[0;39m 更新电子书下的文档数据开始
2022-07-27 21:05:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483431888752640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:05:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483431888752640[0;39m ==> Parameters: 
2022-07-27 21:05:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483431888752640[0;39m <==    Updates: 7
2022-07-27 21:05:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207483431888752640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:05:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483452843495424[0;39m 生成今日电子书快照开始
2022-07-27 21:05:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483452843495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483452843495424[0;39m ==> Parameters: 
2022-07-27 21:05:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483452843495424[0;39m <==    Updates: 0
2022-07-27 21:05:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483452843495424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:05:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483473764683776[0;39m 生成今日电子书快照开始
2022-07-27 21:05:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483473764683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483473764683776[0;39m ==> Parameters: 
2022-07-27 21:05:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483473764683776[0;39m <==    Updates: 0
2022-07-27 21:05:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483473764683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483494773952512[0;39m 生成今日电子书快照开始
2022-07-27 21:05:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483494773952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483494773952512[0;39m ==> Parameters: 
2022-07-27 21:05:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483494773952512[0;39m <==    Updates: 0
2022-07-27 21:05:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483494773952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483515758055424[0;39m 生成今日电子书快照开始
2022-07-27 21:05:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483515758055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483515758055424[0;39m ==> Parameters: 
2022-07-27 21:05:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483515758055424[0;39m <==    Updates: 0
2022-07-27 21:05:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483515758055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483536675049472[0;39m 生成今日电子书快照开始
2022-07-27 21:05:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483536675049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483536675049472[0;39m ==> Parameters: 
2022-07-27 21:05:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483536675049472[0;39m <==    Updates: 0
2022-07-27 21:05:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483536675049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483557675929600[0;39m 生成今日电子书快照开始
2022-07-27 21:05:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483557675929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483557675929600[0;39m ==> Parameters: 
2022-07-27 21:05:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483557675929600[0;39m <==    Updates: 0
2022-07-27 21:05:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483557675929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207483557684318208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:05:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483557684318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:05:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483557684318208[0;39m ==> Parameters: 
2022-07-27 21:05:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483557684318208[0;39m <==    Updates: 7
2022-07-27 21:05:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207483557684318208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:05:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483578664226816[0;39m 生成今日电子书快照开始
2022-07-27 21:05:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483578664226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483578664226816[0;39m ==> Parameters: 
2022-07-27 21:05:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483578664226816[0;39m <==    Updates: 0
2022-07-27 21:05:40.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483578664226816[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 21:05:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483599593803776[0;39m 生成今日电子书快照开始
2022-07-27 21:05:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483599593803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483599593803776[0;39m ==> Parameters: 
2022-07-27 21:05:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483599593803776[0;39m <==    Updates: 0
2022-07-27 21:05:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483599593803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483620619849728[0;39m 生成今日电子书快照开始
2022-07-27 21:05:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483620619849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483620619849728[0;39m ==> Parameters: 
2022-07-27 21:05:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483620619849728[0;39m <==    Updates: 0
2022-07-27 21:05:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483620619849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:05:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483641562009600[0;39m 生成今日电子书快照开始
2022-07-27 21:05:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483641562009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:05:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483641562009600[0;39m ==> Parameters: 
2022-07-27 21:05:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483641562009600[0;39m <==    Updates: 0
2022-07-27 21:05:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483641562009600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:06:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483662550306816[0;39m 生成今日电子书快照开始
2022-07-27 21:06:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483662550306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483662550306816[0;39m ==> Parameters: 
2022-07-27 21:06:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483662550306816[0;39m <==    Updates: 0
2022-07-27 21:06:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483662550306816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:06:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207483683500855296[0;39m 更新电子书下的文档数据开始
2022-07-27 21:06:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483683500855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:06:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483683500855296[0;39m ==> Parameters: 
2022-07-27 21:06:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483683500855296[0;39m <==    Updates: 7
2022-07-27 21:06:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207483683500855296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:06:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483683509243904[0;39m 生成今日电子书快照开始
2022-07-27 21:06:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483683509243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483683509243904[0;39m ==> Parameters: 
2022-07-27 21:06:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483683509243904[0;39m <==    Updates: 0
2022-07-27 21:06:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483683509243904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:06:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483704463986688[0;39m 生成今日电子书快照开始
2022-07-27 21:06:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483704463986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483704463986688[0;39m ==> Parameters: 
2022-07-27 21:06:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483704463986688[0;39m <==    Updates: 0
2022-07-27 21:06:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483704463986688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:06:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483725456478208[0;39m 生成今日电子书快照开始
2022-07-27 21:06:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483725456478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483725456478208[0;39m ==> Parameters: 
2022-07-27 21:06:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483725456478208[0;39m <==    Updates: 0
2022-07-27 21:06:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483725456478208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:06:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483746453164032[0;39m 生成今日电子书快照开始
2022-07-27 21:06:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483746453164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483746453164032[0;39m ==> Parameters: 
2022-07-27 21:06:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483746453164032[0;39m <==    Updates: 0
2022-07-27 21:06:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483746453164032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:06:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483767374352384[0;39m 生成今日电子书快照开始
2022-07-27 21:06:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483767374352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483767374352384[0;39m ==> Parameters: 
2022-07-27 21:06:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483767374352384[0;39m <==    Updates: 0
2022-07-27 21:06:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483767374352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:06:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483788375232512[0;39m 生成今日电子书快照开始
2022-07-27 21:06:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483788375232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483788375232512[0;39m ==> Parameters: 
2022-07-27 21:06:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483788375232512[0;39m <==    Updates: 0
2022-07-27 21:06:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483788375232512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:06:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207483809321586688[0;39m 更新电子书下的文档数据开始
2022-07-27 21:06:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483809321586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:06:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483809321586688[0;39m ==> Parameters: 
2022-07-27 21:06:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483809321586688[0;39m <==    Updates: 7
2022-07-27 21:06:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207483809321586688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:06:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483809329975296[0;39m 生成今日电子书快照开始
2022-07-27 21:06:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483809329975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483809329975296[0;39m ==> Parameters: 
2022-07-27 21:06:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483809329975296[0;39m <==    Updates: 0
2022-07-27 21:06:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483809329975296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:06:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483830297300992[0;39m 生成今日电子书快照开始
2022-07-27 21:06:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483830297300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483830297300992[0;39m ==> Parameters: 
2022-07-27 21:06:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483830297300992[0;39m <==    Updates: 0
2022-07-27 21:06:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483830297300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:06:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483851268820992[0;39m 生成今日电子书快照开始
2022-07-27 21:06:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483851268820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483851268820992[0;39m ==> Parameters: 
2022-07-27 21:06:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483851268820992[0;39m <==    Updates: 0
2022-07-27 21:06:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483851268820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:06:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483872273895424[0;39m 生成今日电子书快照开始
2022-07-27 21:06:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483872273895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483872273895424[0;39m ==> Parameters: 
2022-07-27 21:06:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483872273895424[0;39m <==    Updates: 0
2022-07-27 21:06:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483872273895424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:06:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483893190889472[0;39m 生成今日电子书快照开始
2022-07-27 21:06:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483893190889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:06:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483893190889472[0;39m ==> Parameters: 
2022-07-27 21:06:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483893190889472[0;39m <==    Updates: 0
2022-07-27 21:06:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483893190889472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:07:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483914212741120[0;39m 生成今日电子书快照开始
2022-07-27 21:07:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483914212741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483914212741120[0;39m ==> Parameters: 
2022-07-27 21:07:00.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483914212741120[0;39m <==    Updates: 0
2022-07-27 21:07:00.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483914212741120[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-27 21:07:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207483935133929472[0;39m 更新电子书下的文档数据开始
2022-07-27 21:07:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483935133929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:07:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483935133929472[0;39m ==> Parameters: 
2022-07-27 21:07:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207483935133929472[0;39m <==    Updates: 7
2022-07-27 21:07:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207483935133929472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:07:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483935138123776[0;39m 生成今日电子书快照开始
2022-07-27 21:07:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483935138123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483935138123776[0;39m ==> Parameters: 
2022-07-27 21:07:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483935138123776[0;39m <==    Updates: 0
2022-07-27 21:07:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483935138123776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:07:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483956105449472[0;39m 生成今日电子书快照开始
2022-07-27 21:07:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483956105449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483956105449472[0;39m ==> Parameters: 
2022-07-27 21:07:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483956105449472[0;39m <==    Updates: 0
2022-07-27 21:07:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483956105449472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:07:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483977127301120[0;39m 生成今日电子书快照开始
2022-07-27 21:07:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483977127301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483977127301120[0;39m ==> Parameters: 
2022-07-27 21:07:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483977127301120[0;39m <==    Updates: 0
2022-07-27 21:07:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483977127301120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:07:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207483998103015424[0;39m 生成今日电子书快照开始
2022-07-27 21:07:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483998103015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483998103015424[0;39m ==> Parameters: 
2022-07-27 21:07:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207483998103015424[0;39m <==    Updates: 0
2022-07-27 21:07:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207483998103015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:07:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484019053563904[0;39m 生成今日电子书快照开始
2022-07-27 21:07:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484019053563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484019053563904[0;39m ==> Parameters: 
2022-07-27 21:07:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484019053563904[0;39m <==    Updates: 0
2022-07-27 21:07:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484019053563904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:07:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484040046055424[0;39m 生成今日电子书快照开始
2022-07-27 21:07:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484040046055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484040046055424[0;39m ==> Parameters: 
2022-07-27 21:07:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484040046055424[0;39m <==    Updates: 0
2022-07-27 21:07:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484040046055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:07:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484060992409600[0;39m 生成今日电子书快照开始
2022-07-27 21:07:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484060992409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484060992409600[0;39m ==> Parameters: 
2022-07-27 21:07:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484060992409600[0;39m <==    Updates: 0
2022-07-27 21:07:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484060992409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:07:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207484061004992512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:07:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484061004992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:07:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484061004992512[0;39m ==> Parameters: 
2022-07-27 21:07:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484061004992512[0;39m <==    Updates: 7
2022-07-27 21:07:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207484061004992512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:07:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484081930375168[0;39m 生成今日电子书快照开始
2022-07-27 21:07:40.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484081930375168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:40.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484081930375168[0;39m ==> Parameters: 
2022-07-27 21:07:40.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484081930375168[0;39m <==    Updates: 0
2022-07-27 21:07:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484081930375168[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 21:07:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484102964809728[0;39m 生成今日电子书快照开始
2022-07-27 21:07:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484102964809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484102964809728[0;39m ==> Parameters: 
2022-07-27 21:07:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484102964809728[0;39m <==    Updates: 0
2022-07-27 21:07:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484102964809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:07:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484123902775296[0;39m 生成今日电子书快照开始
2022-07-27 21:07:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484123902775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484123902775296[0;39m ==> Parameters: 
2022-07-27 21:07:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484123902775296[0;39m <==    Updates: 0
2022-07-27 21:07:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484123902775296[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 21:07:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484144916238336[0;39m 生成今日电子书快照开始
2022-07-27 21:07:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484144916238336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:07:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484144916238336[0;39m ==> Parameters: 
2022-07-27 21:07:55.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484144916238336[0;39m <==    Updates: 0
2022-07-27 21:07:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484144916238336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484165858398208[0;39m 生成今日电子书快照开始
2022-07-27 21:08:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484165858398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484165858398208[0;39m ==> Parameters: 
2022-07-27 21:08:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484165858398208[0;39m <==    Updates: 0
2022-07-27 21:08:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484165858398208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:08:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484186804752384[0;39m 生成今日电子书快照开始
2022-07-27 21:08:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484186804752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484186804752384[0;39m ==> Parameters: 
2022-07-27 21:08:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484186804752384[0;39m <==    Updates: 0
2022-07-27 21:08:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484186804752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207484186813140992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:08:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484186813140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:08:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484186813140992[0;39m ==> Parameters: 
2022-07-27 21:08:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484186813140992[0;39m <==    Updates: 7
2022-07-27 21:08:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207484186813140992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:08:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484207805632512[0;39m 生成今日电子书快照开始
2022-07-27 21:08:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484207805632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484207805632512[0;39m ==> Parameters: 
2022-07-27 21:08:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484207805632512[0;39m <==    Updates: 0
2022-07-27 21:08:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484207805632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484228764569600[0;39m 生成今日电子书快照开始
2022-07-27 21:08:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484228764569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484228764569600[0;39m ==> Parameters: 
2022-07-27 21:08:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484228764569600[0;39m <==    Updates: 0
2022-07-27 21:08:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484228764569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484249715118080[0;39m 生成今日电子书快照开始
2022-07-27 21:08:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484249715118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484249715118080[0;39m ==> Parameters: 
2022-07-27 21:08:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484249715118080[0;39m <==    Updates: 0
2022-07-27 21:08:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484249715118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484270686638080[0;39m 生成今日电子书快照开始
2022-07-27 21:08:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484270686638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484270686638080[0;39m ==> Parameters: 
2022-07-27 21:08:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484270686638080[0;39m <==    Updates: 0
2022-07-27 21:08:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484270686638080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:08:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484291649769472[0;39m 生成今日电子书快照开始
2022-07-27 21:08:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484291649769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484291649769472[0;39m ==> Parameters: 
2022-07-27 21:08:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484291649769472[0;39m <==    Updates: 0
2022-07-27 21:08:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484291649769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207484312650649600[0;39m 更新电子书下的文档数据开始
2022-07-27 21:08:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484312650649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:08:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484312650649600[0;39m ==> Parameters: 
2022-07-27 21:08:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484312650649600[0;39m <==    Updates: 7
2022-07-27 21:08:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207484312650649600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:08:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484312659038208[0;39m 生成今日电子书快照开始
2022-07-27 21:08:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484312659038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484312659038208[0;39m ==> Parameters: 
2022-07-27 21:08:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484312659038208[0;39m <==    Updates: 0
2022-07-27 21:08:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484312659038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484333651529728[0;39m 生成今日电子书快照开始
2022-07-27 21:08:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484333651529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484333651529728[0;39m ==> Parameters: 
2022-07-27 21:08:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484333651529728[0;39m <==    Updates: 0
2022-07-27 21:08:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484333651529728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:08:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484354576912384[0;39m 生成今日电子书快照开始
2022-07-27 21:08:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484354576912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484354576912384[0;39m ==> Parameters: 
2022-07-27 21:08:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484354576912384[0;39m <==    Updates: 0
2022-07-27 21:08:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484354576912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484375535849472[0;39m 生成今日电子书快照开始
2022-07-27 21:08:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484375535849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484375535849472[0;39m ==> Parameters: 
2022-07-27 21:08:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484375535849472[0;39m <==    Updates: 0
2022-07-27 21:08:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484375535849472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:08:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484396553506816[0;39m 生成今日电子书快照开始
2022-07-27 21:08:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484396553506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:08:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484396553506816[0;39m ==> Parameters: 
2022-07-27 21:08:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484396553506816[0;39m <==    Updates: 0
2022-07-27 21:08:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484396553506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484417537609728[0;39m 生成今日电子书快照开始
2022-07-27 21:09:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484417537609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484417537609728[0;39m ==> Parameters: 
2022-07-27 21:09:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484417537609728[0;39m <==    Updates: 0
2022-07-27 21:09:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484417537609728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207484438479769600[0;39m 更新电子书下的文档数据开始
2022-07-27 21:09:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484438479769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:09:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484438479769600[0;39m ==> Parameters: 
2022-07-27 21:09:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484438479769600[0;39m <==    Updates: 7
2022-07-27 21:09:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207484438479769600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:09:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484438488158208[0;39m 生成今日电子书快照开始
2022-07-27 21:09:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484438488158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484438488158208[0;39m ==> Parameters: 
2022-07-27 21:09:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484438488158208[0;39m <==    Updates: 0
2022-07-27 21:09:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484438488158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484459447095296[0;39m 生成今日电子书快照开始
2022-07-27 21:09:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484459447095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484459447095296[0;39m ==> Parameters: 
2022-07-27 21:09:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484459447095296[0;39m <==    Updates: 0
2022-07-27 21:09:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484459447095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484480452169728[0;39m 生成今日电子书快照开始
2022-07-27 21:09:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484480452169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484480452169728[0;39m ==> Parameters: 
2022-07-27 21:09:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484480452169728[0;39m <==    Updates: 0
2022-07-27 21:09:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484480452169728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484501369163776[0;39m 生成今日电子书快照开始
2022-07-27 21:09:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484501369163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484501369163776[0;39m ==> Parameters: 
2022-07-27 21:09:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484501369163776[0;39m <==    Updates: 0
2022-07-27 21:09:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484501369163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484522357460992[0;39m 生成今日电子书快照开始
2022-07-27 21:09:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484522357460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484522357460992[0;39m ==> Parameters: 
2022-07-27 21:09:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484522357460992[0;39m <==    Updates: 0
2022-07-27 21:09:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484522357460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484543333175296[0;39m 生成今日电子书快照开始
2022-07-27 21:09:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484543333175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484543333175296[0;39m ==> Parameters: 
2022-07-27 21:09:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484543333175296[0;39m <==    Updates: 0
2022-07-27 21:09:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484543333175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484564317278208[0;39m 生成今日电子书快照开始
2022-07-27 21:09:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484564317278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484564317278208[0;39m ==> Parameters: 
2022-07-27 21:09:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484564317278208[0;39m <==    Updates: 0
2022-07-27 21:09:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484564317278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207484564325666816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:09:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484564325666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:09:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484564325666816[0;39m ==> Parameters: 
2022-07-27 21:09:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484564325666816[0;39m <==    Updates: 7
2022-07-27 21:09:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207484564325666816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:09:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484585305575424[0;39m 生成今日电子书快照开始
2022-07-27 21:09:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484585305575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484585305575424[0;39m ==> Parameters: 
2022-07-27 21:09:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484585305575424[0;39m <==    Updates: 0
2022-07-27 21:09:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484585305575424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484606256123904[0;39m 生成今日电子书快照开始
2022-07-27 21:09:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484606256123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484606256123904[0;39m ==> Parameters: 
2022-07-27 21:09:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484606256123904[0;39m <==    Updates: 0
2022-07-27 21:09:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484606256123904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:09:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484627194089472[0;39m 生成今日电子书快照开始
2022-07-27 21:09:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484627194089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484627194089472[0;39m ==> Parameters: 
2022-07-27 21:09:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484627194089472[0;39m <==    Updates: 0
2022-07-27 21:09:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484627194089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:09:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484648169803776[0;39m 生成今日电子书快照开始
2022-07-27 21:09:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484648169803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:09:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484648169803776[0;39m ==> Parameters: 
2022-07-27 21:09:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484648169803776[0;39m <==    Updates: 0
2022-07-27 21:09:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484648169803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:00.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484669132935168[0;39m 生成今日电子书快照开始
2022-07-27 21:10:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484669132935168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484669132935168[0;39m ==> Parameters: 
2022-07-27 21:10:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484669132935168[0;39m <==    Updates: 0
2022-07-27 21:10:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484669132935168[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:10:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484690138009600[0;39m 生成今日电子书快照开始
2022-07-27 21:10:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484690138009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484690138009600[0;39m ==> Parameters: 
2022-07-27 21:10:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484690138009600[0;39m <==    Updates: 0
2022-07-27 21:10:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484690138009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207484690146398208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:10:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484690146398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:10:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484690146398208[0;39m ==> Parameters: 
2022-07-27 21:10:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484690146398208[0;39m <==    Updates: 7
2022-07-27 21:10:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207484690146398208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:10:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484711096946688[0;39m 生成今日电子书快照开始
2022-07-27 21:10:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484711096946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484711096946688[0;39m ==> Parameters: 
2022-07-27 21:10:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484711096946688[0;39m <==    Updates: 0
2022-07-27 21:10:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484711096946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484732110409728[0;39m 生成今日电子书快照开始
2022-07-27 21:10:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484732110409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484732110409728[0;39m ==> Parameters: 
2022-07-27 21:10:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484732110409728[0;39m <==    Updates: 0
2022-07-27 21:10:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484732110409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484753031598080[0;39m 生成今日电子书快照开始
2022-07-27 21:10:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484753031598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484753031598080[0;39m ==> Parameters: 
2022-07-27 21:10:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484753031598080[0;39m <==    Updates: 0
2022-07-27 21:10:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484753031598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484774057644032[0;39m 生成今日电子书快照开始
2022-07-27 21:10:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484774057644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484774057644032[0;39m ==> Parameters: 
2022-07-27 21:10:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484774057644032[0;39m <==    Updates: 0
2022-07-27 21:10:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484774057644032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:10:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484795020775424[0;39m 生成今日电子书快照开始
2022-07-27 21:10:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484795020775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484795020775424[0;39m ==> Parameters: 
2022-07-27 21:10:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484795020775424[0;39m <==    Updates: 0
2022-07-27 21:10:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484795020775424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:10:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484815967129600[0;39m 生成今日电子书快照开始
2022-07-27 21:10:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484815967129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484815967129600[0;39m ==> Parameters: 
2022-07-27 21:10:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484815967129600[0;39m <==    Updates: 0
2022-07-27 21:10:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484815967129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207484815975518208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:10:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484815975518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:10:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484815975518208[0;39m ==> Parameters: 
2022-07-27 21:10:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484815975518208[0;39m <==    Updates: 7
2022-07-27 21:10:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207484815975518208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:10:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484836913483776[0;39m 生成今日电子书快照开始
2022-07-27 21:10:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484836913483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484836913483776[0;39m ==> Parameters: 
2022-07-27 21:10:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484836913483776[0;39m <==    Updates: 0
2022-07-27 21:10:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484836913483776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484857893392384[0;39m 生成今日电子书快照开始
2022-07-27 21:10:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484857893392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484857893392384[0;39m ==> Parameters: 
2022-07-27 21:10:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484857893392384[0;39m <==    Updates: 0
2022-07-27 21:10:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484857893392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484878877495296[0;39m 生成今日电子书快照开始
2022-07-27 21:10:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484878877495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484878877495296[0;39m ==> Parameters: 
2022-07-27 21:10:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484878877495296[0;39m <==    Updates: 0
2022-07-27 21:10:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484878877495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:10:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484899878375424[0;39m 生成今日电子书快照开始
2022-07-27 21:10:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484899878375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:10:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484899878375424[0;39m ==> Parameters: 
2022-07-27 21:10:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484899878375424[0;39m <==    Updates: 0
2022-07-27 21:10:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484899878375424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:11:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484920816340992[0;39m 生成今日电子书快照开始
2022-07-27 21:11:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484920816340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484920816340992[0;39m ==> Parameters: 
2022-07-27 21:11:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484920816340992[0;39m <==    Updates: 0
2022-07-27 21:11:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484920816340992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:11:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484941808832512[0;39m 生成今日电子书快照开始
2022-07-27 21:11:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484941808832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484941808832512[0;39m ==> Parameters: 
2022-07-27 21:11:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484941808832512[0;39m <==    Updates: 0
2022-07-27 21:11:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484941808832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207484941817221120[0;39m 更新电子书下的文档数据开始
2022-07-27 21:11:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484941817221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:11:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484941817221120[0;39m ==> Parameters: 
2022-07-27 21:11:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207484941817221120[0;39m <==    Updates: 7
2022-07-27 21:11:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207484941817221120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:11:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484962797129728[0;39m 生成今日电子书快照开始
2022-07-27 21:11:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484962797129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484962797129728[0;39m ==> Parameters: 
2022-07-27 21:11:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484962797129728[0;39m <==    Updates: 0
2022-07-27 21:11:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484962797129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207484983756066816[0;39m 生成今日电子书快照开始
2022-07-27 21:11:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484983756066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484983756066816[0;39m ==> Parameters: 
2022-07-27 21:11:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207484983756066816[0;39m <==    Updates: 0
2022-07-27 21:11:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207484983756066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485004735975424[0;39m 生成今日电子书快照开始
2022-07-27 21:11:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485004735975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485004735975424[0;39m ==> Parameters: 
2022-07-27 21:11:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485004735975424[0;39m <==    Updates: 0
2022-07-27 21:11:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485004735975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485025711689728[0;39m 生成今日电子书快照开始
2022-07-27 21:11:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485025711689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485025711689728[0;39m ==> Parameters: 
2022-07-27 21:11:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485025711689728[0;39m <==    Updates: 0
2022-07-27 21:11:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485025711689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485046637072384[0;39m 生成今日电子书快照开始
2022-07-27 21:11:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485046637072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485046637072384[0;39m ==> Parameters: 
2022-07-27 21:11:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485046637072384[0;39m <==    Updates: 0
2022-07-27 21:11:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485046637072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207485067637952512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:11:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485067637952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:11:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485067637952512[0;39m ==> Parameters: 
2022-07-27 21:11:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485067637952512[0;39m <==    Updates: 7
2022-07-27 21:11:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207485067637952512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:11:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485067646341120[0;39m 生成今日电子书快照开始
2022-07-27 21:11:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485067646341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485067646341120[0;39m ==> Parameters: 
2022-07-27 21:11:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485067646341120[0;39m <==    Updates: 0
2022-07-27 21:11:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485067646341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485088592695296[0;39m 生成今日电子书快照开始
2022-07-27 21:11:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485088592695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485088592695296[0;39m ==> Parameters: 
2022-07-27 21:11:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485088592695296[0;39m <==    Updates: 0
2022-07-27 21:11:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485088592695296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:11:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485109560020992[0;39m 生成今日电子书快照开始
2022-07-27 21:11:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485109560020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485109560020992[0;39m ==> Parameters: 
2022-07-27 21:11:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485109560020992[0;39m <==    Updates: 0
2022-07-27 21:11:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485109560020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485130573484032[0;39m 生成今日电子书快照开始
2022-07-27 21:11:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485130573484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485130573484032[0;39m ==> Parameters: 
2022-07-27 21:11:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485130573484032[0;39m <==    Updates: 0
2022-07-27 21:11:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485130573484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:11:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485151486283776[0;39m 生成今日电子书快照开始
2022-07-27 21:11:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485151486283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:11:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485151486283776[0;39m ==> Parameters: 
2022-07-27 21:11:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485151486283776[0;39m <==    Updates: 0
2022-07-27 21:11:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485151486283776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485172491358208[0;39m 生成今日电子书快照开始
2022-07-27 21:12:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485172491358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485172491358208[0;39m ==> Parameters: 
2022-07-27 21:12:00.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485172491358208[0;39m <==    Updates: 0
2022-07-27 21:12:00.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485172491358208[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-27 21:12:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485193433518080[0;39m 生成今日电子书快照开始
2022-07-27 21:12:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485193433518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485193433518080[0;39m ==> Parameters: 
2022-07-27 21:12:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485193433518080[0;39m <==    Updates: 0
2022-07-27 21:12:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485193433518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207485193441906688[0;39m 更新电子书下的文档数据开始
2022-07-27 21:12:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485193441906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:12:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485193441906688[0;39m ==> Parameters: 
2022-07-27 21:12:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485193441906688[0;39m <==    Updates: 7
2022-07-27 21:12:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207485193441906688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:12:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485214405038080[0;39m 生成今日电子书快照开始
2022-07-27 21:12:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485214405038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485214405038080[0;39m ==> Parameters: 
2022-07-27 21:12:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485214405038080[0;39m <==    Updates: 0
2022-07-27 21:12:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485214405038080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:12:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485235426889728[0;39m 生成今日电子书快照开始
2022-07-27 21:12:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485235426889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485235426889728[0;39m ==> Parameters: 
2022-07-27 21:12:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485235426889728[0;39m <==    Updates: 0
2022-07-27 21:12:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485235426889728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485256398409728[0;39m 生成今日电子书快照开始
2022-07-27 21:12:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485256398409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485256398409728[0;39m ==> Parameters: 
2022-07-27 21:12:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485256398409728[0;39m <==    Updates: 0
2022-07-27 21:12:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485256398409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485277361541120[0;39m 生成今日电子书快照开始
2022-07-27 21:12:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485277361541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485277361541120[0;39m ==> Parameters: 
2022-07-27 21:12:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485277361541120[0;39m <==    Updates: 0
2022-07-27 21:12:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485277361541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485298337255424[0;39m 生成今日电子书快照开始
2022-07-27 21:12:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485298337255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485298337255424[0;39m ==> Parameters: 
2022-07-27 21:12:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485298337255424[0;39m <==    Updates: 0
2022-07-27 21:12:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485298337255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485319254249472[0;39m 生成今日电子书快照开始
2022-07-27 21:12:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485319254249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485319254249472[0;39m ==> Parameters: 
2022-07-27 21:12:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485319254249472[0;39m <==    Updates: 0
2022-07-27 21:12:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485319254249472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207485319262638080[0;39m 更新电子书下的文档数据开始
2022-07-27 21:12:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485319262638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:12:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485319262638080[0;39m ==> Parameters: 
2022-07-27 21:12:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485319262638080[0;39m <==    Updates: 7
2022-07-27 21:12:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207485319262638080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:12:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485340255129600[0;39m 生成今日电子书快照开始
2022-07-27 21:12:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485340255129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485340255129600[0;39m ==> Parameters: 
2022-07-27 21:12:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485340255129600[0;39m <==    Updates: 0
2022-07-27 21:12:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485340255129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485361197289472[0;39m 生成今日电子书快照开始
2022-07-27 21:12:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485361197289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485361197289472[0;39m ==> Parameters: 
2022-07-27 21:12:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485361197289472[0;39m <==    Updates: 0
2022-07-27 21:12:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485361197289472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:12:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485382202363904[0;39m 生成今日电子书快照开始
2022-07-27 21:12:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485382202363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485382202363904[0;39m ==> Parameters: 
2022-07-27 21:12:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485382202363904[0;39m <==    Updates: 0
2022-07-27 21:12:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485382202363904[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 21:12:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485403173883904[0;39m 生成今日电子书快照开始
2022-07-27 21:12:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485403173883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:12:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485403173883904[0;39m ==> Parameters: 
2022-07-27 21:12:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485403173883904[0;39m <==    Updates: 0
2022-07-27 21:12:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485403173883904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:13:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485424111849472[0;39m 生成今日电子书快照开始
2022-07-27 21:13:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485424111849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485424111849472[0;39m ==> Parameters: 
2022-07-27 21:13:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485424111849472[0;39m <==    Updates: 0
2022-07-27 21:13:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485424111849472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:13:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207485445112729600[0;39m 更新电子书下的文档数据开始
2022-07-27 21:13:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485445112729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:13:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485445112729600[0;39m ==> Parameters: 
2022-07-27 21:13:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485445112729600[0;39m <==    Updates: 7
2022-07-27 21:13:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207485445112729600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:13:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485445121118208[0;39m 生成今日电子书快照开始
2022-07-27 21:13:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485445121118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485445121118208[0;39m ==> Parameters: 
2022-07-27 21:13:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485445121118208[0;39m <==    Updates: 0
2022-07-27 21:13:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485445121118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485466101026816[0;39m 生成今日电子书快照开始
2022-07-27 21:13:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485466101026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485466101026816[0;39m ==> Parameters: 
2022-07-27 21:13:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485466101026816[0;39m <==    Updates: 0
2022-07-27 21:13:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485466101026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485487034798080[0;39m 生成今日电子书快照开始
2022-07-27 21:13:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485487034798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485487034798080[0;39m ==> Parameters: 
2022-07-27 21:13:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485487034798080[0;39m <==    Updates: 0
2022-07-27 21:13:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485487034798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485508014706688[0;39m 生成今日电子书快照开始
2022-07-27 21:13:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485508014706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485508014706688[0;39m ==> Parameters: 
2022-07-27 21:13:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485508014706688[0;39m <==    Updates: 0
2022-07-27 21:13:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485508014706688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485529011392512[0;39m 生成今日电子书快照开始
2022-07-27 21:13:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485529011392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485529011392512[0;39m ==> Parameters: 
2022-07-27 21:13:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485529011392512[0;39m <==    Updates: 0
2022-07-27 21:13:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485529011392512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485549978718208[0;39m 生成今日电子书快照开始
2022-07-27 21:13:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485549978718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485549978718208[0;39m ==> Parameters: 
2022-07-27 21:13:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485549978718208[0;39m <==    Updates: 0
2022-07-27 21:13:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485549978718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207485570916683776[0;39m 更新电子书下的文档数据开始
2022-07-27 21:13:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485570916683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:13:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485570916683776[0;39m ==> Parameters: 
2022-07-27 21:13:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485570916683776[0;39m <==    Updates: 7
2022-07-27 21:13:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207485570916683776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:13:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485570925072384[0;39m 生成今日电子书快照开始
2022-07-27 21:13:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485570925072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485570925072384[0;39m ==> Parameters: 
2022-07-27 21:13:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485570925072384[0;39m <==    Updates: 0
2022-07-27 21:13:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485570925072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485591921758208[0;39m 生成今日电子书快照开始
2022-07-27 21:13:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485591921758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485591921758208[0;39m ==> Parameters: 
2022-07-27 21:13:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485591921758208[0;39m <==    Updates: 0
2022-07-27 21:13:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485591921758208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485612863918080[0;39m 生成今日电子书快照开始
2022-07-27 21:13:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485612863918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485612863918080[0;39m ==> Parameters: 
2022-07-27 21:13:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485612863918080[0;39m <==    Updates: 0
2022-07-27 21:13:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485612863918080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485633864798208[0;39m 生成今日电子书快照开始
2022-07-27 21:13:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485633864798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485633864798208[0;39m ==> Parameters: 
2022-07-27 21:13:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485633864798208[0;39m <==    Updates: 0
2022-07-27 21:13:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485633864798208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:13:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485654819540992[0;39m 生成今日电子书快照开始
2022-07-27 21:13:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485654819540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:13:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485654819540992[0;39m ==> Parameters: 
2022-07-27 21:13:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485654819540992[0;39m <==    Updates: 0
2022-07-27 21:13:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485654819540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:14:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485675803643904[0;39m 生成今日电子书快照开始
2022-07-27 21:14:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485675803643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485675803643904[0;39m ==> Parameters: 
2022-07-27 21:14:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485675803643904[0;39m <==    Updates: 0
2022-07-27 21:14:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485675803643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:14:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485696745803776[0;39m 生成今日电子书快照开始
2022-07-27 21:14:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485696745803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485696745803776[0;39m ==> Parameters: 
2022-07-27 21:14:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485696745803776[0;39m <==    Updates: 0
2022-07-27 21:14:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485696745803776[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 21:14:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207485696779358208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:14:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485696779358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:14:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485696779358208[0;39m ==> Parameters: 
2022-07-27 21:14:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485696779358208[0;39m <==    Updates: 7
2022-07-27 21:14:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207485696779358208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:14:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485717742489600[0;39m 生成今日电子书快照开始
2022-07-27 21:14:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485717742489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485717742489600[0;39m ==> Parameters: 
2022-07-27 21:14:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485717742489600[0;39m <==    Updates: 0
2022-07-27 21:14:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485717742489600[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-27 21:14:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485738730786816[0;39m 生成今日电子书快照开始
2022-07-27 21:14:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485738730786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485738730786816[0;39m ==> Parameters: 
2022-07-27 21:14:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485738730786816[0;39m <==    Updates: 0
2022-07-27 21:14:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485738730786816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:14:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485759660363776[0;39m 生成今日电子书快照开始
2022-07-27 21:14:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485759660363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485759660363776[0;39m ==> Parameters: 
2022-07-27 21:14:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485759660363776[0;39m <==    Updates: 0
2022-07-27 21:14:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485759660363776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:14:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485780682215424[0;39m 生成今日电子书快照开始
2022-07-27 21:14:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485780682215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485780682215424[0;39m ==> Parameters: 
2022-07-27 21:14:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485780682215424[0;39m <==    Updates: 0
2022-07-27 21:14:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485780682215424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:14:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485801641152512[0;39m 生成今日电子书快照开始
2022-07-27 21:14:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485801641152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485801641152512[0;39m ==> Parameters: 
2022-07-27 21:14:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485801641152512[0;39m <==    Updates: 0
2022-07-27 21:14:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485801641152512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:14:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485822621061120[0;39m 生成今日电子书快照开始
2022-07-27 21:14:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485822621061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485822621061120[0;39m ==> Parameters: 
2022-07-27 21:14:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485822621061120[0;39m <==    Updates: 0
2022-07-27 21:14:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485822621061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:14:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207485822629449728[0;39m 更新电子书下的文档数据开始
2022-07-27 21:14:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485822629449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:14:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485822629449728[0;39m ==> Parameters: 
2022-07-27 21:14:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485822629449728[0;39m <==    Updates: 7
2022-07-27 21:14:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207485822629449728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:14:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485843592581120[0;39m 生成今日电子书快照开始
2022-07-27 21:14:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485843592581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485843592581120[0;39m ==> Parameters: 
2022-07-27 21:14:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485843592581120[0;39m <==    Updates: 0
2022-07-27 21:14:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485843592581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:14:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485864576684032[0;39m 生成今日电子书快照开始
2022-07-27 21:14:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485864576684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485864576684032[0;39m ==> Parameters: 
2022-07-27 21:14:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485864576684032[0;39m <==    Updates: 0
2022-07-27 21:14:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485864576684032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:14:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485885506260992[0;39m 生成今日电子书快照开始
2022-07-27 21:14:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485885506260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485885506260992[0;39m ==> Parameters: 
2022-07-27 21:14:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485885506260992[0;39m <==    Updates: 0
2022-07-27 21:14:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485885506260992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:14:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485906481975296[0;39m 生成今日电子书快照开始
2022-07-27 21:14:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485906481975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:14:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485906481975296[0;39m ==> Parameters: 
2022-07-27 21:14:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485906481975296[0;39m <==    Updates: 0
2022-07-27 21:14:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485906481975296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:15:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485927487049728[0;39m 生成今日电子书快照开始
2022-07-27 21:15:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485927487049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485927487049728[0;39m ==> Parameters: 
2022-07-27 21:15:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485927487049728[0;39m <==    Updates: 0
2022-07-27 21:15:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485927487049728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:15:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207485948420820992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:15:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485948420820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:15:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485948420820992[0;39m ==> Parameters: 
2022-07-27 21:15:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207485948420820992[0;39m <==    Updates: 7
2022-07-27 21:15:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207485948420820992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:15:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485948429209600[0;39m 生成今日电子书快照开始
2022-07-27 21:15:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485948429209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485948429209600[0;39m ==> Parameters: 
2022-07-27 21:15:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485948429209600[0;39m <==    Updates: 0
2022-07-27 21:15:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485948429209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:15:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485969400729600[0;39m 生成今日电子书快照开始
2022-07-27 21:15:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485969400729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485969400729600[0;39m ==> Parameters: 
2022-07-27 21:15:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485969400729600[0;39m <==    Updates: 0
2022-07-27 21:15:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485969400729600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:15:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207485990351278080[0;39m 生成今日电子书快照开始
2022-07-27 21:15:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485990351278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485990351278080[0;39m ==> Parameters: 
2022-07-27 21:15:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207485990351278080[0;39m <==    Updates: 0
2022-07-27 21:15:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207485990351278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:15:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486011335380992[0;39m 生成今日电子书快照开始
2022-07-27 21:15:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486011335380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486011335380992[0;39m ==> Parameters: 
2022-07-27 21:15:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486011335380992[0;39m <==    Updates: 0
2022-07-27 21:15:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486011335380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:15:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486032332066816[0;39m 生成今日电子书快照开始
2022-07-27 21:15:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486032332066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486032332066816[0;39m ==> Parameters: 
2022-07-27 21:15:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486032332066816[0;39m <==    Updates: 0
2022-07-27 21:15:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486032332066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:15:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486053270032384[0;39m 生成今日电子书快照开始
2022-07-27 21:15:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486053270032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486053270032384[0;39m ==> Parameters: 
2022-07-27 21:15:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486053270032384[0;39m <==    Updates: 0
2022-07-27 21:15:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486053270032384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:15:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207486074258329600[0;39m 更新电子书下的文档数据开始
2022-07-27 21:15:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486074258329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:15:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486074258329600[0;39m ==> Parameters: 
2022-07-27 21:15:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486074258329600[0;39m <==    Updates: 7
2022-07-27 21:15:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207486074258329600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:15:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486074266718208[0;39m 生成今日电子书快照开始
2022-07-27 21:15:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486074266718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486074266718208[0;39m ==> Parameters: 
2022-07-27 21:15:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486074266718208[0;39m <==    Updates: 0
2022-07-27 21:15:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486074266718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:15:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486095238238208[0;39m 生成今日电子书快照开始
2022-07-27 21:15:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486095238238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486095238238208[0;39m ==> Parameters: 
2022-07-27 21:15:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486095238238208[0;39m <==    Updates: 0
2022-07-27 21:15:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486095238238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:15:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486116201369600[0;39m 生成今日电子书快照开始
2022-07-27 21:15:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486116201369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486116201369600[0;39m ==> Parameters: 
2022-07-27 21:15:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486116201369600[0;39m <==    Updates: 0
2022-07-27 21:15:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486116201369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:15:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486137156112384[0;39m 生成今日电子书快照开始
2022-07-27 21:15:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486137156112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486137156112384[0;39m ==> Parameters: 
2022-07-27 21:15:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486137156112384[0;39m <==    Updates: 0
2022-07-27 21:15:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486137156112384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:15:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486158123438080[0;39m 生成今日电子书快照开始
2022-07-27 21:15:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486158123438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:15:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486158123438080[0;39m ==> Parameters: 
2022-07-27 21:15:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486158123438080[0;39m <==    Updates: 0
2022-07-27 21:15:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486158123438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486179103346688[0;39m 生成今日电子书快照开始
2022-07-27 21:16:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486179103346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486179103346688[0;39m ==> Parameters: 
2022-07-27 21:16:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486179103346688[0;39m <==    Updates: 0
2022-07-27 21:16:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486179103346688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:16:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207486200104226816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:16:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486200104226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:16:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486200104226816[0;39m ==> Parameters: 
2022-07-27 21:16:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486200104226816[0;39m <==    Updates: 7
2022-07-27 21:16:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207486200104226816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:16:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486200108421120[0;39m 生成今日电子书快照开始
2022-07-27 21:16:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486200108421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486200108421120[0;39m ==> Parameters: 
2022-07-27 21:16:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486200108421120[0;39m <==    Updates: 0
2022-07-27 21:16:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486200108421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486221042192384[0;39m 生成今日电子书快照开始
2022-07-27 21:16:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486221042192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486221042192384[0;39m ==> Parameters: 
2022-07-27 21:16:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486221042192384[0;39m <==    Updates: 0
2022-07-27 21:16:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486221042192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486242038878208[0;39m 生成今日电子书快照开始
2022-07-27 21:16:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486242038878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486242038878208[0;39m ==> Parameters: 
2022-07-27 21:16:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486242038878208[0;39m <==    Updates: 0
2022-07-27 21:16:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486242038878208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:16:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486262989426688[0;39m 生成今日电子书快照开始
2022-07-27 21:16:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486262989426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486262989426688[0;39m ==> Parameters: 
2022-07-27 21:16:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486262989426688[0;39m <==    Updates: 0
2022-07-27 21:16:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486262989426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486284002889728[0;39m 生成今日电子书快照开始
2022-07-27 21:16:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486284002889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486284002889728[0;39m ==> Parameters: 
2022-07-27 21:16:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486284002889728[0;39m <==    Updates: 0
2022-07-27 21:16:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486284002889728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486304966021120[0;39m 生成今日电子书快照开始
2022-07-27 21:16:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486304966021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486304966021120[0;39m ==> Parameters: 
2022-07-27 21:16:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486304966021120[0;39m <==    Updates: 0
2022-07-27 21:16:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486304966021120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486325929152512[0;39m 生成今日电子书快照开始
2022-07-27 21:16:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486325929152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486325929152512[0;39m ==> Parameters: 
2022-07-27 21:16:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486325929152512[0;39m <==    Updates: 0
2022-07-27 21:16:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486325929152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207486325937541120[0;39m 更新电子书下的文档数据开始
2022-07-27 21:16:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486325937541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:16:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486325937541120[0;39m ==> Parameters: 
2022-07-27 21:16:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486325937541120[0;39m <==    Updates: 7
2022-07-27 21:16:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207486325937541120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:16:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486346913255424[0;39m 生成今日电子书快照开始
2022-07-27 21:16:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486346913255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486346913255424[0;39m ==> Parameters: 
2022-07-27 21:16:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486346913255424[0;39m <==    Updates: 0
2022-07-27 21:16:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486346913255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486367859609600[0;39m 生成今日电子书快照开始
2022-07-27 21:16:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486367859609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486367859609600[0;39m ==> Parameters: 
2022-07-27 21:16:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486367859609600[0;39m <==    Updates: 0
2022-07-27 21:16:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486367859609600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:16:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486388860489728[0;39m 生成今日电子书快照开始
2022-07-27 21:16:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486388860489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486388860489728[0;39m ==> Parameters: 
2022-07-27 21:16:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486388860489728[0;39m <==    Updates: 0
2022-07-27 21:16:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486388860489728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:16:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486409798455296[0;39m 生成今日电子书快照开始
2022-07-27 21:16:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486409798455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:16:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486409798455296[0;39m ==> Parameters: 
2022-07-27 21:16:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486409798455296[0;39m <==    Updates: 0
2022-07-27 21:16:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486409798455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:17:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486430782558208[0;39m 生成今日电子书快照开始
2022-07-27 21:17:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486430782558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486430782558208[0;39m ==> Parameters: 
2022-07-27 21:17:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486430782558208[0;39m <==    Updates: 0
2022-07-27 21:17:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486430782558208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:17:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207486451728912384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:17:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486451728912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:17:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486451728912384[0;39m ==> Parameters: 
2022-07-27 21:17:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486451728912384[0;39m <==    Updates: 7
2022-07-27 21:17:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207486451728912384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:17:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486451737300992[0;39m 生成今日电子书快照开始
2022-07-27 21:17:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486451737300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486451737300992[0;39m ==> Parameters: 
2022-07-27 21:17:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486451737300992[0;39m <==    Updates: 0
2022-07-27 21:17:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486451737300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:17:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486472692043776[0;39m 生成今日电子书快照开始
2022-07-27 21:17:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486472692043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486472692043776[0;39m ==> Parameters: 
2022-07-27 21:17:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486472692043776[0;39m <==    Updates: 0
2022-07-27 21:17:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486472692043776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:17:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486493676146688[0;39m 生成今日电子书快照开始
2022-07-27 21:17:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486493676146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486493676146688[0;39m ==> Parameters: 
2022-07-27 21:17:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486493676146688[0;39m <==    Updates: 0
2022-07-27 21:17:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486493676146688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:17:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486514639278080[0;39m 生成今日电子书快照开始
2022-07-27 21:17:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486514639278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486514639278080[0;39m ==> Parameters: 
2022-07-27 21:17:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486514639278080[0;39m <==    Updates: 0
2022-07-27 21:17:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486514639278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:17:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486535619186688[0;39m 生成今日电子书快照开始
2022-07-27 21:17:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486535619186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486535619186688[0;39m ==> Parameters: 
2022-07-27 21:17:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486535619186688[0;39m <==    Updates: 0
2022-07-27 21:17:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486535619186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:17:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486556620066816[0;39m 生成今日电子书快照开始
2022-07-27 21:17:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486556620066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486556620066816[0;39m ==> Parameters: 
2022-07-27 21:17:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486556620066816[0;39m <==    Updates: 0
2022-07-27 21:17:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486556620066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:17:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207486577570615296[0;39m 更新电子书下的文档数据开始
2022-07-27 21:17:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486577570615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:17:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486577570615296[0;39m ==> Parameters: 
2022-07-27 21:17:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486577570615296[0;39m <==    Updates: 7
2022-07-27 21:17:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207486577570615296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:17:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486577574809600[0;39m 生成今日电子书快照开始
2022-07-27 21:17:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486577574809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486577574809600[0;39m ==> Parameters: 
2022-07-27 21:17:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486577574809600[0;39m <==    Updates: 0
2022-07-27 21:17:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486577574809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:17:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486598563106816[0;39m 生成今日电子书快照开始
2022-07-27 21:17:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486598563106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486598563106816[0;39m ==> Parameters: 
2022-07-27 21:17:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486598563106816[0;39m <==    Updates: 0
2022-07-27 21:17:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486598563106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:17:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486619522043904[0;39m 生成今日电子书快照开始
2022-07-27 21:17:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486619522043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486619522043904[0;39m ==> Parameters: 
2022-07-27 21:17:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486619522043904[0;39m <==    Updates: 0
2022-07-27 21:17:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486619522043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:17:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486640493563904[0;39m 生成今日电子书快照开始
2022-07-27 21:17:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486640493563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486640493563904[0;39m ==> Parameters: 
2022-07-27 21:17:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486640493563904[0;39m <==    Updates: 0
2022-07-27 21:17:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486640493563904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:17:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486661465083904[0;39m 生成今日电子书快照开始
2022-07-27 21:17:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486661465083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:17:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486661465083904[0;39m ==> Parameters: 
2022-07-27 21:17:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486661465083904[0;39m <==    Updates: 0
2022-07-27 21:17:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486661465083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:18:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486682453381120[0;39m 生成今日电子书快照开始
2022-07-27 21:18:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486682453381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486682453381120[0;39m ==> Parameters: 
2022-07-27 21:18:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486682453381120[0;39m <==    Updates: 0
2022-07-27 21:18:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486682453381120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:18:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486703391346688[0;39m 生成今日电子书快照开始
2022-07-27 21:18:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486703391346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486703391346688[0;39m ==> Parameters: 
2022-07-27 21:18:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486703391346688[0;39m <==    Updates: 0
2022-07-27 21:18:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486703391346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:18:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207486703399735296[0;39m 更新电子书下的文档数据开始
2022-07-27 21:18:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486703399735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:18:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486703399735296[0;39m ==> Parameters: 
2022-07-27 21:18:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486703399735296[0;39m <==    Updates: 7
2022-07-27 21:18:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207486703399735296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:18:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486724375449600[0;39m 生成今日电子书快照开始
2022-07-27 21:18:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486724375449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486724375449600[0;39m ==> Parameters: 
2022-07-27 21:18:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486724375449600[0;39m <==    Updates: 0
2022-07-27 21:18:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486724375449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:18:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486745330192384[0;39m 生成今日电子书快照开始
2022-07-27 21:18:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486745330192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486745330192384[0;39m ==> Parameters: 
2022-07-27 21:18:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486745330192384[0;39m <==    Updates: 0
2022-07-27 21:18:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486745330192384[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 21:18:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486766310100992[0;39m 生成今日电子书快照开始
2022-07-27 21:18:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486766310100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486766310100992[0;39m ==> Parameters: 
2022-07-27 21:18:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486766310100992[0;39m <==    Updates: 0
2022-07-27 21:18:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486766310100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:18:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486787319369728[0;39m 生成今日电子书快照开始
2022-07-27 21:18:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486787319369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486787319369728[0;39m ==> Parameters: 
2022-07-27 21:18:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486787319369728[0;39m <==    Updates: 0
2022-07-27 21:18:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486787319369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:18:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486808269918208[0;39m 生成今日电子书快照开始
2022-07-27 21:18:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486808269918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486808269918208[0;39m ==> Parameters: 
2022-07-27 21:18:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486808269918208[0;39m <==    Updates: 0
2022-07-27 21:18:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486808269918208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:18:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207486829220466688[0;39m 更新电子书下的文档数据开始
2022-07-27 21:18:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486829220466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:18:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486829220466688[0;39m ==> Parameters: 
2022-07-27 21:18:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486829220466688[0;39m <==    Updates: 7
2022-07-27 21:18:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207486829220466688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:18:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486829228855296[0;39m 生成今日电子书快照开始
2022-07-27 21:18:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486829228855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486829228855296[0;39m ==> Parameters: 
2022-07-27 21:18:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486829228855296[0;39m <==    Updates: 0
2022-07-27 21:18:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486829228855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:18:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486850208763904[0;39m 生成今日电子书快照开始
2022-07-27 21:18:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486850208763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486850208763904[0;39m ==> Parameters: 
2022-07-27 21:18:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486850208763904[0;39m <==    Updates: 0
2022-07-27 21:18:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486850208763904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:18:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486871171895296[0;39m 生成今日电子书快照开始
2022-07-27 21:18:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486871171895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486871171895296[0;39m ==> Parameters: 
2022-07-27 21:18:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486871171895296[0;39m <==    Updates: 0
2022-07-27 21:18:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486871171895296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:18:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486892130832384[0;39m 生成今日电子书快照开始
2022-07-27 21:18:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486892130832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486892130832384[0;39m ==> Parameters: 
2022-07-27 21:18:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486892130832384[0;39m <==    Updates: 0
2022-07-27 21:18:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486892130832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:18:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486913119129600[0;39m 生成今日电子书快照开始
2022-07-27 21:18:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486913119129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:18:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486913119129600[0;39m ==> Parameters: 
2022-07-27 21:18:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486913119129600[0;39m <==    Updates: 0
2022-07-27 21:18:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486913119129600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:19:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486934120009728[0;39m 生成今日电子书快照开始
2022-07-27 21:19:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486934120009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486934120009728[0;39m ==> Parameters: 
2022-07-27 21:19:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486934120009728[0;39m <==    Updates: 0
2022-07-27 21:19:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486934120009728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:19:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486955053780992[0;39m 生成今日电子书快照开始
2022-07-27 21:19:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486955053780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486955053780992[0;39m ==> Parameters: 
2022-07-27 21:19:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486955053780992[0;39m <==    Updates: 0
2022-07-27 21:19:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486955053780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:19:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207486955066363904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:19:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486955066363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:19:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486955066363904[0;39m ==> Parameters: 
2022-07-27 21:19:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207486955066363904[0;39m <==    Updates: 7
2022-07-27 21:19:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207486955066363904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:19:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486976029495296[0;39m 生成今日电子书快照开始
2022-07-27 21:19:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486976029495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486976029495296[0;39m ==> Parameters: 
2022-07-27 21:19:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486976029495296[0;39m <==    Updates: 0
2022-07-27 21:19:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486976029495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:19:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207486997026181120[0;39m 生成今日电子书快照开始
2022-07-27 21:19:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486997026181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486997026181120[0;39m ==> Parameters: 
2022-07-27 21:19:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207486997026181120[0;39m <==    Updates: 0
2022-07-27 21:19:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207486997026181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:19:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487017947369472[0;39m 生成今日电子书快照开始
2022-07-27 21:19:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487017947369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487017947369472[0;39m ==> Parameters: 
2022-07-27 21:19:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487017947369472[0;39m <==    Updates: 0
2022-07-27 21:19:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487017947369472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:19:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487038956638208[0;39m 生成今日电子书快照开始
2022-07-27 21:19:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487038956638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487038956638208[0;39m ==> Parameters: 
2022-07-27 21:19:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487038956638208[0;39m <==    Updates: 0
2022-07-27 21:19:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487038956638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:19:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487059944935424[0;39m 生成今日电子书快照开始
2022-07-27 21:19:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487059944935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487059944935424[0;39m ==> Parameters: 
2022-07-27 21:19:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487059944935424[0;39m <==    Updates: 0
2022-07-27 21:19:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487059944935424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:19:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487080895483904[0;39m 生成今日电子书快照开始
2022-07-27 21:19:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487080895483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487080895483904[0;39m ==> Parameters: 
2022-07-27 21:19:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487080895483904[0;39m <==    Updates: 0
2022-07-27 21:19:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487080895483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:19:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207487080903872512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:19:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487080903872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:19:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487080903872512[0;39m ==> Parameters: 
2022-07-27 21:19:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487080903872512[0;39m <==    Updates: 7
2022-07-27 21:19:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207487080903872512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:19:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487101858615296[0;39m 生成今日电子书快照开始
2022-07-27 21:19:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487101858615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487101858615296[0;39m ==> Parameters: 
2022-07-27 21:19:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487101858615296[0;39m <==    Updates: 0
2022-07-27 21:19:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487101858615296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:19:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487122813358080[0;39m 生成今日电子书快照开始
2022-07-27 21:19:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487122813358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487122813358080[0;39m ==> Parameters: 
2022-07-27 21:19:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487122813358080[0;39m <==    Updates: 0
2022-07-27 21:19:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487122813358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:19:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487143797460992[0;39m 生成今日电子书快照开始
2022-07-27 21:19:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487143797460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487143797460992[0;39m ==> Parameters: 
2022-07-27 21:19:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487143797460992[0;39m <==    Updates: 0
2022-07-27 21:19:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487143797460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:19:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487164810924032[0;39m 生成今日电子书快照开始
2022-07-27 21:19:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487164810924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:19:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487164810924032[0;39m ==> Parameters: 
2022-07-27 21:19:55.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487164810924032[0;39m <==    Updates: 0
2022-07-27 21:19:55.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487164810924032[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:20:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487185732112384[0;39m 生成今日电子书快照开始
2022-07-27 21:20:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487185732112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487185732112384[0;39m ==> Parameters: 
2022-07-27 21:20:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487185732112384[0;39m <==    Updates: 0
2022-07-27 21:20:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487185732112384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:20:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207487206732992512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:20:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487206732992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:20:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487206732992512[0;39m ==> Parameters: 
2022-07-27 21:20:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487206732992512[0;39m <==    Updates: 7
2022-07-27 21:20:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207487206732992512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:20:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487206741381120[0;39m 生成今日电子书快照开始
2022-07-27 21:20:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487206741381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487206741381120[0;39m ==> Parameters: 
2022-07-27 21:20:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487206741381120[0;39m <==    Updates: 0
2022-07-27 21:20:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487206741381120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:20:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487227712901120[0;39m 生成今日电子书快照开始
2022-07-27 21:20:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487227712901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487227712901120[0;39m ==> Parameters: 
2022-07-27 21:20:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487227712901120[0;39m <==    Updates: 0
2022-07-27 21:20:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487227712901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:20:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487248671838208[0;39m 生成今日电子书快照开始
2022-07-27 21:20:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487248671838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487248671838208[0;39m ==> Parameters: 
2022-07-27 21:20:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487248671838208[0;39m <==    Updates: 0
2022-07-27 21:20:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487248671838208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:20:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487269613998080[0;39m 生成今日电子书快照开始
2022-07-27 21:20:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487269613998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487269613998080[0;39m ==> Parameters: 
2022-07-27 21:20:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487269613998080[0;39m <==    Updates: 0
2022-07-27 21:20:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487269613998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:20:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487290602295296[0;39m 生成今日电子书快照开始
2022-07-27 21:20:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487290602295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487290602295296[0;39m ==> Parameters: 
2022-07-27 21:20:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487290602295296[0;39m <==    Updates: 0
2022-07-27 21:20:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487290602295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:20:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487311607369728[0;39m 生成今日电子书快照开始
2022-07-27 21:20:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487311607369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487311607369728[0;39m ==> Parameters: 
2022-07-27 21:20:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487311607369728[0;39m <==    Updates: 0
2022-07-27 21:20:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487311607369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:20:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207487332570501120[0;39m 更新电子书下的文档数据开始
2022-07-27 21:20:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487332570501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:20:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487332570501120[0;39m ==> Parameters: 
2022-07-27 21:20:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487332570501120[0;39m <==    Updates: 7
2022-07-27 21:20:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207487332570501120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:20:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487332574695424[0;39m 生成今日电子书快照开始
2022-07-27 21:20:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487332574695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487332574695424[0;39m ==> Parameters: 
2022-07-27 21:20:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487332574695424[0;39m <==    Updates: 0
2022-07-27 21:20:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487332574695424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:20:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487353546215424[0;39m 生成今日电子书快照开始
2022-07-27 21:20:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487353546215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487353546215424[0;39m ==> Parameters: 
2022-07-27 21:20:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487353546215424[0;39m <==    Updates: 0
2022-07-27 21:20:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487353546215424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:20:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487374471598080[0;39m 生成今日电子书快照开始
2022-07-27 21:20:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487374471598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487374471598080[0;39m ==> Parameters: 
2022-07-27 21:20:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487374471598080[0;39m <==    Updates: 0
2022-07-27 21:20:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487374471598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:20:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487395489255424[0;39m 生成今日电子书快照开始
2022-07-27 21:20:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487395489255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487395489255424[0;39m ==> Parameters: 
2022-07-27 21:20:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487395489255424[0;39m <==    Updates: 0
2022-07-27 21:20:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487395489255424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:20:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487416427220992[0;39m 生成今日电子书快照开始
2022-07-27 21:20:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487416427220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:20:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487416427220992[0;39m ==> Parameters: 
2022-07-27 21:20:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487416427220992[0;39m <==    Updates: 0
2022-07-27 21:20:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487416427220992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487437390352384[0;39m 生成今日电子书快照开始
2022-07-27 21:21:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487437390352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487437390352384[0;39m ==> Parameters: 
2022-07-27 21:21:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487437390352384[0;39m <==    Updates: 0
2022-07-27 21:21:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487437390352384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:21:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487458361872384[0;39m 生成今日电子书快照开始
2022-07-27 21:21:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487458361872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487458361872384[0;39m ==> Parameters: 
2022-07-27 21:21:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487458361872384[0;39m <==    Updates: 0
2022-07-27 21:21:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487458361872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207487458370260992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:21:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487458370260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:21:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487458370260992[0;39m ==> Parameters: 
2022-07-27 21:21:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487458370260992[0;39m <==    Updates: 7
2022-07-27 21:21:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207487458370260992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:21:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487479379529728[0;39m 生成今日电子书快照开始
2022-07-27 21:21:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487479379529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487479379529728[0;39m ==> Parameters: 
2022-07-27 21:21:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487479379529728[0;39m <==    Updates: 0
2022-07-27 21:21:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487479379529728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487500334272512[0;39m 生成今日电子书快照开始
2022-07-27 21:21:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487500334272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487500334272512[0;39m ==> Parameters: 
2022-07-27 21:21:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487500334272512[0;39m <==    Updates: 0
2022-07-27 21:21:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487500334272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487521289015296[0;39m 生成今日电子书快照开始
2022-07-27 21:21:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487521289015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487521289015296[0;39m ==> Parameters: 
2022-07-27 21:21:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487521289015296[0;39m <==    Updates: 0
2022-07-27 21:21:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487521289015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487542289895424[0;39m 生成今日电子书快照开始
2022-07-27 21:21:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487542289895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487542289895424[0;39m ==> Parameters: 
2022-07-27 21:21:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487542289895424[0;39m <==    Updates: 0
2022-07-27 21:21:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487542289895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487563253026816[0;39m 生成今日电子书快照开始
2022-07-27 21:21:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487563253026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487563253026816[0;39m ==> Parameters: 
2022-07-27 21:21:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487563253026816[0;39m <==    Updates: 0
2022-07-27 21:21:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487563253026816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:21:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487584211963904[0;39m 生成今日电子书快照开始
2022-07-27 21:21:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487584211963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487584211963904[0;39m ==> Parameters: 
2022-07-27 21:21:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487584211963904[0;39m <==    Updates: 0
2022-07-27 21:21:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487584211963904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:21:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207487584224546816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:21:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487584224546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:21:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487584224546816[0;39m ==> Parameters: 
2022-07-27 21:21:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487584224546816[0;39m <==    Updates: 7
2022-07-27 21:21:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207487584224546816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:21:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487605158318080[0;39m 生成今日电子书快照开始
2022-07-27 21:21:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487605158318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487605158318080[0;39m ==> Parameters: 
2022-07-27 21:21:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487605158318080[0;39m <==    Updates: 0
2022-07-27 21:21:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487605158318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487626180169728[0;39m 生成今日电子书快照开始
2022-07-27 21:21:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487626180169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487626180169728[0;39m ==> Parameters: 
2022-07-27 21:21:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487626180169728[0;39m <==    Updates: 0
2022-07-27 21:21:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487626180169728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487647139106816[0;39m 生成今日电子书快照开始
2022-07-27 21:21:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487647139106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487647139106816[0;39m ==> Parameters: 
2022-07-27 21:21:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487647139106816[0;39m <==    Updates: 0
2022-07-27 21:21:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487647139106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:21:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487668098043904[0;39m 生成今日电子书快照开始
2022-07-27 21:21:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487668098043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:21:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487668098043904[0;39m ==> Parameters: 
2022-07-27 21:21:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487668098043904[0;39m <==    Updates: 0
2022-07-27 21:21:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487668098043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:22:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487689044398080[0;39m 生成今日电子书快照开始
2022-07-27 21:22:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487689044398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487689044398080[0;39m ==> Parameters: 
2022-07-27 21:22:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487689044398080[0;39m <==    Updates: 0
2022-07-27 21:22:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487689044398080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:22:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487710045278208[0;39m 生成今日电子书快照开始
2022-07-27 21:22:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487710045278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487710045278208[0;39m ==> Parameters: 
2022-07-27 21:22:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487710045278208[0;39m <==    Updates: 0
2022-07-27 21:22:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487710045278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:22:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207487710053666816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:22:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487710053666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:22:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487710053666816[0;39m ==> Parameters: 
2022-07-27 21:22:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487710053666816[0;39m <==    Updates: 7
2022-07-27 21:22:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207487710053666816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:22:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487730974855168[0;39m 生成今日电子书快照开始
2022-07-27 21:22:10.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487730974855168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487730974855168[0;39m ==> Parameters: 
2022-07-27 21:22:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487730974855168[0;39m <==    Updates: 0
2022-07-27 21:22:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487730974855168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:22:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487751975735296[0;39m 生成今日电子书快照开始
2022-07-27 21:22:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487751975735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487751975735296[0;39m ==> Parameters: 
2022-07-27 21:22:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487751975735296[0;39m <==    Updates: 0
2022-07-27 21:22:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487751975735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:22:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487772951449600[0;39m 生成今日电子书快照开始
2022-07-27 21:22:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487772951449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487772951449600[0;39m ==> Parameters: 
2022-07-27 21:22:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487772951449600[0;39m <==    Updates: 0
2022-07-27 21:22:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487772951449600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:22:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487793922969600[0;39m 生成今日电子书快照开始
2022-07-27 21:22:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487793922969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487793922969600[0;39m ==> Parameters: 
2022-07-27 21:22:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487793922969600[0;39m <==    Updates: 0
2022-07-27 21:22:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487793922969600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:22:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487814911266816[0;39m 生成今日电子书快照开始
2022-07-27 21:22:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487814911266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487814911266816[0;39m ==> Parameters: 
2022-07-27 21:22:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487814911266816[0;39m <==    Updates: 0
2022-07-27 21:22:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487814911266816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:22:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207487835866009600[0;39m 更新电子书下的文档数据开始
2022-07-27 21:22:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487835866009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:22:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487835866009600[0;39m ==> Parameters: 
2022-07-27 21:22:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487835866009600[0;39m <==    Updates: 7
2022-07-27 21:22:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207487835866009600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:22:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487835874398208[0;39m 生成今日电子书快照开始
2022-07-27 21:22:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487835874398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487835874398208[0;39m ==> Parameters: 
2022-07-27 21:22:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487835874398208[0;39m <==    Updates: 0
2022-07-27 21:22:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487835874398208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:22:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487856816558080[0;39m 生成今日电子书快照开始
2022-07-27 21:22:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487856816558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487856816558080[0;39m ==> Parameters: 
2022-07-27 21:22:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487856816558080[0;39m <==    Updates: 0
2022-07-27 21:22:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487856816558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:22:45.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487877775495168[0;39m 生成今日电子书快照开始
2022-07-27 21:22:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487877775495168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487877775495168[0;39m ==> Parameters: 
2022-07-27 21:22:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487877775495168[0;39m <==    Updates: 0
2022-07-27 21:22:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487877775495168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:22:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487898767986688[0;39m 生成今日电子书快照开始
2022-07-27 21:22:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487898767986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487898767986688[0;39m ==> Parameters: 
2022-07-27 21:22:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487898767986688[0;39m <==    Updates: 0
2022-07-27 21:22:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487898767986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:22:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487919768866816[0;39m 生成今日电子书快照开始
2022-07-27 21:22:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487919768866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:22:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487919768866816[0;39m ==> Parameters: 
2022-07-27 21:22:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487919768866816[0;39m <==    Updates: 0
2022-07-27 21:22:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487919768866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:23:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487940736192512[0;39m 生成今日电子书快照开始
2022-07-27 21:23:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487940736192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487940736192512[0;39m ==> Parameters: 
2022-07-27 21:23:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487940736192512[0;39m <==    Updates: 0
2022-07-27 21:23:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487940736192512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:23:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207487961716101120[0;39m 更新电子书下的文档数据开始
2022-07-27 21:23:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487961716101120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:23:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487961716101120[0;39m ==> Parameters: 
2022-07-27 21:23:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207487961716101120[0;39m <==    Updates: 7
2022-07-27 21:23:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207487961716101120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:23:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487961724489728[0;39m 生成今日电子书快照开始
2022-07-27 21:23:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487961724489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487961724489728[0;39m ==> Parameters: 
2022-07-27 21:23:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487961724489728[0;39m <==    Updates: 0
2022-07-27 21:23:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487961724489728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:23:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207487982658260992[0;39m 生成今日电子书快照开始
2022-07-27 21:23:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487982658260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487982658260992[0;39m ==> Parameters: 
2022-07-27 21:23:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207487982658260992[0;39m <==    Updates: 0
2022-07-27 21:23:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207487982658260992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:23:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488003638169600[0;39m 生成今日电子书快照开始
2022-07-27 21:23:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488003638169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488003638169600[0;39m ==> Parameters: 
2022-07-27 21:23:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488003638169600[0;39m <==    Updates: 0
2022-07-27 21:23:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488003638169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:23:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488024639049728[0;39m 生成今日电子书快照开始
2022-07-27 21:23:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488024639049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488024639049728[0;39m ==> Parameters: 
2022-07-27 21:23:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488024639049728[0;39m <==    Updates: 0
2022-07-27 21:23:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488024639049728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:23:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488045597986816[0;39m 生成今日电子书快照开始
2022-07-27 21:23:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488045597986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488045597986816[0;39m ==> Parameters: 
2022-07-27 21:23:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488045597986816[0;39m <==    Updates: 0
2022-07-27 21:23:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488045597986816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:23:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488066531758080[0;39m 生成今日电子书快照开始
2022-07-27 21:23:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488066531758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488066531758080[0;39m ==> Parameters: 
2022-07-27 21:23:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488066531758080[0;39m <==    Updates: 0
2022-07-27 21:23:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488066531758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:23:35.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207488087490695168[0;39m 更新电子书下的文档数据开始
2022-07-27 21:23:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488087490695168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:23:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488087490695168[0;39m ==> Parameters: 
2022-07-27 21:23:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488087490695168[0;39m <==    Updates: 7
2022-07-27 21:23:35.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207488087490695168[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:23:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488087499083776[0;39m 生成今日电子书快照开始
2022-07-27 21:23:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488087499083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488087499083776[0;39m ==> Parameters: 
2022-07-27 21:23:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488087499083776[0;39m <==    Updates: 0
2022-07-27 21:23:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488087499083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:23:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488108466409472[0;39m 生成今日电子书快照开始
2022-07-27 21:23:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488108466409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488108466409472[0;39m ==> Parameters: 
2022-07-27 21:23:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488108466409472[0;39m <==    Updates: 0
2022-07-27 21:23:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488108466409472[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 21:23:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488129467289600[0;39m 生成今日电子书快照开始
2022-07-27 21:23:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488129467289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488129467289600[0;39m ==> Parameters: 
2022-07-27 21:23:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488129467289600[0;39m <==    Updates: 0
2022-07-27 21:23:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488129467289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:23:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488150463975424[0;39m 生成今日电子书快照开始
2022-07-27 21:23:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488150463975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488150463975424[0;39m ==> Parameters: 
2022-07-27 21:23:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488150463975424[0;39m <==    Updates: 0
2022-07-27 21:23:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488150463975424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:23:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488171431301120[0;39m 生成今日电子书快照开始
2022-07-27 21:23:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488171431301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:23:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488171431301120[0;39m ==> Parameters: 
2022-07-27 21:23:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488171431301120[0;39m <==    Updates: 0
2022-07-27 21:23:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488171431301120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:24:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488192356683776[0;39m 生成今日电子书快照开始
2022-07-27 21:24:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488192356683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488192356683776[0;39m ==> Parameters: 
2022-07-27 21:24:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488192356683776[0;39m <==    Updates: 0
2022-07-27 21:24:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488192356683776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:24:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488213378535424[0;39m 生成今日电子书快照开始
2022-07-27 21:24:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488213378535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488213378535424[0;39m ==> Parameters: 
2022-07-27 21:24:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488213378535424[0;39m <==    Updates: 0
2022-07-27 21:24:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488213378535424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:24:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207488213391118336[0;39m 更新电子书下的文档数据开始
2022-07-27 21:24:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488213391118336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:24:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488213391118336[0;39m ==> Parameters: 
2022-07-27 21:24:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488213391118336[0;39m <==    Updates: 7
2022-07-27 21:24:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207488213391118336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:24:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488234341666816[0;39m 生成今日电子书快照开始
2022-07-27 21:24:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488234341666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488234341666816[0;39m ==> Parameters: 
2022-07-27 21:24:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488234341666816[0;39m <==    Updates: 0
2022-07-27 21:24:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488234341666816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:24:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488255304798208[0;39m 生成今日电子书快照开始
2022-07-27 21:24:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488255304798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488255304798208[0;39m ==> Parameters: 
2022-07-27 21:24:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488255304798208[0;39m <==    Updates: 0
2022-07-27 21:24:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488255304798208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:24:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488276259540992[0;39m 生成今日电子书快照开始
2022-07-27 21:24:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488276259540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488276259540992[0;39m ==> Parameters: 
2022-07-27 21:24:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488276259540992[0;39m <==    Updates: 0
2022-07-27 21:24:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488276259540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:24:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488297222672384[0;39m 生成今日电子书快照开始
2022-07-27 21:24:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488297222672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488297222672384[0;39m ==> Parameters: 
2022-07-27 21:24:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488297222672384[0;39m <==    Updates: 0
2022-07-27 21:24:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488297222672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:24:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488318206775296[0;39m 生成今日电子书快照开始
2022-07-27 21:24:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488318206775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488318206775296[0;39m ==> Parameters: 
2022-07-27 21:24:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488318206775296[0;39m <==    Updates: 0
2022-07-27 21:24:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488318206775296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:24:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207488339207655424[0;39m 更新电子书下的文档数据开始
2022-07-27 21:24:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488339207655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:24:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488339207655424[0;39m ==> Parameters: 
2022-07-27 21:24:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488339207655424[0;39m <==    Updates: 7
2022-07-27 21:24:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207488339207655424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:24:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488339211849728[0;39m 生成今日电子书快照开始
2022-07-27 21:24:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488339211849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488339211849728[0;39m ==> Parameters: 
2022-07-27 21:24:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488339211849728[0;39m <==    Updates: 0
2022-07-27 21:24:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488339211849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:24:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488360158203904[0;39m 生成今日电子书快照开始
2022-07-27 21:24:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488360158203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488360158203904[0;39m ==> Parameters: 
2022-07-27 21:24:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488360158203904[0;39m <==    Updates: 0
2022-07-27 21:24:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488360158203904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:24:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488381125529600[0;39m 生成今日电子书快照开始
2022-07-27 21:24:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488381125529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488381125529600[0;39m ==> Parameters: 
2022-07-27 21:24:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488381125529600[0;39m <==    Updates: 0
2022-07-27 21:24:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488381125529600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:24:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488402113826816[0;39m 生成今日电子书快照开始
2022-07-27 21:24:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488402113826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488402113826816[0;39m ==> Parameters: 
2022-07-27 21:24:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488402113826816[0;39m <==    Updates: 0
2022-07-27 21:24:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488402113826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:24:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488423068569600[0;39m 生成今日电子书快照开始
2022-07-27 21:24:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488423068569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:24:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488423068569600[0;39m ==> Parameters: 
2022-07-27 21:24:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488423068569600[0;39m <==    Updates: 0
2022-07-27 21:24:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488423068569600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:25:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488444061061120[0;39m 生成今日电子书快照开始
2022-07-27 21:25:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488444061061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488444061061120[0;39m ==> Parameters: 
2022-07-27 21:25:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488444061061120[0;39m <==    Updates: 0
2022-07-27 21:25:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488444061061120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:25:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488465003220992[0;39m 生成今日电子书快照开始
2022-07-27 21:25:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488465003220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488465003220992[0;39m ==> Parameters: 
2022-07-27 21:25:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488465003220992[0;39m <==    Updates: 0
2022-07-27 21:25:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488465003220992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:25:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207488465015803904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:25:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488465015803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:25:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488465015803904[0;39m ==> Parameters: 
2022-07-27 21:25:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488465015803904[0;39m <==    Updates: 7
2022-07-27 21:25:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207488465015803904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:25:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488485983129600[0;39m 生成今日电子书快照开始
2022-07-27 21:25:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488485983129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488485983129600[0;39m ==> Parameters: 
2022-07-27 21:25:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488485983129600[0;39m <==    Updates: 0
2022-07-27 21:25:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488485983129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:25:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488506975621120[0;39m 生成今日电子书快照开始
2022-07-27 21:25:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488506975621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488506975621120[0;39m ==> Parameters: 
2022-07-27 21:25:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488506975621120[0;39m <==    Updates: 0
2022-07-27 21:25:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488506975621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:25:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488527905198080[0;39m 生成今日电子书快照开始
2022-07-27 21:25:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488527905198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488527905198080[0;39m ==> Parameters: 
2022-07-27 21:25:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488527905198080[0;39m <==    Updates: 0
2022-07-27 21:25:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488527905198080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:25:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488548876718080[0;39m 生成今日电子书快照开始
2022-07-27 21:25:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488548876718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488548876718080[0;39m ==> Parameters: 
2022-07-27 21:25:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488548876718080[0;39m <==    Updates: 0
2022-07-27 21:25:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488548876718080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:25:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488569885986816[0;39m 生成今日电子书快照开始
2022-07-27 21:25:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488569885986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488569885986816[0;39m ==> Parameters: 
2022-07-27 21:25:30.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488569885986816[0;39m <==    Updates: 0
2022-07-27 21:25:30.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488569885986816[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 21:25:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488590811369472[0;39m 生成今日电子书快照开始
2022-07-27 21:25:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488590811369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488590811369472[0;39m ==> Parameters: 
2022-07-27 21:25:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488590811369472[0;39m <==    Updates: 0
2022-07-27 21:25:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488590811369472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:25:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207488590823952384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:25:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488590823952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:25:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488590823952384[0;39m ==> Parameters: 
2022-07-27 21:25:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488590823952384[0;39m <==    Updates: 7
2022-07-27 21:25:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207488590823952384[0;39m 更新电子书下的文档数据结束，耗时：9 毫秒
2022-07-27 21:25:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488611812249600[0;39m 生成今日电子书快照开始
2022-07-27 21:25:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488611812249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488611812249600[0;39m ==> Parameters: 
2022-07-27 21:25:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488611812249600[0;39m <==    Updates: 0
2022-07-27 21:25:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488611812249600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:25:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488632792158208[0;39m 生成今日电子书快照开始
2022-07-27 21:25:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488632792158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488632792158208[0;39m ==> Parameters: 
2022-07-27 21:25:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488632792158208[0;39m <==    Updates: 0
2022-07-27 21:25:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488632792158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:25:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488653742706688[0;39m 生成今日电子书快照开始
2022-07-27 21:25:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488653742706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488653742706688[0;39m ==> Parameters: 
2022-07-27 21:25:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488653742706688[0;39m <==    Updates: 0
2022-07-27 21:25:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488653742706688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:25:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488674722615296[0;39m 生成今日电子书快照开始
2022-07-27 21:25:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488674722615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:25:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488674722615296[0;39m ==> Parameters: 
2022-07-27 21:25:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488674722615296[0;39m <==    Updates: 0
2022-07-27 21:25:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488674722615296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:26:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488695706718208[0;39m 生成今日电子书快照开始
2022-07-27 21:26:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488695706718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488695706718208[0;39m ==> Parameters: 
2022-07-27 21:26:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488695706718208[0;39m <==    Updates: 0
2022-07-27 21:26:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488695706718208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:26:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207488716661460992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:26:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488716661460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:26:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488716661460992[0;39m ==> Parameters: 
2022-07-27 21:26:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488716661460992[0;39m <==    Updates: 7
2022-07-27 21:26:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207488716661460992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:26:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488716669849600[0;39m 生成今日电子书快照开始
2022-07-27 21:26:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488716669849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488716669849600[0;39m ==> Parameters: 
2022-07-27 21:26:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488716669849600[0;39m <==    Updates: 0
2022-07-27 21:26:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488716669849600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:26:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488737662341120[0;39m 生成今日电子书快照开始
2022-07-27 21:26:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488737662341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488737662341120[0;39m ==> Parameters: 
2022-07-27 21:26:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488737662341120[0;39m <==    Updates: 0
2022-07-27 21:26:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488737662341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:26:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488758629666816[0;39m 生成今日电子书快照开始
2022-07-27 21:26:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488758629666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488758629666816[0;39m ==> Parameters: 
2022-07-27 21:26:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488758629666816[0;39m <==    Updates: 0
2022-07-27 21:26:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488758629666816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:26:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488779576020992[0;39m 生成今日电子书快照开始
2022-07-27 21:26:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488779576020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488779576020992[0;39m ==> Parameters: 
2022-07-27 21:26:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488779576020992[0;39m <==    Updates: 0
2022-07-27 21:26:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488779576020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:26:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488800551735296[0;39m 生成今日电子书快照开始
2022-07-27 21:26:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488800551735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488800551735296[0;39m ==> Parameters: 
2022-07-27 21:26:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488800551735296[0;39m <==    Updates: 0
2022-07-27 21:26:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488800551735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:26:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488821514866688[0;39m 生成今日电子书快照开始
2022-07-27 21:26:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488821514866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488821514866688[0;39m ==> Parameters: 
2022-07-27 21:26:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488821514866688[0;39m <==    Updates: 0
2022-07-27 21:26:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488821514866688[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 21:26:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207488842511552512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:26:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488842511552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:26:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488842511552512[0;39m ==> Parameters: 
2022-07-27 21:26:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488842511552512[0;39m <==    Updates: 7
2022-07-27 21:26:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207488842511552512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:26:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488842519941120[0;39m 生成今日电子书快照开始
2022-07-27 21:26:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488842519941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488842519941120[0;39m ==> Parameters: 
2022-07-27 21:26:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488842519941120[0;39m <==    Updates: 0
2022-07-27 21:26:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488842519941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:26:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488863470489600[0;39m 生成今日电子书快照开始
2022-07-27 21:26:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488863470489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488863470489600[0;39m ==> Parameters: 
2022-07-27 21:26:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488863470489600[0;39m <==    Updates: 0
2022-07-27 21:26:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488863470489600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:26:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488884437815296[0;39m 生成今日电子书快照开始
2022-07-27 21:26:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488884437815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488884437815296[0;39m ==> Parameters: 
2022-07-27 21:26:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488884437815296[0;39m <==    Updates: 0
2022-07-27 21:26:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488884437815296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:26:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488905400946688[0;39m 生成今日电子书快照开始
2022-07-27 21:26:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488905400946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488905400946688[0;39m ==> Parameters: 
2022-07-27 21:26:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488905400946688[0;39m <==    Updates: 0
2022-07-27 21:26:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488905400946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:26:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488926389243904[0;39m 生成今日电子书快照开始
2022-07-27 21:26:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488926389243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:26:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488926389243904[0;39m ==> Parameters: 
2022-07-27 21:26:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488926389243904[0;39m <==    Updates: 0
2022-07-27 21:26:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488926389243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:27:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488947373346816[0;39m 生成今日电子书快照开始
2022-07-27 21:27:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488947373346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488947373346816[0;39m ==> Parameters: 
2022-07-27 21:27:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488947373346816[0;39m <==    Updates: 0
2022-07-27 21:27:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488947373346816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:27:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207488968323895296[0;39m 更新电子书下的文档数据开始
2022-07-27 21:27:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488968323895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:27:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488968323895296[0;39m ==> Parameters: 
2022-07-27 21:27:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207488968323895296[0;39m <==    Updates: 7
2022-07-27 21:27:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207488968323895296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:27:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488968328089600[0;39m 生成今日电子书快照开始
2022-07-27 21:27:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488968328089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488968328089600[0;39m ==> Parameters: 
2022-07-27 21:27:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488968328089600[0;39m <==    Updates: 0
2022-07-27 21:27:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488968328089600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:27:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207488989333164032[0;39m 生成今日电子书快照开始
2022-07-27 21:27:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488989333164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488989333164032[0;39m ==> Parameters: 
2022-07-27 21:27:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207488989333164032[0;39m <==    Updates: 0
2022-07-27 21:27:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207488989333164032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:27:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489010254352384[0;39m 生成今日电子书快照开始
2022-07-27 21:27:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489010254352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489010254352384[0;39m ==> Parameters: 
2022-07-27 21:27:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489010254352384[0;39m <==    Updates: 0
2022-07-27 21:27:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489010254352384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:27:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489031267815424[0;39m 生成今日电子书快照开始
2022-07-27 21:27:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489031267815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489031267815424[0;39m ==> Parameters: 
2022-07-27 21:27:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489031267815424[0;39m <==    Updates: 0
2022-07-27 21:27:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489031267815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:27:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489052189003776[0;39m 生成今日电子书快照开始
2022-07-27 21:27:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489052189003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489052189003776[0;39m ==> Parameters: 
2022-07-27 21:27:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489052189003776[0;39m <==    Updates: 0
2022-07-27 21:27:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489052189003776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:27:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489073168912384[0;39m 生成今日电子书快照开始
2022-07-27 21:27:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489073168912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489073168912384[0;39m ==> Parameters: 
2022-07-27 21:27:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489073168912384[0;39m <==    Updates: 0
2022-07-27 21:27:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489073168912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:27:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489094157209600[0;39m 生成今日电子书快照开始
2022-07-27 21:27:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489094157209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489094157209600[0;39m ==> Parameters: 
2022-07-27 21:27:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489094157209600[0;39m <==    Updates: 0
2022-07-27 21:27:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489094157209600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:27:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207489094169792512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:27:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489094169792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:27:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489094169792512[0;39m ==> Parameters: 
2022-07-27 21:27:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489094169792512[0;39m <==    Updates: 7
2022-07-27 21:27:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207489094169792512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:27:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489115132923904[0;39m 生成今日电子书快照开始
2022-07-27 21:27:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489115132923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489115132923904[0;39m ==> Parameters: 
2022-07-27 21:27:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489115132923904[0;39m <==    Updates: 0
2022-07-27 21:27:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489115132923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:27:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489136075083776[0;39m 生成今日电子书快照开始
2022-07-27 21:27:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489136075083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489136075083776[0;39m ==> Parameters: 
2022-07-27 21:27:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489136075083776[0;39m <==    Updates: 0
2022-07-27 21:27:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489136075083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:27:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489157101129728[0;39m 生成今日电子书快照开始
2022-07-27 21:27:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489157101129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489157101129728[0;39m ==> Parameters: 
2022-07-27 21:27:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489157101129728[0;39m <==    Updates: 0
2022-07-27 21:27:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489157101129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:27:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489178043289600[0;39m 生成今日电子书快照开始
2022-07-27 21:27:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489178043289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:27:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489178043289600[0;39m ==> Parameters: 
2022-07-27 21:27:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489178043289600[0;39m <==    Updates: 0
2022-07-27 21:27:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489178043289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:28:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489199031586816[0;39m 生成今日电子书快照开始
2022-07-27 21:28:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489199031586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489199031586816[0;39m ==> Parameters: 
2022-07-27 21:28:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489199031586816[0;39m <==    Updates: 0
2022-07-27 21:28:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489199031586816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:28:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489220011495424[0;39m 生成今日电子书快照开始
2022-07-27 21:28:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489220011495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489220011495424[0;39m ==> Parameters: 
2022-07-27 21:28:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489220011495424[0;39m <==    Updates: 0
2022-07-27 21:28:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489220011495424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:28:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207489220019884032[0;39m 更新电子书下的文档数据开始
2022-07-27 21:28:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489220019884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:28:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489220019884032[0;39m ==> Parameters: 
2022-07-27 21:28:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489220019884032[0;39m <==    Updates: 7
2022-07-27 21:28:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207489220019884032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:28:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489240966238208[0;39m 生成今日电子书快照开始
2022-07-27 21:28:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489240966238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489240966238208[0;39m ==> Parameters: 
2022-07-27 21:28:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489240966238208[0;39m <==    Updates: 0
2022-07-27 21:28:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489240966238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:28:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489261954535424[0;39m 生成今日电子书快照开始
2022-07-27 21:28:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489261954535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489261954535424[0;39m ==> Parameters: 
2022-07-27 21:28:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489261954535424[0;39m <==    Updates: 0
2022-07-27 21:28:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489261954535424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:28:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489282875723776[0;39m 生成今日电子书快照开始
2022-07-27 21:28:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489282875723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489282875723776[0;39m ==> Parameters: 
2022-07-27 21:28:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489282875723776[0;39m <==    Updates: 0
2022-07-27 21:28:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489282875723776[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:28:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489303868215296[0;39m 生成今日电子书快照开始
2022-07-27 21:28:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489303868215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489303868215296[0;39m ==> Parameters: 
2022-07-27 21:28:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489303868215296[0;39m <==    Updates: 0
2022-07-27 21:28:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489303868215296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:28:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489324869095424[0;39m 生成今日电子书快照开始
2022-07-27 21:28:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489324869095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489324869095424[0;39m ==> Parameters: 
2022-07-27 21:28:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489324869095424[0;39m <==    Updates: 0
2022-07-27 21:28:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489324869095424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:28:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489345798672384[0;39m 生成今日电子书快照开始
2022-07-27 21:28:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489345798672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489345798672384[0;39m ==> Parameters: 
2022-07-27 21:28:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489345798672384[0;39m <==    Updates: 0
2022-07-27 21:28:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489345798672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:28:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207489345807060992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:28:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489345807060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:28:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489345807060992[0;39m ==> Parameters: 
2022-07-27 21:28:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489345807060992[0;39m <==    Updates: 7
2022-07-27 21:28:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207489345807060992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:28:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489366765998080[0;39m 生成今日电子书快照开始
2022-07-27 21:28:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489366765998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489366765998080[0;39m ==> Parameters: 
2022-07-27 21:28:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489366765998080[0;39m <==    Updates: 0
2022-07-27 21:28:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489366765998080[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-27 21:28:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489387779461120[0;39m 生成今日电子书快照开始
2022-07-27 21:28:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489387779461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489387779461120[0;39m ==> Parameters: 
2022-07-27 21:28:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489387779461120[0;39m <==    Updates: 0
2022-07-27 21:28:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489387779461120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:28:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489408759369728[0;39m 生成今日电子书快照开始
2022-07-27 21:28:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489408759369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489408759369728[0;39m ==> Parameters: 
2022-07-27 21:28:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489408759369728[0;39m <==    Updates: 0
2022-07-27 21:28:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489408759369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:28:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489429722501120[0;39m 生成今日电子书快照开始
2022-07-27 21:28:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489429722501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:28:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489429722501120[0;39m ==> Parameters: 
2022-07-27 21:28:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489429722501120[0;39m <==    Updates: 0
2022-07-27 21:28:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489429722501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:29:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489450647883776[0;39m 生成今日电子书快照开始
2022-07-27 21:29:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489450647883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489450647883776[0;39m ==> Parameters: 
2022-07-27 21:29:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489450647883776[0;39m <==    Updates: 0
2022-07-27 21:29:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489450647883776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:29:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207489471661346816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:29:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489471661346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:29:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489471661346816[0;39m ==> Parameters: 
2022-07-27 21:29:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489471661346816[0;39m <==    Updates: 7
2022-07-27 21:29:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207489471661346816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:29:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489471669735424[0;39m 生成今日电子书快照开始
2022-07-27 21:29:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489471669735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489471669735424[0;39m ==> Parameters: 
2022-07-27 21:29:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489471669735424[0;39m <==    Updates: 0
2022-07-27 21:29:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489471669735424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:29:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489492641255424[0;39m 生成今日电子书快照开始
2022-07-27 21:29:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489492641255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489492641255424[0;39m ==> Parameters: 
2022-07-27 21:29:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489492641255424[0;39m <==    Updates: 0
2022-07-27 21:29:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489492641255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:29:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489513616969728[0;39m 生成今日电子书快照开始
2022-07-27 21:29:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489513616969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489513616969728[0;39m ==> Parameters: 
2022-07-27 21:29:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489513616969728[0;39m <==    Updates: 0
2022-07-27 21:29:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489513616969728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:29:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489534571712512[0;39m 生成今日电子书快照开始
2022-07-27 21:29:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489534571712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489534571712512[0;39m ==> Parameters: 
2022-07-27 21:29:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489534571712512[0;39m <==    Updates: 0
2022-07-27 21:29:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489534571712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:29:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489555501289472[0;39m 生成今日电子书快照开始
2022-07-27 21:29:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489555501289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489555501289472[0;39m ==> Parameters: 
2022-07-27 21:29:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489555501289472[0;39m <==    Updates: 0
2022-07-27 21:29:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489555501289472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:29:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489576489586688[0;39m 生成今日电子书快照开始
2022-07-27 21:29:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489576489586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489576489586688[0;39m ==> Parameters: 
2022-07-27 21:29:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489576489586688[0;39m <==    Updates: 0
2022-07-27 21:29:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489576489586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:29:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207489597473689600[0;39m 更新电子书下的文档数据开始
2022-07-27 21:29:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489597473689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:29:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489597473689600[0;39m ==> Parameters: 
2022-07-27 21:29:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489597473689600[0;39m <==    Updates: 7
2022-07-27 21:29:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207489597473689600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:29:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489597477883904[0;39m 生成今日电子书快照开始
2022-07-27 21:29:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489597477883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489597477883904[0;39m ==> Parameters: 
2022-07-27 21:29:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489597477883904[0;39m <==    Updates: 0
2022-07-27 21:29:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489597477883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:29:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489618470375424[0;39m 生成今日电子书快照开始
2022-07-27 21:29:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489618470375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489618470375424[0;39m ==> Parameters: 
2022-07-27 21:29:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489618470375424[0;39m <==    Updates: 0
2022-07-27 21:29:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489618470375424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:29:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489639446089728[0;39m 生成今日电子书快照开始
2022-07-27 21:29:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489639446089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489639446089728[0;39m ==> Parameters: 
2022-07-27 21:29:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489639446089728[0;39m <==    Updates: 0
2022-07-27 21:29:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489639446089728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:29:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489660400832512[0;39m 生成今日电子书快照开始
2022-07-27 21:29:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489660400832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489660400832512[0;39m ==> Parameters: 
2022-07-27 21:29:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489660400832512[0;39m <==    Updates: 0
2022-07-27 21:29:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489660400832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:29:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489681368158208[0;39m 生成今日电子书快照开始
2022-07-27 21:29:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489681368158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:29:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489681368158208[0;39m ==> Parameters: 
2022-07-27 21:29:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489681368158208[0;39m <==    Updates: 0
2022-07-27 21:29:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489681368158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:30:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489702364844032[0;39m 生成今日电子书快照开始
2022-07-27 21:30:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489702364844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489702364844032[0;39m ==> Parameters: 
2022-07-27 21:30:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489702364844032[0;39m <==    Updates: 0
2022-07-27 21:30:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489702364844032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:30:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489723298615296[0;39m 生成今日电子书快照开始
2022-07-27 21:30:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489723298615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489723298615296[0;39m ==> Parameters: 
2022-07-27 21:30:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489723298615296[0;39m <==    Updates: 0
2022-07-27 21:30:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489723298615296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:30:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207489723307003904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:30:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489723307003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:30:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489723307003904[0;39m ==> Parameters: 
2022-07-27 21:30:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489723307003904[0;39m <==    Updates: 7
2022-07-27 21:30:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207489723307003904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:30:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489744244969472[0;39m 生成今日电子书快照开始
2022-07-27 21:30:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489744244969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489744244969472[0;39m ==> Parameters: 
2022-07-27 21:30:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489744244969472[0;39m <==    Updates: 0
2022-07-27 21:30:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489744244969472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:30:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489765254238208[0;39m 生成今日电子书快照开始
2022-07-27 21:30:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489765254238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489765254238208[0;39m ==> Parameters: 
2022-07-27 21:30:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489765254238208[0;39m <==    Updates: 0
2022-07-27 21:30:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489765254238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:30:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489786192203776[0;39m 生成今日电子书快照开始
2022-07-27 21:30:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489786192203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489786192203776[0;39m ==> Parameters: 
2022-07-27 21:30:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489786192203776[0;39m <==    Updates: 0
2022-07-27 21:30:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489786192203776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:30:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489807218249728[0;39m 生成今日电子书快照开始
2022-07-27 21:30:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489807218249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489807218249728[0;39m ==> Parameters: 
2022-07-27 21:30:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489807218249728[0;39m <==    Updates: 0
2022-07-27 21:30:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489807218249728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:30:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489828160409600[0;39m 生成今日电子书快照开始
2022-07-27 21:30:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489828160409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489828160409600[0;39m ==> Parameters: 
2022-07-27 21:30:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489828160409600[0;39m <==    Updates: 0
2022-07-27 21:30:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489828160409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:30:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489849127735296[0;39m 生成今日电子书快照开始
2022-07-27 21:30:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489849127735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489849127735296[0;39m ==> Parameters: 
2022-07-27 21:30:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489849127735296[0;39m <==    Updates: 0
2022-07-27 21:30:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489849127735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:30:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207489849136123904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:30:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489849136123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:30:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489849136123904[0;39m ==> Parameters: 
2022-07-27 21:30:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489849136123904[0;39m <==    Updates: 7
2022-07-27 21:30:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207489849136123904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:30:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489870124421120[0;39m 生成今日电子书快照开始
2022-07-27 21:30:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489870124421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489870124421120[0;39m ==> Parameters: 
2022-07-27 21:30:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489870124421120[0;39m <==    Updates: 0
2022-07-27 21:30:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489870124421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:30:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489891087552512[0;39m 生成今日电子书快照开始
2022-07-27 21:30:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489891087552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489891087552512[0;39m ==> Parameters: 
2022-07-27 21:30:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489891087552512[0;39m <==    Updates: 0
2022-07-27 21:30:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489891087552512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:30:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489912071655424[0;39m 生成今日电子书快照开始
2022-07-27 21:30:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489912071655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489912071655424[0;39m ==> Parameters: 
2022-07-27 21:30:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489912071655424[0;39m <==    Updates: 0
2022-07-27 21:30:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489912071655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:30:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489933030592512[0;39m 生成今日电子书快照开始
2022-07-27 21:30:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489933030592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:30:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489933030592512[0;39m ==> Parameters: 
2022-07-27 21:30:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489933030592512[0;39m <==    Updates: 0
2022-07-27 21:30:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489933030592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:31:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489953976946688[0;39m 生成今日电子书快照开始
2022-07-27 21:31:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489953976946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489953976946688[0;39m ==> Parameters: 
2022-07-27 21:31:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489953976946688[0;39m <==    Updates: 0
2022-07-27 21:31:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489953976946688[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-27 21:31:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489974969438208[0;39m 生成今日电子书快照开始
2022-07-27 21:31:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489974969438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489974969438208[0;39m ==> Parameters: 
2022-07-27 21:31:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489974969438208[0;39m <==    Updates: 0
2022-07-27 21:31:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489974969438208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 21:31:05.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207489975007186944[0;39m 更新电子书下的文档数据开始
2022-07-27 21:31:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489975007186944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:31:05.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489975007186944[0;39m ==> Parameters: 
2022-07-27 21:31:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207489975007186944[0;39m <==    Updates: 7
2022-07-27 21:31:05.022 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207489975007186944[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-27 21:31:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207489995915792384[0;39m 生成今日电子书快照开始
2022-07-27 21:31:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489995915792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489995915792384[0;39m ==> Parameters: 
2022-07-27 21:31:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207489995915792384[0;39m <==    Updates: 0
2022-07-27 21:31:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207489995915792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:31:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490016883118080[0;39m 生成今日电子书快照开始
2022-07-27 21:31:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490016883118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490016883118080[0;39m ==> Parameters: 
2022-07-27 21:31:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490016883118080[0;39m <==    Updates: 0
2022-07-27 21:31:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490016883118080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:31:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490037875609600[0;39m 生成今日电子书快照开始
2022-07-27 21:31:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490037875609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490037875609600[0;39m ==> Parameters: 
2022-07-27 21:31:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490037875609600[0;39m <==    Updates: 0
2022-07-27 21:31:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490037875609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:31:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490058880684032[0;39m 生成今日电子书快照开始
2022-07-27 21:31:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490058880684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490058880684032[0;39m ==> Parameters: 
2022-07-27 21:31:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490058880684032[0;39m <==    Updates: 0
2022-07-27 21:31:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490058880684032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:31:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490079814455296[0;39m 生成今日电子书快照开始
2022-07-27 21:31:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490079814455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490079814455296[0;39m ==> Parameters: 
2022-07-27 21:31:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490079814455296[0;39m <==    Updates: 0
2022-07-27 21:31:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490079814455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:31:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490100769198080[0;39m 生成今日电子书快照开始
2022-07-27 21:31:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490100769198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490100769198080[0;39m ==> Parameters: 
2022-07-27 21:31:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490100769198080[0;39m <==    Updates: 0
2022-07-27 21:31:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490100769198080[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 21:31:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207490100769198081[0;39m 更新电子书下的文档数据开始
2022-07-27 21:31:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490100769198081[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:31:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490100769198081[0;39m ==> Parameters: 
2022-07-27 21:31:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490100769198081[0;39m <==    Updates: 7
2022-07-27 21:31:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207490100769198081[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-27 21:31:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490121778466816[0;39m 生成今日电子书快照开始
2022-07-27 21:31:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490121778466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490121778466816[0;39m ==> Parameters: 
2022-07-27 21:31:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490121778466816[0;39m <==    Updates: 0
2022-07-27 21:31:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490121778466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:31:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490142754181120[0;39m 生成今日电子书快照开始
2022-07-27 21:31:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490142754181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490142754181120[0;39m ==> Parameters: 
2022-07-27 21:31:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490142754181120[0;39m <==    Updates: 0
2022-07-27 21:31:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490142754181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:31:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490163704729600[0;39m 生成今日电子书快照开始
2022-07-27 21:31:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490163704729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:50.099 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490163704729600[0;39m ==> Parameters: 
2022-07-27 21:31:50.100 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490163704729600[0;39m <==    Updates: 0
2022-07-27 21:31:50.100 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490163704729600[0;39m 生成今日电子书快照结束，耗时：92 毫秒
2022-07-27 21:31:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490184659472384[0;39m 生成今日电子书快照开始
2022-07-27 21:31:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490184659472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:31:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490184659472384[0;39m ==> Parameters: 
2022-07-27 21:31:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490184659472384[0;39m <==    Updates: 0
2022-07-27 21:31:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490184659472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:00.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490205614215168[0;39m 生成今日电子书快照开始
2022-07-27 21:32:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490205614215168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490205614215168[0;39m ==> Parameters: 
2022-07-27 21:32:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490205614215168[0;39m <==    Updates: 0
2022-07-27 21:32:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490205614215168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:32:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207490226636066816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:32:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490226636066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:32:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490226636066816[0;39m ==> Parameters: 
2022-07-27 21:32:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490226636066816[0;39m <==    Updates: 7
2022-07-27 21:32:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207490226636066816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:32:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490226644455424[0;39m 生成今日电子书快照开始
2022-07-27 21:32:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490226644455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490226644455424[0;39m ==> Parameters: 
2022-07-27 21:32:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490226644455424[0;39m <==    Updates: 0
2022-07-27 21:32:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490226644455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490247578226688[0;39m 生成今日电子书快照开始
2022-07-27 21:32:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490247578226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490247578226688[0;39m ==> Parameters: 
2022-07-27 21:32:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490247578226688[0;39m <==    Updates: 0
2022-07-27 21:32:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490247578226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490268532969472[0;39m 生成今日电子书快照开始
2022-07-27 21:32:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490268532969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490268532969472[0;39m ==> Parameters: 
2022-07-27 21:32:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490268532969472[0;39m <==    Updates: 0
2022-07-27 21:32:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490268532969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490289508683776[0;39m 生成今日电子书快照开始
2022-07-27 21:32:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490289508683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490289508683776[0;39m ==> Parameters: 
2022-07-27 21:32:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490289508683776[0;39m <==    Updates: 0
2022-07-27 21:32:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490289508683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490310522146816[0;39m 生成今日电子书快照开始
2022-07-27 21:32:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490310522146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490310522146816[0;39m ==> Parameters: 
2022-07-27 21:32:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490310522146816[0;39m <==    Updates: 0
2022-07-27 21:32:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490310522146816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:32:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490331460112384[0;39m 生成今日电子书快照开始
2022-07-27 21:32:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490331460112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490331460112384[0;39m ==> Parameters: 
2022-07-27 21:32:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490331460112384[0;39m <==    Updates: 0
2022-07-27 21:32:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490331460112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490352423243776[0;39m 生成今日电子书快照开始
2022-07-27 21:32:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490352423243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490352423243776[0;39m ==> Parameters: 
2022-07-27 21:32:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490352423243776[0;39m <==    Updates: 0
2022-07-27 21:32:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490352423243776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207490352435826688[0;39m 更新电子书下的文档数据开始
2022-07-27 21:32:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490352435826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:32:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490352435826688[0;39m ==> Parameters: 
2022-07-27 21:32:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490352435826688[0;39m <==    Updates: 7
2022-07-27 21:32:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207490352435826688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:32:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490373424123904[0;39m 生成今日电子书快照开始
2022-07-27 21:32:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490373424123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490373424123904[0;39m ==> Parameters: 
2022-07-27 21:32:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490373424123904[0;39m <==    Updates: 0
2022-07-27 21:32:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490373424123904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:32:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490394383060992[0;39m 生成今日电子书快照开始
2022-07-27 21:32:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490394383060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490394383060992[0;39m ==> Parameters: 
2022-07-27 21:32:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490394383060992[0;39m <==    Updates: 0
2022-07-27 21:32:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490394383060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490415350386688[0;39m 生成今日电子书快照开始
2022-07-27 21:32:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490415350386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490415350386688[0;39m ==> Parameters: 
2022-07-27 21:32:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490415350386688[0;39m <==    Updates: 0
2022-07-27 21:32:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490415350386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:32:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490436351266816[0;39m 生成今日电子书快照开始
2022-07-27 21:32:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490436351266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:32:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490436351266816[0;39m ==> Parameters: 
2022-07-27 21:32:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490436351266816[0;39m <==    Updates: 0
2022-07-27 21:32:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490436351266816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:33:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490457310203904[0;39m 生成今日电子书快照开始
2022-07-27 21:33:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490457310203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490457310203904[0;39m ==> Parameters: 
2022-07-27 21:33:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490457310203904[0;39m <==    Updates: 0
2022-07-27 21:33:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490457310203904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:33:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490478302695424[0;39m 生成今日电子书快照开始
2022-07-27 21:33:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490478302695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490478302695424[0;39m ==> Parameters: 
2022-07-27 21:33:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490478302695424[0;39m <==    Updates: 0
2022-07-27 21:33:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490478302695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207490478311084032[0;39m 更新电子书下的文档数据开始
2022-07-27 21:33:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490478311084032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:33:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490478311084032[0;39m ==> Parameters: 
2022-07-27 21:33:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490478311084032[0;39m <==    Updates: 7
2022-07-27 21:33:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207490478311084032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:33:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490499236466688[0;39m 生成今日电子书快照开始
2022-07-27 21:33:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490499236466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490499236466688[0;39m ==> Parameters: 
2022-07-27 21:33:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490499236466688[0;39m <==    Updates: 0
2022-07-27 21:33:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490499236466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490520249929728[0;39m 生成今日电子书快照开始
2022-07-27 21:33:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490520249929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490520249929728[0;39m ==> Parameters: 
2022-07-27 21:33:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490520249929728[0;39m <==    Updates: 0
2022-07-27 21:33:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490520249929728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490541217255424[0;39m 生成今日电子书快照开始
2022-07-27 21:33:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490541217255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490541217255424[0;39m ==> Parameters: 
2022-07-27 21:33:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490541217255424[0;39m <==    Updates: 0
2022-07-27 21:33:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490541217255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490562188775424[0;39m 生成今日电子书快照开始
2022-07-27 21:33:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490562188775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490562188775424[0;39m ==> Parameters: 
2022-07-27 21:33:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490562188775424[0;39m <==    Updates: 0
2022-07-27 21:33:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490562188775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490583168684032[0;39m 生成今日电子书快照开始
2022-07-27 21:33:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490583168684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490583168684032[0;39m ==> Parameters: 
2022-07-27 21:33:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490583168684032[0;39m <==    Updates: 0
2022-07-27 21:33:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490583168684032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490604136009728[0;39m 生成今日电子书快照开始
2022-07-27 21:33:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490604136009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490604136009728[0;39m ==> Parameters: 
2022-07-27 21:33:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490604136009728[0;39m <==    Updates: 0
2022-07-27 21:33:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490604136009728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207490604144398336[0;39m 更新电子书下的文档数据开始
2022-07-27 21:33:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490604144398336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:33:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490604144398336[0;39m ==> Parameters: 
2022-07-27 21:33:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490604144398336[0;39m <==    Updates: 7
2022-07-27 21:33:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207490604144398336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:33:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490625057198080[0;39m 生成今日电子书快照开始
2022-07-27 21:33:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490625057198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490625057198080[0;39m ==> Parameters: 
2022-07-27 21:33:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490625057198080[0;39m <==    Updates: 0
2022-07-27 21:33:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490625057198080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490646041300992[0;39m 生成今日电子书快照开始
2022-07-27 21:33:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490646041300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490646041300992[0;39m ==> Parameters: 
2022-07-27 21:33:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490646041300992[0;39m <==    Updates: 0
2022-07-27 21:33:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490646041300992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:33:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490667046375424[0;39m 生成今日电子书快照开始
2022-07-27 21:33:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490667046375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490667046375424[0;39m ==> Parameters: 
2022-07-27 21:33:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490667046375424[0;39m <==    Updates: 0
2022-07-27 21:33:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490667046375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:33:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490688009506816[0;39m 生成今日电子书快照开始
2022-07-27 21:33:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490688009506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:33:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490688009506816[0;39m ==> Parameters: 
2022-07-27 21:33:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490688009506816[0;39m <==    Updates: 0
2022-07-27 21:33:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490688009506816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:34:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490708993609728[0;39m 生成今日电子书快照开始
2022-07-27 21:34:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490708993609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490708993609728[0;39m ==> Parameters: 
2022-07-27 21:34:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490708993609728[0;39m <==    Updates: 0
2022-07-27 21:34:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490708993609728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:34:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490729918992384[0;39m 生成今日电子书快照开始
2022-07-27 21:34:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490729918992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490729918992384[0;39m ==> Parameters: 
2022-07-27 21:34:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490729918992384[0;39m <==    Updates: 0
2022-07-27 21:34:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490729918992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:34:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207490729927380992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:34:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490729927380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:34:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490729927380992[0;39m ==> Parameters: 
2022-07-27 21:34:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490729927380992[0;39m <==    Updates: 7
2022-07-27 21:34:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207490729927380992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:34:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490750924066816[0;39m 生成今日电子书快照开始
2022-07-27 21:34:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490750924066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490750924066816[0;39m ==> Parameters: 
2022-07-27 21:34:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490750924066816[0;39m <==    Updates: 0
2022-07-27 21:34:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490750924066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:34:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490771862032384[0;39m 生成今日电子书快照开始
2022-07-27 21:34:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490771862032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490771862032384[0;39m ==> Parameters: 
2022-07-27 21:34:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490771862032384[0;39m <==    Updates: 0
2022-07-27 21:34:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490771862032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:34:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490792846135296[0;39m 生成今日电子书快照开始
2022-07-27 21:34:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490792846135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490792846135296[0;39m ==> Parameters: 
2022-07-27 21:34:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490792846135296[0;39m <==    Updates: 0
2022-07-27 21:34:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490792846135296[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-27 21:34:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490813796683776[0;39m 生成今日电子书快照开始
2022-07-27 21:34:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490813796683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490813796683776[0;39m ==> Parameters: 
2022-07-27 21:34:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490813796683776[0;39m <==    Updates: 0
2022-07-27 21:34:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490813796683776[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:34:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490834801758208[0;39m 生成今日电子书快照开始
2022-07-27 21:34:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490834801758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490834801758208[0;39m ==> Parameters: 
2022-07-27 21:34:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490834801758208[0;39m <==    Updates: 0
2022-07-27 21:34:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490834801758208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:34:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490855739723776[0;39m 生成今日电子书快照开始
2022-07-27 21:34:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490855739723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490855739723776[0;39m ==> Parameters: 
2022-07-27 21:34:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490855739723776[0;39m <==    Updates: 0
2022-07-27 21:34:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490855739723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:34:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207490855748112384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:34:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490855748112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:34:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490855748112384[0;39m ==> Parameters: 
2022-07-27 21:34:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490855748112384[0;39m <==    Updates: 7
2022-07-27 21:34:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207490855748112384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:34:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490876740603904[0;39m 生成今日电子书快照开始
2022-07-27 21:34:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490876740603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490876740603904[0;39m ==> Parameters: 
2022-07-27 21:34:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490876740603904[0;39m <==    Updates: 0
2022-07-27 21:34:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490876740603904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:34:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490897686958080[0;39m 生成今日电子书快照开始
2022-07-27 21:34:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490897686958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490897686958080[0;39m ==> Parameters: 
2022-07-27 21:34:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490897686958080[0;39m <==    Updates: 0
2022-07-27 21:34:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490897686958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:34:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490918696226816[0;39m 生成今日电子书快照开始
2022-07-27 21:34:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490918696226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490918696226816[0;39m ==> Parameters: 
2022-07-27 21:34:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490918696226816[0;39m <==    Updates: 0
2022-07-27 21:34:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490918696226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:34:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490939684524032[0;39m 生成今日电子书快照开始
2022-07-27 21:34:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490939684524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:34:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490939684524032[0;39m ==> Parameters: 
2022-07-27 21:34:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490939684524032[0;39m <==    Updates: 0
2022-07-27 21:34:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490939684524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:35:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490960605712384[0;39m 生成今日电子书快照开始
2022-07-27 21:35:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490960605712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490960605712384[0;39m ==> Parameters: 
2022-07-27 21:35:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490960605712384[0;39m <==    Updates: 0
2022-07-27 21:35:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490960605712384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:35:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207490981573038080[0;39m 更新电子书下的文档数据开始
2022-07-27 21:35:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490981573038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:35:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490981573038080[0;39m ==> Parameters: 
2022-07-27 21:35:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207490981573038080[0;39m <==    Updates: 7
2022-07-27 21:35:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207490981573038080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:35:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207490981581426688[0;39m 生成今日电子书快照开始
2022-07-27 21:35:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490981581426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490981581426688[0;39m ==> Parameters: 
2022-07-27 21:35:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207490981581426688[0;39m <==    Updates: 0
2022-07-27 21:35:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207490981581426688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:35:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491002557140992[0;39m 生成今日电子书快照开始
2022-07-27 21:35:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491002557140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491002557140992[0;39m ==> Parameters: 
2022-07-27 21:35:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491002557140992[0;39m <==    Updates: 0
2022-07-27 21:35:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491002557140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:35:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491023545438208[0;39m 生成今日电子书快照开始
2022-07-27 21:35:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491023545438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491023545438208[0;39m ==> Parameters: 
2022-07-27 21:35:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491023545438208[0;39m <==    Updates: 0
2022-07-27 21:35:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491023545438208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:35:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491044525346816[0;39m 生成今日电子书快照开始
2022-07-27 21:35:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491044525346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491044525346816[0;39m ==> Parameters: 
2022-07-27 21:35:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491044525346816[0;39m <==    Updates: 0
2022-07-27 21:35:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491044525346816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:35:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491065496866816[0;39m 生成今日电子书快照开始
2022-07-27 21:35:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491065496866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491065496866816[0;39m ==> Parameters: 
2022-07-27 21:35:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491065496866816[0;39m <==    Updates: 0
2022-07-27 21:35:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491065496866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:35:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491086480969728[0;39m 生成今日电子书快照开始
2022-07-27 21:35:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491086480969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491086480969728[0;39m ==> Parameters: 
2022-07-27 21:35:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491086480969728[0;39m <==    Updates: 0
2022-07-27 21:35:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491086480969728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:35:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207491107448295424[0;39m 更新电子书下的文档数据开始
2022-07-27 21:35:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491107448295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:35:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491107448295424[0;39m ==> Parameters: 
2022-07-27 21:35:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491107448295424[0;39m <==    Updates: 7
2022-07-27 21:35:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207491107448295424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:35:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491107452489728[0;39m 生成今日电子书快照开始
2022-07-27 21:35:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491107452489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491107452489728[0;39m ==> Parameters: 
2022-07-27 21:35:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491107452489728[0;39m <==    Updates: 0
2022-07-27 21:35:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491107452489728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:35:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491128403038208[0;39m 生成今日电子书快照开始
2022-07-27 21:35:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491128403038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491128403038208[0;39m ==> Parameters: 
2022-07-27 21:35:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491128403038208[0;39m <==    Updates: 0
2022-07-27 21:35:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491128403038208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:35:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491149370363904[0;39m 生成今日电子书快照开始
2022-07-27 21:35:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491149370363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491149370363904[0;39m ==> Parameters: 
2022-07-27 21:35:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491149370363904[0;39m <==    Updates: 0
2022-07-27 21:35:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491149370363904[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-27 21:35:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491170358661120[0;39m 生成今日电子书快照开始
2022-07-27 21:35:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491170358661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491170358661120[0;39m ==> Parameters: 
2022-07-27 21:35:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491170358661120[0;39m <==    Updates: 0
2022-07-27 21:35:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491170358661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:35:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491191284043776[0;39m 生成今日电子书快照开始
2022-07-27 21:35:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491191284043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:35:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491191284043776[0;39m ==> Parameters: 
2022-07-27 21:35:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491191284043776[0;39m <==    Updates: 0
2022-07-27 21:35:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491191284043776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:36:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491212314284032[0;39m 生成今日电子书快照开始
2022-07-27 21:36:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491212314284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491212314284032[0;39m ==> Parameters: 
2022-07-27 21:36:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491212314284032[0;39m <==    Updates: 0
2022-07-27 21:36:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491212314284032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491233264832512[0;39m 生成今日电子书快照开始
2022-07-27 21:36:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491233264832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491233264832512[0;39m ==> Parameters: 
2022-07-27 21:36:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491233264832512[0;39m <==    Updates: 0
2022-07-27 21:36:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491233264832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207491233273221120[0;39m 更新电子书下的文档数据开始
2022-07-27 21:36:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491233273221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:36:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491233273221120[0;39m ==> Parameters: 
2022-07-27 21:36:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491233273221120[0;39m <==    Updates: 7
2022-07-27 21:36:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207491233273221120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:36:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491254211186688[0;39m 生成今日电子书快照开始
2022-07-27 21:36:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491254211186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491254211186688[0;39m ==> Parameters: 
2022-07-27 21:36:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491254211186688[0;39m <==    Updates: 0
2022-07-27 21:36:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491254211186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491275161735168[0;39m 生成今日电子书快照开始
2022-07-27 21:36:15.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491275161735168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491275161735168[0;39m ==> Parameters: 
2022-07-27 21:36:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491275161735168[0;39m <==    Updates: 0
2022-07-27 21:36:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491275161735168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:36:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491296145838080[0;39m 生成今日电子书快照开始
2022-07-27 21:36:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491296145838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491296145838080[0;39m ==> Parameters: 
2022-07-27 21:36:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491296145838080[0;39m <==    Updates: 0
2022-07-27 21:36:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491296145838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491317142523904[0;39m 生成今日电子书快照开始
2022-07-27 21:36:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491317142523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491317142523904[0;39m ==> Parameters: 
2022-07-27 21:36:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491317142523904[0;39m <==    Updates: 0
2022-07-27 21:36:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491317142523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491338109849600[0;39m 生成今日电子书快照开始
2022-07-27 21:36:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491338109849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491338109849600[0;39m ==> Parameters: 
2022-07-27 21:36:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491338109849600[0;39m <==    Updates: 0
2022-07-27 21:36:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491338109849600[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 21:36:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491359060398080[0;39m 生成今日电子书快照开始
2022-07-27 21:36:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491359060398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491359060398080[0;39m ==> Parameters: 
2022-07-27 21:36:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491359060398080[0;39m <==    Updates: 0
2022-07-27 21:36:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491359060398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207491359068786688[0;39m 更新电子书下的文档数据开始
2022-07-27 21:36:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491359068786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:36:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491359068786688[0;39m ==> Parameters: 
2022-07-27 21:36:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491359068786688[0;39m <==    Updates: 7
2022-07-27 21:36:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207491359068786688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:36:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491380082249728[0;39m 生成今日电子书快照开始
2022-07-27 21:36:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491380082249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491380082249728[0;39m ==> Parameters: 
2022-07-27 21:36:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491380082249728[0;39m <==    Updates: 0
2022-07-27 21:36:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491380082249728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491401020215296[0;39m 生成今日电子书快照开始
2022-07-27 21:36:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491401020215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491401020215296[0;39m ==> Parameters: 
2022-07-27 21:36:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491401020215296[0;39m <==    Updates: 0
2022-07-27 21:36:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491401020215296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491421970763776[0;39m 生成今日电子书快照开始
2022-07-27 21:36:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491421970763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491421970763776[0;39m ==> Parameters: 
2022-07-27 21:36:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491421970763776[0;39m <==    Updates: 0
2022-07-27 21:36:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491421970763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:36:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491442950672384[0;39m 生成今日电子书快照开始
2022-07-27 21:36:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491442950672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:36:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491442950672384[0;39m ==> Parameters: 
2022-07-27 21:36:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491442950672384[0;39m <==    Updates: 0
2022-07-27 21:36:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491442950672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:37:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491463917998080[0;39m 生成今日电子书快照开始
2022-07-27 21:37:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491463917998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491463917998080[0;39m ==> Parameters: 
2022-07-27 21:37:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491463917998080[0;39m <==    Updates: 0
2022-07-27 21:37:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491463917998080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:37:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491484881129472[0;39m 生成今日电子书快照开始
2022-07-27 21:37:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491484881129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491484881129472[0;39m ==> Parameters: 
2022-07-27 21:37:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491484881129472[0;39m <==    Updates: 0
2022-07-27 21:37:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491484881129472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:37:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207491484893712384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:37:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491484893712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:37:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491484893712384[0;39m ==> Parameters: 
2022-07-27 21:37:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491484893712384[0;39m <==    Updates: 7
2022-07-27 21:37:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207491484893712384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:37:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491505882009600[0;39m 生成今日电子书快照开始
2022-07-27 21:37:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491505882009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491505882009600[0;39m ==> Parameters: 
2022-07-27 21:37:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491505882009600[0;39m <==    Updates: 0
2022-07-27 21:37:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491505882009600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:37:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491526824169472[0;39m 生成今日电子书快照开始
2022-07-27 21:37:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491526824169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491526824169472[0;39m ==> Parameters: 
2022-07-27 21:37:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491526824169472[0;39m <==    Updates: 0
2022-07-27 21:37:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491526824169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:37:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491547833438208[0;39m 生成今日电子书快照开始
2022-07-27 21:37:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491547833438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491547833438208[0;39m ==> Parameters: 
2022-07-27 21:37:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491547833438208[0;39m <==    Updates: 0
2022-07-27 21:37:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491547833438208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:37:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491568813346816[0;39m 生成今日电子书快照开始
2022-07-27 21:37:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491568813346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491568813346816[0;39m ==> Parameters: 
2022-07-27 21:37:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491568813346816[0;39m <==    Updates: 0
2022-07-27 21:37:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491568813346816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:37:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491589742923776[0;39m 生成今日电子书快照开始
2022-07-27 21:37:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491589742923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491589742923776[0;39m ==> Parameters: 
2022-07-27 21:37:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491589742923776[0;39m <==    Updates: 0
2022-07-27 21:37:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491589742923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:37:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491610714443776[0;39m 生成今日电子书快照开始
2022-07-27 21:37:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491610714443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491610714443776[0;39m ==> Parameters: 
2022-07-27 21:37:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491610714443776[0;39m <==    Updates: 0
2022-07-27 21:37:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491610714443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:37:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207491610731220992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:37:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491610731220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:37:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491610731220992[0;39m ==> Parameters: 
2022-07-27 21:37:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491610731220992[0;39m <==    Updates: 7
2022-07-27 21:37:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207491610731220992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:37:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491631698546688[0;39m 生成今日电子书快照开始
2022-07-27 21:37:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491631698546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491631698546688[0;39m ==> Parameters: 
2022-07-27 21:37:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491631698546688[0;39m <==    Updates: 0
2022-07-27 21:37:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491631698546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:37:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491652691038208[0;39m 生成今日电子书快照开始
2022-07-27 21:37:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491652691038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491652691038208[0;39m ==> Parameters: 
2022-07-27 21:37:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491652691038208[0;39m <==    Updates: 0
2022-07-27 21:37:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491652691038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:37:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491673641586688[0;39m 生成今日电子书快照开始
2022-07-27 21:37:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491673641586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491673641586688[0;39m ==> Parameters: 
2022-07-27 21:37:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491673641586688[0;39m <==    Updates: 0
2022-07-27 21:37:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491673641586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:37:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491694629883904[0;39m 生成今日电子书快照开始
2022-07-27 21:37:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491694629883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:37:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491694629883904[0;39m ==> Parameters: 
2022-07-27 21:37:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491694629883904[0;39m <==    Updates: 0
2022-07-27 21:37:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491694629883904[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 21:38:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491715588820992[0;39m 生成今日电子书快照开始
2022-07-27 21:38:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491715588820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491715588820992[0;39m ==> Parameters: 
2022-07-27 21:38:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491715588820992[0;39m <==    Updates: 0
2022-07-27 21:38:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491715588820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:38:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491736556146688[0;39m 生成今日电子书快照开始
2022-07-27 21:38:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491736556146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491736556146688[0;39m ==> Parameters: 
2022-07-27 21:38:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491736556146688[0;39m <==    Updates: 0
2022-07-27 21:38:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491736556146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:38:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207491736564535296[0;39m 更新电子书下的文档数据开始
2022-07-27 21:38:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491736564535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:38:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491736564535296[0;39m ==> Parameters: 
2022-07-27 21:38:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491736564535296[0;39m <==    Updates: 7
2022-07-27 21:38:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207491736564535296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:38:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491757523472384[0;39m 生成今日电子书快照开始
2022-07-27 21:38:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491757523472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491757523472384[0;39m ==> Parameters: 
2022-07-27 21:38:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491757523472384[0;39m <==    Updates: 0
2022-07-27 21:38:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491757523472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:38:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491778524352512[0;39m 生成今日电子书快照开始
2022-07-27 21:38:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491778524352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491778524352512[0;39m ==> Parameters: 
2022-07-27 21:38:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491778524352512[0;39m <==    Updates: 0
2022-07-27 21:38:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491778524352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:38:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491799504261120[0;39m 生成今日电子书快照开始
2022-07-27 21:38:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491799504261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491799504261120[0;39m ==> Parameters: 
2022-07-27 21:38:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491799504261120[0;39m <==    Updates: 0
2022-07-27 21:38:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491799504261120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:38:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491820446420992[0;39m 生成今日电子书快照开始
2022-07-27 21:38:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491820446420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491820446420992[0;39m ==> Parameters: 
2022-07-27 21:38:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491820446420992[0;39m <==    Updates: 0
2022-07-27 21:38:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491820446420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:38:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491841405358080[0;39m 生成今日电子书快照开始
2022-07-27 21:38:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491841405358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491841405358080[0;39m ==> Parameters: 
2022-07-27 21:38:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491841405358080[0;39m <==    Updates: 0
2022-07-27 21:38:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491841405358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:38:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207491862410432512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:38:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491862410432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:38:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491862410432512[0;39m ==> Parameters: 
2022-07-27 21:38:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491862410432512[0;39m <==    Updates: 7
2022-07-27 21:38:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207491862410432512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:38:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491862414626816[0;39m 生成今日电子书快照开始
2022-07-27 21:38:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491862414626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491862414626816[0;39m ==> Parameters: 
2022-07-27 21:38:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491862414626816[0;39m <==    Updates: 0
2022-07-27 21:38:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491862414626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:38:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491883394535424[0;39m 生成今日电子书快照开始
2022-07-27 21:38:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491883394535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491883394535424[0;39m ==> Parameters: 
2022-07-27 21:38:40.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491883394535424[0;39m <==    Updates: 0
2022-07-27 21:38:40.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491883394535424[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 21:38:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491904374444032[0;39m 生成今日电子书快照开始
2022-07-27 21:38:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491904374444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491904374444032[0;39m ==> Parameters: 
2022-07-27 21:38:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491904374444032[0;39m <==    Updates: 0
2022-07-27 21:38:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491904374444032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:38:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491925320798208[0;39m 生成今日电子书快照开始
2022-07-27 21:38:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491925320798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491925320798208[0;39m ==> Parameters: 
2022-07-27 21:38:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491925320798208[0;39m <==    Updates: 0
2022-07-27 21:38:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491925320798208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:38:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491946258763776[0;39m 生成今日电子书快照开始
2022-07-27 21:38:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491946258763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:38:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491946258763776[0;39m ==> Parameters: 
2022-07-27 21:38:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491946258763776[0;39m <==    Updates: 0
2022-07-27 21:38:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491946258763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:39:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491967268032512[0;39m 生成今日电子书快照开始
2022-07-27 21:39:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491967268032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491967268032512[0;39m ==> Parameters: 
2022-07-27 21:39:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491967268032512[0;39m <==    Updates: 0
2022-07-27 21:39:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491967268032512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:39:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207491988260524032[0;39m 生成今日电子书快照开始
2022-07-27 21:39:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491988260524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491988260524032[0;39m ==> Parameters: 
2022-07-27 21:39:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207491988260524032[0;39m <==    Updates: 0
2022-07-27 21:39:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207491988260524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:39:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207491988268912640[0;39m 更新电子书下的文档数据开始
2022-07-27 21:39:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491988268912640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:39:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491988268912640[0;39m ==> Parameters: 
2022-07-27 21:39:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207491988268912640[0;39m <==    Updates: 7
2022-07-27 21:39:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207491988268912640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:39:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492009190100992[0;39m 生成今日电子书快照开始
2022-07-27 21:39:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492009190100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492009190100992[0;39m ==> Parameters: 
2022-07-27 21:39:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492009190100992[0;39m <==    Updates: 0
2022-07-27 21:39:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492009190100992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:39:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492030153232384[0;39m 生成今日电子书快照开始
2022-07-27 21:39:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492030153232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492030153232384[0;39m ==> Parameters: 
2022-07-27 21:39:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492030153232384[0;39m <==    Updates: 0
2022-07-27 21:39:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492030153232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:39:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492051128946688[0;39m 生成今日电子书快照开始
2022-07-27 21:39:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492051128946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492051128946688[0;39m ==> Parameters: 
2022-07-27 21:39:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492051128946688[0;39m <==    Updates: 0
2022-07-27 21:39:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492051128946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:39:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492072125632512[0;39m 生成今日电子书快照开始
2022-07-27 21:39:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492072125632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492072125632512[0;39m ==> Parameters: 
2022-07-27 21:39:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492072125632512[0;39m <==    Updates: 0
2022-07-27 21:39:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492072125632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:39:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492093105541120[0;39m 生成今日电子书快照开始
2022-07-27 21:39:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492093105541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492093105541120[0;39m ==> Parameters: 
2022-07-27 21:39:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492093105541120[0;39m <==    Updates: 0
2022-07-27 21:39:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492093105541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:39:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207492114081255424[0;39m 更新电子书下的文档数据开始
2022-07-27 21:39:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492114081255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:39:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492114081255424[0;39m ==> Parameters: 
2022-07-27 21:39:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492114081255424[0;39m <==    Updates: 7
2022-07-27 21:39:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207492114081255424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:39:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492114085449728[0;39m 生成今日电子书快照开始
2022-07-27 21:39:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492114085449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492114085449728[0;39m ==> Parameters: 
2022-07-27 21:39:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492114085449728[0;39m <==    Updates: 0
2022-07-27 21:39:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492114085449728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:39:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492135023415296[0;39m 生成今日电子书快照开始
2022-07-27 21:39:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492135023415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492135023415296[0;39m ==> Parameters: 
2022-07-27 21:39:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492135023415296[0;39m <==    Updates: 0
2022-07-27 21:39:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492135023415296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:39:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492155990740992[0;39m 生成今日电子书快照开始
2022-07-27 21:39:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492155990740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492155990740992[0;39m ==> Parameters: 
2022-07-27 21:39:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492155990740992[0;39m <==    Updates: 0
2022-07-27 21:39:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492155990740992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:39:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492176979038208[0;39m 生成今日电子书快照开始
2022-07-27 21:39:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492176979038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492176979038208[0;39m ==> Parameters: 
2022-07-27 21:39:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492176979038208[0;39m <==    Updates: 0
2022-07-27 21:39:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492176979038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:39:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492197946363904[0;39m 生成今日电子书快照开始
2022-07-27 21:39:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492197946363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:39:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492197946363904[0;39m ==> Parameters: 
2022-07-27 21:39:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492197946363904[0;39m <==    Updates: 0
2022-07-27 21:39:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492197946363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492218938855424[0;39m 生成今日电子书快照开始
2022-07-27 21:40:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492218938855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492218938855424[0;39m ==> Parameters: 
2022-07-27 21:40:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492218938855424[0;39m <==    Updates: 0
2022-07-27 21:40:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492218938855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492239872626688[0;39m 生成今日电子书快照开始
2022-07-27 21:40:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492239872626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492239872626688[0;39m ==> Parameters: 
2022-07-27 21:40:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492239872626688[0;39m <==    Updates: 0
2022-07-27 21:40:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492239872626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207492239881015296[0;39m 更新电子书下的文档数据开始
2022-07-27 21:40:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492239881015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:40:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492239881015296[0;39m ==> Parameters: 
2022-07-27 21:40:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492239881015296[0;39m <==    Updates: 7
2022-07-27 21:40:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207492239881015296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:40:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492260881895424[0;39m 生成今日电子书快照开始
2022-07-27 21:40:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492260881895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492260881895424[0;39m ==> Parameters: 
2022-07-27 21:40:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492260881895424[0;39m <==    Updates: 0
2022-07-27 21:40:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492260881895424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:40:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492281811472384[0;39m 生成今日电子书快照开始
2022-07-27 21:40:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492281811472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492281811472384[0;39m ==> Parameters: 
2022-07-27 21:40:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492281811472384[0;39m <==    Updates: 0
2022-07-27 21:40:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492281811472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492302816546816[0;39m 生成今日电子书快照开始
2022-07-27 21:40:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492302816546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492302816546816[0;39m ==> Parameters: 
2022-07-27 21:40:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492302816546816[0;39m <==    Updates: 0
2022-07-27 21:40:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492302816546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492323775483904[0;39m 生成今日电子书快照开始
2022-07-27 21:40:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492323775483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492323775483904[0;39m ==> Parameters: 
2022-07-27 21:40:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492323775483904[0;39m <==    Updates: 0
2022-07-27 21:40:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492323775483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492344713449472[0;39m 生成今日电子书快照开始
2022-07-27 21:40:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492344713449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492344713449472[0;39m ==> Parameters: 
2022-07-27 21:40:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492344713449472[0;39m <==    Updates: 0
2022-07-27 21:40:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492344713449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207492365697552384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:40:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492365697552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:40:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492365697552384[0;39m ==> Parameters: 
2022-07-27 21:40:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492365697552384[0;39m <==    Updates: 7
2022-07-27 21:40:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207492365697552384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:40:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492365701746688[0;39m 生成今日电子书快照开始
2022-07-27 21:40:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492365701746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492365701746688[0;39m ==> Parameters: 
2022-07-27 21:40:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492365701746688[0;39m <==    Updates: 0
2022-07-27 21:40:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492365701746688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:40:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492386690043904[0;39m 生成今日电子书快照开始
2022-07-27 21:40:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492386690043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492386690043904[0;39m ==> Parameters: 
2022-07-27 21:40:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492386690043904[0;39m <==    Updates: 0
2022-07-27 21:40:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492386690043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492407678341120[0;39m 生成今日电子书快照开始
2022-07-27 21:40:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492407678341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492407678341120[0;39m ==> Parameters: 
2022-07-27 21:40:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492407678341120[0;39m <==    Updates: 0
2022-07-27 21:40:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492407678341120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:40:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492428633083904[0;39m 生成今日电子书快照开始
2022-07-27 21:40:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492428633083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492428633083904[0;39m ==> Parameters: 
2022-07-27 21:40:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492428633083904[0;39m <==    Updates: 0
2022-07-27 21:40:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492428633083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:40:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492449579438080[0;39m 生成今日电子书快照开始
2022-07-27 21:40:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492449579438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:40:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492449579438080[0;39m ==> Parameters: 
2022-07-27 21:40:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492449579438080[0;39m <==    Updates: 0
2022-07-27 21:40:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492449579438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:41:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492470605484032[0;39m 生成今日电子书快照开始
2022-07-27 21:41:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492470605484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492470605484032[0;39m ==> Parameters: 
2022-07-27 21:41:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492470605484032[0;39m <==    Updates: 0
2022-07-27 21:41:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492470605484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:41:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492491547643904[0;39m 生成今日电子书快照开始
2022-07-27 21:41:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492491547643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492491547643904[0;39m ==> Parameters: 
2022-07-27 21:41:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492491547643904[0;39m <==    Updates: 0
2022-07-27 21:41:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492491547643904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:41:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207492491551838208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:41:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492491551838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:41:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492491551838208[0;39m ==> Parameters: 
2022-07-27 21:41:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492491551838208[0;39m <==    Updates: 7
2022-07-27 21:41:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207492491551838208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:41:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492512493998080[0;39m 生成今日电子书快照开始
2022-07-27 21:41:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492512493998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492512493998080[0;39m ==> Parameters: 
2022-07-27 21:41:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492512493998080[0;39m <==    Updates: 0
2022-07-27 21:41:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492512493998080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:41:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492533503266816[0;39m 生成今日电子书快照开始
2022-07-27 21:41:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492533503266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492533503266816[0;39m ==> Parameters: 
2022-07-27 21:41:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492533503266816[0;39m <==    Updates: 0
2022-07-27 21:41:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492533503266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:41:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492554441232384[0;39m 生成今日电子书快照开始
2022-07-27 21:41:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492554441232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492554441232384[0;39m ==> Parameters: 
2022-07-27 21:41:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492554441232384[0;39m <==    Updates: 0
2022-07-27 21:41:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492554441232384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:41:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492575433723904[0;39m 生成今日电子书快照开始
2022-07-27 21:41:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492575433723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492575433723904[0;39m ==> Parameters: 
2022-07-27 21:41:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492575433723904[0;39m <==    Updates: 0
2022-07-27 21:41:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492575433723904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:41:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492596371689472[0;39m 生成今日电子书快照开始
2022-07-27 21:41:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492596371689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492596371689472[0;39m ==> Parameters: 
2022-07-27 21:41:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492596371689472[0;39m <==    Updates: 0
2022-07-27 21:41:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492596371689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:41:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492617368375296[0;39m 生成今日电子书快照开始
2022-07-27 21:41:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492617368375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492617368375296[0;39m ==> Parameters: 
2022-07-27 21:41:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492617368375296[0;39m <==    Updates: 0
2022-07-27 21:41:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492617368375296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:41:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207492617380958208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:41:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492617380958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:41:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492617380958208[0;39m ==> Parameters: 
2022-07-27 21:41:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492617380958208[0;39m <==    Updates: 7
2022-07-27 21:41:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207492617380958208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:41:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492638344089600[0;39m 生成今日电子书快照开始
2022-07-27 21:41:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492638344089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492638344089600[0;39m ==> Parameters: 
2022-07-27 21:41:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492638344089600[0;39m <==    Updates: 0
2022-07-27 21:41:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492638344089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:41:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492659303026688[0;39m 生成今日电子书快照开始
2022-07-27 21:41:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492659303026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492659303026688[0;39m ==> Parameters: 
2022-07-27 21:41:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492659303026688[0;39m <==    Updates: 0
2022-07-27 21:41:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492659303026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:41:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492680274546688[0;39m 生成今日电子书快照开始
2022-07-27 21:41:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492680274546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492680274546688[0;39m ==> Parameters: 
2022-07-27 21:41:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492680274546688[0;39m <==    Updates: 0
2022-07-27 21:41:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492680274546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:41:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492701292204032[0;39m 生成今日电子书快照开始
2022-07-27 21:41:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492701292204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:41:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492701292204032[0;39m ==> Parameters: 
2022-07-27 21:41:55.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492701292204032[0;39m <==    Updates: 0
2022-07-27 21:41:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492701292204032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:42:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492722225975296[0;39m 生成今日电子书快照开始
2022-07-27 21:42:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492722225975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492722225975296[0;39m ==> Parameters: 
2022-07-27 21:42:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492722225975296[0;39m <==    Updates: 0
2022-07-27 21:42:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492722225975296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:42:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492743210078208[0;39m 生成今日电子书快照开始
2022-07-27 21:42:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492743210078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492743210078208[0;39m ==> Parameters: 
2022-07-27 21:42:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492743210078208[0;39m <==    Updates: 0
2022-07-27 21:42:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492743210078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:42:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207492743218466816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:42:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492743218466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:42:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492743218466816[0;39m ==> Parameters: 
2022-07-27 21:42:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492743218466816[0;39m <==    Updates: 7
2022-07-27 21:42:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207492743218466816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:42:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492764185792512[0;39m 生成今日电子书快照开始
2022-07-27 21:42:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492764185792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492764185792512[0;39m ==> Parameters: 
2022-07-27 21:42:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492764185792512[0;39m <==    Updates: 0
2022-07-27 21:42:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492764185792512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:42:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492785153118208[0;39m 生成今日电子书快照开始
2022-07-27 21:42:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492785153118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492785153118208[0;39m ==> Parameters: 
2022-07-27 21:42:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492785153118208[0;39m <==    Updates: 0
2022-07-27 21:42:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492785153118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:42:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492806091083776[0;39m 生成今日电子书快照开始
2022-07-27 21:42:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492806091083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492806091083776[0;39m ==> Parameters: 
2022-07-27 21:42:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492806091083776[0;39m <==    Updates: 0
2022-07-27 21:42:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492806091083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:42:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492827066798080[0;39m 生成今日电子书快照开始
2022-07-27 21:42:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492827066798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492827066798080[0;39m ==> Parameters: 
2022-07-27 21:42:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492827066798080[0;39m <==    Updates: 0
2022-07-27 21:42:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492827066798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:42:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492848038318080[0;39m 生成今日电子书快照开始
2022-07-27 21:42:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492848038318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492848038318080[0;39m ==> Parameters: 
2022-07-27 21:42:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492848038318080[0;39m <==    Updates: 0
2022-07-27 21:42:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492848038318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:42:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492869030809600[0;39m 生成今日电子书快照开始
2022-07-27 21:42:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492869030809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492869030809600[0;39m ==> Parameters: 
2022-07-27 21:42:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492869030809600[0;39m <==    Updates: 0
2022-07-27 21:42:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492869030809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:42:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207492869039198208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:42:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492869039198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:42:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492869039198208[0;39m ==> Parameters: 
2022-07-27 21:42:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492869039198208[0;39m <==    Updates: 7
2022-07-27 21:42:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207492869039198208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:42:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492890019106816[0;39m 生成今日电子书快照开始
2022-07-27 21:42:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492890019106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492890019106816[0;39m ==> Parameters: 
2022-07-27 21:42:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492890019106816[0;39m <==    Updates: 0
2022-07-27 21:42:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492890019106816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:42:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492910952878080[0;39m 生成今日电子书快照开始
2022-07-27 21:42:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492910952878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492910952878080[0;39m ==> Parameters: 
2022-07-27 21:42:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492910952878080[0;39m <==    Updates: 0
2022-07-27 21:42:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492910952878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:42:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492931941175296[0;39m 生成今日电子书快照开始
2022-07-27 21:42:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492931941175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492931941175296[0;39m ==> Parameters: 
2022-07-27 21:42:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492931941175296[0;39m <==    Updates: 0
2022-07-27 21:42:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492931941175296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:42:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492952937861120[0;39m 生成今日电子书快照开始
2022-07-27 21:42:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492952937861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:42:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492952937861120[0;39m ==> Parameters: 
2022-07-27 21:42:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492952937861120[0;39m <==    Updates: 0
2022-07-27 21:42:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492952937861120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:43:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492973867438080[0;39m 生成今日电子书快照开始
2022-07-27 21:43:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492973867438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492973867438080[0;39m ==> Parameters: 
2022-07-27 21:43:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492973867438080[0;39m <==    Updates: 0
2022-07-27 21:43:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492973867438080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:43:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207492994859929600[0;39m 生成今日电子书快照开始
2022-07-27 21:43:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492994859929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492994859929600[0;39m ==> Parameters: 
2022-07-27 21:43:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207492994859929600[0;39m <==    Updates: 0
2022-07-27 21:43:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207492994859929600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:43:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207492994864123904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:43:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492994864123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:43:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492994864123904[0;39m ==> Parameters: 
2022-07-27 21:43:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207492994864123904[0;39m <==    Updates: 7
2022-07-27 21:43:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207492994864123904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:43:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493015814672384[0;39m 生成今日电子书快照开始
2022-07-27 21:43:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493015814672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:10.132 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493015814672384[0;39m ==> Parameters: 
2022-07-27 21:43:10.133 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493015814672384[0;39m <==    Updates: 0
2022-07-27 21:43:10.133 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493015814672384[0;39m 生成今日电子书快照结束，耗时：129 毫秒
2022-07-27 21:43:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493036828135424[0;39m 生成今日电子书快照开始
2022-07-27 21:43:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493036828135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493036828135424[0;39m ==> Parameters: 
2022-07-27 21:43:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493036828135424[0;39m <==    Updates: 0
2022-07-27 21:43:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493036828135424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:43:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493057791266816[0;39m 生成今日电子书快照开始
2022-07-27 21:43:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493057791266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493057791266816[0;39m ==> Parameters: 
2022-07-27 21:43:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493057791266816[0;39m <==    Updates: 0
2022-07-27 21:43:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493057791266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:43:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493078733426688[0;39m 生成今日电子书快照开始
2022-07-27 21:43:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493078733426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493078733426688[0;39m ==> Parameters: 
2022-07-27 21:43:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493078733426688[0;39m <==    Updates: 0
2022-07-27 21:43:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493078733426688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:43:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493099742695424[0;39m 生成今日电子书快照开始
2022-07-27 21:43:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493099742695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493099742695424[0;39m ==> Parameters: 
2022-07-27 21:43:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493099742695424[0;39m <==    Updates: 0
2022-07-27 21:43:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493099742695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:43:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207493120684855296[0;39m 更新电子书下的文档数据开始
2022-07-27 21:43:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493120684855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:43:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493120684855296[0;39m ==> Parameters: 
2022-07-27 21:43:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493120684855296[0;39m <==    Updates: 7
2022-07-27 21:43:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207493120684855296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:43:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493120697438208[0;39m 生成今日电子书快照开始
2022-07-27 21:43:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493120697438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493120697438208[0;39m ==> Parameters: 
2022-07-27 21:43:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493120697438208[0;39m <==    Updates: 0
2022-07-27 21:43:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493120697438208[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 21:43:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493141652180992[0;39m 生成今日电子书快照开始
2022-07-27 21:43:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493141652180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493141652180992[0;39m ==> Parameters: 
2022-07-27 21:43:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493141652180992[0;39m <==    Updates: 0
2022-07-27 21:43:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493141652180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:43:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493162665644032[0;39m 生成今日电子书快照开始
2022-07-27 21:43:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493162665644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493162665644032[0;39m ==> Parameters: 
2022-07-27 21:43:45.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493162665644032[0;39m <==    Updates: 0
2022-07-27 21:43:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493162665644032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:43:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493183578443776[0;39m 生成今日电子书快照开始
2022-07-27 21:43:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493183578443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493183578443776[0;39m ==> Parameters: 
2022-07-27 21:43:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493183578443776[0;39m <==    Updates: 0
2022-07-27 21:43:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493183578443776[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 21:43:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493204600295424[0;39m 生成今日电子书快照开始
2022-07-27 21:43:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493204600295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:43:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493204600295424[0;39m ==> Parameters: 
2022-07-27 21:43:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493204600295424[0;39m <==    Updates: 0
2022-07-27 21:43:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493204600295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:44:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493225580204032[0;39m 生成今日电子书快照开始
2022-07-27 21:44:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493225580204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493225580204032[0;39m ==> Parameters: 
2022-07-27 21:44:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493225580204032[0;39m <==    Updates: 0
2022-07-27 21:44:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493225580204032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:44:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207493246530752512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:44:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493246530752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:44:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493246530752512[0;39m ==> Parameters: 
2022-07-27 21:44:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493246530752512[0;39m <==    Updates: 7
2022-07-27 21:44:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207493246530752512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:44:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493246534946816[0;39m 生成今日电子书快照开始
2022-07-27 21:44:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493246534946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493246534946816[0;39m ==> Parameters: 
2022-07-27 21:44:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493246534946816[0;39m <==    Updates: 0
2022-07-27 21:44:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493246534946816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:44:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493267514855424[0;39m 生成今日电子书快照开始
2022-07-27 21:44:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493267514855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493267514855424[0;39m ==> Parameters: 
2022-07-27 21:44:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493267514855424[0;39m <==    Updates: 0
2022-07-27 21:44:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493267514855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:44:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493288469598208[0;39m 生成今日电子书快照开始
2022-07-27 21:44:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493288469598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493288469598208[0;39m ==> Parameters: 
2022-07-27 21:44:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493288469598208[0;39m <==    Updates: 0
2022-07-27 21:44:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493288469598208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:44:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493309424340992[0;39m 生成今日电子书快照开始
2022-07-27 21:44:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493309424340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493309424340992[0;39m ==> Parameters: 
2022-07-27 21:44:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493309424340992[0;39m <==    Updates: 0
2022-07-27 21:44:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493309424340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:44:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493330429415424[0;39m 生成今日电子书快照开始
2022-07-27 21:44:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493330429415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493330429415424[0;39m ==> Parameters: 
2022-07-27 21:44:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493330429415424[0;39m <==    Updates: 0
2022-07-27 21:44:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493330429415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:44:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493351396741120[0;39m 生成今日电子书快照开始
2022-07-27 21:44:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493351396741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493351396741120[0;39m ==> Parameters: 
2022-07-27 21:44:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493351396741120[0;39m <==    Updates: 0
2022-07-27 21:44:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493351396741120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:44:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493372351483904[0;39m 生成今日电子书快照开始
2022-07-27 21:44:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493372351483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493372351483904[0;39m ==> Parameters: 
2022-07-27 21:44:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493372351483904[0;39m <==    Updates: 0
2022-07-27 21:44:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493372351483904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:44:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207493372364066816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:44:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493372364066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:44:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493372364066816[0;39m ==> Parameters: 
2022-07-27 21:44:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493372364066816[0;39m <==    Updates: 7
2022-07-27 21:44:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207493372364066816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:44:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493393348169728[0;39m 生成今日电子书快照开始
2022-07-27 21:44:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493393348169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493393348169728[0;39m ==> Parameters: 
2022-07-27 21:44:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493393348169728[0;39m <==    Updates: 0
2022-07-27 21:44:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493393348169728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:44:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493414286135296[0;39m 生成今日电子书快照开始
2022-07-27 21:44:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493414286135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493414286135296[0;39m ==> Parameters: 
2022-07-27 21:44:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493414286135296[0;39m <==    Updates: 0
2022-07-27 21:44:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493414286135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:44:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493435278626816[0;39m 生成今日电子书快照开始
2022-07-27 21:44:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493435278626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493435278626816[0;39m ==> Parameters: 
2022-07-27 21:44:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493435278626816[0;39m <==    Updates: 0
2022-07-27 21:44:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493435278626816[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 21:44:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493456229175296[0;39m 生成今日电子书快照开始
2022-07-27 21:44:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493456229175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:44:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493456229175296[0;39m ==> Parameters: 
2022-07-27 21:44:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493456229175296[0;39m <==    Updates: 0
2022-07-27 21:44:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493456229175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493477183918080[0;39m 生成今日电子书快照开始
2022-07-27 21:45:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493477183918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493477183918080[0;39m ==> Parameters: 
2022-07-27 21:45:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493477183918080[0;39m <==    Updates: 0
2022-07-27 21:45:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493477183918080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:45:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493498159632384[0;39m 生成今日电子书快照开始
2022-07-27 21:45:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493498159632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493498159632384[0;39m ==> Parameters: 
2022-07-27 21:45:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493498159632384[0;39m <==    Updates: 0
2022-07-27 21:45:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493498159632384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207493498168020992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:45:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493498168020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:45:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493498168020992[0;39m ==> Parameters: 
2022-07-27 21:45:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493498168020992[0;39m <==    Updates: 7
2022-07-27 21:45:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207493498168020992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:45:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493519122763776[0;39m 生成今日电子书快照开始
2022-07-27 21:45:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493519122763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493519122763776[0;39m ==> Parameters: 
2022-07-27 21:45:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493519122763776[0;39m <==    Updates: 0
2022-07-27 21:45:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493519122763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493540085895168[0;39m 生成今日电子书快照开始
2022-07-27 21:45:15.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493540085895168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493540085895168[0;39m ==> Parameters: 
2022-07-27 21:45:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493540085895168[0;39m <==    Updates: 0
2022-07-27 21:45:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493540085895168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493561090969600[0;39m 生成今日电子书快照开始
2022-07-27 21:45:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493561090969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493561090969600[0;39m ==> Parameters: 
2022-07-27 21:45:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493561090969600[0;39m <==    Updates: 0
2022-07-27 21:45:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493561090969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493582079266816[0;39m 生成今日电子书快照开始
2022-07-27 21:45:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493582079266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493582079266816[0;39m ==> Parameters: 
2022-07-27 21:45:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493582079266816[0;39m <==    Updates: 0
2022-07-27 21:45:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493582079266816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:45:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493603021426688[0;39m 生成今日电子书快照开始
2022-07-27 21:45:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493603021426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493603021426688[0;39m ==> Parameters: 
2022-07-27 21:45:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493603021426688[0;39m <==    Updates: 0
2022-07-27 21:45:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493603021426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207493623992946688[0;39m 更新电子书下的文档数据开始
2022-07-27 21:45:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493623992946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:45:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493623992946688[0;39m ==> Parameters: 
2022-07-27 21:45:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493623992946688[0;39m <==    Updates: 7
2022-07-27 21:45:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207493623992946688[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-27 21:45:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493624013918208[0;39m 生成今日电子书快照开始
2022-07-27 21:45:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493624013918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493624013918208[0;39m ==> Parameters: 
2022-07-27 21:45:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493624013918208[0;39m <==    Updates: 0
2022-07-27 21:45:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493624013918208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:45:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493644977049600[0;39m 生成今日电子书快照开始
2022-07-27 21:45:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493644977049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493644977049600[0;39m ==> Parameters: 
2022-07-27 21:45:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493644977049600[0;39m <==    Updates: 0
2022-07-27 21:45:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493644977049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493665927598080[0;39m 生成今日电子书快照开始
2022-07-27 21:45:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493665927598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493665927598080[0;39m ==> Parameters: 
2022-07-27 21:45:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493665927598080[0;39m <==    Updates: 0
2022-07-27 21:45:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493665927598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493686932672512[0;39m 生成今日电子书快照开始
2022-07-27 21:45:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493686932672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493686932672512[0;39m ==> Parameters: 
2022-07-27 21:45:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493686932672512[0;39m <==    Updates: 0
2022-07-27 21:45:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493686932672512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:45:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493707899998208[0;39m 生成今日电子书快照开始
2022-07-27 21:45:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493707899998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:45:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493707899998208[0;39m ==> Parameters: 
2022-07-27 21:45:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493707899998208[0;39m <==    Updates: 0
2022-07-27 21:45:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493707899998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:46:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493728833769472[0;39m 生成今日电子书快照开始
2022-07-27 21:46:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493728833769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493728833769472[0;39m ==> Parameters: 
2022-07-27 21:46:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493728833769472[0;39m <==    Updates: 0
2022-07-27 21:46:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493728833769472[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-27 21:46:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207493749817872384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:46:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493749817872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:46:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493749817872384[0;39m ==> Parameters: 
2022-07-27 21:46:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493749817872384[0;39m <==    Updates: 7
2022-07-27 21:46:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207493749817872384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:46:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493749826260992[0;39m 生成今日电子书快照开始
2022-07-27 21:46:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493749826260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493749826260992[0;39m ==> Parameters: 
2022-07-27 21:46:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493749826260992[0;39m <==    Updates: 0
2022-07-27 21:46:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493749826260992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:46:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493770818752512[0;39m 生成今日电子书快照开始
2022-07-27 21:46:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493770818752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493770818752512[0;39m ==> Parameters: 
2022-07-27 21:46:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493770818752512[0;39m <==    Updates: 0
2022-07-27 21:46:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493770818752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:46:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493791748329472[0;39m 生成今日电子书快照开始
2022-07-27 21:46:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493791748329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493791748329472[0;39m ==> Parameters: 
2022-07-27 21:46:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493791748329472[0;39m <==    Updates: 0
2022-07-27 21:46:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493791748329472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:46:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493812753403904[0;39m 生成今日电子书快照开始
2022-07-27 21:46:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493812753403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493812753403904[0;39m ==> Parameters: 
2022-07-27 21:46:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493812753403904[0;39m <==    Updates: 0
2022-07-27 21:46:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493812753403904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:46:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493833691369472[0;39m 生成今日电子书快照开始
2022-07-27 21:46:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493833691369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493833691369472[0;39m ==> Parameters: 
2022-07-27 21:46:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493833691369472[0;39m <==    Updates: 0
2022-07-27 21:46:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493833691369472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:46:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493854709026816[0;39m 生成今日电子书快照开始
2022-07-27 21:46:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493854709026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493854709026816[0;39m ==> Parameters: 
2022-07-27 21:46:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493854709026816[0;39m <==    Updates: 0
2022-07-27 21:46:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493854709026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:46:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207493875655380992[0;39m 更新电子书下的文档数据开始
2022-07-27 21:46:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493875655380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:46:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493875655380992[0;39m ==> Parameters: 
2022-07-27 21:46:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207493875655380992[0;39m <==    Updates: 7
2022-07-27 21:46:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207493875655380992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:46:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493875659575296[0;39m 生成今日电子书快照开始
2022-07-27 21:46:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493875659575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493875659575296[0;39m ==> Parameters: 
2022-07-27 21:46:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493875659575296[0;39m <==    Updates: 0
2022-07-27 21:46:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493875659575296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:46:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493896652066816[0;39m 生成今日电子书快照开始
2022-07-27 21:46:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493896652066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493896652066816[0;39m ==> Parameters: 
2022-07-27 21:46:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493896652066816[0;39m <==    Updates: 0
2022-07-27 21:46:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493896652066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:46:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493917594226688[0;39m 生成今日电子书快照开始
2022-07-27 21:46:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493917594226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493917594226688[0;39m ==> Parameters: 
2022-07-27 21:46:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493917594226688[0;39m <==    Updates: 0
2022-07-27 21:46:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493917594226688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:46:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493938574135296[0;39m 生成今日电子书快照开始
2022-07-27 21:46:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493938574135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493938574135296[0;39m ==> Parameters: 
2022-07-27 21:46:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493938574135296[0;39m <==    Updates: 0
2022-07-27 21:46:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493938574135296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:46:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493959554043904[0;39m 生成今日电子书快照开始
2022-07-27 21:46:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493959554043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:46:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493959554043904[0;39m ==> Parameters: 
2022-07-27 21:46:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493959554043904[0;39m <==    Updates: 0
2022-07-27 21:46:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493959554043904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:47:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207493980529758208[0;39m 生成今日电子书快照开始
2022-07-27 21:47:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493980529758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493980529758208[0;39m ==> Parameters: 
2022-07-27 21:47:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207493980529758208[0;39m <==    Updates: 0
2022-07-27 21:47:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207493980529758208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:47:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207494001480306688[0;39m 更新电子书下的文档数据开始
2022-07-27 21:47:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494001480306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:47:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494001480306688[0;39m ==> Parameters: 
2022-07-27 21:47:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494001480306688[0;39m <==    Updates: 7
2022-07-27 21:47:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207494001480306688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:47:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494001484500992[0;39m 生成今日电子书快照开始
2022-07-27 21:47:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494001484500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494001484500992[0;39m ==> Parameters: 
2022-07-27 21:47:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494001484500992[0;39m <==    Updates: 0
2022-07-27 21:47:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494001484500992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:47:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494022481186816[0;39m 生成今日电子书快照开始
2022-07-27 21:47:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494022481186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494022481186816[0;39m ==> Parameters: 
2022-07-27 21:47:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494022481186816[0;39m <==    Updates: 0
2022-07-27 21:47:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494022481186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:47:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494043448512512[0;39m 生成今日电子书快照开始
2022-07-27 21:47:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494043448512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494043448512512[0;39m ==> Parameters: 
2022-07-27 21:47:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494043448512512[0;39m <==    Updates: 0
2022-07-27 21:47:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494043448512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:47:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494064441004032[0;39m 生成今日电子书快照开始
2022-07-27 21:47:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494064441004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494064441004032[0;39m ==> Parameters: 
2022-07-27 21:47:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494064441004032[0;39m <==    Updates: 0
2022-07-27 21:47:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494064441004032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:47:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494085349609472[0;39m 生成今日电子书快照开始
2022-07-27 21:47:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494085349609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494085349609472[0;39m ==> Parameters: 
2022-07-27 21:47:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494085349609472[0;39m <==    Updates: 0
2022-07-27 21:47:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494085349609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:47:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494106333712384[0;39m 生成今日电子书快照开始
2022-07-27 21:47:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494106333712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494106333712384[0;39m ==> Parameters: 
2022-07-27 21:47:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494106333712384[0;39m <==    Updates: 0
2022-07-27 21:47:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494106333712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:47:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494127330398208[0;39m 生成今日电子书快照开始
2022-07-27 21:47:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494127330398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494127330398208[0;39m ==> Parameters: 
2022-07-27 21:47:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494127330398208[0;39m <==    Updates: 0
2022-07-27 21:47:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494127330398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:47:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207494127338786816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:47:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494127338786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:47:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494127338786816[0;39m ==> Parameters: 
2022-07-27 21:47:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494127338786816[0;39m <==    Updates: 7
2022-07-27 21:47:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207494127338786816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:47:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494148289335296[0;39m 生成今日电子书快照开始
2022-07-27 21:47:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494148289335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494148289335296[0;39m ==> Parameters: 
2022-07-27 21:47:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494148289335296[0;39m <==    Updates: 0
2022-07-27 21:47:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494148289335296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:47:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494169294409728[0;39m 生成今日电子书快照开始
2022-07-27 21:47:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494169294409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494169294409728[0;39m ==> Parameters: 
2022-07-27 21:47:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494169294409728[0;39m <==    Updates: 0
2022-07-27 21:47:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494169294409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:47:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494190240763904[0;39m 生成今日电子书快照开始
2022-07-27 21:47:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494190240763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494190240763904[0;39m ==> Parameters: 
2022-07-27 21:47:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494190240763904[0;39m <==    Updates: 0
2022-07-27 21:47:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494190240763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:47:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494211233255424[0;39m 生成今日电子书快照开始
2022-07-27 21:47:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494211233255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:47:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494211233255424[0;39m ==> Parameters: 
2022-07-27 21:47:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494211233255424[0;39m <==    Updates: 0
2022-07-27 21:47:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494211233255424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:48:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494232183803904[0;39m 生成今日电子书快照开始
2022-07-27 21:48:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494232183803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494232183803904[0;39m ==> Parameters: 
2022-07-27 21:48:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494232183803904[0;39m <==    Updates: 0
2022-07-27 21:48:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494232183803904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:48:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494253176295424[0;39m 生成今日电子书快照开始
2022-07-27 21:48:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494253176295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494253176295424[0;39m ==> Parameters: 
2022-07-27 21:48:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494253176295424[0;39m <==    Updates: 0
2022-07-27 21:48:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494253176295424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 21:48:05.021 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207494253205655552[0;39m 更新电子书下的文档数据开始
2022-07-27 21:48:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494253205655552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:48:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494253205655552[0;39m ==> Parameters: 
2022-07-27 21:48:05.024 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494253205655552[0;39m <==    Updates: 7
2022-07-27 21:48:05.025 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207494253205655552[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-27 21:48:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494274114260992[0;39m 生成今日电子书快照开始
2022-07-27 21:48:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494274114260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494274114260992[0;39m ==> Parameters: 
2022-07-27 21:48:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494274114260992[0;39m <==    Updates: 0
2022-07-27 21:48:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494274114260992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:48:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494295089975296[0;39m 生成今日电子书快照开始
2022-07-27 21:48:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494295089975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494295089975296[0;39m ==> Parameters: 
2022-07-27 21:48:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494295089975296[0;39m <==    Updates: 0
2022-07-27 21:48:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494295089975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:48:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494316078272512[0;39m 生成今日电子书快照开始
2022-07-27 21:48:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494316078272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494316078272512[0;39m ==> Parameters: 
2022-07-27 21:48:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494316078272512[0;39m <==    Updates: 0
2022-07-27 21:48:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494316078272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:48:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494337033015296[0;39m 生成今日电子书快照开始
2022-07-27 21:48:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494337033015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494337033015296[0;39m ==> Parameters: 
2022-07-27 21:48:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494337033015296[0;39m <==    Updates: 0
2022-07-27 21:48:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494337033015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:48:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494358033895424[0;39m 生成今日电子书快照开始
2022-07-27 21:48:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494358033895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494358033895424[0;39m ==> Parameters: 
2022-07-27 21:48:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494358033895424[0;39m <==    Updates: 0
2022-07-27 21:48:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494358033895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:48:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494378955083776[0;39m 生成今日电子书快照开始
2022-07-27 21:48:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494378955083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494378955083776[0;39m ==> Parameters: 
2022-07-27 21:48:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494378955083776[0;39m <==    Updates: 0
2022-07-27 21:48:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494378955083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:48:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207494378963472384[0;39m 更新电子书下的文档数据开始
2022-07-27 21:48:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494378963472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:48:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494378963472384[0;39m ==> Parameters: 
2022-07-27 21:48:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494378963472384[0;39m <==    Updates: 7
2022-07-27 21:48:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207494378963472384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:48:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494399930798080[0;39m 生成今日电子书快照开始
2022-07-27 21:48:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494399930798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494399930798080[0;39m ==> Parameters: 
2022-07-27 21:48:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494399930798080[0;39m <==    Updates: 0
2022-07-27 21:48:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494399930798080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 21:48:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494420914900992[0;39m 生成今日电子书快照开始
2022-07-27 21:48:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494420914900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494420914900992[0;39m ==> Parameters: 
2022-07-27 21:48:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494420914900992[0;39m <==    Updates: 0
2022-07-27 21:48:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494420914900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:48:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494441882226688[0;39m 生成今日电子书快照开始
2022-07-27 21:48:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494441882226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494441882226688[0;39m ==> Parameters: 
2022-07-27 21:48:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494441882226688[0;39m <==    Updates: 0
2022-07-27 21:48:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494441882226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:48:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494462887301120[0;39m 生成今日电子书快照开始
2022-07-27 21:48:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494462887301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:48:55.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494462887301120[0;39m ==> Parameters: 
2022-07-27 21:48:55.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494462887301120[0;39m <==    Updates: 0
2022-07-27 21:48:55.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494462887301120[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 21:49:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494483808489472[0;39m 生成今日电子书快照开始
2022-07-27 21:49:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494483808489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494483808489472[0;39m ==> Parameters: 
2022-07-27 21:49:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494483808489472[0;39m <==    Updates: 0
2022-07-27 21:49:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494483808489472[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 21:49:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494504805175296[0;39m 生成今日电子书快照开始
2022-07-27 21:49:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494504805175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494504805175296[0;39m ==> Parameters: 
2022-07-27 21:49:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494504805175296[0;39m <==    Updates: 0
2022-07-27 21:49:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494504805175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:49:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207494504813563904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:49:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494504813563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:49:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494504813563904[0;39m ==> Parameters: 
2022-07-27 21:49:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494504813563904[0;39m <==    Updates: 7
2022-07-27 21:49:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207494504813563904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:49:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494525780889600[0;39m 生成今日电子书快照开始
2022-07-27 21:49:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494525780889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494525780889600[0;39m ==> Parameters: 
2022-07-27 21:49:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494525780889600[0;39m <==    Updates: 0
2022-07-27 21:49:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494525780889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:49:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494546756603904[0;39m 生成今日电子书快照开始
2022-07-27 21:49:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494546756603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494546756603904[0;39m ==> Parameters: 
2022-07-27 21:49:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494546756603904[0;39m <==    Updates: 0
2022-07-27 21:49:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494546756603904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:49:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494567723929600[0;39m 生成今日电子书快照开始
2022-07-27 21:49:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494567723929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494567723929600[0;39m ==> Parameters: 
2022-07-27 21:49:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494567723929600[0;39m <==    Updates: 0
2022-07-27 21:49:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494567723929600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:49:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494588716421120[0;39m 生成今日电子书快照开始
2022-07-27 21:49:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494588716421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494588716421120[0;39m ==> Parameters: 
2022-07-27 21:49:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494588716421120[0;39m <==    Updates: 0
2022-07-27 21:49:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494588716421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:49:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494609645998080[0;39m 生成今日电子书快照开始
2022-07-27 21:49:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494609645998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494609645998080[0;39m ==> Parameters: 
2022-07-27 21:49:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494609645998080[0;39m <==    Updates: 0
2022-07-27 21:49:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494609645998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:49:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207494630651072512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:49:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494630651072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:49:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494630651072512[0;39m ==> Parameters: 
2022-07-27 21:49:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494630651072512[0;39m <==    Updates: 7
2022-07-27 21:49:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207494630651072512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:49:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494630659461120[0;39m 生成今日电子书快照开始
2022-07-27 21:49:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494630659461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494630659461120[0;39m ==> Parameters: 
2022-07-27 21:49:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494630659461120[0;39m <==    Updates: 0
2022-07-27 21:49:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494630659461120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:49:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494651635175424[0;39m 生成今日电子书快照开始
2022-07-27 21:49:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494651635175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494651635175424[0;39m ==> Parameters: 
2022-07-27 21:49:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494651635175424[0;39m <==    Updates: 0
2022-07-27 21:49:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494651635175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:49:45.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494672547975168[0;39m 生成今日电子书快照开始
2022-07-27 21:49:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494672547975168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494672547975168[0;39m ==> Parameters: 
2022-07-27 21:49:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494672547975168[0;39m <==    Updates: 0
2022-07-27 21:49:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494672547975168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:49:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494693557243904[0;39m 生成今日电子书快照开始
2022-07-27 21:49:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494693557243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494693557243904[0;39m ==> Parameters: 
2022-07-27 21:49:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494693557243904[0;39m <==    Updates: 0
2022-07-27 21:49:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494693557243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:49:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494714495209472[0;39m 生成今日电子书快照开始
2022-07-27 21:49:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494714495209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:49:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494714495209472[0;39m ==> Parameters: 
2022-07-27 21:49:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494714495209472[0;39m <==    Updates: 0
2022-07-27 21:49:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494714495209472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:50:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494735504478208[0;39m 生成今日电子书快照开始
2022-07-27 21:50:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494735504478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494735504478208[0;39m ==> Parameters: 
2022-07-27 21:50:00.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494735504478208[0;39m <==    Updates: 0
2022-07-27 21:50:00.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494735504478208[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-27 21:50:05.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207494756434055168[0;39m 更新电子书下的文档数据开始
2022-07-27 21:50:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494756434055168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:50:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494756434055168[0;39m ==> Parameters: 
2022-07-27 21:50:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494756434055168[0;39m <==    Updates: 7
2022-07-27 21:50:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207494756434055168[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:50:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494756442443776[0;39m 生成今日电子书快照开始
2022-07-27 21:50:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494756442443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494756442443776[0;39m ==> Parameters: 
2022-07-27 21:50:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494756442443776[0;39m <==    Updates: 0
2022-07-27 21:50:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494756442443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:50:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494777439129600[0;39m 生成今日电子书快照开始
2022-07-27 21:50:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494777439129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494777439129600[0;39m ==> Parameters: 
2022-07-27 21:50:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494777439129600[0;39m <==    Updates: 0
2022-07-27 21:50:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494777439129600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:50:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494798393872384[0;39m 生成今日电子书快照开始
2022-07-27 21:50:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494798393872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494798393872384[0;39m ==> Parameters: 
2022-07-27 21:50:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494798393872384[0;39m <==    Updates: 0
2022-07-27 21:50:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494798393872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:50:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494819373780992[0;39m 生成今日电子书快照开始
2022-07-27 21:50:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494819373780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494819373780992[0;39m ==> Parameters: 
2022-07-27 21:50:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494819373780992[0;39m <==    Updates: 0
2022-07-27 21:50:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494819373780992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:50:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494840341106688[0;39m 生成今日电子书快照开始
2022-07-27 21:50:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494840341106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494840341106688[0;39m ==> Parameters: 
2022-07-27 21:50:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494840341106688[0;39m <==    Updates: 0
2022-07-27 21:50:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494840341106688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:50:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494861341986816[0;39m 生成今日电子书快照开始
2022-07-27 21:50:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494861341986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494861341986816[0;39m ==> Parameters: 
2022-07-27 21:50:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494861341986816[0;39m <==    Updates: 0
2022-07-27 21:50:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494861341986816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:50:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207494882321895424[0;39m 更新电子书下的文档数据开始
2022-07-27 21:50:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494882321895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:50:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494882321895424[0;39m ==> Parameters: 
2022-07-27 21:50:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207494882321895424[0;39m <==    Updates: 7
2022-07-27 21:50:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207494882321895424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:50:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494882330284032[0;39m 生成今日电子书快照开始
2022-07-27 21:50:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494882330284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494882330284032[0;39m ==> Parameters: 
2022-07-27 21:50:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494882330284032[0;39m <==    Updates: 0
2022-07-27 21:50:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494882330284032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:50:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494903264055296[0;39m 生成今日电子书快照开始
2022-07-27 21:50:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494903264055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494903264055296[0;39m ==> Parameters: 
2022-07-27 21:50:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494903264055296[0;39m <==    Updates: 0
2022-07-27 21:50:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494903264055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:50:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494924239769600[0;39m 生成今日电子书快照开始
2022-07-27 21:50:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494924239769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494924239769600[0;39m ==> Parameters: 
2022-07-27 21:50:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494924239769600[0;39m <==    Updates: 0
2022-07-27 21:50:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494924239769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:50:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494945198706688[0;39m 生成今日电子书快照开始
2022-07-27 21:50:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494945198706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494945198706688[0;39m ==> Parameters: 
2022-07-27 21:50:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494945198706688[0;39m <==    Updates: 0
2022-07-27 21:50:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494945198706688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:50:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494966174420992[0;39m 生成今日电子书快照开始
2022-07-27 21:50:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494966174420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:50:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494966174420992[0;39m ==> Parameters: 
2022-07-27 21:50:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494966174420992[0;39m <==    Updates: 0
2022-07-27 21:50:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494966174420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207494987158523904[0;39m 生成今日电子书快照开始
2022-07-27 21:51:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494987158523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494987158523904[0;39m ==> Parameters: 
2022-07-27 21:51:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207494987158523904[0;39m <==    Updates: 0
2022-07-27 21:51:00.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207494987158523904[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-27 21:51:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207495008151015424[0;39m 更新电子书下的文档数据开始
2022-07-27 21:51:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495008151015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:51:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495008151015424[0;39m ==> Parameters: 
2022-07-27 21:51:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495008151015424[0;39m <==    Updates: 7
2022-07-27 21:51:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207495008151015424[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-27 21:51:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495008167792640[0;39m 生成今日电子书快照开始
2022-07-27 21:51:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495008167792640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495008167792640[0;39m ==> Parameters: 
2022-07-27 21:51:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495008167792640[0;39m <==    Updates: 0
2022-07-27 21:51:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495008167792640[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495029084786688[0;39m 生成今日电子书快照开始
2022-07-27 21:51:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495029084786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495029084786688[0;39m ==> Parameters: 
2022-07-27 21:51:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495029084786688[0;39m <==    Updates: 0
2022-07-27 21:51:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495029084786688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495050073083904[0;39m 生成今日电子书快照开始
2022-07-27 21:51:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495050073083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495050073083904[0;39m ==> Parameters: 
2022-07-27 21:51:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495050073083904[0;39m <==    Updates: 0
2022-07-27 21:51:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495050073083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495071048798208[0;39m 生成今日电子书快照开始
2022-07-27 21:51:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495071048798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495071048798208[0;39m ==> Parameters: 
2022-07-27 21:51:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495071048798208[0;39m <==    Updates: 0
2022-07-27 21:51:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495071048798208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495092041289728[0;39m 生成今日电子书快照开始
2022-07-27 21:51:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495092041289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495092041289728[0;39m ==> Parameters: 
2022-07-27 21:51:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495092041289728[0;39m <==    Updates: 0
2022-07-27 21:51:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495092041289728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495112975060992[0;39m 生成今日电子书快照开始
2022-07-27 21:51:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495112975060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495112975060992[0;39m ==> Parameters: 
2022-07-27 21:51:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495112975060992[0;39m <==    Updates: 0
2022-07-27 21:51:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495112975060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495133967552512[0;39m 生成今日电子书快照开始
2022-07-27 21:51:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495133967552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495133967552512[0;39m ==> Parameters: 
2022-07-27 21:51:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495133967552512[0;39m <==    Updates: 0
2022-07-27 21:51:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495133967552512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207495133975941120[0;39m 更新电子书下的文档数据开始
2022-07-27 21:51:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495133975941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:51:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495133975941120[0;39m ==> Parameters: 
2022-07-27 21:51:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495133975941120[0;39m <==    Updates: 7
2022-07-27 21:51:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207495133975941120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:51:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495154922295296[0;39m 生成今日电子书快照开始
2022-07-27 21:51:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495154922295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495154922295296[0;39m ==> Parameters: 
2022-07-27 21:51:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495154922295296[0;39m <==    Updates: 0
2022-07-27 21:51:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495154922295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:51:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495175893815296[0;39m 生成今日电子书快照开始
2022-07-27 21:51:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495175893815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495175893815296[0;39m ==> Parameters: 
2022-07-27 21:51:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495175893815296[0;39m <==    Updates: 0
2022-07-27 21:51:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495175893815296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:51:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495196840169472[0;39m 生成今日电子书快照开始
2022-07-27 21:51:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495196840169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495196840169472[0;39m ==> Parameters: 
2022-07-27 21:51:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495196840169472[0;39m <==    Updates: 0
2022-07-27 21:51:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495196840169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:51:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495217841049600[0;39m 生成今日电子书快照开始
2022-07-27 21:51:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495217841049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:51:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495217841049600[0;39m ==> Parameters: 
2022-07-27 21:51:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495217841049600[0;39m <==    Updates: 0
2022-07-27 21:51:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495217841049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495238804180992[0;39m 生成今日电子书快照开始
2022-07-27 21:52:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495238804180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495238804180992[0;39m ==> Parameters: 
2022-07-27 21:52:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495238804180992[0;39m <==    Updates: 0
2022-07-27 21:52:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495238804180992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:52:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495259754729472[0;39m 生成今日电子书快照开始
2022-07-27 21:52:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495259754729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495259754729472[0;39m ==> Parameters: 
2022-07-27 21:52:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495259754729472[0;39m <==    Updates: 0
2022-07-27 21:52:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495259754729472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207495259763118080[0;39m 更新电子书下的文档数据开始
2022-07-27 21:52:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495259763118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:52:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495259763118080[0;39m ==> Parameters: 
2022-07-27 21:52:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495259763118080[0;39m <==    Updates: 7
2022-07-27 21:52:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207495259763118080[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2022-07-27 21:52:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495280738832384[0;39m 生成今日电子书快照开始
2022-07-27 21:52:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495280738832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495280738832384[0;39m ==> Parameters: 
2022-07-27 21:52:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495280738832384[0;39m <==    Updates: 0
2022-07-27 21:52:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495280738832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495301710352384[0;39m 生成今日电子书快照开始
2022-07-27 21:52:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495301710352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495301710352384[0;39m ==> Parameters: 
2022-07-27 21:52:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495301710352384[0;39m <==    Updates: 0
2022-07-27 21:52:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495301710352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495322694455296[0;39m 生成今日电子书快照开始
2022-07-27 21:52:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495322694455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495322694455296[0;39m ==> Parameters: 
2022-07-27 21:52:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495322694455296[0;39m <==    Updates: 0
2022-07-27 21:52:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495322694455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495343691141120[0;39m 生成今日电子书快照开始
2022-07-27 21:52:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495343691141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495343691141120[0;39m ==> Parameters: 
2022-07-27 21:52:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495343691141120[0;39m <==    Updates: 0
2022-07-27 21:52:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495343691141120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495364629106688[0;39m 生成今日电子书快照开始
2022-07-27 21:52:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495364629106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495364629106688[0;39m ==> Parameters: 
2022-07-27 21:52:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495364629106688[0;39m <==    Updates: 0
2022-07-27 21:52:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495364629106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495385642569728[0;39m 生成今日电子书快照开始
2022-07-27 21:52:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495385642569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495385642569728[0;39m ==> Parameters: 
2022-07-27 21:52:35.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495385642569728[0;39m <==    Updates: 0
2022-07-27 21:52:35.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495385642569728[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 21:52:35.023 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207495385676124160[0;39m 更新电子书下的文档数据开始
2022-07-27 21:52:35.023 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495385676124160[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:52:35.023 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495385676124160[0;39m ==> Parameters: 
2022-07-27 21:52:35.024 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495385676124160[0;39m <==    Updates: 7
2022-07-27 21:52:35.024 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207495385676124160[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:52:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495406593118208[0;39m 生成今日电子书快照开始
2022-07-27 21:52:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495406593118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495406593118208[0;39m ==> Parameters: 
2022-07-27 21:52:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495406593118208[0;39m <==    Updates: 0
2022-07-27 21:52:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495406593118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495427589804032[0;39m 生成今日电子书快照开始
2022-07-27 21:52:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495427589804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495427589804032[0;39m ==> Parameters: 
2022-07-27 21:52:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495427589804032[0;39m <==    Updates: 0
2022-07-27 21:52:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495427589804032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495448552935424[0;39m 生成今日电子书快照开始
2022-07-27 21:52:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495448552935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495448552935424[0;39m ==> Parameters: 
2022-07-27 21:52:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495448552935424[0;39m <==    Updates: 0
2022-07-27 21:52:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495448552935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:52:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495469532844032[0;39m 生成今日电子书快照开始
2022-07-27 21:52:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495469532844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:52:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495469532844032[0;39m ==> Parameters: 
2022-07-27 21:52:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495469532844032[0;39m <==    Updates: 0
2022-07-27 21:52:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495469532844032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495490495975424[0;39m 生成今日电子书快照开始
2022-07-27 21:53:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495490495975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495490495975424[0;39m ==> Parameters: 
2022-07-27 21:53:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495490495975424[0;39m <==    Updates: 0
2022-07-27 21:53:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495490495975424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:53:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495511438135296[0;39m 生成今日电子书快照开始
2022-07-27 21:53:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495511438135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495511438135296[0;39m ==> Parameters: 
2022-07-27 21:53:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495511438135296[0;39m <==    Updates: 0
2022-07-27 21:53:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495511438135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207495511446523904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:53:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495511446523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:53:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495511446523904[0;39m ==> Parameters: 
2022-07-27 21:53:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495511446523904[0;39m <==    Updates: 7
2022-07-27 21:53:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207495511446523904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:53:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495532426432512[0;39m 生成今日电子书快照开始
2022-07-27 21:53:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495532426432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495532426432512[0;39m ==> Parameters: 
2022-07-27 21:53:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495532426432512[0;39m <==    Updates: 0
2022-07-27 21:53:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495532426432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495553376980992[0;39m 生成今日电子书快照开始
2022-07-27 21:53:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495553376980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495553376980992[0;39m ==> Parameters: 
2022-07-27 21:53:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495553376980992[0;39m <==    Updates: 0
2022-07-27 21:53:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495553376980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495574390444032[0;39m 生成今日电子书快照开始
2022-07-27 21:53:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495574390444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495574390444032[0;39m ==> Parameters: 
2022-07-27 21:53:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495574390444032[0;39m <==    Updates: 0
2022-07-27 21:53:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495574390444032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495595336798208[0;39m 生成今日电子书快照开始
2022-07-27 21:53:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495595336798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495595336798208[0;39m ==> Parameters: 
2022-07-27 21:53:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495595336798208[0;39m <==    Updates: 0
2022-07-27 21:53:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495595336798208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495616291540992[0;39m 生成今日电子书快照开始
2022-07-27 21:53:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495616291540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495616291540992[0;39m ==> Parameters: 
2022-07-27 21:53:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495616291540992[0;39m <==    Updates: 0
2022-07-27 21:53:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495616291540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495637263060992[0;39m 生成今日电子书快照开始
2022-07-27 21:53:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495637263060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495637263060992[0;39m ==> Parameters: 
2022-07-27 21:53:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495637263060992[0;39m <==    Updates: 0
2022-07-27 21:53:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495637263060992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:53:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207495637275643904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:53:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495637275643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:53:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495637275643904[0;39m ==> Parameters: 
2022-07-27 21:53:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495637275643904[0;39m <==    Updates: 7
2022-07-27 21:53:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207495637275643904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:53:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495658234580992[0;39m 生成今日电子书快照开始
2022-07-27 21:53:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495658234580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495658234580992[0;39m ==> Parameters: 
2022-07-27 21:53:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495658234580992[0;39m <==    Updates: 0
2022-07-27 21:53:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495658234580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495679214489600[0;39m 生成今日电子书快照开始
2022-07-27 21:53:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495679214489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495679214489600[0;39m ==> Parameters: 
2022-07-27 21:53:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495679214489600[0;39m <==    Updates: 0
2022-07-27 21:53:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495679214489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:53:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495700181815296[0;39m 生成今日电子书快照开始
2022-07-27 21:53:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495700181815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495700181815296[0;39m ==> Parameters: 
2022-07-27 21:53:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495700181815296[0;39m <==    Updates: 0
2022-07-27 21:53:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495700181815296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:53:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495721140752384[0;39m 生成今日电子书快照开始
2022-07-27 21:53:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495721140752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:53:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495721140752384[0;39m ==> Parameters: 
2022-07-27 21:53:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495721140752384[0;39m <==    Updates: 0
2022-07-27 21:53:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495721140752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:54:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495742133243904[0;39m 生成今日电子书快照开始
2022-07-27 21:54:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495742133243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495742133243904[0;39m ==> Parameters: 
2022-07-27 21:54:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495742133243904[0;39m <==    Updates: 0
2022-07-27 21:54:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495742133243904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:54:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495763092180992[0;39m 生成今日电子书快照开始
2022-07-27 21:54:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495763092180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495763092180992[0;39m ==> Parameters: 
2022-07-27 21:54:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495763092180992[0;39m <==    Updates: 0
2022-07-27 21:54:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495763092180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:54:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207495763100569600[0;39m 更新电子书下的文档数据开始
2022-07-27 21:54:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495763100569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:54:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495763100569600[0;39m ==> Parameters: 
2022-07-27 21:54:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495763100569600[0;39m <==    Updates: 7
2022-07-27 21:54:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207495763100569600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:54:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495784063700992[0;39m 生成今日电子书快照开始
2022-07-27 21:54:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495784063700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495784063700992[0;39m ==> Parameters: 
2022-07-27 21:54:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495784063700992[0;39m <==    Updates: 0
2022-07-27 21:54:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495784063700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:54:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495805077164032[0;39m 生成今日电子书快照开始
2022-07-27 21:54:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495805077164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495805077164032[0;39m ==> Parameters: 
2022-07-27 21:54:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495805077164032[0;39m <==    Updates: 0
2022-07-27 21:54:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495805077164032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:54:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495826019323904[0;39m 生成今日电子书快照开始
2022-07-27 21:54:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495826019323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495826019323904[0;39m ==> Parameters: 
2022-07-27 21:54:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495826019323904[0;39m <==    Updates: 0
2022-07-27 21:54:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495826019323904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:54:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495846978260992[0;39m 生成今日电子书快照开始
2022-07-27 21:54:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495846978260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495846978260992[0;39m ==> Parameters: 
2022-07-27 21:54:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495846978260992[0;39m <==    Updates: 0
2022-07-27 21:54:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495846978260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:54:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495867983335424[0;39m 生成今日电子书快照开始
2022-07-27 21:54:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495867983335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495867983335424[0;39m ==> Parameters: 
2022-07-27 21:54:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495867983335424[0;39m <==    Updates: 0
2022-07-27 21:54:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495867983335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:54:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495888933883904[0;39m 生成今日电子书快照开始
2022-07-27 21:54:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495888933883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495888933883904[0;39m ==> Parameters: 
2022-07-27 21:54:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495888933883904[0;39m <==    Updates: 0
2022-07-27 21:54:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495888933883904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:54:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207495888946466816[0;39m 更新电子书下的文档数据开始
2022-07-27 21:54:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495888946466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:54:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495888946466816[0;39m ==> Parameters: 
2022-07-27 21:54:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207495888946466816[0;39m <==    Updates: 7
2022-07-27 21:54:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207495888946466816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:54:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495909905403904[0;39m 生成今日电子书快照开始
2022-07-27 21:54:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495909905403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495909905403904[0;39m ==> Parameters: 
2022-07-27 21:54:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495909905403904[0;39m <==    Updates: 0
2022-07-27 21:54:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495909905403904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:54:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495930864340992[0;39m 生成今日电子书快照开始
2022-07-27 21:54:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495930864340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495930864340992[0;39m ==> Parameters: 
2022-07-27 21:54:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495930864340992[0;39m <==    Updates: 0
2022-07-27 21:54:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495930864340992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:54:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495951848443904[0;39m 生成今日电子书快照开始
2022-07-27 21:54:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495951848443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495951848443904[0;39m ==> Parameters: 
2022-07-27 21:54:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495951848443904[0;39m <==    Updates: 0
2022-07-27 21:54:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495951848443904[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 21:54:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495972857712640[0;39m 生成今日电子书快照开始
2022-07-27 21:54:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495972857712640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:54:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495972857712640[0;39m ==> Parameters: 
2022-07-27 21:54:55.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495972857712640[0;39m <==    Updates: 0
2022-07-27 21:54:55.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495972857712640[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:55:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207495993757929472[0;39m 生成今日电子书快照开始
2022-07-27 21:55:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495993757929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495993757929472[0;39m ==> Parameters: 
2022-07-27 21:55:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207495993757929472[0;39m <==    Updates: 0
2022-07-27 21:55:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207495993757929472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:55:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207496014767198208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:55:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496014767198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:55:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496014767198208[0;39m ==> Parameters: 
2022-07-27 21:55:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496014767198208[0;39m <==    Updates: 7
2022-07-27 21:55:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207496014767198208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:55:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496014771392512[0;39m 生成今日电子书快照开始
2022-07-27 21:55:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496014771392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496014771392512[0;39m ==> Parameters: 
2022-07-27 21:55:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496014771392512[0;39m <==    Updates: 0
2022-07-27 21:55:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496014771392512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:55:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496035709358080[0;39m 生成今日电子书快照开始
2022-07-27 21:55:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496035709358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496035709358080[0;39m ==> Parameters: 
2022-07-27 21:55:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496035709358080[0;39m <==    Updates: 0
2022-07-27 21:55:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496035709358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:55:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496056676683776[0;39m 生成今日电子书快照开始
2022-07-27 21:55:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496056676683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496056676683776[0;39m ==> Parameters: 
2022-07-27 21:55:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496056676683776[0;39m <==    Updates: 0
2022-07-27 21:55:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496056676683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:55:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496077698535424[0;39m 生成今日电子书快照开始
2022-07-27 21:55:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496077698535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496077698535424[0;39m ==> Parameters: 
2022-07-27 21:55:20.032 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496077698535424[0;39m <==    Updates: 0
2022-07-27 21:55:20.032 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496077698535424[0;39m 生成今日电子书快照结束，耗时：17 毫秒
2022-07-27 21:55:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496098628112384[0;39m 生成今日电子书快照开始
2022-07-27 21:55:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496098628112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496098628112384[0;39m ==> Parameters: 
2022-07-27 21:55:25.041 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496098628112384[0;39m <==    Updates: 0
2022-07-27 21:55:25.041 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496098628112384[0;39m 生成今日电子书快照结束，耗时：37 毫秒
2022-07-27 21:55:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496119637381120[0;39m 生成今日电子书快照开始
2022-07-27 21:55:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496119637381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496119637381120[0;39m ==> Parameters: 
2022-07-27 21:55:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496119637381120[0;39m <==    Updates: 0
2022-07-27 21:55:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496119637381120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:55:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496140621484032[0;39m 生成今日电子书快照开始
2022-07-27 21:55:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496140621484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496140621484032[0;39m ==> Parameters: 
2022-07-27 21:55:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496140621484032[0;39m <==    Updates: 0
2022-07-27 21:55:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496140621484032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:55:35.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207496140634066944[0;39m 更新电子书下的文档数据开始
2022-07-27 21:55:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496140634066944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:55:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496140634066944[0;39m ==> Parameters: 
2022-07-27 21:55:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496140634066944[0;39m <==    Updates: 7
2022-07-27 21:55:35.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207496140634066944[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:55:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496161593004032[0;39m 生成今日电子书快照开始
2022-07-27 21:55:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496161593004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496161593004032[0;39m ==> Parameters: 
2022-07-27 21:55:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496161593004032[0;39m <==    Updates: 0
2022-07-27 21:55:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496161593004032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:55:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496182518386688[0;39m 生成今日电子书快照开始
2022-07-27 21:55:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496182518386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496182518386688[0;39m ==> Parameters: 
2022-07-27 21:55:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496182518386688[0;39m <==    Updates: 0
2022-07-27 21:55:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496182518386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:55:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496203494100992[0;39m 生成今日电子书快照开始
2022-07-27 21:55:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496203494100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496203494100992[0;39m ==> Parameters: 
2022-07-27 21:55:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496203494100992[0;39m <==    Updates: 0
2022-07-27 21:55:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496203494100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:55:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496224465620992[0;39m 生成今日电子书快照开始
2022-07-27 21:55:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496224465620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:55:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496224465620992[0;39m ==> Parameters: 
2022-07-27 21:55:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496224465620992[0;39m <==    Updates: 0
2022-07-27 21:55:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496224465620992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:56:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496245470695424[0;39m 生成今日电子书快照开始
2022-07-27 21:56:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496245470695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496245470695424[0;39m ==> Parameters: 
2022-07-27 21:56:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496245470695424[0;39m <==    Updates: 0
2022-07-27 21:56:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496245470695424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:56:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207496266425438208[0;39m 更新电子书下的文档数据开始
2022-07-27 21:56:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496266425438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:56:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496266425438208[0;39m ==> Parameters: 
2022-07-27 21:56:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496266425438208[0;39m <==    Updates: 7
2022-07-27 21:56:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207496266425438208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:56:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496266433826816[0;39m 生成今日电子书快照开始
2022-07-27 21:56:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496266433826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496266433826816[0;39m ==> Parameters: 
2022-07-27 21:56:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496266433826816[0;39m <==    Updates: 0
2022-07-27 21:56:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496266433826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:56:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496287359209472[0;39m 生成今日电子书快照开始
2022-07-27 21:56:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496287359209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496287359209472[0;39m ==> Parameters: 
2022-07-27 21:56:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496287359209472[0;39m <==    Updates: 0
2022-07-27 21:56:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496287359209472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:56:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496308347506688[0;39m 生成今日电子书快照开始
2022-07-27 21:56:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496308347506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496308347506688[0;39m ==> Parameters: 
2022-07-27 21:56:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496308347506688[0;39m <==    Updates: 0
2022-07-27 21:56:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496308347506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:56:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496329344192512[0;39m 生成今日电子书快照开始
2022-07-27 21:56:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496329344192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496329344192512[0;39m ==> Parameters: 
2022-07-27 21:56:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496329344192512[0;39m <==    Updates: 0
2022-07-27 21:56:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496329344192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:56:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496350294740992[0;39m 生成今日电子书快照开始
2022-07-27 21:56:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496350294740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496350294740992[0;39m ==> Parameters: 
2022-07-27 21:56:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496350294740992[0;39m <==    Updates: 0
2022-07-27 21:56:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496350294740992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:56:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496371274649600[0;39m 生成今日电子书快照开始
2022-07-27 21:56:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496371274649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496371274649600[0;39m ==> Parameters: 
2022-07-27 21:56:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496371274649600[0;39m <==    Updates: 0
2022-07-27 21:56:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496371274649600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:56:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496392241975296[0;39m 生成今日电子书快照开始
2022-07-27 21:56:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496392241975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496392241975296[0;39m ==> Parameters: 
2022-07-27 21:56:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496392241975296[0;39m <==    Updates: 0
2022-07-27 21:56:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496392241975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:56:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207496392250363904[0;39m 更新电子书下的文档数据开始
2022-07-27 21:56:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496392250363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:56:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496392250363904[0;39m ==> Parameters: 
2022-07-27 21:56:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496392250363904[0;39m <==    Updates: 7
2022-07-27 21:56:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207496392250363904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:56:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496413230272512[0;39m 生成今日电子书快照开始
2022-07-27 21:56:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496413230272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496413230272512[0;39m ==> Parameters: 
2022-07-27 21:56:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496413230272512[0;39m <==    Updates: 0
2022-07-27 21:56:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496413230272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:56:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496434180820992[0;39m 生成今日电子书快照开始
2022-07-27 21:56:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496434180820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496434180820992[0;39m ==> Parameters: 
2022-07-27 21:56:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496434180820992[0;39m <==    Updates: 0
2022-07-27 21:56:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496434180820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:56:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496455131369472[0;39m 生成今日电子书快照开始
2022-07-27 21:56:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496455131369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496455131369472[0;39m ==> Parameters: 
2022-07-27 21:56:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496455131369472[0;39m <==    Updates: 0
2022-07-27 21:56:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496455131369472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:56:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496476157415424[0;39m 生成今日电子书快照开始
2022-07-27 21:56:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496476157415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:56:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496476157415424[0;39m ==> Parameters: 
2022-07-27 21:56:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496476157415424[0;39m <==    Updates: 0
2022-07-27 21:56:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496476157415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:57:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496497128935424[0;39m 生成今日电子书快照开始
2022-07-27 21:57:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496497128935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496497128935424[0;39m ==> Parameters: 
2022-07-27 21:57:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496497128935424[0;39m <==    Updates: 0
2022-07-27 21:57:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496497128935424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:57:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207496518050123776[0;39m 更新电子书下的文档数据开始
2022-07-27 21:57:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496518050123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:57:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496518050123776[0;39m ==> Parameters: 
2022-07-27 21:57:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496518050123776[0;39m <==    Updates: 7
2022-07-27 21:57:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207496518050123776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:57:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496518054318080[0;39m 生成今日电子书快照开始
2022-07-27 21:57:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496518054318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496518054318080[0;39m ==> Parameters: 
2022-07-27 21:57:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496518054318080[0;39m <==    Updates: 0
2022-07-27 21:57:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496518054318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:57:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496539063586816[0;39m 生成今日电子书快照开始
2022-07-27 21:57:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496539063586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496539063586816[0;39m ==> Parameters: 
2022-07-27 21:57:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496539063586816[0;39m <==    Updates: 0
2022-07-27 21:57:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496539063586816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:57:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496560043495424[0;39m 生成今日电子书快照开始
2022-07-27 21:57:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496560043495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496560043495424[0;39m ==> Parameters: 
2022-07-27 21:57:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496560043495424[0;39m <==    Updates: 0
2022-07-27 21:57:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496560043495424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:57:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496581002432512[0;39m 生成今日电子书快照开始
2022-07-27 21:57:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496581002432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496581002432512[0;39m ==> Parameters: 
2022-07-27 21:57:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496581002432512[0;39m <==    Updates: 0
2022-07-27 21:57:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496581002432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:57:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496601978146816[0;39m 生成今日电子书快照开始
2022-07-27 21:57:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496601978146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496601978146816[0;39m ==> Parameters: 
2022-07-27 21:57:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496601978146816[0;39m <==    Updates: 0
2022-07-27 21:57:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496601978146816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:57:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496622958055424[0;39m 生成今日电子书快照开始
2022-07-27 21:57:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496622958055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496622958055424[0;39m ==> Parameters: 
2022-07-27 21:57:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496622958055424[0;39m <==    Updates: 0
2022-07-27 21:57:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496622958055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:57:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496643891826688[0;39m 生成今日电子书快照开始
2022-07-27 21:57:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496643891826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496643891826688[0;39m ==> Parameters: 
2022-07-27 21:57:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496643891826688[0;39m <==    Updates: 0
2022-07-27 21:57:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496643891826688[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 21:57:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207496643925381120[0;39m 更新电子书下的文档数据开始
2022-07-27 21:57:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496643925381120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:57:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496643925381120[0;39m ==> Parameters: 
2022-07-27 21:57:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496643925381120[0;39m <==    Updates: 7
2022-07-27 21:57:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207496643925381120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:57:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496664863346688[0;39m 生成今日电子书快照开始
2022-07-27 21:57:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496664863346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496664863346688[0;39m ==> Parameters: 
2022-07-27 21:57:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496664863346688[0;39m <==    Updates: 0
2022-07-27 21:57:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496664863346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:57:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496685876809728[0;39m 生成今日电子书快照开始
2022-07-27 21:57:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496685876809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496685876809728[0;39m ==> Parameters: 
2022-07-27 21:57:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496685876809728[0;39m <==    Updates: 0
2022-07-27 21:57:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496685876809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:57:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496706848329728[0;39m 生成今日电子书快照开始
2022-07-27 21:57:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496706848329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496706848329728[0;39m ==> Parameters: 
2022-07-27 21:57:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496706848329728[0;39m <==    Updates: 0
2022-07-27 21:57:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496706848329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:57:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496727773712384[0;39m 生成今日电子书快照开始
2022-07-27 21:57:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496727773712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:57:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496727773712384[0;39m ==> Parameters: 
2022-07-27 21:57:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496727773712384[0;39m <==    Updates: 0
2022-07-27 21:57:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496727773712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:58:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496748736843776[0;39m 生成今日电子书快照开始
2022-07-27 21:58:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496748736843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496748736843776[0;39m ==> Parameters: 
2022-07-27 21:58:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496748736843776[0;39m <==    Updates: 0
2022-07-27 21:58:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496748736843776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:58:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207496769746112512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:58:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496769746112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:58:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496769746112512[0;39m ==> Parameters: 
2022-07-27 21:58:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496769746112512[0;39m <==    Updates: 7
2022-07-27 21:58:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207496769746112512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 21:58:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496769754501120[0;39m 生成今日电子书快照开始
2022-07-27 21:58:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496769754501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496769754501120[0;39m ==> Parameters: 
2022-07-27 21:58:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496769754501120[0;39m <==    Updates: 0
2022-07-27 21:58:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496769754501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:58:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496790688272384[0;39m 生成今日电子书快照开始
2022-07-27 21:58:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496790688272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496790688272384[0;39m ==> Parameters: 
2022-07-27 21:58:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496790688272384[0;39m <==    Updates: 0
2022-07-27 21:58:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496790688272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:58:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496811676569600[0;39m 生成今日电子书快照开始
2022-07-27 21:58:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496811676569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496811676569600[0;39m ==> Parameters: 
2022-07-27 21:58:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496811676569600[0;39m <==    Updates: 0
2022-07-27 21:58:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496811676569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:58:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496832669061120[0;39m 生成今日电子书快照开始
2022-07-27 21:58:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496832669061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496832669061120[0;39m ==> Parameters: 
2022-07-27 21:58:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496832669061120[0;39m <==    Updates: 0
2022-07-27 21:58:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496832669061120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:58:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496853636386816[0;39m 生成今日电子书快照开始
2022-07-27 21:58:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496853636386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496853636386816[0;39m ==> Parameters: 
2022-07-27 21:58:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496853636386816[0;39m <==    Updates: 0
2022-07-27 21:58:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496853636386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:58:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496874570158080[0;39m 生成今日电子书快照开始
2022-07-27 21:58:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496874570158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496874570158080[0;39m ==> Parameters: 
2022-07-27 21:58:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496874570158080[0;39m <==    Updates: 0
2022-07-27 21:58:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496874570158080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:58:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496895566843904[0;39m 生成今日电子书快照开始
2022-07-27 21:58:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496895566843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496895566843904[0;39m ==> Parameters: 
2022-07-27 21:58:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496895566843904[0;39m <==    Updates: 0
2022-07-27 21:58:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496895566843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:58:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207496895575232512[0;39m 更新电子书下的文档数据开始
2022-07-27 21:58:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496895575232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:58:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496895575232512[0;39m ==> Parameters: 
2022-07-27 21:58:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207496895575232512[0;39m <==    Updates: 7
2022-07-27 21:58:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207496895575232512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:58:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496916538363904[0;39m 生成今日电子书快照开始
2022-07-27 21:58:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496916538363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496916538363904[0;39m ==> Parameters: 
2022-07-27 21:58:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496916538363904[0;39m <==    Updates: 0
2022-07-27 21:58:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496916538363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:58:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496937535049728[0;39m 生成今日电子书快照开始
2022-07-27 21:58:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496937535049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496937535049728[0;39m ==> Parameters: 
2022-07-27 21:58:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496937535049728[0;39m <==    Updates: 0
2022-07-27 21:58:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496937535049728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:58:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496958506569728[0;39m 生成今日电子书快照开始
2022-07-27 21:58:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496958506569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496958506569728[0;39m ==> Parameters: 
2022-07-27 21:58:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496958506569728[0;39m <==    Updates: 0
2022-07-27 21:58:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496958506569728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:58:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207496979436146688[0;39m 生成今日电子书快照开始
2022-07-27 21:58:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496979436146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:58:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496979436146688[0;39m ==> Parameters: 
2022-07-27 21:58:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207496979436146688[0;39m <==    Updates: 0
2022-07-27 21:58:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207496979436146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:59:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497000390889472[0;39m 生成今日电子书快照开始
2022-07-27 21:59:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497000390889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497000390889472[0;39m ==> Parameters: 
2022-07-27 21:59:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497000390889472[0;39m <==    Updates: 0
2022-07-27 21:59:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497000390889472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 21:59:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207497021379186688[0;39m 更新电子书下的文档数据开始
2022-07-27 21:59:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497021379186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:59:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497021379186688[0;39m ==> Parameters: 
2022-07-27 21:59:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497021379186688[0;39m <==    Updates: 7
2022-07-27 21:59:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207497021379186688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:59:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497021387575296[0;39m 生成今日电子书快照开始
2022-07-27 21:59:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497021387575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497021387575296[0;39m ==> Parameters: 
2022-07-27 21:59:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497021387575296[0;39m <==    Updates: 0
2022-07-27 21:59:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497021387575296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:59:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497042363289600[0;39m 生成今日电子书快照开始
2022-07-27 21:59:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497042363289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497042363289600[0;39m ==> Parameters: 
2022-07-27 21:59:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497042363289600[0;39m <==    Updates: 0
2022-07-27 21:59:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497042363289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:59:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497063368364032[0;39m 生成今日电子书快照开始
2022-07-27 21:59:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497063368364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497063368364032[0;39m ==> Parameters: 
2022-07-27 21:59:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497063368364032[0;39m <==    Updates: 0
2022-07-27 21:59:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497063368364032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 21:59:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497084310523904[0;39m 生成今日电子书快照开始
2022-07-27 21:59:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497084310523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497084310523904[0;39m ==> Parameters: 
2022-07-27 21:59:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497084310523904[0;39m <==    Updates: 0
2022-07-27 21:59:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497084310523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:59:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497105261072384[0;39m 生成今日电子书快照开始
2022-07-27 21:59:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497105261072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497105261072384[0;39m ==> Parameters: 
2022-07-27 21:59:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497105261072384[0;39m <==    Updates: 0
2022-07-27 21:59:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497105261072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:59:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497126232592384[0;39m 生成今日电子书快照开始
2022-07-27 21:59:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497126232592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497126232592384[0;39m ==> Parameters: 
2022-07-27 21:59:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497126232592384[0;39m <==    Updates: 0
2022-07-27 21:59:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497126232592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:59:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497147237666816[0;39m 生成今日电子书快照开始
2022-07-27 21:59:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497147237666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497147237666816[0;39m ==> Parameters: 
2022-07-27 21:59:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497147237666816[0;39m <==    Updates: 0
2022-07-27 21:59:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497147237666816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:59:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207497147246055424[0;39m 更新电子书下的文档数据开始
2022-07-27 21:59:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497147246055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 21:59:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497147246055424[0;39m ==> Parameters: 
2022-07-27 21:59:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497147246055424[0;39m <==    Updates: 7
2022-07-27 21:59:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207497147246055424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 21:59:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497168209186816[0;39m 生成今日电子书快照开始
2022-07-27 21:59:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497168209186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497168209186816[0;39m ==> Parameters: 
2022-07-27 21:59:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497168209186816[0;39m <==    Updates: 0
2022-07-27 21:59:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497168209186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:59:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497189159735296[0;39m 生成今日电子书快照开始
2022-07-27 21:59:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497189159735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497189159735296[0;39m ==> Parameters: 
2022-07-27 21:59:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497189159735296[0;39m <==    Updates: 0
2022-07-27 21:59:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497189159735296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 21:59:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497210160615424[0;39m 生成今日电子书快照开始
2022-07-27 21:59:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497210160615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497210160615424[0;39m ==> Parameters: 
2022-07-27 21:59:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497210160615424[0;39m <==    Updates: 0
2022-07-27 21:59:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497210160615424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 21:59:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497231090192384[0;39m 生成今日电子书快照开始
2022-07-27 21:59:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497231090192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 21:59:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497231090192384[0;39m ==> Parameters: 
2022-07-27 21:59:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497231090192384[0;39m <==    Updates: 0
2022-07-27 21:59:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497231090192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:00:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497252061712384[0;39m 生成今日电子书快照开始
2022-07-27 22:00:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497252061712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497252061712384[0;39m ==> Parameters: 
2022-07-27 22:00:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497252061712384[0;39m <==    Updates: 0
2022-07-27 22:00:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497252061712384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:00:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497273079369728[0;39m 生成今日电子书快照开始
2022-07-27 22:00:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497273079369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497273079369728[0;39m ==> Parameters: 
2022-07-27 22:00:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497273079369728[0;39m <==    Updates: 0
2022-07-27 22:00:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497273079369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:00:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207497273087758336[0;39m 更新电子书下的文档数据开始
2022-07-27 22:00:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497273087758336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:00:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497273087758336[0;39m ==> Parameters: 
2022-07-27 22:00:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497273087758336[0;39m <==    Updates: 7
2022-07-27 22:00:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207497273087758336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:00:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497294021529600[0;39m 生成今日电子书快照开始
2022-07-27 22:00:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497294021529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497294021529600[0;39m ==> Parameters: 
2022-07-27 22:00:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497294021529600[0;39m <==    Updates: 0
2022-07-27 22:00:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497294021529600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:00:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497314997243904[0;39m 生成今日电子书快照开始
2022-07-27 22:00:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497314997243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497314997243904[0;39m ==> Parameters: 
2022-07-27 22:00:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497314997243904[0;39m <==    Updates: 0
2022-07-27 22:00:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497314997243904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:00:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497335935209472[0;39m 生成今日电子书快照开始
2022-07-27 22:00:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497335935209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497335935209472[0;39m ==> Parameters: 
2022-07-27 22:00:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497335935209472[0;39m <==    Updates: 0
2022-07-27 22:00:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497335935209472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:00:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497356952866816[0;39m 生成今日电子书快照开始
2022-07-27 22:00:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497356952866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497356952866816[0;39m ==> Parameters: 
2022-07-27 22:00:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497356952866816[0;39m <==    Updates: 0
2022-07-27 22:00:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497356952866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:00:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497377911803904[0;39m 生成今日电子书快照开始
2022-07-27 22:00:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497377911803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497377911803904[0;39m ==> Parameters: 
2022-07-27 22:00:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497377911803904[0;39m <==    Updates: 0
2022-07-27 22:00:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497377911803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:00:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207497398904295424[0;39m 更新电子书下的文档数据开始
2022-07-27 22:00:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497398904295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:00:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497398904295424[0;39m ==> Parameters: 
2022-07-27 22:00:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497398904295424[0;39m <==    Updates: 7
2022-07-27 22:00:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207497398904295424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:00:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497398912684032[0;39m 生成今日电子书快照开始
2022-07-27 22:00:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497398912684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497398912684032[0;39m ==> Parameters: 
2022-07-27 22:00:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497398912684032[0;39m <==    Updates: 0
2022-07-27 22:00:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497398912684032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:00:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497419850649600[0;39m 生成今日电子书快照开始
2022-07-27 22:00:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497419850649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497419850649600[0;39m ==> Parameters: 
2022-07-27 22:00:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497419850649600[0;39m <==    Updates: 0
2022-07-27 22:00:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497419850649600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:00:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497440834752512[0;39m 生成今日电子书快照开始
2022-07-27 22:00:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497440834752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497440834752512[0;39m ==> Parameters: 
2022-07-27 22:00:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497440834752512[0;39m <==    Updates: 0
2022-07-27 22:00:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497440834752512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:00:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497461776912384[0;39m 生成今日电子书快照开始
2022-07-27 22:00:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497461776912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497461776912384[0;39m ==> Parameters: 
2022-07-27 22:00:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497461776912384[0;39m <==    Updates: 0
2022-07-27 22:00:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497461776912384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:00:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497482769403904[0;39m 生成今日电子书快照开始
2022-07-27 22:00:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497482769403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:00:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497482769403904[0;39m ==> Parameters: 
2022-07-27 22:00:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497482769403904[0;39m <==    Updates: 0
2022-07-27 22:00:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497482769403904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:01:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497503728340992[0;39m 生成今日电子书快照开始
2022-07-27 22:01:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497503728340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497503728340992[0;39m ==> Parameters: 
2022-07-27 22:01:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497503728340992[0;39m <==    Updates: 0
2022-07-27 22:01:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497503728340992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:01:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497524687278080[0;39m 生成今日电子书快照开始
2022-07-27 22:01:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497524687278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497524687278080[0;39m ==> Parameters: 
2022-07-27 22:01:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497524687278080[0;39m <==    Updates: 0
2022-07-27 22:01:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497524687278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:01:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207497524695666688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:01:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497524695666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:01:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497524695666688[0;39m ==> Parameters: 
2022-07-27 22:01:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497524695666688[0;39m <==    Updates: 7
2022-07-27 22:01:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207497524695666688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:01:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497545667186688[0;39m 生成今日电子书快照开始
2022-07-27 22:01:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497545667186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497545667186688[0;39m ==> Parameters: 
2022-07-27 22:01:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497545667186688[0;39m <==    Updates: 0
2022-07-27 22:01:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497545667186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:01:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497566626123776[0;39m 生成今日电子书快照开始
2022-07-27 22:01:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497566626123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497566626123776[0;39m ==> Parameters: 
2022-07-27 22:01:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497566626123776[0;39m <==    Updates: 0
2022-07-27 22:01:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497566626123776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:01:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497587606032384[0;39m 生成今日电子书快照开始
2022-07-27 22:01:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497587606032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497587606032384[0;39m ==> Parameters: 
2022-07-27 22:01:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497587606032384[0;39m <==    Updates: 0
2022-07-27 22:01:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497587606032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:01:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497608581746688[0;39m 生成今日电子书快照开始
2022-07-27 22:01:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497608581746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497608581746688[0;39m ==> Parameters: 
2022-07-27 22:01:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497608581746688[0;39m <==    Updates: 0
2022-07-27 22:01:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497608581746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:01:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497629557460992[0;39m 生成今日电子书快照开始
2022-07-27 22:01:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497629557460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497629557460992[0;39m ==> Parameters: 
2022-07-27 22:01:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497629557460992[0;39m <==    Updates: 0
2022-07-27 22:01:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497629557460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:01:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497650528980992[0;39m 生成今日电子书快照开始
2022-07-27 22:01:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497650528980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497650528980992[0;39m ==> Parameters: 
2022-07-27 22:01:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497650528980992[0;39m <==    Updates: 0
2022-07-27 22:01:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497650528980992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:01:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207497650541563904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:01:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497650541563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:01:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497650541563904[0;39m ==> Parameters: 
2022-07-27 22:01:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497650541563904[0;39m <==    Updates: 7
2022-07-27 22:01:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207497650541563904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:01:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497671525666816[0;39m 生成今日电子书快照开始
2022-07-27 22:01:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497671525666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497671525666816[0;39m ==> Parameters: 
2022-07-27 22:01:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497671525666816[0;39m <==    Updates: 0
2022-07-27 22:01:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497671525666816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:01:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497692484603904[0;39m 生成今日电子书快照开始
2022-07-27 22:01:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497692484603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497692484603904[0;39m ==> Parameters: 
2022-07-27 22:01:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497692484603904[0;39m <==    Updates: 0
2022-07-27 22:01:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497692484603904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:01:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497713468706816[0;39m 生成今日电子书快照开始
2022-07-27 22:01:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497713468706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497713468706816[0;39m ==> Parameters: 
2022-07-27 22:01:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497713468706816[0;39m <==    Updates: 0
2022-07-27 22:01:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497713468706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:01:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497734444421120[0;39m 生成今日电子书快照开始
2022-07-27 22:01:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497734444421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:01:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497734444421120[0;39m ==> Parameters: 
2022-07-27 22:01:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497734444421120[0;39m <==    Updates: 0
2022-07-27 22:01:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497734444421120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:02:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497755390775296[0;39m 生成今日电子书快照开始
2022-07-27 22:02:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497755390775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497755390775296[0;39m ==> Parameters: 
2022-07-27 22:02:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497755390775296[0;39m <==    Updates: 0
2022-07-27 22:02:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497755390775296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:02:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497776370683904[0;39m 生成今日电子书快照开始
2022-07-27 22:02:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497776370683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497776370683904[0;39m ==> Parameters: 
2022-07-27 22:02:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497776370683904[0;39m <==    Updates: 0
2022-07-27 22:02:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497776370683904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:02:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207497776383266816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:02:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497776383266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:02:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497776383266816[0;39m ==> Parameters: 
2022-07-27 22:02:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497776383266816[0;39m <==    Updates: 7
2022-07-27 22:02:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207497776383266816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:02:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497797333815296[0;39m 生成今日电子书快照开始
2022-07-27 22:02:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497797333815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497797333815296[0;39m ==> Parameters: 
2022-07-27 22:02:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497797333815296[0;39m <==    Updates: 0
2022-07-27 22:02:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497797333815296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:02:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497818309529600[0;39m 生成今日电子书快照开始
2022-07-27 22:02:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497818309529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497818309529600[0;39m ==> Parameters: 
2022-07-27 22:02:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497818309529600[0;39m <==    Updates: 0
2022-07-27 22:02:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497818309529600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:02:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497839268466688[0;39m 生成今日电子书快照开始
2022-07-27 22:02:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497839268466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497839268466688[0;39m ==> Parameters: 
2022-07-27 22:02:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497839268466688[0;39m <==    Updates: 0
2022-07-27 22:02:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497839268466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:02:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497860235792384[0;39m 生成今日电子书快照开始
2022-07-27 22:02:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497860235792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497860235792384[0;39m ==> Parameters: 
2022-07-27 22:02:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497860235792384[0;39m <==    Updates: 0
2022-07-27 22:02:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497860235792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:02:30.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497881190535168[0;39m 生成今日电子书快照开始
2022-07-27 22:02:30.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497881190535168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497881190535168[0;39m ==> Parameters: 
2022-07-27 22:02:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497881190535168[0;39m <==    Updates: 0
2022-07-27 22:02:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497881190535168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:02:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207497902187220992[0;39m 更新电子书下的文档数据开始
2022-07-27 22:02:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497902187220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:02:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497902187220992[0;39m ==> Parameters: 
2022-07-27 22:02:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207497902187220992[0;39m <==    Updates: 7
2022-07-27 22:02:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207497902187220992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:02:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497902191415296[0;39m 生成今日电子书快照开始
2022-07-27 22:02:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497902191415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497902191415296[0;39m ==> Parameters: 
2022-07-27 22:02:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497902191415296[0;39m <==    Updates: 0
2022-07-27 22:02:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497902191415296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:02:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497923162935296[0;39m 生成今日电子书快照开始
2022-07-27 22:02:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497923162935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497923162935296[0;39m ==> Parameters: 
2022-07-27 22:02:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497923162935296[0;39m <==    Updates: 0
2022-07-27 22:02:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497923162935296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:02:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497944151232512[0;39m 生成今日电子书快照开始
2022-07-27 22:02:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497944151232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497944151232512[0;39m ==> Parameters: 
2022-07-27 22:02:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497944151232512[0;39m <==    Updates: 0
2022-07-27 22:02:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497944151232512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:02:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497965089198080[0;39m 生成今日电子书快照开始
2022-07-27 22:02:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497965089198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497965089198080[0;39m ==> Parameters: 
2022-07-27 22:02:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497965089198080[0;39m <==    Updates: 0
2022-07-27 22:02:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497965089198080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:02:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207497986060718080[0;39m 生成今日电子书快照开始
2022-07-27 22:02:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497986060718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:02:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497986060718080[0;39m ==> Parameters: 
2022-07-27 22:02:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207497986060718080[0;39m <==    Updates: 0
2022-07-27 22:02:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207497986060718080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:03:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498007049015296[0;39m 生成今日电子书快照开始
2022-07-27 22:03:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498007049015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498007049015296[0;39m ==> Parameters: 
2022-07-27 22:03:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498007049015296[0;39m <==    Updates: 0
2022-07-27 22:03:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498007049015296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:03:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498028012146688[0;39m 生成今日电子书快照开始
2022-07-27 22:03:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498028012146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498028012146688[0;39m ==> Parameters: 
2022-07-27 22:03:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498028012146688[0;39m <==    Updates: 0
2022-07-27 22:03:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498028012146688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:03:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207498028028923904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:03:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498028028923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:03:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498028028923904[0;39m ==> Parameters: 
2022-07-27 22:03:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498028028923904[0;39m <==    Updates: 7
2022-07-27 22:03:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207498028028923904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:03:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498048987860992[0;39m 生成今日电子书快照开始
2022-07-27 22:03:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498048987860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498048987860992[0;39m ==> Parameters: 
2022-07-27 22:03:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498048987860992[0;39m <==    Updates: 0
2022-07-27 22:03:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498048987860992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:03:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498069950992384[0;39m 生成今日电子书快照开始
2022-07-27 22:03:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498069950992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498069950992384[0;39m ==> Parameters: 
2022-07-27 22:03:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498069950992384[0;39m <==    Updates: 0
2022-07-27 22:03:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498069950992384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:03:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498090930900992[0;39m 生成今日电子书快照开始
2022-07-27 22:03:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498090930900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498090930900992[0;39m ==> Parameters: 
2022-07-27 22:03:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498090930900992[0;39m <==    Updates: 0
2022-07-27 22:03:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498090930900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:03:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498111902420992[0;39m 生成今日电子书快照开始
2022-07-27 22:03:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498111902420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498111902420992[0;39m ==> Parameters: 
2022-07-27 22:03:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498111902420992[0;39m <==    Updates: 0
2022-07-27 22:03:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498111902420992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:03:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498132869746688[0;39m 生成今日电子书快照开始
2022-07-27 22:03:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498132869746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498132869746688[0;39m ==> Parameters: 
2022-07-27 22:03:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498132869746688[0;39m <==    Updates: 0
2022-07-27 22:03:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498132869746688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:03:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207498153837072384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:03:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498153837072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:03:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498153837072384[0;39m ==> Parameters: 
2022-07-27 22:03:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498153837072384[0;39m <==    Updates: 7
2022-07-27 22:03:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207498153837072384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:03:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498153841266688[0;39m 生成今日电子书快照开始
2022-07-27 22:03:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498153841266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498153841266688[0;39m ==> Parameters: 
2022-07-27 22:03:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498153841266688[0;39m <==    Updates: 0
2022-07-27 22:03:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498153841266688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:03:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498174837952512[0;39m 生成今日电子书快照开始
2022-07-27 22:03:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498174837952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498174837952512[0;39m ==> Parameters: 
2022-07-27 22:03:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498174837952512[0;39m <==    Updates: 0
2022-07-27 22:03:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498174837952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:03:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498195788500992[0;39m 生成今日电子书快照开始
2022-07-27 22:03:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498195788500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498195788500992[0;39m ==> Parameters: 
2022-07-27 22:03:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498195788500992[0;39m <==    Updates: 0
2022-07-27 22:03:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498195788500992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:03:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498216789381120[0;39m 生成今日电子书快照开始
2022-07-27 22:03:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498216789381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498216789381120[0;39m ==> Parameters: 
2022-07-27 22:03:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498216789381120[0;39m <==    Updates: 0
2022-07-27 22:03:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498216789381120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:03:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498237723152384[0;39m 生成今日电子书快照开始
2022-07-27 22:03:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498237723152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:03:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498237723152384[0;39m ==> Parameters: 
2022-07-27 22:03:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498237723152384[0;39m <==    Updates: 0
2022-07-27 22:03:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498237723152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:04:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498258732421120[0;39m 生成今日电子书快照开始
2022-07-27 22:04:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498258732421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498258732421120[0;39m ==> Parameters: 
2022-07-27 22:04:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498258732421120[0;39m <==    Updates: 0
2022-07-27 22:04:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498258732421120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:04:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498279670386688[0;39m 生成今日电子书快照开始
2022-07-27 22:04:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498279670386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498279670386688[0;39m ==> Parameters: 
2022-07-27 22:04:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498279670386688[0;39m <==    Updates: 0
2022-07-27 22:04:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498279670386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:04:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207498279678775296[0;39m 更新电子书下的文档数据开始
2022-07-27 22:04:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498279678775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:04:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498279678775296[0;39m ==> Parameters: 
2022-07-27 22:04:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498279678775296[0;39m <==    Updates: 7
2022-07-27 22:04:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207498279678775296[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2022-07-27 22:04:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498300629323776[0;39m 生成今日电子书快照开始
2022-07-27 22:04:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498300629323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498300629323776[0;39m ==> Parameters: 
2022-07-27 22:04:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498300629323776[0;39m <==    Updates: 0
2022-07-27 22:04:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498300629323776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:04:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498321613426688[0;39m 生成今日电子书快照开始
2022-07-27 22:04:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498321613426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498321613426688[0;39m ==> Parameters: 
2022-07-27 22:04:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498321613426688[0;39m <==    Updates: 0
2022-07-27 22:04:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498321613426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:04:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498342568169472[0;39m 生成今日电子书快照开始
2022-07-27 22:04:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498342568169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498342568169472[0;39m ==> Parameters: 
2022-07-27 22:04:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498342568169472[0;39m <==    Updates: 0
2022-07-27 22:04:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498342568169472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:04:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498363548078080[0;39m 生成今日电子书快照开始
2022-07-27 22:04:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498363548078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498363548078080[0;39m ==> Parameters: 
2022-07-27 22:04:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498363548078080[0;39m <==    Updates: 0
2022-07-27 22:04:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498363548078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:04:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498384527986688[0;39m 生成今日电子书快照开始
2022-07-27 22:04:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498384527986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498384527986688[0;39m ==> Parameters: 
2022-07-27 22:04:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498384527986688[0;39m <==    Updates: 0
2022-07-27 22:04:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498384527986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:04:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498405516283904[0;39m 生成今日电子书快照开始
2022-07-27 22:04:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498405516283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498405516283904[0;39m ==> Parameters: 
2022-07-27 22:04:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498405516283904[0;39m <==    Updates: 0
2022-07-27 22:04:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498405516283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:04:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207498405528866816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:04:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498405528866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:04:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498405528866816[0;39m ==> Parameters: 
2022-07-27 22:04:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498405528866816[0;39m <==    Updates: 7
2022-07-27 22:04:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207498405528866816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:04:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498426471026688[0;39m 生成今日电子书快照开始
2022-07-27 22:04:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498426471026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498426471026688[0;39m ==> Parameters: 
2022-07-27 22:04:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498426471026688[0;39m <==    Updates: 0
2022-07-27 22:04:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498426471026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:04:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498447434158080[0;39m 生成今日电子书快照开始
2022-07-27 22:04:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498447434158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498447434158080[0;39m ==> Parameters: 
2022-07-27 22:04:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498447434158080[0;39m <==    Updates: 0
2022-07-27 22:04:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498447434158080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:04:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498468409872384[0;39m 生成今日电子书快照开始
2022-07-27 22:04:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498468409872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498468409872384[0;39m ==> Parameters: 
2022-07-27 22:04:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498468409872384[0;39m <==    Updates: 0
2022-07-27 22:04:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498468409872384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:04:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498489385586688[0;39m 生成今日电子书快照开始
2022-07-27 22:04:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498489385586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:04:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498489385586688[0;39m ==> Parameters: 
2022-07-27 22:04:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498489385586688[0;39m <==    Updates: 0
2022-07-27 22:04:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498489385586688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:05:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498510369689600[0;39m 生成今日电子书快照开始
2022-07-27 22:05:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498510369689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498510369689600[0;39m ==> Parameters: 
2022-07-27 22:05:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498510369689600[0;39m <==    Updates: 0
2022-07-27 22:05:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498510369689600[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:05:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207498531328626688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:05:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498531328626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:05:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498531328626688[0;39m ==> Parameters: 
2022-07-27 22:05:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498531328626688[0;39m <==    Updates: 7
2022-07-27 22:05:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207498531328626688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:05:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498531337015296[0;39m 生成今日电子书快照开始
2022-07-27 22:05:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498531337015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498531337015296[0;39m ==> Parameters: 
2022-07-27 22:05:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498531337015296[0;39m <==    Updates: 0
2022-07-27 22:05:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498531337015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:05:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498552295952384[0;39m 生成今日电子书快照开始
2022-07-27 22:05:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498552295952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498552295952384[0;39m ==> Parameters: 
2022-07-27 22:05:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498552295952384[0;39m <==    Updates: 0
2022-07-27 22:05:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498552295952384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:05:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498573280055296[0;39m 生成今日电子书快照开始
2022-07-27 22:05:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498573280055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498573280055296[0;39m ==> Parameters: 
2022-07-27 22:05:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498573280055296[0;39m <==    Updates: 0
2022-07-27 22:05:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498573280055296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:05:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498594259963904[0;39m 生成今日电子书快照开始
2022-07-27 22:05:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498594259963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498594259963904[0;39m ==> Parameters: 
2022-07-27 22:05:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498594259963904[0;39m <==    Updates: 0
2022-07-27 22:05:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498594259963904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:05:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498615197929472[0;39m 生成今日电子书快照开始
2022-07-27 22:05:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498615197929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498615197929472[0;39m ==> Parameters: 
2022-07-27 22:05:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498615197929472[0;39m <==    Updates: 0
2022-07-27 22:05:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498615197929472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:05:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498636198809600[0;39m 生成今日电子书快照开始
2022-07-27 22:05:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498636198809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498636198809600[0;39m ==> Parameters: 
2022-07-27 22:05:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498636198809600[0;39m <==    Updates: 0
2022-07-27 22:05:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498636198809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:05:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207498657149358080[0;39m 更新电子书下的文档数据开始
2022-07-27 22:05:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498657149358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:05:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498657149358080[0;39m ==> Parameters: 
2022-07-27 22:05:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498657149358080[0;39m <==    Updates: 7
2022-07-27 22:05:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207498657149358080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:05:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498657157746688[0;39m 生成今日电子书快照开始
2022-07-27 22:05:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498657157746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498657157746688[0;39m ==> Parameters: 
2022-07-27 22:05:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498657157746688[0;39m <==    Updates: 0
2022-07-27 22:05:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498657157746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:05:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498678141849600[0;39m 生成今日电子书快照开始
2022-07-27 22:05:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498678141849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498678141849600[0;39m ==> Parameters: 
2022-07-27 22:05:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498678141849600[0;39m <==    Updates: 0
2022-07-27 22:05:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498678141849600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:05:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498699104980992[0;39m 生成今日电子书快照开始
2022-07-27 22:05:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498699104980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498699104980992[0;39m ==> Parameters: 
2022-07-27 22:05:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498699104980992[0;39m <==    Updates: 0
2022-07-27 22:05:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498699104980992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:05:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498720072306688[0;39m 生成今日电子书快照开始
2022-07-27 22:05:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498720072306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498720072306688[0;39m ==> Parameters: 
2022-07-27 22:05:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498720072306688[0;39m <==    Updates: 0
2022-07-27 22:05:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498720072306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:05:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498741085769728[0;39m 生成今日电子书快照开始
2022-07-27 22:05:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498741085769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:05:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498741085769728[0;39m ==> Parameters: 
2022-07-27 22:05:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498741085769728[0;39m <==    Updates: 0
2022-07-27 22:05:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498741085769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498762023735296[0;39m 生成今日电子书快照开始
2022-07-27 22:06:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498762023735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498762023735296[0;39m ==> Parameters: 
2022-07-27 22:06:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498762023735296[0;39m <==    Updates: 0
2022-07-27 22:06:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498762023735296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:06:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207498782991060992[0;39m 更新电子书下的文档数据开始
2022-07-27 22:06:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498782991060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:06:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498782991060992[0;39m ==> Parameters: 
2022-07-27 22:06:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498782991060992[0;39m <==    Updates: 7
2022-07-27 22:06:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207498782991060992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:06:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498782999449600[0;39m 生成今日电子书快照开始
2022-07-27 22:06:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498782999449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498782999449600[0;39m ==> Parameters: 
2022-07-27 22:06:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498782999449600[0;39m <==    Updates: 0
2022-07-27 22:06:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498782999449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498803970969600[0;39m 生成今日电子书快照开始
2022-07-27 22:06:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498803970969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498803970969600[0;39m ==> Parameters: 
2022-07-27 22:06:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498803970969600[0;39m <==    Updates: 0
2022-07-27 22:06:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498803970969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498824967655424[0;39m 生成今日电子书快照开始
2022-07-27 22:06:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498824967655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498824967655424[0;39m ==> Parameters: 
2022-07-27 22:06:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498824967655424[0;39m <==    Updates: 0
2022-07-27 22:06:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498824967655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498845888843776[0;39m 生成今日电子书快照开始
2022-07-27 22:06:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498845888843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498845888843776[0;39m ==> Parameters: 
2022-07-27 22:06:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498845888843776[0;39m <==    Updates: 0
2022-07-27 22:06:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498845888843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498866877140992[0;39m 生成今日电子书快照开始
2022-07-27 22:06:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498866877140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498866877140992[0;39m ==> Parameters: 
2022-07-27 22:06:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498866877140992[0;39m <==    Updates: 0
2022-07-27 22:06:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498866877140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498887836078080[0;39m 生成今日电子书快照开始
2022-07-27 22:06:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498887836078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498887836078080[0;39m ==> Parameters: 
2022-07-27 22:06:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498887836078080[0;39m <==    Updates: 0
2022-07-27 22:06:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498887836078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207498908815986688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:06:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498908815986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:06:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498908815986688[0;39m ==> Parameters: 
2022-07-27 22:06:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207498908815986688[0;39m <==    Updates: 7
2022-07-27 22:06:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207498908815986688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:06:35.095 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498909193474048[0;39m 生成今日电子书快照开始
2022-07-27 22:06:35.095 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498909193474048[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:35.095 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498909193474048[0;39m ==> Parameters: 
2022-07-27 22:06:35.097 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498909193474048[0;39m <==    Updates: 0
2022-07-27 22:06:35.097 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498909193474048[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498929787506688[0;39m 生成今日电子书快照开始
2022-07-27 22:06:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498929787506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498929787506688[0;39m ==> Parameters: 
2022-07-27 22:06:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498929787506688[0;39m <==    Updates: 0
2022-07-27 22:06:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498929787506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498950754832384[0;39m 生成今日电子书快照开始
2022-07-27 22:06:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498950754832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498950754832384[0;39m ==> Parameters: 
2022-07-27 22:06:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498950754832384[0;39m <==    Updates: 0
2022-07-27 22:06:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498950754832384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:06:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498971755712512[0;39m 生成今日电子书快照开始
2022-07-27 22:06:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498971755712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498971755712512[0;39m ==> Parameters: 
2022-07-27 22:06:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498971755712512[0;39m <==    Updates: 0
2022-07-27 22:06:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498971755712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:06:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207498992748204032[0;39m 生成今日电子书快照开始
2022-07-27 22:06:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498992748204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:06:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498992748204032[0;39m ==> Parameters: 
2022-07-27 22:06:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207498992748204032[0;39m <==    Updates: 0
2022-07-27 22:06:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207498992748204032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:07:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499013673586688[0;39m 生成今日电子书快照开始
2022-07-27 22:07:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499013673586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499013673586688[0;39m ==> Parameters: 
2022-07-27 22:07:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499013673586688[0;39m <==    Updates: 0
2022-07-27 22:07:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499013673586688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:07:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207499034640912384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:07:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499034640912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:07:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499034640912384[0;39m ==> Parameters: 
2022-07-27 22:07:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499034640912384[0;39m <==    Updates: 7
2022-07-27 22:07:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207499034640912384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:07:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499034645106688[0;39m 生成今日电子书快照开始
2022-07-27 22:07:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499034645106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499034645106688[0;39m ==> Parameters: 
2022-07-27 22:07:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499034645106688[0;39m <==    Updates: 0
2022-07-27 22:07:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499034645106688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:07:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499055616626688[0;39m 生成今日电子书快照开始
2022-07-27 22:07:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499055616626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499055616626688[0;39m ==> Parameters: 
2022-07-27 22:07:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499055616626688[0;39m <==    Updates: 0
2022-07-27 22:07:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499055616626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:07:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499076596535296[0;39m 生成今日电子书快照开始
2022-07-27 22:07:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499076596535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499076596535296[0;39m ==> Parameters: 
2022-07-27 22:07:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499076596535296[0;39m <==    Updates: 0
2022-07-27 22:07:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499076596535296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:07:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499097551278080[0;39m 生成今日电子书快照开始
2022-07-27 22:07:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499097551278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499097551278080[0;39m ==> Parameters: 
2022-07-27 22:07:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499097551278080[0;39m <==    Updates: 0
2022-07-27 22:07:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499097551278080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:07:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499118547963904[0;39m 生成今日电子书快照开始
2022-07-27 22:07:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499118547963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499118547963904[0;39m ==> Parameters: 
2022-07-27 22:07:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499118547963904[0;39m <==    Updates: 0
2022-07-27 22:07:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499118547963904[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:07:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499139540455424[0;39m 生成今日电子书快照开始
2022-07-27 22:07:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499139540455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499139540455424[0;39m ==> Parameters: 
2022-07-27 22:07:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499139540455424[0;39m <==    Updates: 0
2022-07-27 22:07:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499139540455424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:07:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499160507781120[0;39m 生成今日电子书快照开始
2022-07-27 22:07:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499160507781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499160507781120[0;39m ==> Parameters: 
2022-07-27 22:07:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499160507781120[0;39m <==    Updates: 0
2022-07-27 22:07:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499160507781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:07:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207499160520364032[0;39m 更新电子书下的文档数据开始
2022-07-27 22:07:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499160520364032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:07:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499160520364032[0;39m ==> Parameters: 
2022-07-27 22:07:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499160520364032[0;39m <==    Updates: 7
2022-07-27 22:07:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207499160520364032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:07:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499181445746688[0;39m 生成今日电子书快照开始
2022-07-27 22:07:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499181445746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499181445746688[0;39m ==> Parameters: 
2022-07-27 22:07:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499181445746688[0;39m <==    Updates: 0
2022-07-27 22:07:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499181445746688[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 22:07:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499202455015424[0;39m 生成今日电子书快照开始
2022-07-27 22:07:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499202455015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499202455015424[0;39m ==> Parameters: 
2022-07-27 22:07:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499202455015424[0;39m <==    Updates: 0
2022-07-27 22:07:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499202455015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:07:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499223384592384[0;39m 生成今日电子书快照开始
2022-07-27 22:07:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499223384592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499223384592384[0;39m ==> Parameters: 
2022-07-27 22:07:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499223384592384[0;39m <==    Updates: 0
2022-07-27 22:07:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499223384592384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:07:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499244398055424[0;39m 生成今日电子书快照开始
2022-07-27 22:07:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499244398055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:07:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499244398055424[0;39m ==> Parameters: 
2022-07-27 22:07:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499244398055424[0;39m <==    Updates: 0
2022-07-27 22:07:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499244398055424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:08:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499265331826688[0;39m 生成今日电子书快照开始
2022-07-27 22:08:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499265331826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499265331826688[0;39m ==> Parameters: 
2022-07-27 22:08:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499265331826688[0;39m <==    Updates: 0
2022-07-27 22:08:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499265331826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:08:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207499286311735296[0;39m 更新电子书下的文档数据开始
2022-07-27 22:08:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499286311735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:08:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499286311735296[0;39m ==> Parameters: 
2022-07-27 22:08:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499286311735296[0;39m <==    Updates: 7
2022-07-27 22:08:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207499286311735296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:08:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499286315929600[0;39m 生成今日电子书快照开始
2022-07-27 22:08:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499286315929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499286315929600[0;39m ==> Parameters: 
2022-07-27 22:08:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499286315929600[0;39m <==    Updates: 0
2022-07-27 22:08:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499286315929600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:08:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499307283255296[0;39m 生成今日电子书快照开始
2022-07-27 22:08:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499307283255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499307283255296[0;39m ==> Parameters: 
2022-07-27 22:08:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499307283255296[0;39m <==    Updates: 0
2022-07-27 22:08:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499307283255296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:08:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499328229609472[0;39m 生成今日电子书快照开始
2022-07-27 22:08:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499328229609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499328229609472[0;39m ==> Parameters: 
2022-07-27 22:08:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499328229609472[0;39m <==    Updates: 0
2022-07-27 22:08:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499328229609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:08:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499349230489600[0;39m 生成今日电子书快照开始
2022-07-27 22:08:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499349230489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499349230489600[0;39m ==> Parameters: 
2022-07-27 22:08:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499349230489600[0;39m <==    Updates: 0
2022-07-27 22:08:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499349230489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:08:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499370181038080[0;39m 生成今日电子书快照开始
2022-07-27 22:08:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499370181038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499370181038080[0;39m ==> Parameters: 
2022-07-27 22:08:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499370181038080[0;39m <==    Updates: 0
2022-07-27 22:08:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499370181038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:08:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499391173529600[0;39m 生成今日电子书快照开始
2022-07-27 22:08:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499391173529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499391173529600[0;39m ==> Parameters: 
2022-07-27 22:08:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499391173529600[0;39m <==    Updates: 0
2022-07-27 22:08:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499391173529600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:08:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499412145049600[0;39m 生成今日电子书快照开始
2022-07-27 22:08:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499412145049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499412145049600[0;39m ==> Parameters: 
2022-07-27 22:08:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499412145049600[0;39m <==    Updates: 0
2022-07-27 22:08:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499412145049600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:08:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207499412153438208[0;39m 更新电子书下的文档数据开始
2022-07-27 22:08:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499412153438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:08:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499412153438208[0;39m ==> Parameters: 
2022-07-27 22:08:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499412153438208[0;39m <==    Updates: 7
2022-07-27 22:08:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207499412153438208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:08:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499433099792384[0;39m 生成今日电子书快照开始
2022-07-27 22:08:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499433099792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499433099792384[0;39m ==> Parameters: 
2022-07-27 22:08:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499433099792384[0;39m <==    Updates: 0
2022-07-27 22:08:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499433099792384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:08:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499454067118080[0;39m 生成今日电子书快照开始
2022-07-27 22:08:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499454067118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499454067118080[0;39m ==> Parameters: 
2022-07-27 22:08:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499454067118080[0;39m <==    Updates: 0
2022-07-27 22:08:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499454067118080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:08:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499475047026688[0;39m 生成今日电子书快照开始
2022-07-27 22:08:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499475047026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499475047026688[0;39m ==> Parameters: 
2022-07-27 22:08:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499475047026688[0;39m <==    Updates: 0
2022-07-27 22:08:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499475047026688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:08:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499496052101120[0;39m 生成今日电子书快照开始
2022-07-27 22:08:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499496052101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:08:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499496052101120[0;39m ==> Parameters: 
2022-07-27 22:08:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499496052101120[0;39m <==    Updates: 0
2022-07-27 22:08:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499496052101120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:09:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499516994260992[0;39m 生成今日电子书快照开始
2022-07-27 22:09:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499516994260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499516994260992[0;39m ==> Parameters: 
2022-07-27 22:09:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499516994260992[0;39m <==    Updates: 0
2022-07-27 22:09:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499516994260992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:09:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207499537974169600[0;39m 更新电子书下的文档数据开始
2022-07-27 22:09:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499537974169600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:09:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499537974169600[0;39m ==> Parameters: 
2022-07-27 22:09:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499537974169600[0;39m <==    Updates: 7
2022-07-27 22:09:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207499537974169600[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-27 22:09:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499537986752512[0;39m 生成今日电子书快照开始
2022-07-27 22:09:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499537986752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499537986752512[0;39m ==> Parameters: 
2022-07-27 22:09:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499537986752512[0;39m <==    Updates: 0
2022-07-27 22:09:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499537986752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:09:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499558954078208[0;39m 生成今日电子书快照开始
2022-07-27 22:09:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499558954078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499558954078208[0;39m ==> Parameters: 
2022-07-27 22:09:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499558954078208[0;39m <==    Updates: 0
2022-07-27 22:09:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499558954078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:09:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499579904626688[0;39m 生成今日电子书快照开始
2022-07-27 22:09:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499579904626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499579904626688[0;39m ==> Parameters: 
2022-07-27 22:09:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499579904626688[0;39m <==    Updates: 0
2022-07-27 22:09:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499579904626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:09:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499600909701120[0;39m 生成今日电子书快照开始
2022-07-27 22:09:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499600909701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499600909701120[0;39m ==> Parameters: 
2022-07-27 22:09:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499600909701120[0;39m <==    Updates: 0
2022-07-27 22:09:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499600909701120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:09:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499621856055296[0;39m 生成今日电子书快照开始
2022-07-27 22:09:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499621856055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499621856055296[0;39m ==> Parameters: 
2022-07-27 22:09:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499621856055296[0;39m <==    Updates: 0
2022-07-27 22:09:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499621856055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:09:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499642831769600[0;39m 生成今日电子书快照开始
2022-07-27 22:09:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499642831769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499642831769600[0;39m ==> Parameters: 
2022-07-27 22:09:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499642831769600[0;39m <==    Updates: 0
2022-07-27 22:09:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499642831769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:09:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207499663786512384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:09:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499663786512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:09:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499663786512384[0;39m ==> Parameters: 
2022-07-27 22:09:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499663786512384[0;39m <==    Updates: 7
2022-07-27 22:09:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207499663786512384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:09:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499663794900992[0;39m 生成今日电子书快照开始
2022-07-27 22:09:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499663794900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499663794900992[0;39m ==> Parameters: 
2022-07-27 22:09:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499663794900992[0;39m <==    Updates: 0
2022-07-27 22:09:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499663794900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:09:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499684783198208[0;39m 生成今日电子书快照开始
2022-07-27 22:09:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499684783198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499684783198208[0;39m ==> Parameters: 
2022-07-27 22:09:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499684783198208[0;39m <==    Updates: 0
2022-07-27 22:09:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499684783198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:09:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499705716969472[0;39m 生成今日电子书快照开始
2022-07-27 22:09:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499705716969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499705716969472[0;39m ==> Parameters: 
2022-07-27 22:09:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499705716969472[0;39m <==    Updates: 0
2022-07-27 22:09:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499705716969472[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 22:09:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499726692683776[0;39m 生成今日电子书快照开始
2022-07-27 22:09:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499726692683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499726692683776[0;39m ==> Parameters: 
2022-07-27 22:09:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499726692683776[0;39m <==    Updates: 0
2022-07-27 22:09:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499726692683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:09:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499747685175296[0;39m 生成今日电子书快照开始
2022-07-27 22:09:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499747685175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:09:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499747685175296[0;39m ==> Parameters: 
2022-07-27 22:09:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499747685175296[0;39m <==    Updates: 0
2022-07-27 22:09:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499747685175296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:10:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499768665083904[0;39m 生成今日电子书快照开始
2022-07-27 22:10:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499768665083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499768665083904[0;39m ==> Parameters: 
2022-07-27 22:10:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499768665083904[0;39m <==    Updates: 0
2022-07-27 22:10:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499768665083904[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:10:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207499789611438080[0;39m 更新电子书下的文档数据开始
2022-07-27 22:10:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499789611438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:10:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499789611438080[0;39m ==> Parameters: 
2022-07-27 22:10:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499789611438080[0;39m <==    Updates: 7
2022-07-27 22:10:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207499789611438080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:10:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499789619826688[0;39m 生成今日电子书快照开始
2022-07-27 22:10:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499789619826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499789619826688[0;39m ==> Parameters: 
2022-07-27 22:10:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499789619826688[0;39m <==    Updates: 0
2022-07-27 22:10:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499789619826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:10:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499810620706816[0;39m 生成今日电子书快照开始
2022-07-27 22:10:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499810620706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499810620706816[0;39m ==> Parameters: 
2022-07-27 22:10:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499810620706816[0;39m <==    Updates: 0
2022-07-27 22:10:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499810620706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:10:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499831558672384[0;39m 生成今日电子书快照开始
2022-07-27 22:10:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499831558672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499831558672384[0;39m ==> Parameters: 
2022-07-27 22:10:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499831558672384[0;39m <==    Updates: 0
2022-07-27 22:10:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499831558672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:10:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499852567941120[0;39m 生成今日电子书快照开始
2022-07-27 22:10:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499852567941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499852567941120[0;39m ==> Parameters: 
2022-07-27 22:10:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499852567941120[0;39m <==    Updates: 0
2022-07-27 22:10:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499852567941120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:10:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499873514295296[0;39m 生成今日电子书快照开始
2022-07-27 22:10:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499873514295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499873514295296[0;39m ==> Parameters: 
2022-07-27 22:10:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499873514295296[0;39m <==    Updates: 0
2022-07-27 22:10:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499873514295296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:10:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499894490009600[0;39m 生成今日电子书快照开始
2022-07-27 22:10:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499894490009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499894490009600[0;39m ==> Parameters: 
2022-07-27 22:10:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499894490009600[0;39m <==    Updates: 0
2022-07-27 22:10:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499894490009600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:10:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207499915436363776[0;39m 更新电子书下的文档数据开始
2022-07-27 22:10:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499915436363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:10:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499915436363776[0;39m ==> Parameters: 
2022-07-27 22:10:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207499915436363776[0;39m <==    Updates: 7
2022-07-27 22:10:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207499915436363776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:10:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499915440558080[0;39m 生成今日电子书快照开始
2022-07-27 22:10:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499915440558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499915440558080[0;39m ==> Parameters: 
2022-07-27 22:10:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499915440558080[0;39m <==    Updates: 0
2022-07-27 22:10:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499915440558080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:10:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499936458215424[0;39m 生成今日电子书快照开始
2022-07-27 22:10:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499936458215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499936458215424[0;39m ==> Parameters: 
2022-07-27 22:10:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499936458215424[0;39m <==    Updates: 0
2022-07-27 22:10:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499936458215424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:10:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499957375209472[0;39m 生成今日电子书快照开始
2022-07-27 22:10:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499957375209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499957375209472[0;39m ==> Parameters: 
2022-07-27 22:10:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499957375209472[0;39m <==    Updates: 0
2022-07-27 22:10:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499957375209472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:10:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499978384478208[0;39m 生成今日电子书快照开始
2022-07-27 22:10:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499978384478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499978384478208[0;39m ==> Parameters: 
2022-07-27 22:10:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499978384478208[0;39m <==    Updates: 0
2022-07-27 22:10:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499978384478208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:10:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207499999343415296[0;39m 生成今日电子书快照开始
2022-07-27 22:10:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499999343415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:10:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499999343415296[0;39m ==> Parameters: 
2022-07-27 22:10:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207499999343415296[0;39m <==    Updates: 0
2022-07-27 22:10:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207499999343415296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500020348489728[0;39m 生成今日电子书快照开始
2022-07-27 22:11:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500020348489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500020348489728[0;39m ==> Parameters: 
2022-07-27 22:11:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500020348489728[0;39m <==    Updates: 0
2022-07-27 22:11:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500020348489728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207500041282260992[0;39m 更新电子书下的文档数据开始
2022-07-27 22:11:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500041282260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:11:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500041282260992[0;39m ==> Parameters: 
2022-07-27 22:11:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500041282260992[0;39m <==    Updates: 7
2022-07-27 22:11:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207500041282260992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:11:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500041290649600[0;39m 生成今日电子书快照开始
2022-07-27 22:11:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500041290649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500041290649600[0;39m ==> Parameters: 
2022-07-27 22:11:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500041290649600[0;39m <==    Updates: 0
2022-07-27 22:11:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500041290649600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:11:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500062245392384[0;39m 生成今日电子书快照开始
2022-07-27 22:11:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500062245392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500062245392384[0;39m ==> Parameters: 
2022-07-27 22:11:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500062245392384[0;39m <==    Updates: 0
2022-07-27 22:11:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500062245392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500083216912384[0;39m 生成今日电子书快照开始
2022-07-27 22:11:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500083216912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500083216912384[0;39m ==> Parameters: 
2022-07-27 22:11:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500083216912384[0;39m <==    Updates: 0
2022-07-27 22:11:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500083216912384[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:11:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500104217792512[0;39m 生成今日电子书快照开始
2022-07-27 22:11:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500104217792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500104217792512[0;39m ==> Parameters: 
2022-07-27 22:11:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500104217792512[0;39m <==    Updates: 0
2022-07-27 22:11:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500104217792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500125155758080[0;39m 生成今日电子书快照开始
2022-07-27 22:11:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500125155758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500125155758080[0;39m ==> Parameters: 
2022-07-27 22:11:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500125155758080[0;39m <==    Updates: 0
2022-07-27 22:11:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500125155758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500146127278080[0;39m 生成今日电子书快照开始
2022-07-27 22:11:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500146127278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500146127278080[0;39m ==> Parameters: 
2022-07-27 22:11:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500146127278080[0;39m <==    Updates: 0
2022-07-27 22:11:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500146127278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207500167107186688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:11:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500167107186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:11:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500167107186688[0;39m ==> Parameters: 
2022-07-27 22:11:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500167107186688[0;39m <==    Updates: 7
2022-07-27 22:11:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207500167107186688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:11:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500167115575296[0;39m 生成今日电子书快照开始
2022-07-27 22:11:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500167115575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500167115575296[0;39m ==> Parameters: 
2022-07-27 22:11:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500167115575296[0;39m <==    Updates: 0
2022-07-27 22:11:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500167115575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500188078706688[0;39m 生成今日电子书快照开始
2022-07-27 22:11:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500188078706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500188078706688[0;39m ==> Parameters: 
2022-07-27 22:11:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500188078706688[0;39m <==    Updates: 0
2022-07-27 22:11:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500188078706688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:11:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500209083781120[0;39m 生成今日电子书快照开始
2022-07-27 22:11:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500209083781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500209083781120[0;39m ==> Parameters: 
2022-07-27 22:11:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500209083781120[0;39m <==    Updates: 0
2022-07-27 22:11:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500209083781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500230004969472[0;39m 生成今日电子书快照开始
2022-07-27 22:11:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500230004969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500230004969472[0;39m ==> Parameters: 
2022-07-27 22:11:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500230004969472[0;39m <==    Updates: 0
2022-07-27 22:11:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500230004969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:11:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500251010043904[0;39m 生成今日电子书快照开始
2022-07-27 22:11:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500251010043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:11:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500251010043904[0;39m ==> Parameters: 
2022-07-27 22:11:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500251010043904[0;39m <==    Updates: 0
2022-07-27 22:11:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500251010043904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:12:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500271977369600[0;39m 生成今日电子书快照开始
2022-07-27 22:12:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500271977369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500271977369600[0;39m ==> Parameters: 
2022-07-27 22:12:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500271977369600[0;39m <==    Updates: 0
2022-07-27 22:12:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500271977369600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:12:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207500292940500992[0;39m 更新电子书下的文档数据开始
2022-07-27 22:12:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500292940500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:12:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500292940500992[0;39m ==> Parameters: 
2022-07-27 22:12:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500292940500992[0;39m <==    Updates: 7
2022-07-27 22:12:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207500292940500992[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-27 22:12:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500292953083904[0;39m 生成今日电子书快照开始
2022-07-27 22:12:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500292953083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500292953083904[0;39m ==> Parameters: 
2022-07-27 22:12:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500292953083904[0;39m <==    Updates: 0
2022-07-27 22:12:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500292953083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:12:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500313891049472[0;39m 生成今日电子书快照开始
2022-07-27 22:12:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500313891049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500313891049472[0;39m ==> Parameters: 
2022-07-27 22:12:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500313891049472[0;39m <==    Updates: 0
2022-07-27 22:12:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500313891049472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:12:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500334883540992[0;39m 生成今日电子书快照开始
2022-07-27 22:12:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500334883540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500334883540992[0;39m ==> Parameters: 
2022-07-27 22:12:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500334883540992[0;39m <==    Updates: 0
2022-07-27 22:12:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500334883540992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:12:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500355855060992[0;39m 生成今日电子书快照开始
2022-07-27 22:12:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500355855060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500355855060992[0;39m ==> Parameters: 
2022-07-27 22:12:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500355855060992[0;39m <==    Updates: 0
2022-07-27 22:12:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500355855060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:12:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500376868524032[0;39m 生成今日电子书快照开始
2022-07-27 22:12:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500376868524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500376868524032[0;39m ==> Parameters: 
2022-07-27 22:12:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500376868524032[0;39m <==    Updates: 0
2022-07-27 22:12:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500376868524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:12:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500397802295296[0;39m 生成今日电子书快照开始
2022-07-27 22:12:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500397802295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500397802295296[0;39m ==> Parameters: 
2022-07-27 22:12:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500397802295296[0;39m <==    Updates: 0
2022-07-27 22:12:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500397802295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:12:34.951 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m207474798606028800[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-27 22:12:34.953 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m207474798606028800[0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2022-07-27 22:12:34.957 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m207474225391472640[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-27 22:12:34.957 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m207474225391472640[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-27 22:12:34.957 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m207474225391472640[0;39m 登录校验开始，token：207474798689914880
2022-07-27 22:12:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500418748649472[0;39m 生成今日电子书快照开始
2022-07-27 22:12:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500418748649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500418748649472[0;39m ==> Parameters: 
2022-07-27 22:12:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500418748649472[0;39m <==    Updates: 0
2022-07-27 22:12:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500418748649472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:12:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207500418761232384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:12:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500418761232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:12:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500418761232384[0;39m ==> Parameters: 
2022-07-27 22:12:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500418761232384[0;39m <==    Updates: 7
2022-07-27 22:12:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207500418761232384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:12:35.011 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m207474225391472640[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"207474798689914880"}
2022-07-27 22:12:35.166 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :30  
                [32m207474225391472640[0;39m 参数校验失败：【名称】不能为空！
2022-07-27 22:12:35.169 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m207474225391472640[0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.zs.wikibb.resp.CommonResp com.zs.wikibb.controller.DocController.save(com.zs.wikibb.req.DocSaveReq) with 3 errors: [Field error in object 'docSaveReq' on field 'name': rejected value [null]; codes [NotNull.docSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [docSaveReq.name,name]; arguments []; default message [name]]; default message [【名称】不能为空！]] [Field error in object 'docSaveReq' on field 'parent': rejected value [null]; codes [NotNull.docSaveReq.parent,NotNull.parent,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [docSaveReq.parent,parent]; arguments []; default message [parent]]; default message [【父文档】不能为空！]] [Field error in object 'docSaveReq' on field 'sort': rejected value [null]; codes [NotNull.docSaveReq.sort,NotNull.sort,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [docSaveReq.sort,sort]; arguments []; default message [sort]]; default message [【顺序】不能为空！]] ]
2022-07-27 22:12:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500439728558080[0;39m 生成今日电子书快照开始
2022-07-27 22:12:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500439728558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500439728558080[0;39m ==> Parameters: 
2022-07-27 22:12:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500439728558080[0;39m <==    Updates: 0
2022-07-27 22:12:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500439728558080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:12:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500460742021120[0;39m 生成今日电子书快照开始
2022-07-27 22:12:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500460742021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500460742021120[0;39m ==> Parameters: 
2022-07-27 22:12:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500460742021120[0;39m <==    Updates: 0
2022-07-27 22:12:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500460742021120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:12:49.069 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207500477754118144[0;39m ------------- 开始 -------------
2022-07-27 22:12:49.069 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207500477754118144[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715322204164096 GET
2022-07-27 22:12:49.069 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207500477754118144[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 22:12:49.069 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207500477754118144[0;39m 远程地址: 127.0.0.1
2022-07-27 22:12:49.070 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207500477754118144[0;39m 请求参数: [202715322204164096]
2022-07-27 22:12:49.071 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207500477754118144[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 22:12:49.071 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207500477754118144[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 22:12:49.073 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207500477754118144[0;39m <==    Columns: id, content
2022-07-27 22:12:49.074 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207500477754118144[0;39m <==        Row: 202715322204164096, <<BLOB>>
2022-07-27 22:12:49.075 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207500477754118144[0;39m <==      Total: 1
2022-07-27 22:12:49.076 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207500477754118144[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 22:12:49.076 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207500477754118144[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 22:12:49.113 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207500477754118144[0;39m <==    Updates: 1
2022-07-27 22:12:49.114 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207500477754118144[0;39m 返回结果: {"content":"","success":true}
2022-07-27 22:12:49.114 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207500477754118144[0;39m ------------- 结束 耗时：46 ms -------------
2022-07-27 22:12:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500481696763904[0;39m 生成今日电子书快照开始
2022-07-27 22:12:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500481696763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500481696763904[0;39m ==> Parameters: 
2022-07-27 22:12:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500481696763904[0;39m <==    Updates: 0
2022-07-27 22:12:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500481696763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:12:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500502680866816[0;39m 生成今日电子书快照开始
2022-07-27 22:12:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500502680866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:12:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500502680866816[0;39m ==> Parameters: 
2022-07-27 22:12:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500502680866816[0;39m <==    Updates: 0
2022-07-27 22:12:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500502680866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:13:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500523618832384[0;39m 生成今日电子书快照开始
2022-07-27 22:13:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500523618832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500523618832384[0;39m ==> Parameters: 
2022-07-27 22:13:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500523618832384[0;39m <==    Updates: 0
2022-07-27 22:13:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500523618832384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:13:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207500544581963776[0;39m 更新电子书下的文档数据开始
2022-07-27 22:13:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500544581963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:13:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500544581963776[0;39m ==> Parameters: 
2022-07-27 22:13:05.088 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500544581963776[0;39m <==    Updates: 7
2022-07-27 22:13:05.089 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207500544581963776[0;39m 更新电子书下的文档数据结束，耗时：86 毫秒
2022-07-27 22:13:05.089 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500544946868224[0;39m 生成今日电子书快照开始
2022-07-27 22:13:05.089 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500544946868224[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:05.089 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500544946868224[0;39m ==> Parameters: 
2022-07-27 22:13:05.118 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500544946868224[0;39m <==    Updates: 0
2022-07-27 22:13:05.119 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500544946868224[0;39m 生成今日电子书快照结束，耗时：30 毫秒
2022-07-27 22:13:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500565582843904[0;39m 生成今日电子书快照开始
2022-07-27 22:13:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500565582843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500565582843904[0;39m ==> Parameters: 
2022-07-27 22:13:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500565582843904[0;39m <==    Updates: 0
2022-07-27 22:13:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500565582843904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:13:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500586558558208[0;39m 生成今日电子书快照开始
2022-07-27 22:13:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500586558558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500586558558208[0;39m ==> Parameters: 
2022-07-27 22:13:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500586558558208[0;39m <==    Updates: 0
2022-07-27 22:13:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500586558558208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:13:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500607492329472[0;39m 生成今日电子书快照开始
2022-07-27 22:13:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500607492329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500607492329472[0;39m ==> Parameters: 
2022-07-27 22:13:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500607492329472[0;39m <==    Updates: 0
2022-07-27 22:13:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500607492329472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:13:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500628497403904[0;39m 生成今日电子书快照开始
2022-07-27 22:13:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500628497403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500628497403904[0;39m ==> Parameters: 
2022-07-27 22:13:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500628497403904[0;39m <==    Updates: 0
2022-07-27 22:13:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500628497403904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:13:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500649452146688[0;39m 生成今日电子书快照开始
2022-07-27 22:13:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500649452146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500649452146688[0;39m ==> Parameters: 
2022-07-27 22:13:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500649452146688[0;39m <==    Updates: 0
2022-07-27 22:13:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500649452146688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:13:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500670457221120[0;39m 生成今日电子书快照开始
2022-07-27 22:13:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500670457221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500670457221120[0;39m ==> Parameters: 
2022-07-27 22:13:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500670457221120[0;39m <==    Updates: 0
2022-07-27 22:13:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500670457221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:13:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207500670465609728[0;39m 更新电子书下的文档数据开始
2022-07-27 22:13:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500670465609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:13:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500670465609728[0;39m ==> Parameters: 
2022-07-27 22:13:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500670465609728[0;39m <==    Updates: 7
2022-07-27 22:13:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207500670465609728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:13:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500691382603776[0;39m 生成今日电子书快照开始
2022-07-27 22:13:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500691382603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500691382603776[0;39m ==> Parameters: 
2022-07-27 22:13:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500691382603776[0;39m <==    Updates: 0
2022-07-27 22:13:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500691382603776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:13:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500712404455424[0;39m 生成今日电子书快照开始
2022-07-27 22:13:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500712404455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500712404455424[0;39m ==> Parameters: 
2022-07-27 22:13:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500712404455424[0;39m <==    Updates: 0
2022-07-27 22:13:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500712404455424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:13:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500733338226688[0;39m 生成今日电子书快照开始
2022-07-27 22:13:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500733338226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500733338226688[0;39m ==> Parameters: 
2022-07-27 22:13:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500733338226688[0;39m <==    Updates: 0
2022-07-27 22:13:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500733338226688[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 22:13:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500754339106816[0;39m 生成今日电子书快照开始
2022-07-27 22:13:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500754339106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:13:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500754339106816[0;39m ==> Parameters: 
2022-07-27 22:13:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500754339106816[0;39m <==    Updates: 0
2022-07-27 22:13:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500754339106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:14:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500775264489472[0;39m 生成今日电子书快照开始
2022-07-27 22:14:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500775264489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500775264489472[0;39m ==> Parameters: 
2022-07-27 22:14:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500775264489472[0;39m <==    Updates: 0
2022-07-27 22:14:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500775264489472[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-27 22:14:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207500796236009472[0;39m 更新电子书下的文档数据开始
2022-07-27 22:14:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500796236009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:14:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500796236009472[0;39m ==> Parameters: 
2022-07-27 22:14:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500796236009472[0;39m <==    Updates: 7
2022-07-27 22:14:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207500796236009472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:14:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500796244398080[0;39m 生成今日电子书快照开始
2022-07-27 22:14:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500796244398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500796244398080[0;39m ==> Parameters: 
2022-07-27 22:14:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500796244398080[0;39m <==    Updates: 0
2022-07-27 22:14:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500796244398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:14:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500817253666816[0;39m 生成今日电子书快照开始
2022-07-27 22:14:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500817253666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500817253666816[0;39m ==> Parameters: 
2022-07-27 22:14:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500817253666816[0;39m <==    Updates: 0
2022-07-27 22:14:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500817253666816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:14:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500838183243776[0;39m 生成今日电子书快照开始
2022-07-27 22:14:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500838183243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500838183243776[0;39m ==> Parameters: 
2022-07-27 22:14:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500838183243776[0;39m <==    Updates: 0
2022-07-27 22:14:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500838183243776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:14:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500859179929600[0;39m 生成今日电子书快照开始
2022-07-27 22:14:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500859179929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500859179929600[0;39m ==> Parameters: 
2022-07-27 22:14:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500859179929600[0;39m <==    Updates: 0
2022-07-27 22:14:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500859179929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:14:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500880155643904[0;39m 生成今日电子书快照开始
2022-07-27 22:14:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500880155643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500880155643904[0;39m ==> Parameters: 
2022-07-27 22:14:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500880155643904[0;39m <==    Updates: 0
2022-07-27 22:14:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500880155643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:14:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500901118775296[0;39m 生成今日电子书快照开始
2022-07-27 22:14:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500901118775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500901118775296[0;39m ==> Parameters: 
2022-07-27 22:14:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500901118775296[0;39m <==    Updates: 0
2022-07-27 22:14:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500901118775296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:14:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207500922086100992[0;39m 更新电子书下的文档数据开始
2022-07-27 22:14:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500922086100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:14:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500922086100992[0;39m ==> Parameters: 
2022-07-27 22:14:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207500922086100992[0;39m <==    Updates: 7
2022-07-27 22:14:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207500922086100992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:14:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500922094489600[0;39m 生成今日电子书快照开始
2022-07-27 22:14:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500922094489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500922094489600[0;39m ==> Parameters: 
2022-07-27 22:14:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500922094489600[0;39m <==    Updates: 0
2022-07-27 22:14:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500922094489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:14:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500943049232384[0;39m 生成今日电子书快照开始
2022-07-27 22:14:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500943049232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500943049232384[0;39m ==> Parameters: 
2022-07-27 22:14:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500943049232384[0;39m <==    Updates: 0
2022-07-27 22:14:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500943049232384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:14:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500964029140992[0;39m 生成今日电子书快照开始
2022-07-27 22:14:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500964029140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500964029140992[0;39m ==> Parameters: 
2022-07-27 22:14:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500964029140992[0;39m <==    Updates: 0
2022-07-27 22:14:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500964029140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:14:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207500985000660992[0;39m 生成今日电子书快照开始
2022-07-27 22:14:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500985000660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500985000660992[0;39m ==> Parameters: 
2022-07-27 22:14:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207500985000660992[0;39m <==    Updates: 0
2022-07-27 22:14:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207500985000660992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:14:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501005993152512[0;39m 生成今日电子书快照开始
2022-07-27 22:14:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501005993152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:14:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501005993152512[0;39m ==> Parameters: 
2022-07-27 22:14:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501005993152512[0;39m <==    Updates: 0
2022-07-27 22:14:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501005993152512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:15:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501026931118080[0;39m 生成今日电子书快照开始
2022-07-27 22:15:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501026931118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501026931118080[0;39m ==> Parameters: 
2022-07-27 22:15:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501026931118080[0;39m <==    Updates: 0
2022-07-27 22:15:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501026931118080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:15:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207501047948775424[0;39m 更新电子书下的文档数据开始
2022-07-27 22:15:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501047948775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:15:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501047948775424[0;39m ==> Parameters: 
2022-07-27 22:15:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501047948775424[0;39m <==    Updates: 7
2022-07-27 22:15:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207501047948775424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:15:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501047952969728[0;39m 生成今日电子书快照开始
2022-07-27 22:15:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501047952969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501047952969728[0;39m ==> Parameters: 
2022-07-27 22:15:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501047952969728[0;39m <==    Updates: 0
2022-07-27 22:15:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501047952969728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:15:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501068882546688[0;39m 生成今日电子书快照开始
2022-07-27 22:15:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501068882546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501068882546688[0;39m ==> Parameters: 
2022-07-27 22:15:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501068882546688[0;39m <==    Updates: 0
2022-07-27 22:15:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501068882546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:15:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501089896009728[0;39m 生成今日电子书快照开始
2022-07-27 22:15:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501089896009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501089896009728[0;39m ==> Parameters: 
2022-07-27 22:15:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501089896009728[0;39m <==    Updates: 0
2022-07-27 22:15:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501089896009728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:15:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501110829780992[0;39m 生成今日电子书快照开始
2022-07-27 22:15:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501110829780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501110829780992[0;39m ==> Parameters: 
2022-07-27 22:15:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501110829780992[0;39m <==    Updates: 0
2022-07-27 22:15:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501110829780992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:15:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501131784523776[0;39m 生成今日电子书快照开始
2022-07-27 22:15:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501131784523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501131784523776[0;39m ==> Parameters: 
2022-07-27 22:15:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501131784523776[0;39m <==    Updates: 0
2022-07-27 22:15:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501131784523776[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:15:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501152756043776[0;39m 生成今日电子书快照开始
2022-07-27 22:15:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501152756043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501152756043776[0;39m ==> Parameters: 
2022-07-27 22:15:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501152756043776[0;39m <==    Updates: 0
2022-07-27 22:15:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501152756043776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:15:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501173744340992[0;39m 生成今日电子书快照开始
2022-07-27 22:15:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501173744340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501173744340992[0;39m ==> Parameters: 
2022-07-27 22:15:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501173744340992[0;39m <==    Updates: 0
2022-07-27 22:15:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501173744340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:15:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207501173752729600[0;39m 更新电子书下的文档数据开始
2022-07-27 22:15:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501173752729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:15:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501173752729600[0;39m ==> Parameters: 
2022-07-27 22:15:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501173752729600[0;39m <==    Updates: 7
2022-07-27 22:15:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207501173752729600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:15:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501194711666688[0;39m 生成今日电子书快照开始
2022-07-27 22:15:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501194711666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501194711666688[0;39m ==> Parameters: 
2022-07-27 22:15:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501194711666688[0;39m <==    Updates: 0
2022-07-27 22:15:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501194711666688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:15:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501215670603776[0;39m 生成今日电子书快照开始
2022-07-27 22:15:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501215670603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501215670603776[0;39m ==> Parameters: 
2022-07-27 22:15:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501215670603776[0;39m <==    Updates: 0
2022-07-27 22:15:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501215670603776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:15:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501236667289600[0;39m 生成今日电子书快照开始
2022-07-27 22:15:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501236667289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501236667289600[0;39m ==> Parameters: 
2022-07-27 22:15:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501236667289600[0;39m <==    Updates: 0
2022-07-27 22:15:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501236667289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:15:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501257617838080[0;39m 生成今日电子书快照开始
2022-07-27 22:15:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501257617838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:15:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501257617838080[0;39m ==> Parameters: 
2022-07-27 22:15:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501257617838080[0;39m <==    Updates: 0
2022-07-27 22:15:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501257617838080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:16:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501278610329600[0;39m 生成今日电子书快照开始
2022-07-27 22:16:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501278610329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501278610329600[0;39m ==> Parameters: 
2022-07-27 22:16:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501278610329600[0;39m <==    Updates: 0
2022-07-27 22:16:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501278610329600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:16:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501299594432512[0;39m 生成今日电子书快照开始
2022-07-27 22:16:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501299594432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501299594432512[0;39m ==> Parameters: 
2022-07-27 22:16:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501299594432512[0;39m <==    Updates: 0
2022-07-27 22:16:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501299594432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:16:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207501299602821120[0;39m 更新电子书下的文档数据开始
2022-07-27 22:16:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501299602821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:16:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501299602821120[0;39m ==> Parameters: 
2022-07-27 22:16:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501299602821120[0;39m <==    Updates: 7
2022-07-27 22:16:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207501299602821120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:16:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501320578535424[0;39m 生成今日电子书快照开始
2022-07-27 22:16:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501320578535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501320578535424[0;39m ==> Parameters: 
2022-07-27 22:16:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501320578535424[0;39m <==    Updates: 0
2022-07-27 22:16:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501320578535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:16:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501341558444032[0;39m 生成今日电子书快照开始
2022-07-27 22:16:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501341558444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501341558444032[0;39m ==> Parameters: 
2022-07-27 22:16:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501341558444032[0;39m <==    Updates: 0
2022-07-27 22:16:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501341558444032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:16:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501362504798208[0;39m 生成今日电子书快照开始
2022-07-27 22:16:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501362504798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501362504798208[0;39m ==> Parameters: 
2022-07-27 22:16:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501362504798208[0;39m <==    Updates: 0
2022-07-27 22:16:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501362504798208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:16:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501383472123904[0;39m 生成今日电子书快照开始
2022-07-27 22:16:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501383472123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501383472123904[0;39m ==> Parameters: 
2022-07-27 22:16:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501383472123904[0;39m <==    Updates: 0
2022-07-27 22:16:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501383472123904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:16:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501404426866688[0;39m 生成今日电子书快照开始
2022-07-27 22:16:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501404426866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501404426866688[0;39m ==> Parameters: 
2022-07-27 22:16:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501404426866688[0;39m <==    Updates: 0
2022-07-27 22:16:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501404426866688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:16:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207501425381609472[0;39m 更新电子书下的文档数据开始
2022-07-27 22:16:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501425381609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:16:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501425381609472[0;39m ==> Parameters: 
2022-07-27 22:16:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501425381609472[0;39m <==    Updates: 7
2022-07-27 22:16:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207501425381609472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:16:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501425389998080[0;39m 生成今日电子书快照开始
2022-07-27 22:16:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501425389998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501425389998080[0;39m ==> Parameters: 
2022-07-27 22:16:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501425389998080[0;39m <==    Updates: 0
2022-07-27 22:16:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501425389998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:16:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501446353129472[0;39m 生成今日电子书快照开始
2022-07-27 22:16:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501446353129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501446353129472[0;39m ==> Parameters: 
2022-07-27 22:16:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501446353129472[0;39m <==    Updates: 0
2022-07-27 22:16:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501446353129472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:16:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501467341426688[0;39m 生成今日电子书快照开始
2022-07-27 22:16:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501467341426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501467341426688[0;39m ==> Parameters: 
2022-07-27 22:16:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501467341426688[0;39m <==    Updates: 0
2022-07-27 22:16:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501467341426688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:16:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501488338112512[0;39m 生成今日电子书快照开始
2022-07-27 22:16:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501488338112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501488338112512[0;39m ==> Parameters: 
2022-07-27 22:16:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501488338112512[0;39m <==    Updates: 0
2022-07-27 22:16:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501488338112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:16:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501509267689472[0;39m 生成今日电子书快照开始
2022-07-27 22:16:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501509267689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:16:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501509267689472[0;39m ==> Parameters: 
2022-07-27 22:16:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501509267689472[0;39m <==    Updates: 0
2022-07-27 22:16:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501509267689472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:17:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501530281152512[0;39m 生成今日电子书快照开始
2022-07-27 22:17:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501530281152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501530281152512[0;39m ==> Parameters: 
2022-07-27 22:17:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501530281152512[0;39m <==    Updates: 0
2022-07-27 22:17:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501530281152512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:17:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501551273644032[0;39m 生成今日电子书快照开始
2022-07-27 22:17:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501551273644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501551273644032[0;39m ==> Parameters: 
2022-07-27 22:17:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501551273644032[0;39m <==    Updates: 0
2022-07-27 22:17:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501551273644032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:17:05.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207501551286226944[0;39m 更新电子书下的文档数据开始
2022-07-27 22:17:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501551286226944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:17:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501551286226944[0;39m ==> Parameters: 
2022-07-27 22:17:05.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501551286226944[0;39m <==    Updates: 7
2022-07-27 22:17:05.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207501551286226944[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:17:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501572219998208[0;39m 生成今日电子书快照开始
2022-07-27 22:17:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501572219998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501572219998208[0;39m ==> Parameters: 
2022-07-27 22:17:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501572219998208[0;39m <==    Updates: 0
2022-07-27 22:17:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501572219998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:17:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501593174740992[0;39m 生成今日电子书快照开始
2022-07-27 22:17:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501593174740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501593174740992[0;39m ==> Parameters: 
2022-07-27 22:17:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501593174740992[0;39m <==    Updates: 0
2022-07-27 22:17:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501593174740992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:17:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501614175621120[0;39m 生成今日电子书快照开始
2022-07-27 22:17:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501614175621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501614175621120[0;39m ==> Parameters: 
2022-07-27 22:17:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501614175621120[0;39m <==    Updates: 0
2022-07-27 22:17:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501614175621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:17:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501635109392384[0;39m 生成今日电子书快照开始
2022-07-27 22:17:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501635109392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501635109392384[0;39m ==> Parameters: 
2022-07-27 22:17:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501635109392384[0;39m <==    Updates: 0
2022-07-27 22:17:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501635109392384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:17:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501656114466816[0;39m 生成今日电子书快照开始
2022-07-27 22:17:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501656114466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501656114466816[0;39m ==> Parameters: 
2022-07-27 22:17:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501656114466816[0;39m <==    Updates: 0
2022-07-27 22:17:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501656114466816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:17:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501677069209600[0;39m 生成今日电子书快照开始
2022-07-27 22:17:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501677069209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501677069209600[0;39m ==> Parameters: 
2022-07-27 22:17:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501677069209600[0;39m <==    Updates: 0
2022-07-27 22:17:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501677069209600[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:17:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207501677094375424[0;39m 更新电子书下的文档数据开始
2022-07-27 22:17:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501677094375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:17:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501677094375424[0;39m ==> Parameters: 
2022-07-27 22:17:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501677094375424[0;39m <==    Updates: 7
2022-07-27 22:17:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207501677094375424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:17:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501698044923904[0;39m 生成今日电子书快照开始
2022-07-27 22:17:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501698044923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501698044923904[0;39m ==> Parameters: 
2022-07-27 22:17:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501698044923904[0;39m <==    Updates: 0
2022-07-27 22:17:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501698044923904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:17:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501719037415424[0;39m 生成今日电子书快照开始
2022-07-27 22:17:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501719037415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501719037415424[0;39m ==> Parameters: 
2022-07-27 22:17:45.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501719037415424[0;39m <==    Updates: 0
2022-07-27 22:17:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501719037415424[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:17:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501739983769600[0;39m 生成今日电子书快照开始
2022-07-27 22:17:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501739983769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501739983769600[0;39m ==> Parameters: 
2022-07-27 22:17:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501739983769600[0;39m <==    Updates: 0
2022-07-27 22:17:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501739983769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:17:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501760959483904[0;39m 生成今日电子书快照开始
2022-07-27 22:17:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501760959483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:17:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501760959483904[0;39m ==> Parameters: 
2022-07-27 22:17:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501760959483904[0;39m <==    Updates: 0
2022-07-27 22:17:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501760959483904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:18:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501781910032384[0;39m 生成今日电子书快照开始
2022-07-27 22:18:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501781910032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501781910032384[0;39m ==> Parameters: 
2022-07-27 22:18:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501781910032384[0;39m <==    Updates: 0
2022-07-27 22:18:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501781910032384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:18:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207501802919301120[0;39m 更新电子书下的文档数据开始
2022-07-27 22:18:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501802919301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:18:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501802919301120[0;39m ==> Parameters: 
2022-07-27 22:18:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501802919301120[0;39m <==    Updates: 7
2022-07-27 22:18:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207501802919301120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:18:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501802927689728[0;39m 生成今日电子书快照开始
2022-07-27 22:18:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501802927689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:05.112 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501802927689728[0;39m ==> Parameters: 
2022-07-27 22:18:05.116 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501802927689728[0;39m <==    Updates: 0
2022-07-27 22:18:05.117 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501802927689728[0;39m 生成今日电子书快照结束，耗时：102 毫秒
2022-07-27 22:18:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501823857266688[0;39m 生成今日电子书快照开始
2022-07-27 22:18:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501823857266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501823857266688[0;39m ==> Parameters: 
2022-07-27 22:18:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501823857266688[0;39m <==    Updates: 0
2022-07-27 22:18:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501823857266688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:18:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501844837175296[0;39m 生成今日电子书快照开始
2022-07-27 22:18:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501844837175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501844837175296[0;39m ==> Parameters: 
2022-07-27 22:18:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501844837175296[0;39m <==    Updates: 0
2022-07-27 22:18:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501844837175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:18:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501865804500992[0;39m 生成今日电子书快照开始
2022-07-27 22:18:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501865804500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501865804500992[0;39m ==> Parameters: 
2022-07-27 22:18:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501865804500992[0;39m <==    Updates: 0
2022-07-27 22:18:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501865804500992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:18:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501886776020992[0;39m 生成今日电子书快照开始
2022-07-27 22:18:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501886776020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501886776020992[0;39m ==> Parameters: 
2022-07-27 22:18:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501886776020992[0;39m <==    Updates: 0
2022-07-27 22:18:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501886776020992[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 22:18:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501907772706816[0;39m 生成今日电子书快照开始
2022-07-27 22:18:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501907772706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501907772706816[0;39m ==> Parameters: 
2022-07-27 22:18:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501907772706816[0;39m <==    Updates: 0
2022-07-27 22:18:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501907772706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:18:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207501928719060992[0;39m 更新电子书下的文档数据开始
2022-07-27 22:18:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501928719060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:18:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501928719060992[0;39m ==> Parameters: 
2022-07-27 22:18:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207501928719060992[0;39m <==    Updates: 7
2022-07-27 22:18:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207501928719060992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:18:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501928723255296[0;39m 生成今日电子书快照开始
2022-07-27 22:18:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501928723255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501928723255296[0;39m ==> Parameters: 
2022-07-27 22:18:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501928723255296[0;39m <==    Updates: 0
2022-07-27 22:18:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501928723255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:18:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501949707358208[0;39m 生成今日电子书快照开始
2022-07-27 22:18:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501949707358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501949707358208[0;39m ==> Parameters: 
2022-07-27 22:18:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501949707358208[0;39m <==    Updates: 0
2022-07-27 22:18:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501949707358208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:18:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501970653712384[0;39m 生成今日电子书快照开始
2022-07-27 22:18:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501970653712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501970653712384[0;39m ==> Parameters: 
2022-07-27 22:18:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501970653712384[0;39m <==    Updates: 0
2022-07-27 22:18:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501970653712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:18:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207501991671369728[0;39m 生成今日电子书快照开始
2022-07-27 22:18:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501991671369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501991671369728[0;39m ==> Parameters: 
2022-07-27 22:18:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207501991671369728[0;39m <==    Updates: 0
2022-07-27 22:18:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207501991671369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:18:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502012634501120[0;39m 生成今日电子书快照开始
2022-07-27 22:18:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502012634501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:18:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502012634501120[0;39m ==> Parameters: 
2022-07-27 22:18:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502012634501120[0;39m <==    Updates: 0
2022-07-27 22:18:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502012634501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502033601826816[0;39m 生成今日电子书快照开始
2022-07-27 22:19:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502033601826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502033601826816[0;39m ==> Parameters: 
2022-07-27 22:19:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502033601826816[0;39m <==    Updates: 0
2022-07-27 22:19:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502033601826816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:19:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502054531403776[0;39m 生成今日电子书快照开始
2022-07-27 22:19:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502054531403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502054531403776[0;39m ==> Parameters: 
2022-07-27 22:19:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502054531403776[0;39m <==    Updates: 0
2022-07-27 22:19:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502054531403776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207502054539792384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:19:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502054539792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:19:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502054539792384[0;39m ==> Parameters: 
2022-07-27 22:19:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502054539792384[0;39m <==    Updates: 7
2022-07-27 22:19:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207502054539792384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:19:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502075523895296[0;39m 生成今日电子书快照开始
2022-07-27 22:19:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502075523895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502075523895296[0;39m ==> Parameters: 
2022-07-27 22:19:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502075523895296[0;39m <==    Updates: 0
2022-07-27 22:19:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502075523895296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502096524775424[0;39m 生成今日电子书快照开始
2022-07-27 22:19:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502096524775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502096524775424[0;39m ==> Parameters: 
2022-07-27 22:19:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502096524775424[0;39m <==    Updates: 0
2022-07-27 22:19:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502096524775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502117445963776[0;39m 生成今日电子书快照开始
2022-07-27 22:19:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502117445963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502117445963776[0;39m ==> Parameters: 
2022-07-27 22:19:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502117445963776[0;39m <==    Updates: 0
2022-07-27 22:19:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502117445963776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:19:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502138442649600[0;39m 生成今日电子书快照开始
2022-07-27 22:19:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502138442649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502138442649600[0;39m ==> Parameters: 
2022-07-27 22:19:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502138442649600[0;39m <==    Updates: 0
2022-07-27 22:19:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502138442649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502159414169600[0;39m 生成今日电子书快照开始
2022-07-27 22:19:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502159414169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502159414169600[0;39m ==> Parameters: 
2022-07-27 22:19:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502159414169600[0;39m <==    Updates: 0
2022-07-27 22:19:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502159414169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207502180389883904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:19:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502180389883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:19:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502180389883904[0;39m ==> Parameters: 
2022-07-27 22:19:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502180389883904[0;39m <==    Updates: 7
2022-07-27 22:19:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207502180389883904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:19:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502180398272512[0;39m 生成今日电子书快照开始
2022-07-27 22:19:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502180398272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502180398272512[0;39m ==> Parameters: 
2022-07-27 22:19:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502180398272512[0;39m <==    Updates: 0
2022-07-27 22:19:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502180398272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502201353015296[0;39m 生成今日电子书快照开始
2022-07-27 22:19:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502201353015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502201353015296[0;39m ==> Parameters: 
2022-07-27 22:19:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502201353015296[0;39m <==    Updates: 0
2022-07-27 22:19:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502201353015296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:19:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502222328729600[0;39m 生成今日电子书快照开始
2022-07-27 22:19:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502222328729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502222328729600[0;39m ==> Parameters: 
2022-07-27 22:19:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502222328729600[0;39m <==    Updates: 0
2022-07-27 22:19:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502222328729600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502243308638208[0;39m 生成今日电子书快照开始
2022-07-27 22:19:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502243308638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502243308638208[0;39m ==> Parameters: 
2022-07-27 22:19:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502243308638208[0;39m <==    Updates: 0
2022-07-27 22:19:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502243308638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:19:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502264288546816[0;39m 生成今日电子书快照开始
2022-07-27 22:19:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502264288546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:19:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502264288546816[0;39m ==> Parameters: 
2022-07-27 22:19:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502264288546816[0;39m <==    Updates: 0
2022-07-27 22:19:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502264288546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:20:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502285243289600[0;39m 生成今日电子书快照开始
2022-07-27 22:20:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502285243289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502285243289600[0;39m ==> Parameters: 
2022-07-27 22:20:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502285243289600[0;39m <==    Updates: 0
2022-07-27 22:20:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502285243289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:20:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502306223198208[0;39m 生成今日电子书快照开始
2022-07-27 22:20:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502306223198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502306223198208[0;39m ==> Parameters: 
2022-07-27 22:20:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502306223198208[0;39m <==    Updates: 0
2022-07-27 22:20:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502306223198208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:20:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207502306239975424[0;39m 更新电子书下的文档数据开始
2022-07-27 22:20:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502306239975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:20:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502306239975424[0;39m ==> Parameters: 
2022-07-27 22:20:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502306239975424[0;39m <==    Updates: 7
2022-07-27 22:20:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207502306239975424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:20:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502327161163776[0;39m 生成今日电子书快照开始
2022-07-27 22:20:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502327161163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502327161163776[0;39m ==> Parameters: 
2022-07-27 22:20:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502327161163776[0;39m <==    Updates: 0
2022-07-27 22:20:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502327161163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:20:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502348166238208[0;39m 生成今日电子书快照开始
2022-07-27 22:20:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502348166238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502348166238208[0;39m ==> Parameters: 
2022-07-27 22:20:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502348166238208[0;39m <==    Updates: 0
2022-07-27 22:20:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502348166238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:20:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502369146146816[0;39m 生成今日电子书快照开始
2022-07-27 22:20:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502369146146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502369146146816[0;39m ==> Parameters: 
2022-07-27 22:20:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502369146146816[0;39m <==    Updates: 0
2022-07-27 22:20:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502369146146816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:20:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502390105083904[0;39m 生成今日电子书快照开始
2022-07-27 22:20:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502390105083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502390105083904[0;39m ==> Parameters: 
2022-07-27 22:20:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502390105083904[0;39m <==    Updates: 0
2022-07-27 22:20:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502390105083904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:20:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502411089186816[0;39m 生成今日电子书快照开始
2022-07-27 22:20:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502411089186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502411089186816[0;39m ==> Parameters: 
2022-07-27 22:20:30.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502411089186816[0;39m <==    Updates: 0
2022-07-27 22:20:30.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502411089186816[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:20:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502432073289728[0;39m 生成今日电子书快照开始
2022-07-27 22:20:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502432073289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502432073289728[0;39m ==> Parameters: 
2022-07-27 22:20:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502432073289728[0;39m <==    Updates: 0
2022-07-27 22:20:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502432073289728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:20:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207502432081678336[0;39m 更新电子书下的文档数据开始
2022-07-27 22:20:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502432081678336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:20:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502432081678336[0;39m ==> Parameters: 
2022-07-27 22:20:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502432081678336[0;39m <==    Updates: 7
2022-07-27 22:20:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207502432081678336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:20:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502453007060992[0;39m 生成今日电子书快照开始
2022-07-27 22:20:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502453007060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502453007060992[0;39m ==> Parameters: 
2022-07-27 22:20:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502453007060992[0;39m <==    Updates: 0
2022-07-27 22:20:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502453007060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:20:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502474016329728[0;39m 生成今日电子书快照开始
2022-07-27 22:20:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502474016329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502474016329728[0;39m ==> Parameters: 
2022-07-27 22:20:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502474016329728[0;39m <==    Updates: 0
2022-07-27 22:20:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502474016329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:20:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502494933323776[0;39m 生成今日电子书快照开始
2022-07-27 22:20:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502494933323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502494933323776[0;39m ==> Parameters: 
2022-07-27 22:20:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502494933323776[0;39m <==    Updates: 0
2022-07-27 22:20:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502494933323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:20:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502515904843776[0;39m 生成今日电子书快照开始
2022-07-27 22:20:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502515904843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:20:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502515904843776[0;39m ==> Parameters: 
2022-07-27 22:20:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502515904843776[0;39m <==    Updates: 0
2022-07-27 22:20:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502515904843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502536905723904[0;39m 生成今日电子书快照开始
2022-07-27 22:21:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502536905723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502536905723904[0;39m ==> Parameters: 
2022-07-27 22:21:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502536905723904[0;39m <==    Updates: 0
2022-07-27 22:21:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502536905723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502557868855296[0;39m 生成今日电子书快照开始
2022-07-27 22:21:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502557868855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502557868855296[0;39m ==> Parameters: 
2022-07-27 22:21:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502557868855296[0;39m <==    Updates: 0
2022-07-27 22:21:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502557868855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207502557877243904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:21:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502557877243904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:21:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502557877243904[0;39m ==> Parameters: 
2022-07-27 22:21:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502557877243904[0;39m <==    Updates: 7
2022-07-27 22:21:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207502557877243904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:21:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502578878124032[0;39m 生成今日电子书快照开始
2022-07-27 22:21:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502578878124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502578878124032[0;39m ==> Parameters: 
2022-07-27 22:21:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502578878124032[0;39m <==    Updates: 0
2022-07-27 22:21:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502578878124032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502599828672512[0;39m 生成今日电子书快照开始
2022-07-27 22:21:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502599828672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502599828672512[0;39m ==> Parameters: 
2022-07-27 22:21:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502599828672512[0;39m <==    Updates: 0
2022-07-27 22:21:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502599828672512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:21:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502620762443776[0;39m 生成今日电子书快照开始
2022-07-27 22:21:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502620762443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502620762443776[0;39m ==> Parameters: 
2022-07-27 22:21:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502620762443776[0;39m <==    Updates: 0
2022-07-27 22:21:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502620762443776[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:21:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502641733963776[0;39m 生成今日电子书快照开始
2022-07-27 22:21:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502641733963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502641733963776[0;39m ==> Parameters: 
2022-07-27 22:21:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502641733963776[0;39m <==    Updates: 0
2022-07-27 22:21:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502641733963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502662713872384[0;39m 生成今日电子书快照开始
2022-07-27 22:21:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502662713872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502662713872384[0;39m ==> Parameters: 
2022-07-27 22:21:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502662713872384[0;39m <==    Updates: 0
2022-07-27 22:21:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502662713872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207502683685392384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:21:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502683685392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:21:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502683685392384[0;39m ==> Parameters: 
2022-07-27 22:21:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502683685392384[0;39m <==    Updates: 7
2022-07-27 22:21:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207502683685392384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:21:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502683693780992[0;39m 生成今日电子书快照开始
2022-07-27 22:21:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502683693780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502683693780992[0;39m ==> Parameters: 
2022-07-27 22:21:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502683693780992[0;39m <==    Updates: 0
2022-07-27 22:21:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502683693780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502704665300992[0;39m 生成今日电子书快照开始
2022-07-27 22:21:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502704665300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502704665300992[0;39m ==> Parameters: 
2022-07-27 22:21:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502704665300992[0;39m <==    Updates: 0
2022-07-27 22:21:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502704665300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:21:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502725657792512[0;39m 生成今日电子书快照开始
2022-07-27 22:21:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502725657792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502725657792512[0;39m ==> Parameters: 
2022-07-27 22:21:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502725657792512[0;39m <==    Updates: 0
2022-07-27 22:21:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502725657792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502746633506816[0;39m 生成今日电子书快照开始
2022-07-27 22:21:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502746633506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502746633506816[0;39m ==> Parameters: 
2022-07-27 22:21:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502746633506816[0;39m <==    Updates: 0
2022-07-27 22:21:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502746633506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:21:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502767613415424[0;39m 生成今日电子书快照开始
2022-07-27 22:21:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502767613415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:21:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502767613415424[0;39m ==> Parameters: 
2022-07-27 22:21:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502767613415424[0;39m <==    Updates: 0
2022-07-27 22:21:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502767613415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:22:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502788568158208[0;39m 生成今日电子书快照开始
2022-07-27 22:22:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502788568158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502788568158208[0;39m ==> Parameters: 
2022-07-27 22:22:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502788568158208[0;39m <==    Updates: 0
2022-07-27 22:22:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502788568158208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:22:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502809535483904[0;39m 生成今日电子书快照开始
2022-07-27 22:22:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502809535483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502809535483904[0;39m ==> Parameters: 
2022-07-27 22:22:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502809535483904[0;39m <==    Updates: 0
2022-07-27 22:22:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502809535483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:22:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207502809543872512[0;39m 更新电子书下的文档数据开始
2022-07-27 22:22:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502809543872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:22:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502809543872512[0;39m ==> Parameters: 
2022-07-27 22:22:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502809543872512[0;39m <==    Updates: 7
2022-07-27 22:22:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207502809543872512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:22:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502830536364032[0;39m 生成今日电子书快照开始
2022-07-27 22:22:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502830536364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502830536364032[0;39m ==> Parameters: 
2022-07-27 22:22:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502830536364032[0;39m <==    Updates: 0
2022-07-27 22:22:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502830536364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:22:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502851482718208[0;39m 生成今日电子书快照开始
2022-07-27 22:22:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502851482718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502851482718208[0;39m ==> Parameters: 
2022-07-27 22:22:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502851482718208[0;39m <==    Updates: 0
2022-07-27 22:22:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502851482718208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:22:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502872454238208[0;39m 生成今日电子书快照开始
2022-07-27 22:22:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502872454238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502872454238208[0;39m ==> Parameters: 
2022-07-27 22:22:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502872454238208[0;39m <==    Updates: 0
2022-07-27 22:22:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502872454238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:22:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502893408980992[0;39m 生成今日电子书快照开始
2022-07-27 22:22:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502893408980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502893408980992[0;39m ==> Parameters: 
2022-07-27 22:22:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502893408980992[0;39m <==    Updates: 0
2022-07-27 22:22:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502893408980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:22:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502914418249728[0;39m 生成今日电子书快照开始
2022-07-27 22:22:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502914418249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502914418249728[0;39m ==> Parameters: 
2022-07-27 22:22:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502914418249728[0;39m <==    Updates: 0
2022-07-27 22:22:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502914418249728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:22:30.121 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：ZXHCyQ1bVr，session id：0！当前连接数：0
2022-07-27 22:22:30.149 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2022-07-27 22:22:30.153 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-1 - Shutdown completed.
2022-07-27 22:22:30.501 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 48580 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-27 22:22:30.501 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-27 22:22:30.744 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-27 22:22:30.744 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-27 22:22:30.750 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2022-07-27 22:22:31.054 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-27 22:22:31.054 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-27 22:22:31.055 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-27 22:22:31.055 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-27 22:22:31.100 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-27 22:22:31.100 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 597 ms
2022-07-27 22:22:31.814 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-27 22:22:31.824 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-27 22:22:31.826 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-27 22:22:31.833 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.371 seconds (JVM running for 6997.739)
2022-07-27 22:22:31.834 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-27 22:22:31.834 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-27 22:22:31.834 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-27 22:22:33.889 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 48580 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-27 22:22:33.889 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-27 22:22:34.037 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-27 22:22:34.037 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-27 22:22:34.042 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2022-07-27 22:22:34.141 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-27 22:22:34.142 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-27 22:22:34.142 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-27 22:22:34.142 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-27 22:22:34.175 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-27 22:22:34.175 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 284 ms
2022-07-27 22:22:34.619 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-27 22:22:34.627 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-27 22:22:34.629 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-27 22:22:34.632 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 0.771 seconds (JVM running for 7000.538)
2022-07-27 22:22:34.633 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-27 22:22:34.633 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-27 22:22:34.633 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-27 22:22:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207502935377186816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:22:35.016 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m207502935377186816[0;39m HikariPool-2 - Starting...
2022-07-27 22:22:35.019 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m207502935377186816[0;39m HikariPool-2 - Start completed.
2022-07-27 22:22:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502935377186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:22:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502935377186816[0;39m ==> Parameters: 
2022-07-27 22:22:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207502935377186816[0;39m <==    Updates: 7
2022-07-27 22:22:35.021 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207502935377186816[0;39m 更新电子书下的文档数据结束，耗时：8 毫秒
2022-07-27 22:22:35.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502935414935552[0;39m 生成今日电子书快照开始
2022-07-27 22:22:35.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502935414935552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:35.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502935414935552[0;39m ==> Parameters: 
2022-07-27 22:22:35.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502935414935552[0;39m <==    Updates: 0
2022-07-27 22:22:35.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502935414935552[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:22:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502956327735296[0;39m 生成今日电子书快照开始
2022-07-27 22:22:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502956327735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502956327735296[0;39m ==> Parameters: 
2022-07-27 22:22:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502956327735296[0;39m <==    Updates: 0
2022-07-27 22:22:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502956327735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:22:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502977307643904[0;39m 生成今日电子书快照开始
2022-07-27 22:22:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502977307643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502977307643904[0;39m ==> Parameters: 
2022-07-27 22:22:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502977307643904[0;39m <==    Updates: 0
2022-07-27 22:22:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502977307643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:22:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207502998300135424[0;39m 生成今日电子书快照开始
2022-07-27 22:22:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502998300135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502998300135424[0;39m ==> Parameters: 
2022-07-27 22:22:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207502998300135424[0;39m <==    Updates: 0
2022-07-27 22:22:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207502998300135424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:22:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503019267461120[0;39m 生成今日电子书快照开始
2022-07-27 22:22:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503019267461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:22:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503019267461120[0;39m ==> Parameters: 
2022-07-27 22:22:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503019267461120[0;39m <==    Updates: 0
2022-07-27 22:22:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503019267461120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:23:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503040230592512[0;39m 生成今日电子书快照开始
2022-07-27 22:23:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503040230592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503040230592512[0;39m ==> Parameters: 
2022-07-27 22:23:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503040230592512[0;39m <==    Updates: 0
2022-07-27 22:23:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503040230592512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:23:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207503061206306816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:23:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503061206306816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:23:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503061206306816[0;39m ==> Parameters: 
2022-07-27 22:23:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503061206306816[0;39m <==    Updates: 7
2022-07-27 22:23:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207503061206306816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:23:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503061214695424[0;39m 生成今日电子书快照开始
2022-07-27 22:23:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503061214695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503061214695424[0;39m ==> Parameters: 
2022-07-27 22:23:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503061214695424[0;39m <==    Updates: 0
2022-07-27 22:23:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503061214695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:23:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503082152660992[0;39m 生成今日电子书快照开始
2022-07-27 22:23:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503082152660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503082152660992[0;39m ==> Parameters: 
2022-07-27 22:23:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503082152660992[0;39m <==    Updates: 0
2022-07-27 22:23:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503082152660992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:23:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503103124180992[0;39m 生成今日电子书快照开始
2022-07-27 22:23:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503103124180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503103124180992[0;39m ==> Parameters: 
2022-07-27 22:23:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503103124180992[0;39m <==    Updates: 0
2022-07-27 22:23:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503103124180992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:23:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503124112478208[0;39m 生成今日电子书快照开始
2022-07-27 22:23:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503124112478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503124112478208[0;39m ==> Parameters: 
2022-07-27 22:23:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503124112478208[0;39m <==    Updates: 0
2022-07-27 22:23:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503124112478208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:23:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503145042055168[0;39m 生成今日电子书快照开始
2022-07-27 22:23:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503145042055168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503145042055168[0;39m ==> Parameters: 
2022-07-27 22:23:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503145042055168[0;39m <==    Updates: 0
2022-07-27 22:23:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503145042055168[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:23:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503166076489728[0;39m 生成今日电子书快照开始
2022-07-27 22:23:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503166076489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:30.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503166076489728[0;39m ==> Parameters: 
2022-07-27 22:23:30.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503166076489728[0;39m <==    Updates: 0
2022-07-27 22:23:30.024 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503166076489728[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:23:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207503187001872384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:23:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503187001872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:23:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503187001872384[0;39m ==> Parameters: 
2022-07-27 22:23:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503187001872384[0;39m <==    Updates: 7
2022-07-27 22:23:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207503187001872384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:23:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503187010260992[0;39m 生成今日电子书快照开始
2022-07-27 22:23:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503187010260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503187010260992[0;39m ==> Parameters: 
2022-07-27 22:23:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503187010260992[0;39m <==    Updates: 0
2022-07-27 22:23:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503187010260992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:23:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503207960809472[0;39m 生成今日电子书快照开始
2022-07-27 22:23:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503207960809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503207960809472[0;39m ==> Parameters: 
2022-07-27 22:23:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503207960809472[0;39m <==    Updates: 0
2022-07-27 22:23:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503207960809472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:23:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503228961689600[0;39m 生成今日电子书快照开始
2022-07-27 22:23:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503228961689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503228961689600[0;39m ==> Parameters: 
2022-07-27 22:23:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503228961689600[0;39m <==    Updates: 0
2022-07-27 22:23:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503228961689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:23:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503249945792512[0;39m 生成今日电子书快照开始
2022-07-27 22:23:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503249945792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503249945792512[0;39m ==> Parameters: 
2022-07-27 22:23:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503249945792512[0;39m <==    Updates: 0
2022-07-27 22:23:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503249945792512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:23:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503270896340992[0;39m 生成今日电子书快照开始
2022-07-27 22:23:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503270896340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:23:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503270896340992[0;39m ==> Parameters: 
2022-07-27 22:23:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503270896340992[0;39m <==    Updates: 0
2022-07-27 22:23:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503270896340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:24:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503291855278080[0;39m 生成今日电子书快照开始
2022-07-27 22:24:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503291855278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503291855278080[0;39m ==> Parameters: 
2022-07-27 22:24:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503291855278080[0;39m <==    Updates: 0
2022-07-27 22:24:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503291855278080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:24:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503312881324032[0;39m 生成今日电子书快照开始
2022-07-27 22:24:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503312881324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503312881324032[0;39m ==> Parameters: 
2022-07-27 22:24:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503312881324032[0;39m <==    Updates: 0
2022-07-27 22:24:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503312881324032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:24:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207503312889712640[0;39m 更新电子书下的文档数据开始
2022-07-27 22:24:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503312889712640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:24:05.108 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503312889712640[0;39m ==> Parameters: 
2022-07-27 22:24:05.109 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503312889712640[0;39m <==    Updates: 7
2022-07-27 22:24:05.109 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207503312889712640[0;39m 更新电子书下的文档数据结束，耗时：91 毫秒
2022-07-27 22:24:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503333815095296[0;39m 生成今日电子书快照开始
2022-07-27 22:24:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503333815095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503333815095296[0;39m ==> Parameters: 
2022-07-27 22:24:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503333815095296[0;39m <==    Updates: 0
2022-07-27 22:24:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503333815095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:24:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503354795003904[0;39m 生成今日电子书快照开始
2022-07-27 22:24:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503354795003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503354795003904[0;39m ==> Parameters: 
2022-07-27 22:24:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503354795003904[0;39m <==    Updates: 0
2022-07-27 22:24:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503354795003904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:24:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503375787495424[0;39m 生成今日电子书快照开始
2022-07-27 22:24:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503375787495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503375787495424[0;39m ==> Parameters: 
2022-07-27 22:24:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503375787495424[0;39m <==    Updates: 0
2022-07-27 22:24:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503375787495424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:24:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503396754821120[0;39m 生成今日电子书快照开始
2022-07-27 22:24:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503396754821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503396754821120[0;39m ==> Parameters: 
2022-07-27 22:24:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503396754821120[0;39m <==    Updates: 0
2022-07-27 22:24:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503396754821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:24:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503417717952512[0;39m 生成今日电子书快照开始
2022-07-27 22:24:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503417717952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503417717952512[0;39m ==> Parameters: 
2022-07-27 22:24:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503417717952512[0;39m <==    Updates: 0
2022-07-27 22:24:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503417717952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:24:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503438647529472[0;39m 生成今日电子书快照开始
2022-07-27 22:24:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503438647529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503438647529472[0;39m ==> Parameters: 
2022-07-27 22:24:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503438647529472[0;39m <==    Updates: 0
2022-07-27 22:24:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503438647529472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:24:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207503438651723776[0;39m 更新电子书下的文档数据开始
2022-07-27 22:24:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503438651723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:24:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503438651723776[0;39m ==> Parameters: 
2022-07-27 22:24:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503438651723776[0;39m <==    Updates: 7
2022-07-27 22:24:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207503438651723776[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2022-07-27 22:24:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503459669381120[0;39m 生成今日电子书快照开始
2022-07-27 22:24:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503459669381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503459669381120[0;39m ==> Parameters: 
2022-07-27 22:24:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503459669381120[0;39m <==    Updates: 0
2022-07-27 22:24:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503459669381120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:24:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503480628318208[0;39m 生成今日电子书快照开始
2022-07-27 22:24:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503480628318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503480628318208[0;39m ==> Parameters: 
2022-07-27 22:24:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503480628318208[0;39m <==    Updates: 0
2022-07-27 22:24:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503480628318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:24:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503501566283776[0;39m 生成今日电子书快照开始
2022-07-27 22:24:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503501566283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503501566283776[0;39m ==> Parameters: 
2022-07-27 22:24:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503501566283776[0;39m <==    Updates: 0
2022-07-27 22:24:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503501566283776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:24:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503522533609472[0;39m 生成今日电子书快照开始
2022-07-27 22:24:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503522533609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:24:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503522533609472[0;39m ==> Parameters: 
2022-07-27 22:24:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503522533609472[0;39m <==    Updates: 0
2022-07-27 22:24:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503522533609472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:25:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503543555461120[0;39m 生成今日电子书快照开始
2022-07-27 22:25:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503543555461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503543555461120[0;39m ==> Parameters: 
2022-07-27 22:25:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503543555461120[0;39m <==    Updates: 0
2022-07-27 22:25:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503543555461120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:25:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207503564480843776[0;39m 更新电子书下的文档数据开始
2022-07-27 22:25:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503564480843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:25:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503564480843776[0;39m ==> Parameters: 
2022-07-27 22:25:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503564480843776[0;39m <==    Updates: 7
2022-07-27 22:25:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207503564480843776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:25:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503564489232384[0;39m 生成今日电子书快照开始
2022-07-27 22:25:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503564489232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503564489232384[0;39m ==> Parameters: 
2022-07-27 22:25:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503564489232384[0;39m <==    Updates: 0
2022-07-27 22:25:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503564489232384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:25:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503585490112512[0;39m 生成今日电子书快照开始
2022-07-27 22:25:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503585490112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503585490112512[0;39m ==> Parameters: 
2022-07-27 22:25:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503585490112512[0;39m <==    Updates: 0
2022-07-27 22:25:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503585490112512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:25:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503606465826816[0;39m 生成今日电子书快照开始
2022-07-27 22:25:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503606465826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503606465826816[0;39m ==> Parameters: 
2022-07-27 22:25:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503606465826816[0;39m <==    Updates: 0
2022-07-27 22:25:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503606465826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:25:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503627395403776[0;39m 生成今日电子书快照开始
2022-07-27 22:25:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503627395403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503627395403776[0;39m ==> Parameters: 
2022-07-27 22:25:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503627395403776[0;39m <==    Updates: 0
2022-07-27 22:25:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503627395403776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:25:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503648408866816[0;39m 生成今日电子书快照开始
2022-07-27 22:25:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503648408866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503648408866816[0;39m ==> Parameters: 
2022-07-27 22:25:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503648408866816[0;39m <==    Updates: 0
2022-07-27 22:25:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503648408866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:25:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503669397164032[0;39m 生成今日电子书快照开始
2022-07-27 22:25:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503669397164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503669397164032[0;39m ==> Parameters: 
2022-07-27 22:25:30.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503669397164032[0;39m <==    Updates: 0
2022-07-27 22:25:30.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503669397164032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:25:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503690356101120[0;39m 生成今日电子书快照开始
2022-07-27 22:25:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503690356101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503690356101120[0;39m ==> Parameters: 
2022-07-27 22:25:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503690356101120[0;39m <==    Updates: 0
2022-07-27 22:25:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503690356101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:25:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207503690364489728[0;39m 更新电子书下的文档数据开始
2022-07-27 22:25:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503690364489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:25:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503690364489728[0;39m ==> Parameters: 
2022-07-27 22:25:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503690364489728[0;39m <==    Updates: 7
2022-07-27 22:25:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207503690364489728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:25:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503711281483776[0;39m 生成今日电子书快照开始
2022-07-27 22:25:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503711281483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503711281483776[0;39m ==> Parameters: 
2022-07-27 22:25:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503711281483776[0;39m <==    Updates: 0
2022-07-27 22:25:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503711281483776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:25:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503732286558208[0;39m 生成今日电子书快照开始
2022-07-27 22:25:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503732286558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503732286558208[0;39m ==> Parameters: 
2022-07-27 22:25:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503732286558208[0;39m <==    Updates: 0
2022-07-27 22:25:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503732286558208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:25:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503753237106688[0;39m 生成今日电子书快照开始
2022-07-27 22:25:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503753237106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503753237106688[0;39m ==> Parameters: 
2022-07-27 22:25:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503753237106688[0;39m <==    Updates: 0
2022-07-27 22:25:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503753237106688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:25:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503774229598208[0;39m 生成今日电子书快照开始
2022-07-27 22:25:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503774229598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:25:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503774229598208[0;39m ==> Parameters: 
2022-07-27 22:25:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503774229598208[0;39m <==    Updates: 0
2022-07-27 22:25:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503774229598208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:26:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503795163369472[0;39m 生成今日电子书快照开始
2022-07-27 22:26:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503795163369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503795163369472[0;39m ==> Parameters: 
2022-07-27 22:26:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503795163369472[0;39m <==    Updates: 0
2022-07-27 22:26:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503795163369472[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-27 22:26:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207503816181026816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:26:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503816181026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:26:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503816181026816[0;39m ==> Parameters: 
2022-07-27 22:26:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503816181026816[0;39m <==    Updates: 7
2022-07-27 22:26:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207503816181026816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:26:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503816189415424[0;39m 生成今日电子书快照开始
2022-07-27 22:26:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503816189415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503816189415424[0;39m ==> Parameters: 
2022-07-27 22:26:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503816189415424[0;39m <==    Updates: 0
2022-07-27 22:26:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503816189415424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:26:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503837127380992[0;39m 生成今日电子书快照开始
2022-07-27 22:26:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503837127380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503837127380992[0;39m ==> Parameters: 
2022-07-27 22:26:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503837127380992[0;39m <==    Updates: 0
2022-07-27 22:26:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503837127380992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:26:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503858086318080[0;39m 生成今日电子书快照开始
2022-07-27 22:26:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503858086318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503858086318080[0;39m ==> Parameters: 
2022-07-27 22:26:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503858086318080[0;39m <==    Updates: 0
2022-07-27 22:26:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503858086318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:26:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503879049449472[0;39m 生成今日电子书快照开始
2022-07-27 22:26:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503879049449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503879049449472[0;39m ==> Parameters: 
2022-07-27 22:26:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503879049449472[0;39m <==    Updates: 0
2022-07-27 22:26:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503879049449472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:26:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503900067106816[0;39m 生成今日电子书快照开始
2022-07-27 22:26:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503900067106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503900067106816[0;39m ==> Parameters: 
2022-07-27 22:26:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503900067106816[0;39m <==    Updates: 0
2022-07-27 22:26:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503900067106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:26:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503921026043904[0;39m 生成今日电子书快照开始
2022-07-27 22:26:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503921026043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503921026043904[0;39m ==> Parameters: 
2022-07-27 22:26:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503921026043904[0;39m <==    Updates: 0
2022-07-27 22:26:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503921026043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:26:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207503941964009472[0;39m 更新电子书下的文档数据开始
2022-07-27 22:26:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503941964009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:26:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503941964009472[0;39m ==> Parameters: 
2022-07-27 22:26:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207503941964009472[0;39m <==    Updates: 7
2022-07-27 22:26:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207503941964009472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:26:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503941972398080[0;39m 生成今日电子书快照开始
2022-07-27 22:26:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503941972398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503941972398080[0;39m ==> Parameters: 
2022-07-27 22:26:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503941972398080[0;39m <==    Updates: 0
2022-07-27 22:26:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503941972398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:26:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503962956500992[0;39m 生成今日电子书快照开始
2022-07-27 22:26:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503962956500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503962956500992[0;39m ==> Parameters: 
2022-07-27 22:26:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503962956500992[0;39m <==    Updates: 0
2022-07-27 22:26:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503962956500992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:26:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207503983965769728[0;39m 生成今日电子书快照开始
2022-07-27 22:26:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503983965769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503983965769728[0;39m ==> Parameters: 
2022-07-27 22:26:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207503983965769728[0;39m <==    Updates: 0
2022-07-27 22:26:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207503983965769728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:26:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504004920512512[0;39m 生成今日电子书快照开始
2022-07-27 22:26:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504004920512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504004920512512[0;39m ==> Parameters: 
2022-07-27 22:26:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504004920512512[0;39m <==    Updates: 0
2022-07-27 22:26:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504004920512512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:26:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504025850089472[0;39m 生成今日电子书快照开始
2022-07-27 22:26:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504025850089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:26:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504025850089472[0;39m ==> Parameters: 
2022-07-27 22:26:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504025850089472[0;39m <==    Updates: 0
2022-07-27 22:26:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504025850089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504046884524032[0;39m 生成今日电子书快照开始
2022-07-27 22:27:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504046884524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504046884524032[0;39m ==> Parameters: 
2022-07-27 22:27:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504046884524032[0;39m <==    Updates: 0
2022-07-27 22:27:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504046884524032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:27:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504067851849728[0;39m 生成今日电子书快照开始
2022-07-27 22:27:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504067851849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504067851849728[0;39m ==> Parameters: 
2022-07-27 22:27:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504067851849728[0;39m <==    Updates: 0
2022-07-27 22:27:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504067851849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207504067860238336[0;39m 更新电子书下的文档数据开始
2022-07-27 22:27:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504067860238336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:27:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504067860238336[0;39m ==> Parameters: 
2022-07-27 22:27:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504067860238336[0;39m <==    Updates: 7
2022-07-27 22:27:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207504067860238336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:27:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504088768843776[0;39m 生成今日电子书快照开始
2022-07-27 22:27:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504088768843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504088768843776[0;39m ==> Parameters: 
2022-07-27 22:27:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504088768843776[0;39m <==    Updates: 0
2022-07-27 22:27:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504088768843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504109757140992[0;39m 生成今日电子书快照开始
2022-07-27 22:27:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504109757140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504109757140992[0;39m ==> Parameters: 
2022-07-27 22:27:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504109757140992[0;39m <==    Updates: 0
2022-07-27 22:27:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504109757140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504130745438208[0;39m 生成今日电子书快照开始
2022-07-27 22:27:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504130745438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504130745438208[0;39m ==> Parameters: 
2022-07-27 22:27:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504130745438208[0;39m <==    Updates: 0
2022-07-27 22:27:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504130745438208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504151708569600[0;39m 生成今日电子书快照开始
2022-07-27 22:27:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504151708569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504151708569600[0;39m ==> Parameters: 
2022-07-27 22:27:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504151708569600[0;39m <==    Updates: 0
2022-07-27 22:27:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504151708569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504172705255424[0;39m 生成今日电子书快照开始
2022-07-27 22:27:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504172705255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504172705255424[0;39m ==> Parameters: 
2022-07-27 22:27:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504172705255424[0;39m <==    Updates: 0
2022-07-27 22:27:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504172705255424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:27:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207504193668386816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:27:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504193668386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:27:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504193668386816[0;39m ==> Parameters: 
2022-07-27 22:27:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504193668386816[0;39m <==    Updates: 7
2022-07-27 22:27:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207504193668386816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:27:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504193676775424[0;39m 生成今日电子书快照开始
2022-07-27 22:27:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504193676775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504193676775424[0;39m ==> Parameters: 
2022-07-27 22:27:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504193676775424[0;39m <==    Updates: 0
2022-07-27 22:27:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504193676775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504214606352384[0;39m 生成今日电子书快照开始
2022-07-27 22:27:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504214606352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504214606352384[0;39m ==> Parameters: 
2022-07-27 22:27:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504214606352384[0;39m <==    Updates: 0
2022-07-27 22:27:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504214606352384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:27:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504235594649600[0;39m 生成今日电子书快照开始
2022-07-27 22:27:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504235594649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504235594649600[0;39m ==> Parameters: 
2022-07-27 22:27:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504235594649600[0;39m <==    Updates: 0
2022-07-27 22:27:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504235594649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504256549392384[0;39m 生成今日电子书快照开始
2022-07-27 22:27:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504256549392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504256549392384[0;39m ==> Parameters: 
2022-07-27 22:27:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504256549392384[0;39m <==    Updates: 0
2022-07-27 22:27:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504256549392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:27:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504277537689600[0;39m 生成今日电子书快照开始
2022-07-27 22:27:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504277537689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:27:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504277537689600[0;39m ==> Parameters: 
2022-07-27 22:27:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504277537689600[0;39m <==    Updates: 0
2022-07-27 22:27:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504277537689600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:28:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504298513403904[0;39m 生成今日电子书快照开始
2022-07-27 22:28:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504298513403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504298513403904[0;39m ==> Parameters: 
2022-07-27 22:28:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504298513403904[0;39m <==    Updates: 0
2022-07-27 22:28:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504298513403904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:28:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207504319484923904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:28:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504319484923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:28:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504319484923904[0;39m ==> Parameters: 
2022-07-27 22:28:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504319484923904[0;39m <==    Updates: 7
2022-07-27 22:28:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207504319484923904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:28:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504319493312512[0;39m 生成今日电子书快照开始
2022-07-27 22:28:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504319493312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504319493312512[0;39m ==> Parameters: 
2022-07-27 22:28:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504319493312512[0;39m <==    Updates: 0
2022-07-27 22:28:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504319493312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:28:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504340431278080[0;39m 生成今日电子书快照开始
2022-07-27 22:28:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504340431278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504340431278080[0;39m ==> Parameters: 
2022-07-27 22:28:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504340431278080[0;39m <==    Updates: 0
2022-07-27 22:28:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504340431278080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:28:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504361440546816[0;39m 生成今日电子书快照开始
2022-07-27 22:28:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504361440546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504361440546816[0;39m ==> Parameters: 
2022-07-27 22:28:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504361440546816[0;39m <==    Updates: 0
2022-07-27 22:28:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504361440546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:28:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504382370123776[0;39m 生成今日电子书快照开始
2022-07-27 22:28:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504382370123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504382370123776[0;39m ==> Parameters: 
2022-07-27 22:28:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504382370123776[0;39m <==    Updates: 0
2022-07-27 22:28:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504382370123776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:28:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504403366809600[0;39m 生成今日电子书快照开始
2022-07-27 22:28:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504403366809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504403366809600[0;39m ==> Parameters: 
2022-07-27 22:28:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504403366809600[0;39m <==    Updates: 0
2022-07-27 22:28:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504403366809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:28:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504424329940992[0;39m 生成今日电子书快照开始
2022-07-27 22:28:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504424329940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504424329940992[0;39m ==> Parameters: 
2022-07-27 22:28:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504424329940992[0;39m <==    Updates: 0
2022-07-27 22:28:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504424329940992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:28:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504445330821120[0;39m 生成今日电子书快照开始
2022-07-27 22:28:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504445330821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504445330821120[0;39m ==> Parameters: 
2022-07-27 22:28:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504445330821120[0;39m <==    Updates: 0
2022-07-27 22:28:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504445330821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:28:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207504445339209728[0;39m 更新电子书下的文档数据开始
2022-07-27 22:28:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504445339209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:28:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504445339209728[0;39m ==> Parameters: 
2022-07-27 22:28:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504445339209728[0;39m <==    Updates: 7
2022-07-27 22:28:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207504445339209728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:28:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504466260398080[0;39m 生成今日电子书快照开始
2022-07-27 22:28:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504466260398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504466260398080[0;39m ==> Parameters: 
2022-07-27 22:28:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504466260398080[0;39m <==    Updates: 0
2022-07-27 22:28:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504466260398080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:28:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504487244500992[0;39m 生成今日电子书快照开始
2022-07-27 22:28:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504487244500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504487244500992[0;39m ==> Parameters: 
2022-07-27 22:28:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504487244500992[0;39m <==    Updates: 0
2022-07-27 22:28:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504487244500992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:28:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504508257964032[0;39m 生成今日电子书快照开始
2022-07-27 22:28:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504508257964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504508257964032[0;39m ==> Parameters: 
2022-07-27 22:28:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504508257964032[0;39m <==    Updates: 0
2022-07-27 22:28:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504508257964032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:28:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504529212706816[0;39m 生成今日电子书快照开始
2022-07-27 22:28:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504529212706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:28:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504529212706816[0;39m ==> Parameters: 
2022-07-27 22:28:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504529212706816[0;39m <==    Updates: 0
2022-07-27 22:28:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504529212706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:29:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504550154866688[0;39m 生成今日电子书快照开始
2022-07-27 22:29:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504550154866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504550154866688[0;39m ==> Parameters: 
2022-07-27 22:29:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504550154866688[0;39m <==    Updates: 0
2022-07-27 22:29:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504550154866688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:29:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207504571126386688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:29:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504571126386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:29:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504571126386688[0;39m ==> Parameters: 
2022-07-27 22:29:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504571126386688[0;39m <==    Updates: 7
2022-07-27 22:29:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207504571126386688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:29:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504571130580992[0;39m 生成今日电子书快照开始
2022-07-27 22:29:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504571130580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504571130580992[0;39m ==> Parameters: 
2022-07-27 22:29:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504571130580992[0;39m <==    Updates: 0
2022-07-27 22:29:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504571130580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:29:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504592085323776[0;39m 生成今日电子书快照开始
2022-07-27 22:29:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504592085323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504592085323776[0;39m ==> Parameters: 
2022-07-27 22:29:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504592085323776[0;39m <==    Updates: 0
2022-07-27 22:29:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504592085323776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:29:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504613094592512[0;39m 生成今日电子书快照开始
2022-07-27 22:29:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504613094592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504613094592512[0;39m ==> Parameters: 
2022-07-27 22:29:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504613094592512[0;39m <==    Updates: 0
2022-07-27 22:29:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504613094592512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:29:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504634061918208[0;39m 生成今日电子书快照开始
2022-07-27 22:29:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504634061918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504634061918208[0;39m ==> Parameters: 
2022-07-27 22:29:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504634061918208[0;39m <==    Updates: 0
2022-07-27 22:29:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504634061918208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-27 22:29:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504655012466688[0;39m 生成今日电子书快照开始
2022-07-27 22:29:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504655012466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504655012466688[0;39m ==> Parameters: 
2022-07-27 22:29:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504655012466688[0;39m <==    Updates: 0
2022-07-27 22:29:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504655012466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:29:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504675988180992[0;39m 生成今日电子书快照开始
2022-07-27 22:29:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504675988180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504675988180992[0;39m ==> Parameters: 
2022-07-27 22:29:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504675988180992[0;39m <==    Updates: 0
2022-07-27 22:29:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504675988180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:29:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207504696942923776[0;39m 更新电子书下的文档数据开始
2022-07-27 22:29:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504696942923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:29:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504696942923776[0;39m ==> Parameters: 
2022-07-27 22:29:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504696942923776[0;39m <==    Updates: 7
2022-07-27 22:29:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207504696942923776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:29:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504696951312384[0;39m 生成今日电子书快照开始
2022-07-27 22:29:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504696951312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504696951312384[0;39m ==> Parameters: 
2022-07-27 22:29:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504696951312384[0;39m <==    Updates: 0
2022-07-27 22:29:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504696951312384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:29:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504717968969728[0;39m 生成今日电子书快照开始
2022-07-27 22:29:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504717968969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504717968969728[0;39m ==> Parameters: 
2022-07-27 22:29:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504717968969728[0;39m <==    Updates: 0
2022-07-27 22:29:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504717968969728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:29:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504738911129600[0;39m 生成今日电子书快照开始
2022-07-27 22:29:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504738911129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504738911129600[0;39m ==> Parameters: 
2022-07-27 22:29:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504738911129600[0;39m <==    Updates: 0
2022-07-27 22:29:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504738911129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:29:50.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504759849095168[0;39m 生成今日电子书快照开始
2022-07-27 22:29:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504759849095168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504759849095168[0;39m ==> Parameters: 
2022-07-27 22:29:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504759849095168[0;39m <==    Updates: 0
2022-07-27 22:29:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504759849095168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:29:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504780862558208[0;39m 生成今日电子书快照开始
2022-07-27 22:29:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504780862558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:29:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504780862558208[0;39m ==> Parameters: 
2022-07-27 22:29:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504780862558208[0;39m <==    Updates: 0
2022-07-27 22:29:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504780862558208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504801859244032[0;39m 生成今日电子书快照开始
2022-07-27 22:30:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504801859244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504801859244032[0;39m ==> Parameters: 
2022-07-27 22:30:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504801859244032[0;39m <==    Updates: 0
2022-07-27 22:30:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504801859244032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207504822805598208[0;39m 更新电子书下的文档数据开始
2022-07-27 22:30:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504822805598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:30:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504822805598208[0;39m ==> Parameters: 
2022-07-27 22:30:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504822805598208[0;39m <==    Updates: 7
2022-07-27 22:30:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207504822805598208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:30:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504822813986816[0;39m 生成今日电子书快照开始
2022-07-27 22:30:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504822813986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504822813986816[0;39m ==> Parameters: 
2022-07-27 22:30:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504822813986816[0;39m <==    Updates: 0
2022-07-27 22:30:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504822813986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504843781312512[0;39m 生成今日电子书快照开始
2022-07-27 22:30:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504843781312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504843781312512[0;39m ==> Parameters: 
2022-07-27 22:30:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504843781312512[0;39m <==    Updates: 0
2022-07-27 22:30:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504843781312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504864757026816[0;39m 生成今日电子书快照开始
2022-07-27 22:30:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504864757026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504864757026816[0;39m ==> Parameters: 
2022-07-27 22:30:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504864757026816[0;39m <==    Updates: 0
2022-07-27 22:30:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504864757026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504885711769600[0;39m 生成今日电子书快照开始
2022-07-27 22:30:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504885711769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504885711769600[0;39m ==> Parameters: 
2022-07-27 22:30:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504885711769600[0;39m <==    Updates: 0
2022-07-27 22:30:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504885711769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504906700066816[0;39m 生成今日电子书快照开始
2022-07-27 22:30:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504906700066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504906700066816[0;39m ==> Parameters: 
2022-07-27 22:30:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504906700066816[0;39m <==    Updates: 0
2022-07-27 22:30:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504906700066816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:30:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504927633838080[0;39m 生成今日电子书快照开始
2022-07-27 22:30:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504927633838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504927633838080[0;39m ==> Parameters: 
2022-07-27 22:30:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504927633838080[0;39m <==    Updates: 0
2022-07-27 22:30:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504927633838080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:30:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504948601163776[0;39m 生成今日电子书快照开始
2022-07-27 22:30:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504948601163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504948601163776[0;39m ==> Parameters: 
2022-07-27 22:30:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504948601163776[0;39m <==    Updates: 0
2022-07-27 22:30:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504948601163776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:30:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207504948613746688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:30:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504948613746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:30:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504948613746688[0;39m ==> Parameters: 
2022-07-27 22:30:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207504948613746688[0;39m <==    Updates: 7
2022-07-27 22:30:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207504948613746688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:30:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504969597849600[0;39m 生成今日电子书快照开始
2022-07-27 22:30:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504969597849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504969597849600[0;39m ==> Parameters: 
2022-07-27 22:30:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504969597849600[0;39m <==    Updates: 0
2022-07-27 22:30:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504969597849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207504990581952512[0;39m 生成今日电子书快照开始
2022-07-27 22:30:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504990581952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504990581952512[0;39m ==> Parameters: 
2022-07-27 22:30:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207504990581952512[0;39m <==    Updates: 0
2022-07-27 22:30:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207504990581952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505011524112384[0;39m 生成今日电子书快照开始
2022-07-27 22:30:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505011524112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505011524112384[0;39m ==> Parameters: 
2022-07-27 22:30:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505011524112384[0;39m <==    Updates: 0
2022-07-27 22:30:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505011524112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:30:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505032524992512[0;39m 生成今日电子书快照开始
2022-07-27 22:30:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505032524992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:30:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505032524992512[0;39m ==> Parameters: 
2022-07-27 22:30:55.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505032524992512[0;39m <==    Updates: 0
2022-07-27 22:30:55.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505032524992512[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:31:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505053517484032[0;39m 生成今日电子书快照开始
2022-07-27 22:31:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505053517484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505053517484032[0;39m ==> Parameters: 
2022-07-27 22:31:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505053517484032[0;39m <==    Updates: 0
2022-07-27 22:31:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505053517484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:31:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207505074438672384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:31:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505074438672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:31:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505074438672384[0;39m ==> Parameters: 
2022-07-27 22:31:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505074438672384[0;39m <==    Updates: 7
2022-07-27 22:31:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207505074438672384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:31:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505074447060992[0;39m 生成今日电子书快照开始
2022-07-27 22:31:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505074447060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505074447060992[0;39m ==> Parameters: 
2022-07-27 22:31:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505074447060992[0;39m <==    Updates: 0
2022-07-27 22:31:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505074447060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:31:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505095405998080[0;39m 生成今日电子书快照开始
2022-07-27 22:31:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505095405998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505095405998080[0;39m ==> Parameters: 
2022-07-27 22:31:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505095405998080[0;39m <==    Updates: 0
2022-07-27 22:31:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505095405998080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:31:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505116381712384[0;39m 生成今日电子书快照开始
2022-07-27 22:31:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505116381712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505116381712384[0;39m ==> Parameters: 
2022-07-27 22:31:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505116381712384[0;39m <==    Updates: 0
2022-07-27 22:31:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505116381712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:31:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505137370009600[0;39m 生成今日电子书快照开始
2022-07-27 22:31:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505137370009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505137370009600[0;39m ==> Parameters: 
2022-07-27 22:31:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505137370009600[0;39m <==    Updates: 0
2022-07-27 22:31:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505137370009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:31:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505158345723904[0;39m 生成今日电子书快照开始
2022-07-27 22:31:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505158345723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505158345723904[0;39m ==> Parameters: 
2022-07-27 22:31:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505158345723904[0;39m <==    Updates: 0
2022-07-27 22:31:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505158345723904[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:31:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505179325632512[0;39m 生成今日电子书快照开始
2022-07-27 22:31:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505179325632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505179325632512[0;39m ==> Parameters: 
2022-07-27 22:31:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505179325632512[0;39m <==    Updates: 0
2022-07-27 22:31:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505179325632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:31:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505200288763904[0;39m 生成今日电子书快照开始
2022-07-27 22:31:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505200288763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505200288763904[0;39m ==> Parameters: 
2022-07-27 22:31:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505200288763904[0;39m <==    Updates: 0
2022-07-27 22:31:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505200288763904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:31:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207505200301346816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:31:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505200301346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:31:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505200301346816[0;39m ==> Parameters: 
2022-07-27 22:31:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505200301346816[0;39m <==    Updates: 7
2022-07-27 22:31:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207505200301346816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:31:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505221260283904[0;39m 生成今日电子书快照开始
2022-07-27 22:31:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505221260283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505221260283904[0;39m ==> Parameters: 
2022-07-27 22:31:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505221260283904[0;39m <==    Updates: 0
2022-07-27 22:31:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505221260283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:31:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505242215026688[0;39m 生成今日电子书快照开始
2022-07-27 22:31:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505242215026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505242215026688[0;39m ==> Parameters: 
2022-07-27 22:31:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505242215026688[0;39m <==    Updates: 0
2022-07-27 22:31:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505242215026688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:31:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505263173963776[0;39m 生成今日电子书快照开始
2022-07-27 22:31:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505263173963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505263173963776[0;39m ==> Parameters: 
2022-07-27 22:31:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505263173963776[0;39m <==    Updates: 0
2022-07-27 22:31:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505263173963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:31:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505284153872384[0;39m 生成今日电子书快照开始
2022-07-27 22:31:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505284153872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:31:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505284153872384[0;39m ==> Parameters: 
2022-07-27 22:31:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505284153872384[0;39m <==    Updates: 0
2022-07-27 22:31:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505284153872384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:32:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505305163141120[0;39m 生成今日电子书快照开始
2022-07-27 22:32:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505305163141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505305163141120[0;39m ==> Parameters: 
2022-07-27 22:32:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505305163141120[0;39m <==    Updates: 0
2022-07-27 22:32:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505305163141120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:32:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207505326113689600[0;39m 更新电子书下的文档数据开始
2022-07-27 22:32:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505326113689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:32:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505326113689600[0;39m ==> Parameters: 
2022-07-27 22:32:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505326113689600[0;39m <==    Updates: 7
2022-07-27 22:32:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207505326113689600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:32:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505326122078208[0;39m 生成今日电子书快照开始
2022-07-27 22:32:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505326122078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505326122078208[0;39m ==> Parameters: 
2022-07-27 22:32:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505326122078208[0;39m <==    Updates: 0
2022-07-27 22:32:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505326122078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:32:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505347081015296[0;39m 生成今日电子书快照开始
2022-07-27 22:32:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505347081015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505347081015296[0;39m ==> Parameters: 
2022-07-27 22:32:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505347081015296[0;39m <==    Updates: 0
2022-07-27 22:32:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505347081015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:32:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505368090284032[0;39m 生成今日电子书快照开始
2022-07-27 22:32:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505368090284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505368090284032[0;39m ==> Parameters: 
2022-07-27 22:32:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505368090284032[0;39m <==    Updates: 0
2022-07-27 22:32:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505368090284032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:32:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505389061804032[0;39m 生成今日电子书快照开始
2022-07-27 22:32:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505389061804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505389061804032[0;39m ==> Parameters: 
2022-07-27 22:32:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505389061804032[0;39m <==    Updates: 0
2022-07-27 22:32:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505389061804032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:32:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505409974603776[0;39m 生成今日电子书快照开始
2022-07-27 22:32:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505409974603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505409974603776[0;39m ==> Parameters: 
2022-07-27 22:32:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505409974603776[0;39m <==    Updates: 0
2022-07-27 22:32:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505409974603776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:32:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505431000649728[0;39m 生成今日电子书快照开始
2022-07-27 22:32:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505431000649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505431000649728[0;39m ==> Parameters: 
2022-07-27 22:32:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505431000649728[0;39m <==    Updates: 0
2022-07-27 22:32:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505431000649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:32:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207505451947003904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:32:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505451947003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:32:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505451947003904[0;39m ==> Parameters: 
2022-07-27 22:32:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505451947003904[0;39m <==    Updates: 7
2022-07-27 22:32:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207505451947003904[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-27 22:32:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505451972169728[0;39m 生成今日电子书快照开始
2022-07-27 22:32:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505451972169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505451972169728[0;39m ==> Parameters: 
2022-07-27 22:32:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505451972169728[0;39m <==    Updates: 0
2022-07-27 22:32:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505451972169728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:32:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505472926912512[0;39m 生成今日电子书快照开始
2022-07-27 22:32:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505472926912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505472926912512[0;39m ==> Parameters: 
2022-07-27 22:32:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505472926912512[0;39m <==    Updates: 0
2022-07-27 22:32:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505472926912512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:32:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505493915209728[0;39m 生成今日电子书快照开始
2022-07-27 22:32:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505493915209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505493915209728[0;39m ==> Parameters: 
2022-07-27 22:32:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505493915209728[0;39m <==    Updates: 0
2022-07-27 22:32:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505493915209728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:32:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505514865758208[0;39m 生成今日电子书快照开始
2022-07-27 22:32:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505514865758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505514865758208[0;39m ==> Parameters: 
2022-07-27 22:32:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505514865758208[0;39m <==    Updates: 0
2022-07-27 22:32:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505514865758208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:32:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505535828889600[0;39m 生成今日电子书快照开始
2022-07-27 22:32:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505535828889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:32:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505535828889600[0;39m ==> Parameters: 
2022-07-27 22:32:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505535828889600[0;39m <==    Updates: 0
2022-07-27 22:32:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505535828889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:33:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505556792020992[0;39m 生成今日电子书快照开始
2022-07-27 22:33:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505556792020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505556792020992[0;39m ==> Parameters: 
2022-07-27 22:33:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505556792020992[0;39m <==    Updates: 0
2022-07-27 22:33:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505556792020992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:33:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207505577801289728[0;39m 更新电子书下的文档数据开始
2022-07-27 22:33:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505577801289728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:33:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505577801289728[0;39m ==> Parameters: 
2022-07-27 22:33:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505577801289728[0;39m <==    Updates: 7
2022-07-27 22:33:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207505577801289728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:33:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505577809678336[0;39m 生成今日电子书快照开始
2022-07-27 22:33:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505577809678336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505577809678336[0;39m ==> Parameters: 
2022-07-27 22:33:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505577809678336[0;39m <==    Updates: 0
2022-07-27 22:33:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505577809678336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:33:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505598756032512[0;39m 生成今日电子书快照开始
2022-07-27 22:33:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505598756032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505598756032512[0;39m ==> Parameters: 
2022-07-27 22:33:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505598756032512[0;39m <==    Updates: 0
2022-07-27 22:33:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505598756032512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:33:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505619689803776[0;39m 生成今日电子书快照开始
2022-07-27 22:33:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505619689803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505619689803776[0;39m ==> Parameters: 
2022-07-27 22:33:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505619689803776[0;39m <==    Updates: 0
2022-07-27 22:33:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505619689803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:33:15.219 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-27 22:33:15.220 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-27 22:33:15.220 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 0 ms
2022-07-27 22:33:15.221 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-27 22:33:15.221 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-27 22:33:15.221 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m                  [0;39m 登录校验开始，token：207474798689914880
2022-07-27 22:33:15.399 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m                  [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"207474798689914880"}
2022-07-27 22:33:15.410 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207505621396885504[0;39m ------------- 开始 -------------
2022-07-27 22:33:15.410 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207505621396885504[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-27 22:33:15.410 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207505621396885504[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-27 22:33:15.411 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207505621396885504[0;39m 远程地址: 127.0.0.1
2022-07-27 22:33:15.414 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207505621396885504[0;39m 请求参数: [{"content":"<blockquote><ul><li><font size=\"4\">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size=\"4\">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size=\"4\">Vue3数据绑定显示列表数据（双向数据绑定）<br>ref():实时将后端的值刷新到前端页面上</font></li></ul></blockquote>","ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2}]
2022-07-27 22:33:15.437 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207505621396885504[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-27 22:33:15.438 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207505621396885504[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), 前后端交互融合(String), 5(Integer), 5(Integer), 2(Integer), 202715322204164096(Long)
2022-07-27 22:33:15.438 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207505621396885504[0;39m <==    Updates: 1
2022-07-27 22:33:15.439 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207505621396885504[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-27 22:33:15.439 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207505621396885504[0;39m ==> Parameters: <blockquote><ul><li><font size="4">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size="4">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size="4">Vue3数据绑定显示列表数据（双向数据绑定）<br>ref():实时将后端的值刷新到前端页面上</font></li></ul></blockquote>(String), 202715322204164096(Long)
2022-07-27 22:33:15.440 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207505621396885504[0;39m <==    Updates: 1
2022-07-27 22:33:15.451 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207505621396885504[0;39m 返回结果: {"success":true}
2022-07-27 22:33:15.451 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207505621396885504[0;39m ------------- 结束 耗时：42 ms -------------
2022-07-27 22:33:15.453 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m207505621396885504[0;39m ------------- LoginInterceptor 结束 耗时：232 ms -------------
2022-07-27 22:33:15.467 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207505621640155136[0;39m ------------- 开始 -------------
2022-07-27 22:33:15.468 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207505621640155136[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-27 22:33:15.468 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207505621640155136[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-27 22:33:15.468 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207505621640155136[0;39m 远程地址: 127.0.0.1
2022-07-27 22:33:15.468 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207505621640155136[0;39m 请求参数: [202714600712572928]
2022-07-27 22:33:15.471 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207505621640155136[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-27 22:33:15.472 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207505621640155136[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-27 22:33:15.473 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 22:33:15.473 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 24, 2
2022-07-27 22:33:15.473 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 25, 3
2022-07-27 22:33:15.474 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 24, 2
2022-07-27 22:33:15.474 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 13, 2
2022-07-27 22:33:15.474 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 5, 2
2022-07-27 22:33:15.474 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-27 22:33:15.475 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-27 22:33:15.475 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 3, 1
2022-07-27 22:33:15.475 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-27 22:33:15.475 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-27 22:33:15.476 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-27 22:33:15.476 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207505621640155136[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-27 22:33:15.476 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207505621640155136[0;39m <==      Total: 12
2022-07-27 22:33:15.481 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207505621640155136[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":25,"voteCount":3},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":13,"voteCount":2},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-27 22:33:15.481 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207505621640155136[0;39m ------------- 结束 耗时：14 ms -------------
2022-07-27 22:33:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505640703266816[0;39m 生成今日电子书快照开始
2022-07-27 22:33:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505640703266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505640703266816[0;39m ==> Parameters: 
2022-07-27 22:33:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505640703266816[0;39m <==    Updates: 0
2022-07-27 22:33:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505640703266816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:33:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505661641232384[0;39m 生成今日电子书快照开始
2022-07-27 22:33:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505661641232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505661641232384[0;39m ==> Parameters: 
2022-07-27 22:33:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505661641232384[0;39m <==    Updates: 0
2022-07-27 22:33:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505661641232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:33:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505682637918208[0;39m 生成今日电子书快照开始
2022-07-27 22:33:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505682637918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505682637918208[0;39m ==> Parameters: 
2022-07-27 22:33:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505682637918208[0;39m <==    Updates: 0
2022-07-27 22:33:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505682637918208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:33:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207505703617826816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:33:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505703617826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:33:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505703617826816[0;39m ==> Parameters: 
2022-07-27 22:33:35.096 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505703617826816[0;39m <==    Updates: 7
2022-07-27 22:33:35.096 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207505703617826816[0;39m 更新电子书下的文档数据结束，耗时：84 毫秒
2022-07-27 22:33:35.097 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505703974342656[0;39m 生成今日电子书快照开始
2022-07-27 22:33:35.097 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505703974342656[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:35.097 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505703974342656[0;39m ==> Parameters: 
2022-07-27 22:33:35.128 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505703974342656[0;39m <==    Updates: 0
2022-07-27 22:33:35.128 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505703974342656[0;39m 生成今日电子书快照结束，耗时：31 毫秒
2022-07-27 22:33:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505724559986688[0;39m 生成今日电子书快照开始
2022-07-27 22:33:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505724559986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505724559986688[0;39m ==> Parameters: 
2022-07-27 22:33:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505724559986688[0;39m <==    Updates: 0
2022-07-27 22:33:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505724559986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:33:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505745535700992[0;39m 生成今日电子书快照开始
2022-07-27 22:33:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505745535700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505745535700992[0;39m ==> Parameters: 
2022-07-27 22:33:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505745535700992[0;39m <==    Updates: 0
2022-07-27 22:33:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505745535700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:33:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505766528192512[0;39m 生成今日电子书快照开始
2022-07-27 22:33:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505766528192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505766528192512[0;39m ==> Parameters: 
2022-07-27 22:33:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505766528192512[0;39m <==    Updates: 0
2022-07-27 22:33:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505766528192512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:33:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505787495518208[0;39m 生成今日电子书快照开始
2022-07-27 22:33:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505787495518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:33:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505787495518208[0;39m ==> Parameters: 
2022-07-27 22:33:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505787495518208[0;39m <==    Updates: 0
2022-07-27 22:33:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505787495518208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:34:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505808467038208[0;39m 生成今日电子书快照开始
2022-07-27 22:34:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505808467038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505808467038208[0;39m ==> Parameters: 
2022-07-27 22:34:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505808467038208[0;39m <==    Updates: 0
2022-07-27 22:34:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505808467038208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:34:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505829425975296[0;39m 生成今日电子书快照开始
2022-07-27 22:34:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505829425975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505829425975296[0;39m ==> Parameters: 
2022-07-27 22:34:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505829425975296[0;39m <==    Updates: 0
2022-07-27 22:34:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505829425975296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:34:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207505829446946816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:34:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505829446946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:34:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505829446946816[0;39m ==> Parameters: 
2022-07-27 22:34:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505829446946816[0;39m <==    Updates: 7
2022-07-27 22:34:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207505829446946816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:34:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505850376523776[0;39m 生成今日电子书快照开始
2022-07-27 22:34:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505850376523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505850376523776[0;39m ==> Parameters: 
2022-07-27 22:34:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505850376523776[0;39m <==    Updates: 0
2022-07-27 22:34:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505850376523776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:34:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505871364820992[0;39m 生成今日电子书快照开始
2022-07-27 22:34:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505871364820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505871364820992[0;39m ==> Parameters: 
2022-07-27 22:34:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505871364820992[0;39m <==    Updates: 0
2022-07-27 22:34:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505871364820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:34:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505892353118208[0;39m 生成今日电子书快照开始
2022-07-27 22:34:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505892353118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505892353118208[0;39m ==> Parameters: 
2022-07-27 22:34:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505892353118208[0;39m <==    Updates: 0
2022-07-27 22:34:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505892353118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:34:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505913299472384[0;39m 生成今日电子书快照开始
2022-07-27 22:34:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505913299472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505913299472384[0;39m ==> Parameters: 
2022-07-27 22:34:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505913299472384[0;39m <==    Updates: 0
2022-07-27 22:34:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505913299472384[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:34:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505934283575296[0;39m 生成今日电子书快照开始
2022-07-27 22:34:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505934283575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505934283575296[0;39m ==> Parameters: 
2022-07-27 22:34:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505934283575296[0;39m <==    Updates: 0
2022-07-27 22:34:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505934283575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:34:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207505955246706688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:34:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505955246706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:34:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505955246706688[0;39m ==> Parameters: 
2022-07-27 22:34:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207505955246706688[0;39m <==    Updates: 7
2022-07-27 22:34:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207505955246706688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:34:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505955255095296[0;39m 生成今日电子书快照开始
2022-07-27 22:34:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505955255095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505955255095296[0;39m ==> Parameters: 
2022-07-27 22:34:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505955255095296[0;39m <==    Updates: 0
2022-07-27 22:34:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505955255095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:34:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505976247586816[0;39m 生成今日电子书快照开始
2022-07-27 22:34:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505976247586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505976247586816[0;39m ==> Parameters: 
2022-07-27 22:34:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505976247586816[0;39m <==    Updates: 0
2022-07-27 22:34:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505976247586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:34:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207505997177163776[0;39m 生成今日电子书快照开始
2022-07-27 22:34:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505997177163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505997177163776[0;39m ==> Parameters: 
2022-07-27 22:34:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207505997177163776[0;39m <==    Updates: 0
2022-07-27 22:34:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207505997177163776[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:34:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506018186432512[0;39m 生成今日电子书快照开始
2022-07-27 22:34:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506018186432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506018186432512[0;39m ==> Parameters: 
2022-07-27 22:34:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506018186432512[0;39m <==    Updates: 0
2022-07-27 22:34:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506018186432512[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 22:34:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506039141175296[0;39m 生成今日电子书快照开始
2022-07-27 22:34:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506039141175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:34:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506039141175296[0;39m ==> Parameters: 
2022-07-27 22:34:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506039141175296[0;39m <==    Updates: 0
2022-07-27 22:34:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506039141175296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:35:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506060137861120[0;39m 生成今日电子书快照开始
2022-07-27 22:35:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506060137861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506060137861120[0;39m ==> Parameters: 
2022-07-27 22:35:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506060137861120[0;39m <==    Updates: 0
2022-07-27 22:35:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506060137861120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:35:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207506081105186816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:35:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506081105186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:35:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506081105186816[0;39m ==> Parameters: 
2022-07-27 22:35:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506081105186816[0;39m <==    Updates: 7
2022-07-27 22:35:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207506081105186816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:35:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506081109381120[0;39m 生成今日电子书快照开始
2022-07-27 22:35:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506081109381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506081109381120[0;39m ==> Parameters: 
2022-07-27 22:35:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506081109381120[0;39m <==    Updates: 0
2022-07-27 22:35:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506081109381120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506102038958080[0;39m 生成今日电子书快照开始
2022-07-27 22:35:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506102038958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506102038958080[0;39m ==> Parameters: 
2022-07-27 22:35:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506102038958080[0;39m <==    Updates: 0
2022-07-27 22:35:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506102038958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506123027255296[0;39m 生成今日电子书快照开始
2022-07-27 22:35:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506123027255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506123027255296[0;39m ==> Parameters: 
2022-07-27 22:35:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506123027255296[0;39m <==    Updates: 0
2022-07-27 22:35:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506123027255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506144019746816[0;39m 生成今日电子书快照开始
2022-07-27 22:35:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506144019746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506144019746816[0;39m ==> Parameters: 
2022-07-27 22:35:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506144019746816[0;39m <==    Updates: 0
2022-07-27 22:35:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506144019746816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506164982878208[0;39m 生成今日电子书快照开始
2022-07-27 22:35:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506164982878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506164982878208[0;39m ==> Parameters: 
2022-07-27 22:35:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506164982878208[0;39m <==    Updates: 0
2022-07-27 22:35:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506164982878208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506185946009600[0;39m 生成今日电子书快照开始
2022-07-27 22:35:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506185946009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506185946009600[0;39m ==> Parameters: 
2022-07-27 22:35:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506185946009600[0;39m <==    Updates: 0
2022-07-27 22:35:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506185946009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207506206946889728[0;39m 更新电子书下的文档数据开始
2022-07-27 22:35:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506206946889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:35:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506206946889728[0;39m ==> Parameters: 
2022-07-27 22:35:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506206946889728[0;39m <==    Updates: 7
2022-07-27 22:35:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207506206946889728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:35:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506206955278336[0;39m 生成今日电子书快照开始
2022-07-27 22:35:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506206955278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506206955278336[0;39m ==> Parameters: 
2022-07-27 22:35:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506206955278336[0;39m <==    Updates: 0
2022-07-27 22:35:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506206955278336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:35:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506227889049600[0;39m 生成今日电子书快照开始
2022-07-27 22:35:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506227889049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506227889049600[0;39m ==> Parameters: 
2022-07-27 22:35:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506227889049600[0;39m <==    Updates: 0
2022-07-27 22:35:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506227889049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506248894124032[0;39m 生成今日电子书快照开始
2022-07-27 22:35:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506248894124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506248894124032[0;39m ==> Parameters: 
2022-07-27 22:35:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506248894124032[0;39m <==    Updates: 0
2022-07-27 22:35:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506248894124032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506269844672512[0;39m 生成今日电子书快照开始
2022-07-27 22:35:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506269844672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506269844672512[0;39m ==> Parameters: 
2022-07-27 22:35:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506269844672512[0;39m <==    Updates: 0
2022-07-27 22:35:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506269844672512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:35:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506290782638080[0;39m 生成今日电子书快照开始
2022-07-27 22:35:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506290782638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:35:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506290782638080[0;39m ==> Parameters: 
2022-07-27 22:35:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506290782638080[0;39m <==    Updates: 0
2022-07-27 22:35:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506290782638080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:36:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506311791906816[0;39m 生成今日电子书快照开始
2022-07-27 22:36:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506311791906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506311791906816[0;39m ==> Parameters: 
2022-07-27 22:36:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506311791906816[0;39m <==    Updates: 0
2022-07-27 22:36:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506311791906816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:36:04.062 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-27 22:36:04.062 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-27 22:36:04.062 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m                  [0;39m 登录校验开始，token：207474798689914880
2022-07-27 22:36:04.099 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m                  [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"207474798689914880"}
2022-07-27 22:36:04.100 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207506328938221568[0;39m ------------- 开始 -------------
2022-07-27 22:36:04.101 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207506328938221568[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-27 22:36:04.101 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207506328938221568[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-27 22:36:04.101 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207506328938221568[0;39m 远程地址: 127.0.0.1
2022-07-27 22:36:04.101 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207506328938221568[0;39m 请求参数: [{"content":"<blockquote><ul><li><font size=\"4\">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size=\"4\">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size=\"4\">Vue3数据绑定显示列表数据（双向数据绑定）<br><font face=\"仿宋\">实时将后端的值刷新到前端页面上，html代码要拿到响应式变量，需要在setup最后return出去，大体流程如下：<br>前端页面写上{{ebooks}}<br>eg：const=ebooks ref():<br>return {ebooks</font></font><font face=\"仿宋\">}</font></li></ul></blockquote>","ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2}]
2022-07-27 22:36:04.102 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207506328938221568[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-27 22:36:04.102 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207506328938221568[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), 前后端交互融合(String), 5(Integer), 5(Integer), 2(Integer), 202715322204164096(Long)
2022-07-27 22:36:04.103 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207506328938221568[0;39m <==    Updates: 1
2022-07-27 22:36:04.104 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207506328938221568[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-27 22:36:04.104 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207506328938221568[0;39m ==> Parameters: <blockquote><ul><li><font size="4">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size="4">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size="4">Vue3数据绑定显示列表数据（双向数据绑定）<br><font face="仿宋">实时将后端的值刷新到前端页面上，html代码要拿到响应式变量，需要在setup最后return出去，大体流程如下：<br>前端页面写上{{ebooks}}<br>eg：const=ebooks ref():<br>return {ebooks</font></font><font face="仿宋">}</font></li></ul></blockquote>(String), 202715322204164096(Long)
2022-07-27 22:36:04.110 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207506328938221568[0;39m <==    Updates: 1
2022-07-27 22:36:04.198 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207506328938221568[0;39m 返回结果: {"success":true}
2022-07-27 22:36:04.199 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207506328938221568[0;39m ------------- 结束 耗时：99 ms -------------
2022-07-27 22:36:04.199 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m207506328938221568[0;39m ------------- LoginInterceptor 结束 耗时：137 ms -------------
2022-07-27 22:36:04.210 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207506329399595008[0;39m ------------- 开始 -------------
2022-07-27 22:36:04.210 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207506329399595008[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-27 22:36:04.210 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207506329399595008[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-27 22:36:04.210 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207506329399595008[0;39m 远程地址: 127.0.0.1
2022-07-27 22:36:04.210 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207506329399595008[0;39m 请求参数: [202714600712572928]
2022-07-27 22:36:04.211 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207506329399595008[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-27 22:36:04.211 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207506329399595008[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-27 22:36:04.212 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 22:36:04.213 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 24, 2
2022-07-27 22:36:04.213 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 25, 3
2022-07-27 22:36:04.213 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 24, 2
2022-07-27 22:36:04.214 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 13, 2
2022-07-27 22:36:04.215 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 5, 2
2022-07-27 22:36:04.216 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-27 22:36:04.216 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-27 22:36:04.216 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 3, 1
2022-07-27 22:36:04.216 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-27 22:36:04.216 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-27 22:36:04.217 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-27 22:36:04.217 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207506329399595008[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-27 22:36:04.217 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207506329399595008[0;39m <==      Total: 12
2022-07-27 22:36:04.221 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207506329399595008[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":25,"voteCount":3},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":13,"voteCount":2},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-27 22:36:04.221 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207506329399595008[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-27 22:36:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207506332734066688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:36:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506332734066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:36:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506332734066688[0;39m ==> Parameters: 
2022-07-27 22:36:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506332734066688[0;39m <==    Updates: 7
2022-07-27 22:36:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207506332734066688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:36:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506332738260992[0;39m 生成今日电子书快照开始
2022-07-27 22:36:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506332738260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506332738260992[0;39m ==> Parameters: 
2022-07-27 22:36:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506332738260992[0;39m <==    Updates: 0
2022-07-27 22:36:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506332738260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:36:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506353734946816[0;39m 生成今日电子书快照开始
2022-07-27 22:36:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506353734946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506353734946816[0;39m ==> Parameters: 
2022-07-27 22:36:10.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506353734946816[0;39m <==    Updates: 0
2022-07-27 22:36:10.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506353734946816[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:36:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506374660329472[0;39m 生成今日电子书快照开始
2022-07-27 22:36:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506374660329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506374660329472[0;39m ==> Parameters: 
2022-07-27 22:36:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506374660329472[0;39m <==    Updates: 0
2022-07-27 22:36:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506374660329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:36:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506395661209600[0;39m 生成今日电子书快照开始
2022-07-27 22:36:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506395661209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506395661209600[0;39m ==> Parameters: 
2022-07-27 22:36:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506395661209600[0;39m <==    Updates: 0
2022-07-27 22:36:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506395661209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:36:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506416657895424[0;39m 生成今日电子书快照开始
2022-07-27 22:36:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506416657895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506416657895424[0;39m ==> Parameters: 
2022-07-27 22:36:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506416657895424[0;39m <==    Updates: 0
2022-07-27 22:36:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506416657895424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:36:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506437600055296[0;39m 生成今日电子书快照开始
2022-07-27 22:36:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506437600055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506437600055296[0;39m ==> Parameters: 
2022-07-27 22:36:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506437600055296[0;39m <==    Updates: 0
2022-07-27 22:36:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506437600055296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:36:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207506458609324032[0;39m 更新电子书下的文档数据开始
2022-07-27 22:36:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506458609324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:36:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506458609324032[0;39m ==> Parameters: 
2022-07-27 22:36:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506458609324032[0;39m <==    Updates: 7
2022-07-27 22:36:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207506458609324032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:36:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506458613518336[0;39m 生成今日电子书快照开始
2022-07-27 22:36:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506458613518336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506458613518336[0;39m ==> Parameters: 
2022-07-27 22:36:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506458613518336[0;39m <==    Updates: 0
2022-07-27 22:36:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506458613518336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:36:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506479547289600[0;39m 生成今日电子书快照开始
2022-07-27 22:36:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506479547289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506479547289600[0;39m ==> Parameters: 
2022-07-27 22:36:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506479547289600[0;39m <==    Updates: 0
2022-07-27 22:36:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506479547289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:36:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506500548169728[0;39m 生成今日电子书快照开始
2022-07-27 22:36:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506500548169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506500548169728[0;39m ==> Parameters: 
2022-07-27 22:36:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506500548169728[0;39m <==    Updates: 0
2022-07-27 22:36:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506500548169728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:36:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506521528078336[0;39m 生成今日电子书快照开始
2022-07-27 22:36:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506521528078336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506521528078336[0;39m ==> Parameters: 
2022-07-27 22:36:50.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506521528078336[0;39m <==    Updates: 0
2022-07-27 22:36:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506521528078336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:36:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506542466043904[0;39m 生成今日电子书快照开始
2022-07-27 22:36:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506542466043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:36:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506542466043904[0;39m ==> Parameters: 
2022-07-27 22:36:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506542466043904[0;39m <==    Updates: 0
2022-07-27 22:36:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506542466043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:37:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506563412398080[0;39m 生成今日电子书快照开始
2022-07-27 22:37:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506563412398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506563412398080[0;39m ==> Parameters: 
2022-07-27 22:37:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506563412398080[0;39m <==    Updates: 0
2022-07-27 22:37:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506563412398080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:37:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207506584392306688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:37:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506584392306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:37:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506584392306688[0;39m ==> Parameters: 
2022-07-27 22:37:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506584392306688[0;39m <==    Updates: 7
2022-07-27 22:37:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207506584392306688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:37:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506584400695296[0;39m 生成今日电子书快照开始
2022-07-27 22:37:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506584400695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506584400695296[0;39m ==> Parameters: 
2022-07-27 22:37:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506584400695296[0;39m <==    Updates: 0
2022-07-27 22:37:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506584400695296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:37:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506605405769728[0;39m 生成今日电子书快照开始
2022-07-27 22:37:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506605405769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506605405769728[0;39m ==> Parameters: 
2022-07-27 22:37:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506605405769728[0;39m <==    Updates: 0
2022-07-27 22:37:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506605405769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:37:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506626335346688[0;39m 生成今日电子书快照开始
2022-07-27 22:37:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506626335346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506626335346688[0;39m ==> Parameters: 
2022-07-27 22:37:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506626335346688[0;39m <==    Updates: 0
2022-07-27 22:37:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506626335346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:37:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506647319449600[0;39m 生成今日电子书快照开始
2022-07-27 22:37:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506647319449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506647319449600[0;39m ==> Parameters: 
2022-07-27 22:37:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506647319449600[0;39m <==    Updates: 0
2022-07-27 22:37:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506647319449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:37:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506668290969600[0;39m 生成今日电子书快照开始
2022-07-27 22:37:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506668290969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506668290969600[0;39m ==> Parameters: 
2022-07-27 22:37:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506668290969600[0;39m <==    Updates: 0
2022-07-27 22:37:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506668290969600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:37:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506689258295296[0;39m 生成今日电子书快照开始
2022-07-27 22:37:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506689258295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506689258295296[0;39m ==> Parameters: 
2022-07-27 22:37:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506689258295296[0;39m <==    Updates: 0
2022-07-27 22:37:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506689258295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:37:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207506710225620992[0;39m 更新电子书下的文档数据开始
2022-07-27 22:37:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506710225620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:37:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506710225620992[0;39m ==> Parameters: 
2022-07-27 22:37:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506710225620992[0;39m <==    Updates: 7
2022-07-27 22:37:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207506710225620992[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-27 22:37:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506710250786816[0;39m 生成今日电子书快照开始
2022-07-27 22:37:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506710250786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506710250786816[0;39m ==> Parameters: 
2022-07-27 22:37:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506710250786816[0;39m <==    Updates: 0
2022-07-27 22:37:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506710250786816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:37:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506731188752384[0;39m 生成今日电子书快照开始
2022-07-27 22:37:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506731188752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506731188752384[0;39m ==> Parameters: 
2022-07-27 22:37:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506731188752384[0;39m <==    Updates: 0
2022-07-27 22:37:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506731188752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:37:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506752198021120[0;39m 生成今日电子书快照开始
2022-07-27 22:37:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506752198021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506752198021120[0;39m ==> Parameters: 
2022-07-27 22:37:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506752198021120[0;39m <==    Updates: 0
2022-07-27 22:37:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506752198021120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:37:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506773169541120[0;39m 生成今日电子书快照开始
2022-07-27 22:37:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506773169541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506773169541120[0;39m ==> Parameters: 
2022-07-27 22:37:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506773169541120[0;39m <==    Updates: 0
2022-07-27 22:37:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506773169541120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:37:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506794128478208[0;39m 生成今日电子书快照开始
2022-07-27 22:37:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506794128478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:37:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506794128478208[0;39m ==> Parameters: 
2022-07-27 22:37:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506794128478208[0;39m <==    Updates: 0
2022-07-27 22:37:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506794128478208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:38:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506815062249472[0;39m 生成今日电子书快照开始
2022-07-27 22:38:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506815062249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506815062249472[0;39m ==> Parameters: 
2022-07-27 22:38:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506815062249472[0;39m <==    Updates: 0
2022-07-27 22:38:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506815062249472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:38:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506836058935296[0;39m 生成今日电子书快照开始
2022-07-27 22:38:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506836058935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506836058935296[0;39m ==> Parameters: 
2022-07-27 22:38:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506836058935296[0;39m <==    Updates: 0
2022-07-27 22:38:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506836058935296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:38:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207506836067323904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506836067323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506836067323904[0;39m ==> Parameters: 
2022-07-27 22:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506836067323904[0;39m <==    Updates: 7
2022-07-27 22:38:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207506836067323904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:38:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506857013678080[0;39m 生成今日电子书快照开始
2022-07-27 22:38:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506857013678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506857013678080[0;39m ==> Parameters: 
2022-07-27 22:38:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506857013678080[0;39m <==    Updates: 0
2022-07-27 22:38:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506857013678080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:38:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506878018752512[0;39m 生成今日电子书快照开始
2022-07-27 22:38:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506878018752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506878018752512[0;39m ==> Parameters: 
2022-07-27 22:38:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506878018752512[0;39m <==    Updates: 0
2022-07-27 22:38:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506878018752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:38:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506898994466816[0;39m 生成今日电子书快照开始
2022-07-27 22:38:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506898994466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506898994466816[0;39m ==> Parameters: 
2022-07-27 22:38:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506898994466816[0;39m <==    Updates: 0
2022-07-27 22:38:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506898994466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:38:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506919970181120[0;39m 生成今日电子书快照开始
2022-07-27 22:38:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506919970181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506919970181120[0;39m ==> Parameters: 
2022-07-27 22:38:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506919970181120[0;39m <==    Updates: 0
2022-07-27 22:38:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506919970181120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:38:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506940950089728[0;39m 生成今日电子书快照开始
2022-07-27 22:38:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506940950089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506940950089728[0;39m ==> Parameters: 
2022-07-27 22:38:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506940950089728[0;39m <==    Updates: 0
2022-07-27 22:38:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506940950089728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:38:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207506961888055296[0;39m 更新电子书下的文档数据开始
2022-07-27 22:38:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506961888055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:38:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506961888055296[0;39m ==> Parameters: 
2022-07-27 22:38:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207506961888055296[0;39m <==    Updates: 7
2022-07-27 22:38:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207506961888055296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:38:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506961892249600[0;39m 生成今日电子书快照开始
2022-07-27 22:38:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506961892249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506961892249600[0;39m ==> Parameters: 
2022-07-27 22:38:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506961892249600[0;39m <==    Updates: 0
2022-07-27 22:38:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506961892249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:38:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207506982888935424[0;39m 生成今日电子书快照开始
2022-07-27 22:38:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506982888935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506982888935424[0;39m ==> Parameters: 
2022-07-27 22:38:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207506982888935424[0;39m <==    Updates: 0
2022-07-27 22:38:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207506982888935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:38:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507003852066816[0;39m 生成今日电子书快照开始
2022-07-27 22:38:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507003852066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507003852066816[0;39m ==> Parameters: 
2022-07-27 22:38:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507003852066816[0;39m <==    Updates: 0
2022-07-27 22:38:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507003852066816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:38:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507024836169728[0;39m 生成今日电子书快照开始
2022-07-27 22:38:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507024836169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507024836169728[0;39m ==> Parameters: 
2022-07-27 22:38:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507024836169728[0;39m <==    Updates: 0
2022-07-27 22:38:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507024836169728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:38:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507045811884032[0;39m 生成今日电子书快照开始
2022-07-27 22:38:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507045811884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:38:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507045811884032[0;39m ==> Parameters: 
2022-07-27 22:38:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507045811884032[0;39m <==    Updates: 0
2022-07-27 22:38:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507045811884032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:39:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507066779209728[0;39m 生成今日电子书快照开始
2022-07-27 22:39:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507066779209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507066779209728[0;39m ==> Parameters: 
2022-07-27 22:39:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507066779209728[0;39m <==    Updates: 0
2022-07-27 22:39:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507066779209728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:39:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507087717175296[0;39m 生成今日电子书快照开始
2022-07-27 22:39:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507087717175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507087717175296[0;39m ==> Parameters: 
2022-07-27 22:39:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507087717175296[0;39m <==    Updates: 0
2022-07-27 22:39:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507087717175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:39:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207507087725563904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:39:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507087725563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:39:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507087725563904[0;39m ==> Parameters: 
2022-07-27 22:39:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507087725563904[0;39m <==    Updates: 7
2022-07-27 22:39:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207507087725563904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:39:06.515 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-27 22:39:06.516 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-27 22:39:06.516 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m                  [0;39m 登录校验开始，token：207474798689914880
2022-07-27 22:39:06.552 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m                  [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"207474798689914880"}
2022-07-27 22:39:06.554 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207507094205763584[0;39m ------------- 开始 -------------
2022-07-27 22:39:06.554 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207507094205763584[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-27 22:39:06.555 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207507094205763584[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-27 22:39:06.555 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207507094205763584[0;39m 远程地址: 127.0.0.1
2022-07-27 22:39:06.556 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207507094205763584[0;39m 请求参数: [{"content":"<blockquote><ul><li><font size=\"4\">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size=\"4\">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size=\"4\">Vue3数据绑定显示列表数据（双向数据绑定）<br><font face=\"仿宋\">实时将后端的值刷新到前端页面上，html代码要拿到响应式变量，需要在setup最后return出去，大体流程如下：<br>前端页面写上{{ebooks}}<br>eg：const=ebooks ref():<br>axios.get(\"路径\").then((resonse)=&gt;{<br>const data=response.data;<br>ebooks.value=data.content（后端电子书的内容）<br>})<br><br>return {ebooks</font></font><font face=\"仿宋\">}</font></li></ul></blockquote>","ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2}]
2022-07-27 22:39:06.557 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207507094205763584[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-27 22:39:06.558 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207507094205763584[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), 前后端交互融合(String), 5(Integer), 5(Integer), 2(Integer), 202715322204164096(Long)
2022-07-27 22:39:06.559 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207507094205763584[0;39m <==    Updates: 1
2022-07-27 22:39:06.559 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207507094205763584[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-27 22:39:06.559 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207507094205763584[0;39m ==> Parameters: <blockquote><ul><li><font size="4">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size="4">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size="4">Vue3数据绑定显示列表数据（双向数据绑定）<br><font face="仿宋">实时将后端的值刷新到前端页面上，html代码要拿到响应式变量，需要在setup最后return出去，大体流程如下：<br>前端页面写上{{ebooks}}<br>eg：const=ebooks ref():<br>axios.get("路径").then((resonse)=&gt;{<br>const data=response.data;<br>ebooks.value=data.content（后端电子书的内容）<br>})<br><br>return {ebooks</font></font><font face="仿宋">}</font></li></ul></blockquote>(String), 202715322204164096(Long)
2022-07-27 22:39:06.565 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207507094205763584[0;39m <==    Updates: 1
2022-07-27 22:39:06.670 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207507094205763584[0;39m 返回结果: {"success":true}
2022-07-27 22:39:06.671 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207507094205763584[0;39m ------------- 结束 耗时：117 ms -------------
2022-07-27 22:39:06.672 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m207507094205763584[0;39m ------------- LoginInterceptor 结束 耗时：156 ms -------------
2022-07-27 22:39:06.681 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207507094738440192[0;39m ------------- 开始 -------------
2022-07-27 22:39:06.681 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207507094738440192[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-27 22:39:06.682 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207507094738440192[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-27 22:39:06.682 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207507094738440192[0;39m 远程地址: 127.0.0.1
2022-07-27 22:39:06.682 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207507094738440192[0;39m 请求参数: [202714600712572928]
2022-07-27 22:39:06.683 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207507094738440192[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-27 22:39:06.683 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207507094738440192[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-27 22:39:06.684 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 22:39:06.684 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 24, 2
2022-07-27 22:39:06.684 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 25, 3
2022-07-27 22:39:06.684 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 24, 2
2022-07-27 22:39:06.685 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 13, 2
2022-07-27 22:39:06.685 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 5, 2
2022-07-27 22:39:06.685 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-27 22:39:06.685 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-27 22:39:06.685 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 3, 1
2022-07-27 22:39:06.686 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-27 22:39:06.686 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-27 22:39:06.686 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-27 22:39:06.686 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207507094738440192[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-27 22:39:06.686 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207507094738440192[0;39m <==      Total: 12
2022-07-27 22:39:06.688 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207507094738440192[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":25,"voteCount":3},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":13,"voteCount":2},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-27 22:39:06.688 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207507094738440192[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-27 22:39:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507108667723776[0;39m 生成今日电子书快照开始
2022-07-27 22:39:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507108667723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507108667723776[0;39m ==> Parameters: 
2022-07-27 22:39:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507108667723776[0;39m <==    Updates: 0
2022-07-27 22:39:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507108667723776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:39:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507129664409600[0;39m 生成今日电子书快照开始
2022-07-27 22:39:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507129664409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507129664409600[0;39m ==> Parameters: 
2022-07-27 22:39:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507129664409600[0;39m <==    Updates: 0
2022-07-27 22:39:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507129664409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:39:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507150619152384[0;39m 生成今日电子书快照开始
2022-07-27 22:39:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507150619152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507150619152384[0;39m ==> Parameters: 
2022-07-27 22:39:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507150619152384[0;39m <==    Updates: 0
2022-07-27 22:39:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507150619152384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:39:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507171607449600[0;39m 生成今日电子书快照开始
2022-07-27 22:39:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507171607449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507171607449600[0;39m ==> Parameters: 
2022-07-27 22:39:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507171607449600[0;39m <==    Updates: 0
2022-07-27 22:39:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507171607449600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:39:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507192587358208[0;39m 生成今日电子书快照开始
2022-07-27 22:39:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507192587358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507192587358208[0;39m ==> Parameters: 
2022-07-27 22:39:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507192587358208[0;39m <==    Updates: 0
2022-07-27 22:39:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507192587358208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:39:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507213584044032[0;39m 生成今日电子书快照开始
2022-07-27 22:39:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507213584044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507213584044032[0;39m ==> Parameters: 
2022-07-27 22:39:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507213584044032[0;39m <==    Updates: 0
2022-07-27 22:39:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507213584044032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:39:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207507213592432640[0;39m 更新电子书下的文档数据开始
2022-07-27 22:39:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507213592432640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:39:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507213592432640[0;39m ==> Parameters: 
2022-07-27 22:39:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507213592432640[0;39m <==    Updates: 7
2022-07-27 22:39:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207507213592432640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:39:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507234505232384[0;39m 生成今日电子书快照开始
2022-07-27 22:39:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507234505232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507234505232384[0;39m ==> Parameters: 
2022-07-27 22:39:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507234505232384[0;39m <==    Updates: 0
2022-07-27 22:39:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507234505232384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:39:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507255472558080[0;39m 生成今日电子书快照开始
2022-07-27 22:39:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507255472558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507255472558080[0;39m ==> Parameters: 
2022-07-27 22:39:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507255472558080[0;39m <==    Updates: 0
2022-07-27 22:39:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507255472558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:39:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507276498604032[0;39m 生成今日电子书快照开始
2022-07-27 22:39:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507276498604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507276498604032[0;39m ==> Parameters: 
2022-07-27 22:39:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507276498604032[0;39m <==    Updates: 0
2022-07-27 22:39:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507276498604032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:39:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507297423986688[0;39m 生成今日电子书快照开始
2022-07-27 22:39:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507297423986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:39:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507297423986688[0;39m ==> Parameters: 
2022-07-27 22:39:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507297423986688[0;39m <==    Updates: 0
2022-07-27 22:39:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507297423986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:40:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507318433255424[0;39m 生成今日电子书快照开始
2022-07-27 22:40:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507318433255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507318433255424[0;39m ==> Parameters: 
2022-07-27 22:40:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507318433255424[0;39m <==    Updates: 0
2022-07-27 22:40:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507318433255424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:40:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207507339387998208[0;39m 更新电子书下的文档数据开始
2022-07-27 22:40:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507339387998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:40:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507339387998208[0;39m ==> Parameters: 
2022-07-27 22:40:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507339387998208[0;39m <==    Updates: 7
2022-07-27 22:40:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207507339387998208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:40:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507339396386816[0;39m 生成今日电子书快照开始
2022-07-27 22:40:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507339396386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507339396386816[0;39m ==> Parameters: 
2022-07-27 22:40:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507339396386816[0;39m <==    Updates: 0
2022-07-27 22:40:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507339396386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:40:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507360334352384[0;39m 生成今日电子书快照开始
2022-07-27 22:40:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507360334352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507360334352384[0;39m ==> Parameters: 
2022-07-27 22:40:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507360334352384[0;39m <==    Updates: 0
2022-07-27 22:40:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507360334352384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:40:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507381347815424[0;39m 生成今日电子书快照开始
2022-07-27 22:40:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507381347815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507381347815424[0;39m ==> Parameters: 
2022-07-27 22:40:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507381347815424[0;39m <==    Updates: 0
2022-07-27 22:40:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507381347815424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:40:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507402277392384[0;39m 生成今日电子书快照开始
2022-07-27 22:40:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507402277392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507402277392384[0;39m ==> Parameters: 
2022-07-27 22:40:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507402277392384[0;39m <==    Updates: 0
2022-07-27 22:40:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507402277392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:40:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507423282466816[0;39m 生成今日电子书快照开始
2022-07-27 22:40:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507423282466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507423282466816[0;39m ==> Parameters: 
2022-07-27 22:40:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507423282466816[0;39m <==    Updates: 0
2022-07-27 22:40:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507423282466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:40:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507444258181120[0;39m 生成今日电子书快照开始
2022-07-27 22:40:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507444258181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507444258181120[0;39m ==> Parameters: 
2022-07-27 22:40:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507444258181120[0;39m <==    Updates: 0
2022-07-27 22:40:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507444258181120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:40:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507465225506816[0;39m 生成今日电子书快照开始
2022-07-27 22:40:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507465225506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507465225506816[0;39m ==> Parameters: 
2022-07-27 22:40:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507465225506816[0;39m <==    Updates: 0
2022-07-27 22:40:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507465225506816[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:40:35.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207507465254866944[0;39m 更新电子书下的文档数据开始
2022-07-27 22:40:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507465254866944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:40:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507465254866944[0;39m ==> Parameters: 
2022-07-27 22:40:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507465254866944[0;39m <==    Updates: 7
2022-07-27 22:40:35.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207507465254866944[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:40:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507486176055296[0;39m 生成今日电子书快照开始
2022-07-27 22:40:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507486176055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507486176055296[0;39m ==> Parameters: 
2022-07-27 22:40:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507486176055296[0;39m <==    Updates: 0
2022-07-27 22:40:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507486176055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:40:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507507134992384[0;39m 生成今日电子书快照开始
2022-07-27 22:40:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507507134992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507507134992384[0;39m ==> Parameters: 
2022-07-27 22:40:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507507134992384[0;39m <==    Updates: 0
2022-07-27 22:40:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507507134992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:40:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507528106512384[0;39m 生成今日电子书快照开始
2022-07-27 22:40:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507528106512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507528106512384[0;39m ==> Parameters: 
2022-07-27 22:40:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507528106512384[0;39m <==    Updates: 0
2022-07-27 22:40:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507528106512384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:40:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507549119975424[0;39m 生成今日电子书快照开始
2022-07-27 22:40:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507549119975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:40:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507549119975424[0;39m ==> Parameters: 
2022-07-27 22:40:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507549119975424[0;39m <==    Updates: 0
2022-07-27 22:40:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507549119975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:41:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507570083106816[0;39m 生成今日电子书快照开始
2022-07-27 22:41:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507570083106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507570083106816[0;39m ==> Parameters: 
2022-07-27 22:41:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507570083106816[0;39m <==    Updates: 0
2022-07-27 22:41:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507570083106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:41:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207507591042043904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:41:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507591042043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:41:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507591042043904[0;39m ==> Parameters: 
2022-07-27 22:41:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507591042043904[0;39m <==    Updates: 7
2022-07-27 22:41:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207507591042043904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:41:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507591050432512[0;39m 生成今日电子书快照开始
2022-07-27 22:41:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507591050432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507591050432512[0;39m ==> Parameters: 
2022-07-27 22:41:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507591050432512[0;39m <==    Updates: 0
2022-07-27 22:41:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507591050432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:41:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507611996786688[0;39m 生成今日电子书快照开始
2022-07-27 22:41:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507611996786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507611996786688[0;39m ==> Parameters: 
2022-07-27 22:41:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507611996786688[0;39m <==    Updates: 0
2022-07-27 22:41:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507611996786688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:41:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507632997666816[0;39m 生成今日电子书快照开始
2022-07-27 22:41:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507632997666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507632997666816[0;39m ==> Parameters: 
2022-07-27 22:41:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507632997666816[0;39m <==    Updates: 0
2022-07-27 22:41:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507632997666816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:41:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507653960798208[0;39m 生成今日电子书快照开始
2022-07-27 22:41:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507653960798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507653960798208[0;39m ==> Parameters: 
2022-07-27 22:41:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507653960798208[0;39m <==    Updates: 0
2022-07-27 22:41:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507653960798208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:41:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507674953289728[0;39m 生成今日电子书快照开始
2022-07-27 22:41:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507674953289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507674953289728[0;39m ==> Parameters: 
2022-07-27 22:41:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507674953289728[0;39m <==    Updates: 0
2022-07-27 22:41:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507674953289728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:41:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507695912226816[0;39m 生成今日电子书快照开始
2022-07-27 22:41:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507695912226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507695912226816[0;39m ==> Parameters: 
2022-07-27 22:41:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507695912226816[0;39m <==    Updates: 0
2022-07-27 22:41:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507695912226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:41:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207507716892135424[0;39m 更新电子书下的文档数据开始
2022-07-27 22:41:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507716892135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:41:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507716892135424[0;39m ==> Parameters: 
2022-07-27 22:41:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507716892135424[0;39m <==    Updates: 7
2022-07-27 22:41:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207507716892135424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:41:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507716896329728[0;39m 生成今日电子书快照开始
2022-07-27 22:41:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507716896329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507716896329728[0;39m ==> Parameters: 
2022-07-27 22:41:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507716896329728[0;39m <==    Updates: 0
2022-07-27 22:41:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507716896329728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:41:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507737809129472[0;39m 生成今日电子书快照开始
2022-07-27 22:41:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507737809129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507737809129472[0;39m ==> Parameters: 
2022-07-27 22:41:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507737809129472[0;39m <==    Updates: 0
2022-07-27 22:41:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507737809129472[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-27 22:41:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507758801620992[0;39m 生成今日电子书快照开始
2022-07-27 22:41:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507758801620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507758801620992[0;39m ==> Parameters: 
2022-07-27 22:41:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507758801620992[0;39m <==    Updates: 0
2022-07-27 22:41:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507758801620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:41:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507779756363776[0;39m 生成今日电子书快照开始
2022-07-27 22:41:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507779756363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507779756363776[0;39m ==> Parameters: 
2022-07-27 22:41:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507779756363776[0;39m <==    Updates: 0
2022-07-27 22:41:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507779756363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:41:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507800723689472[0;39m 生成今日电子书快照开始
2022-07-27 22:41:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507800723689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:41:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507800723689472[0;39m ==> Parameters: 
2022-07-27 22:41:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507800723689472[0;39m <==    Updates: 0
2022-07-27 22:41:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507800723689472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:42:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507821749735424[0;39m 生成今日电子书快照开始
2022-07-27 22:42:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507821749735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507821749735424[0;39m ==> Parameters: 
2022-07-27 22:42:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507821749735424[0;39m <==    Updates: 0
2022-07-27 22:42:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507821749735424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:42:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207507842708672512[0;39m 更新电子书下的文档数据开始
2022-07-27 22:42:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507842708672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:42:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507842708672512[0;39m ==> Parameters: 
2022-07-27 22:42:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507842708672512[0;39m <==    Updates: 7
2022-07-27 22:42:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207507842708672512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:42:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507842717061120[0;39m 生成今日电子书快照开始
2022-07-27 22:42:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507842717061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507842717061120[0;39m ==> Parameters: 
2022-07-27 22:42:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507842717061120[0;39m <==    Updates: 0
2022-07-27 22:42:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507842717061120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:42:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507863692775424[0;39m 生成今日电子书快照开始
2022-07-27 22:42:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507863692775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507863692775424[0;39m ==> Parameters: 
2022-07-27 22:42:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507863692775424[0;39m <==    Updates: 0
2022-07-27 22:42:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507863692775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:42:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507884668489728[0;39m 生成今日电子书快照开始
2022-07-27 22:42:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507884668489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507884668489728[0;39m ==> Parameters: 
2022-07-27 22:42:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507884668489728[0;39m <==    Updates: 0
2022-07-27 22:42:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507884668489728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:42:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507905593872384[0;39m 生成今日电子书快照开始
2022-07-27 22:42:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507905593872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507905593872384[0;39m ==> Parameters: 
2022-07-27 22:42:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507905593872384[0;39m <==    Updates: 0
2022-07-27 22:42:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507905593872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:42:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507926557003776[0;39m 生成今日电子书快照开始
2022-07-27 22:42:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507926557003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507926557003776[0;39m ==> Parameters: 
2022-07-27 22:42:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507926557003776[0;39m <==    Updates: 0
2022-07-27 22:42:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507926557003776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:42:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507947545300992[0;39m 生成今日电子书快照开始
2022-07-27 22:42:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507947545300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507947545300992[0;39m ==> Parameters: 
2022-07-27 22:42:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507947545300992[0;39m <==    Updates: 0
2022-07-27 22:42:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507947545300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:42:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207507968525209600[0;39m 更新电子书下的文档数据开始
2022-07-27 22:42:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507968525209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:42:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507968525209600[0;39m ==> Parameters: 
2022-07-27 22:42:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207507968525209600[0;39m <==    Updates: 7
2022-07-27 22:42:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207507968525209600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:42:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507968533598208[0;39m 生成今日电子书快照开始
2022-07-27 22:42:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507968533598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507968533598208[0;39m ==> Parameters: 
2022-07-27 22:42:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507968533598208[0;39m <==    Updates: 0
2022-07-27 22:42:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507968533598208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:42:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207507989488340992[0;39m 生成今日电子书快照开始
2022-07-27 22:42:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507989488340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507989488340992[0;39m ==> Parameters: 
2022-07-27 22:42:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207507989488340992[0;39m <==    Updates: 0
2022-07-27 22:42:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207507989488340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:42:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508010493415424[0;39m 生成今日电子书快照开始
2022-07-27 22:42:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508010493415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508010493415424[0;39m ==> Parameters: 
2022-07-27 22:42:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508010493415424[0;39m <==    Updates: 0
2022-07-27 22:42:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508010493415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:42:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508031431380992[0;39m 生成今日电子书快照开始
2022-07-27 22:42:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508031431380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508031431380992[0;39m ==> Parameters: 
2022-07-27 22:42:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508031431380992[0;39m <==    Updates: 0
2022-07-27 22:42:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508031431380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:42:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508052402900992[0;39m 生成今日电子书快照开始
2022-07-27 22:42:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508052402900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:42:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508052402900992[0;39m ==> Parameters: 
2022-07-27 22:42:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508052402900992[0;39m <==    Updates: 0
2022-07-27 22:42:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508052402900992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:43:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508073407975424[0;39m 生成今日电子书快照开始
2022-07-27 22:43:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508073407975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508073407975424[0;39m ==> Parameters: 
2022-07-27 22:43:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508073407975424[0;39m <==    Updates: 0
2022-07-27 22:43:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508073407975424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:43:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207508094379495424[0;39m 更新电子书下的文档数据开始
2022-07-27 22:43:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508094379495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:43:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508094379495424[0;39m ==> Parameters: 
2022-07-27 22:43:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508094379495424[0;39m <==    Updates: 7
2022-07-27 22:43:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207508094379495424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:43:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508094387884032[0;39m 生成今日电子书快照开始
2022-07-27 22:43:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508094387884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508094387884032[0;39m ==> Parameters: 
2022-07-27 22:43:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508094387884032[0;39m <==    Updates: 0
2022-07-27 22:43:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508094387884032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:43:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508115313266688[0;39m 生成今日电子书快照开始
2022-07-27 22:43:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508115313266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508115313266688[0;39m ==> Parameters: 
2022-07-27 22:43:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508115313266688[0;39m <==    Updates: 0
2022-07-27 22:43:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508115313266688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:43:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508136297369600[0;39m 生成今日电子书快照开始
2022-07-27 22:43:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508136297369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508136297369600[0;39m ==> Parameters: 
2022-07-27 22:43:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508136297369600[0;39m <==    Updates: 0
2022-07-27 22:43:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508136297369600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:43:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508157277278208[0;39m 生成今日电子书快照开始
2022-07-27 22:43:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508157277278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508157277278208[0;39m ==> Parameters: 
2022-07-27 22:43:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508157277278208[0;39m <==    Updates: 0
2022-07-27 22:43:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508157277278208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:43:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508178215243776[0;39m 生成今日电子书快照开始
2022-07-27 22:43:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508178215243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508178215243776[0;39m ==> Parameters: 
2022-07-27 22:43:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508178215243776[0;39m <==    Updates: 0
2022-07-27 22:43:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508178215243776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:43:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508199216123904[0;39m 生成今日电子书快照开始
2022-07-27 22:43:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508199216123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508199216123904[0;39m ==> Parameters: 
2022-07-27 22:43:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508199216123904[0;39m <==    Updates: 0
2022-07-27 22:43:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508199216123904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:43:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508220187643904[0;39m 生成今日电子书快照开始
2022-07-27 22:43:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508220187643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508220187643904[0;39m ==> Parameters: 
2022-07-27 22:43:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508220187643904[0;39m <==    Updates: 0
2022-07-27 22:43:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508220187643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:43:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207508220200226816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:43:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508220200226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:43:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508220200226816[0;39m ==> Parameters: 
2022-07-27 22:43:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508220200226816[0;39m <==    Updates: 7
2022-07-27 22:43:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207508220200226816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:43:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508241146580992[0;39m 生成今日电子书快照开始
2022-07-27 22:43:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508241146580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508241146580992[0;39m ==> Parameters: 
2022-07-27 22:43:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508241146580992[0;39m <==    Updates: 0
2022-07-27 22:43:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508241146580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:43:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508262122295296[0;39m 生成今日电子书快照开始
2022-07-27 22:43:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508262122295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508262122295296[0;39m ==> Parameters: 
2022-07-27 22:43:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508262122295296[0;39m <==    Updates: 0
2022-07-27 22:43:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508262122295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:43:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508283093815296[0;39m 生成今日电子书快照开始
2022-07-27 22:43:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508283093815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508283093815296[0;39m ==> Parameters: 
2022-07-27 22:43:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508283093815296[0;39m <==    Updates: 0
2022-07-27 22:43:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508283093815296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:43:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508304052752384[0;39m 生成今日电子书快照开始
2022-07-27 22:43:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508304052752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:43:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508304052752384[0;39m ==> Parameters: 
2022-07-27 22:43:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508304052752384[0;39m <==    Updates: 0
2022-07-27 22:43:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508304052752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:44:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508325032660992[0;39m 生成今日电子书快照开始
2022-07-27 22:44:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508325032660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508325032660992[0;39m ==> Parameters: 
2022-07-27 22:44:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508325032660992[0;39m <==    Updates: 0
2022-07-27 22:44:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508325032660992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:44:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207508346004180992[0;39m 更新电子书下的文档数据开始
2022-07-27 22:44:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508346004180992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:44:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508346004180992[0;39m ==> Parameters: 
2022-07-27 22:44:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508346004180992[0;39m <==    Updates: 7
2022-07-27 22:44:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207508346004180992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:44:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508346016763904[0;39m 生成今日电子书快照开始
2022-07-27 22:44:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508346016763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508346016763904[0;39m ==> Parameters: 
2022-07-27 22:44:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508346016763904[0;39m <==    Updates: 0
2022-07-27 22:44:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508346016763904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:44:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508366958923776[0;39m 生成今日电子书快照开始
2022-07-27 22:44:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508366958923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508366958923776[0;39m ==> Parameters: 
2022-07-27 22:44:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508366958923776[0;39m <==    Updates: 0
2022-07-27 22:44:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508366958923776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:44:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508387930443776[0;39m 生成今日电子书快照开始
2022-07-27 22:44:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508387930443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508387930443776[0;39m ==> Parameters: 
2022-07-27 22:44:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508387930443776[0;39m <==    Updates: 0
2022-07-27 22:44:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508387930443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:44:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508408914546688[0;39m 生成今日电子书快照开始
2022-07-27 22:44:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508408914546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508408914546688[0;39m ==> Parameters: 
2022-07-27 22:44:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508408914546688[0;39m <==    Updates: 0
2022-07-27 22:44:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508408914546688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:44:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508429923815424[0;39m 生成今日电子书快照开始
2022-07-27 22:44:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508429923815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508429923815424[0;39m ==> Parameters: 
2022-07-27 22:44:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508429923815424[0;39m <==    Updates: 0
2022-07-27 22:44:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508429923815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:44:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508450895335424[0;39m 生成今日电子书快照开始
2022-07-27 22:44:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508450895335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508450895335424[0;39m ==> Parameters: 
2022-07-27 22:44:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508450895335424[0;39m <==    Updates: 0
2022-07-27 22:44:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508450895335424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:44:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207508471854272512[0;39m 更新电子书下的文档数据开始
2022-07-27 22:44:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508471854272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:44:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508471854272512[0;39m ==> Parameters: 
2022-07-27 22:44:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508471854272512[0;39m <==    Updates: 7
2022-07-27 22:44:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207508471854272512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:44:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508471862661120[0;39m 生成今日电子书快照开始
2022-07-27 22:44:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508471862661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508471862661120[0;39m ==> Parameters: 
2022-07-27 22:44:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508471862661120[0;39m <==    Updates: 0
2022-07-27 22:44:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508471862661120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:44:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508492809015296[0;39m 生成今日电子书快照开始
2022-07-27 22:44:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508492809015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508492809015296[0;39m ==> Parameters: 
2022-07-27 22:44:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508492809015296[0;39m <==    Updates: 0
2022-07-27 22:44:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508492809015296[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:44:40.529 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207508494998441984[0;39m ------------- 开始 -------------
2022-07-27 22:44:40.529 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207508494998441984[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-27 22:44:40.530 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207508494998441984[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 22:44:40.530 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207508494998441984[0;39m 远程地址: 127.0.0.1
2022-07-27 22:44:40.530 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207508494998441984[0;39m 请求参数: [202715069841281024]
2022-07-27 22:44:40.531 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207508494998441984[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 22:44:40.532 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207508494998441984[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-27 22:44:40.533 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207508494998441984[0;39m <==    Columns: id, content
2022-07-27 22:44:40.533 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207508494998441984[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-27 22:44:40.534 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207508494998441984[0;39m <==      Total: 1
2022-07-27 22:44:40.534 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207508494998441984[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 22:44:40.534 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207508494998441984[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-27 22:44:40.614 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207508494998441984[0;39m <==    Updates: 1
2022-07-27 22:44:40.615 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207508494998441984[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id=\"lbj1m\"></h2><h2 id=\"y1h2i\"></h2><h3 id=\"g91hj\"></h3><h1 id=\"vfo4x\"></h1><h4 id=\"t6wlk\"><h2 id=\"y3p29\"><xmp>2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp> 正常情况：user？id=1</xmp><xmp> Restful：/user/1</xmp></h2></h4></blockquote><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-27 22:44:40.615 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207508494998441984[0;39m ------------- 结束 耗时：86 ms -------------
2022-07-27 22:44:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508513797312512[0;39m 生成今日电子书快照开始
2022-07-27 22:44:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508513797312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508513797312512[0;39m ==> Parameters: 
2022-07-27 22:44:45.025 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508513797312512[0;39m <==    Updates: 0
2022-07-27 22:44:45.026 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508513797312512[0;39m 生成今日电子书快照结束，耗时：15 毫秒
2022-07-27 22:44:48.106 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207508526778683392[0;39m ------------- 开始 -------------
2022-07-27 22:44:48.106 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207508526778683392[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715322204164096 GET
2022-07-27 22:44:48.106 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207508526778683392[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 22:44:48.106 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207508526778683392[0;39m 远程地址: 127.0.0.1
2022-07-27 22:44:48.107 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207508526778683392[0;39m 请求参数: [202715322204164096]
2022-07-27 22:44:48.107 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207508526778683392[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 22:44:48.107 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207508526778683392[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 22:44:48.115 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207508526778683392[0;39m <==    Columns: id, content
2022-07-27 22:44:48.115 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207508526778683392[0;39m <==        Row: 202715322204164096, <<BLOB>>
2022-07-27 22:44:48.116 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207508526778683392[0;39m <==      Total: 1
2022-07-27 22:44:48.116 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207508526778683392[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 22:44:48.116 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207508526778683392[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 22:44:48.154 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207508526778683392[0;39m <==    Updates: 1
2022-07-27 22:44:48.155 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207508526778683392[0;39m 返回结果: {"content":"<blockquote><ul><li><font size=\"4\">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size=\"4\">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size=\"4\">Vue3数据绑定显示列表数据（双向数据绑定）<br><font face=\"仿宋\">实时将后端的值刷新到前端页面上，html代码要拿到响应式变量，需要在setup最后return出去，大体流程如下：<br>前端页面写上{{ebooks}}<br>eg：const=ebooks ref():<br>axios.get(\"路径\").then((resonse)=&gt;{<br>const data=response.data;<br>ebooks.value=data.content（后端电子书的内容）<br>})<br><br>return {ebooks</font></font><font face=\"仿宋\">}</font></li></ul></blockquote>","success":true}
2022-07-27 22:44:48.155 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207508526778683392[0;39m ------------- 结束 耗时：49 ms -------------
2022-07-27 22:44:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508534777221120[0;39m 生成今日电子书快照开始
2022-07-27 22:44:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508534777221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508534777221120[0;39m ==> Parameters: 
2022-07-27 22:44:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508534777221120[0;39m <==    Updates: 0
2022-07-27 22:44:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508534777221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:44:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508555727769600[0;39m 生成今日电子书快照开始
2022-07-27 22:44:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508555727769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:44:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508555727769600[0;39m ==> Parameters: 
2022-07-27 22:44:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508555727769600[0;39m <==    Updates: 0
2022-07-27 22:44:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508555727769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:45:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508576669929472[0;39m 生成今日电子书快照开始
2022-07-27 22:45:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508576669929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508576669929472[0;39m ==> Parameters: 
2022-07-27 22:45:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508576669929472[0;39m <==    Updates: 0
2022-07-27 22:45:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508576669929472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:45:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207508597654032384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:45:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508597654032384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:45:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508597654032384[0;39m ==> Parameters: 
2022-07-27 22:45:05.070 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508597654032384[0;39m <==    Updates: 7
2022-07-27 22:45:05.070 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207508597654032384[0;39m 更新电子书下的文档数据结束，耗时：65 毫秒
2022-07-27 22:45:05.071 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508597935050752[0;39m 生成今日电子书快照开始
2022-07-27 22:45:05.071 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508597935050752[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:05.071 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508597935050752[0;39m ==> Parameters: 
2022-07-27 22:45:05.128 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508597935050752[0;39m <==    Updates: 0
2022-07-27 22:45:05.129 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508597935050752[0;39m 生成今日电子书快照结束，耗时：58 毫秒
2022-07-27 22:45:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508618675884032[0;39m 生成今日电子书快照开始
2022-07-27 22:45:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508618675884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508618675884032[0;39m ==> Parameters: 
2022-07-27 22:45:10.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508618675884032[0;39m <==    Updates: 0
2022-07-27 22:45:10.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508618675884032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:45:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508639601266688[0;39m 生成今日电子书快照开始
2022-07-27 22:45:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508639601266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508639601266688[0;39m ==> Parameters: 
2022-07-27 22:45:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508639601266688[0;39m <==    Updates: 0
2022-07-27 22:45:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508639601266688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:45:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508660610535424[0;39m 生成今日电子书快照开始
2022-07-27 22:45:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508660610535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508660610535424[0;39m ==> Parameters: 
2022-07-27 22:45:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508660610535424[0;39m <==    Updates: 0
2022-07-27 22:45:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508660610535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:45:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508681561083904[0;39m 生成今日电子书快照开始
2022-07-27 22:45:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508681561083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508681561083904[0;39m ==> Parameters: 
2022-07-27 22:45:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508681561083904[0;39m <==    Updates: 0
2022-07-27 22:45:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508681561083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:45:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508702511632384[0;39m 生成今日电子书快照开始
2022-07-27 22:45:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508702511632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508702511632384[0;39m ==> Parameters: 
2022-07-27 22:45:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508702511632384[0;39m <==    Updates: 0
2022-07-27 22:45:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508702511632384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:45:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207508723478958080[0;39m 更新电子书下的文档数据开始
2022-07-27 22:45:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508723478958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:45:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508723478958080[0;39m ==> Parameters: 
2022-07-27 22:45:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508723478958080[0;39m <==    Updates: 7
2022-07-27 22:45:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207508723478958080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:45:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508723483152384[0;39m 生成今日电子书快照开始
2022-07-27 22:45:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508723483152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508723483152384[0;39m ==> Parameters: 
2022-07-27 22:45:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508723483152384[0;39m <==    Updates: 0
2022-07-27 22:45:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508723483152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:45:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508744471449600[0;39m 生成今日电子书快照开始
2022-07-27 22:45:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508744471449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508744471449600[0;39m ==> Parameters: 
2022-07-27 22:45:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508744471449600[0;39m <==    Updates: 0
2022-07-27 22:45:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508744471449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:45:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508765472329728[0;39m 生成今日电子书快照开始
2022-07-27 22:45:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508765472329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508765472329728[0;39m ==> Parameters: 
2022-07-27 22:45:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508765472329728[0;39m <==    Updates: 0
2022-07-27 22:45:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508765472329728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:45:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508786410295296[0;39m 生成今日电子书快照开始
2022-07-27 22:45:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508786410295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508786410295296[0;39m ==> Parameters: 
2022-07-27 22:45:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508786410295296[0;39m <==    Updates: 0
2022-07-27 22:45:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508786410295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:45:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508807365038080[0;39m 生成今日电子书快照开始
2022-07-27 22:45:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508807365038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:45:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508807365038080[0;39m ==> Parameters: 
2022-07-27 22:45:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508807365038080[0;39m <==    Updates: 0
2022-07-27 22:45:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508807365038080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:46:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508828374306816[0;39m 生成今日电子书快照开始
2022-07-27 22:46:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508828374306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508828374306816[0;39m ==> Parameters: 
2022-07-27 22:46:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508828374306816[0;39m <==    Updates: 0
2022-07-27 22:46:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508828374306816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:46:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508849333243904[0;39m 生成今日电子书快照开始
2022-07-27 22:46:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508849333243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508849333243904[0;39m ==> Parameters: 
2022-07-27 22:46:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508849333243904[0;39m <==    Updates: 0
2022-07-27 22:46:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508849333243904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:46:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207508849337438208[0;39m 更新电子书下的文档数据开始
2022-07-27 22:46:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508849337438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:46:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508849337438208[0;39m ==> Parameters: 
2022-07-27 22:46:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508849337438208[0;39m <==    Updates: 7
2022-07-27 22:46:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207508849337438208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:46:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508870279598080[0;39m 生成今日电子书快照开始
2022-07-27 22:46:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508870279598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508870279598080[0;39m ==> Parameters: 
2022-07-27 22:46:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508870279598080[0;39m <==    Updates: 0
2022-07-27 22:46:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508870279598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:46:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508891267895296[0;39m 生成今日电子书快照开始
2022-07-27 22:46:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508891267895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508891267895296[0;39m ==> Parameters: 
2022-07-27 22:46:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508891267895296[0;39m <==    Updates: 0
2022-07-27 22:46:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508891267895296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:46:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508912247803904[0;39m 生成今日电子书快照开始
2022-07-27 22:46:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508912247803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508912247803904[0;39m ==> Parameters: 
2022-07-27 22:46:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508912247803904[0;39m <==    Updates: 0
2022-07-27 22:46:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508912247803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:46:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508933219323904[0;39m 生成今日电子书快照开始
2022-07-27 22:46:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508933219323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508933219323904[0;39m ==> Parameters: 
2022-07-27 22:46:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508933219323904[0;39m <==    Updates: 0
2022-07-27 22:46:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508933219323904[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:46:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508954169872384[0;39m 生成今日电子书快照开始
2022-07-27 22:46:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508954169872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508954169872384[0;39m ==> Parameters: 
2022-07-27 22:46:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508954169872384[0;39m <==    Updates: 0
2022-07-27 22:46:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508954169872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:46:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508975170752512[0;39m 生成今日电子书快照开始
2022-07-27 22:46:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508975170752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508975170752512[0;39m ==> Parameters: 
2022-07-27 22:46:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508975170752512[0;39m <==    Updates: 0
2022-07-27 22:46:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508975170752512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:46:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207508975174946816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:46:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508975174946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:46:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508975174946816[0;39m ==> Parameters: 
2022-07-27 22:46:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207508975174946816[0;39m <==    Updates: 7
2022-07-27 22:46:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207508975174946816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:46:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207508996154855424[0;39m 生成今日电子书快照开始
2022-07-27 22:46:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508996154855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508996154855424[0;39m ==> Parameters: 
2022-07-27 22:46:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207508996154855424[0;39m <==    Updates: 0
2022-07-27 22:46:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207508996154855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:46:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509017126375424[0;39m 生成今日电子书快照开始
2022-07-27 22:46:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509017126375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509017126375424[0;39m ==> Parameters: 
2022-07-27 22:46:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509017126375424[0;39m <==    Updates: 0
2022-07-27 22:46:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509017126375424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:46:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509038093701120[0;39m 生成今日电子书快照开始
2022-07-27 22:46:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509038093701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509038093701120[0;39m ==> Parameters: 
2022-07-27 22:46:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509038093701120[0;39m <==    Updates: 0
2022-07-27 22:46:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509038093701120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:46:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509059044249600[0;39m 生成今日电子书快照开始
2022-07-27 22:46:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509059044249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:46:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509059044249600[0;39m ==> Parameters: 
2022-07-27 22:46:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509059044249600[0;39m <==    Updates: 0
2022-07-27 22:46:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509059044249600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:47:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509080061906944[0;39m 生成今日电子书快照开始
2022-07-27 22:47:00.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509080061906944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:00.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509080061906944[0;39m ==> Parameters: 
2022-07-27 22:47:00.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509080061906944[0;39m <==    Updates: 0
2022-07-27 22:47:00.024 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509080061906944[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:47:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509100962123776[0;39m 生成今日电子书快照开始
2022-07-27 22:47:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509100962123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509100962123776[0;39m ==> Parameters: 
2022-07-27 22:47:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509100962123776[0;39m <==    Updates: 0
2022-07-27 22:47:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509100962123776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207509100970512384[0;39m 更新电子书下的文档数据开始
2022-07-27 22:47:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509100970512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:47:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509100970512384[0;39m ==> Parameters: 
2022-07-27 22:47:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509100970512384[0;39m <==    Updates: 7
2022-07-27 22:47:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207509100970512384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:47:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509121983975424[0;39m 生成今日电子书快照开始
2022-07-27 22:47:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509121983975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509121983975424[0;39m ==> Parameters: 
2022-07-27 22:47:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509121983975424[0;39m <==    Updates: 0
2022-07-27 22:47:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509121983975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509142942912512[0;39m 生成今日电子书快照开始
2022-07-27 22:47:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509142942912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509142942912512[0;39m ==> Parameters: 
2022-07-27 22:47:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509142942912512[0;39m <==    Updates: 0
2022-07-27 22:47:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509142942912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509163876683776[0;39m 生成今日电子书快照开始
2022-07-27 22:47:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509163876683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509163876683776[0;39m ==> Parameters: 
2022-07-27 22:47:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509163876683776[0;39m <==    Updates: 0
2022-07-27 22:47:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509163876683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509184877563904[0;39m 生成今日电子书快照开始
2022-07-27 22:47:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509184877563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509184877563904[0;39m ==> Parameters: 
2022-07-27 22:47:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509184877563904[0;39m <==    Updates: 0
2022-07-27 22:47:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509184877563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509205819723776[0;39m 生成今日电子书快照开始
2022-07-27 22:47:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509205819723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509205819723776[0;39m ==> Parameters: 
2022-07-27 22:47:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509205819723776[0;39m <==    Updates: 0
2022-07-27 22:47:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509205819723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207509226841575424[0;39m 更新电子书下的文档数据开始
2022-07-27 22:47:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509226841575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:47:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509226841575424[0;39m ==> Parameters: 
2022-07-27 22:47:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509226841575424[0;39m <==    Updates: 7
2022-07-27 22:47:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207509226841575424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:47:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509226845769728[0;39m 生成今日电子书快照开始
2022-07-27 22:47:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509226845769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509226845769728[0;39m ==> Parameters: 
2022-07-27 22:47:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509226845769728[0;39m <==    Updates: 0
2022-07-27 22:47:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509226845769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509247775346688[0;39m 生成今日电子书快照开始
2022-07-27 22:47:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509247775346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509247775346688[0;39m ==> Parameters: 
2022-07-27 22:47:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509247775346688[0;39m <==    Updates: 0
2022-07-27 22:47:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509247775346688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:47:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509268738478080[0;39m 生成今日电子书快照开始
2022-07-27 22:47:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509268738478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509268738478080[0;39m ==> Parameters: 
2022-07-27 22:47:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509268738478080[0;39m <==    Updates: 0
2022-07-27 22:47:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509268738478080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509289751941120[0;39m 生成今日电子书快照开始
2022-07-27 22:47:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509289751941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509289751941120[0;39m ==> Parameters: 
2022-07-27 22:47:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509289751941120[0;39m <==    Updates: 0
2022-07-27 22:47:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509289751941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:47:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509310719266816[0;39m 生成今日电子书快照开始
2022-07-27 22:47:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509310719266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:47:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509310719266816[0;39m ==> Parameters: 
2022-07-27 22:47:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509310719266816[0;39m <==    Updates: 0
2022-07-27 22:47:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509310719266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:48:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509331699175424[0;39m 生成今日电子书快照开始
2022-07-27 22:48:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509331699175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509331699175424[0;39m ==> Parameters: 
2022-07-27 22:48:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509331699175424[0;39m <==    Updates: 0
2022-07-27 22:48:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509331699175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:48:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207509352658112512[0;39m 更新电子书下的文档数据开始
2022-07-27 22:48:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509352658112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:48:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509352658112512[0;39m ==> Parameters: 
2022-07-27 22:48:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509352658112512[0;39m <==    Updates: 7
2022-07-27 22:48:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207509352658112512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:48:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509352662306816[0;39m 生成今日电子书快照开始
2022-07-27 22:48:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509352662306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509352662306816[0;39m ==> Parameters: 
2022-07-27 22:48:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509352662306816[0;39m <==    Updates: 0
2022-07-27 22:48:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509352662306816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:48:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509373621243904[0;39m 生成今日电子书快照开始
2022-07-27 22:48:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509373621243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509373621243904[0;39m ==> Parameters: 
2022-07-27 22:48:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509373621243904[0;39m <==    Updates: 0
2022-07-27 22:48:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509373621243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:48:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509394555015168[0;39m 生成今日电子书快照开始
2022-07-27 22:48:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509394555015168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509394555015168[0;39m ==> Parameters: 
2022-07-27 22:48:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509394555015168[0;39m <==    Updates: 0
2022-07-27 22:48:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509394555015168[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:48:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509415576866816[0;39m 生成今日电子书快照开始
2022-07-27 22:48:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509415576866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509415576866816[0;39m ==> Parameters: 
2022-07-27 22:48:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509415576866816[0;39m <==    Updates: 0
2022-07-27 22:48:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509415576866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:48:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509436514832384[0;39m 生成今日电子书快照开始
2022-07-27 22:48:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509436514832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509436514832384[0;39m ==> Parameters: 
2022-07-27 22:48:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509436514832384[0;39m <==    Updates: 0
2022-07-27 22:48:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509436514832384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:48:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509457528295424[0;39m 生成今日电子书快照开始
2022-07-27 22:48:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509457528295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509457528295424[0;39m ==> Parameters: 
2022-07-27 22:48:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509457528295424[0;39m <==    Updates: 0
2022-07-27 22:48:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509457528295424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:48:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509478466260992[0;39m 生成今日电子书快照开始
2022-07-27 22:48:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509478466260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509478466260992[0;39m ==> Parameters: 
2022-07-27 22:48:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509478466260992[0;39m <==    Updates: 0
2022-07-27 22:48:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509478466260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:48:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207509478474649600[0;39m 更新电子书下的文档数据开始
2022-07-27 22:48:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509478474649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:48:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509478474649600[0;39m ==> Parameters: 
2022-07-27 22:48:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509478474649600[0;39m <==    Updates: 7
2022-07-27 22:48:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207509478474649600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:48:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509499416809472[0;39m 生成今日电子书快照开始
2022-07-27 22:48:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509499416809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509499416809472[0;39m ==> Parameters: 
2022-07-27 22:48:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509499416809472[0;39m <==    Updates: 0
2022-07-27 22:48:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509499416809472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:48:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509520409300992[0;39m 生成今日电子书快照开始
2022-07-27 22:48:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509520409300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509520409300992[0;39m ==> Parameters: 
2022-07-27 22:48:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509520409300992[0;39m <==    Updates: 0
2022-07-27 22:48:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509520409300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:48:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509541385015296[0;39m 生成今日电子书快照开始
2022-07-27 22:48:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509541385015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509541385015296[0;39m ==> Parameters: 
2022-07-27 22:48:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509541385015296[0;39m <==    Updates: 0
2022-07-27 22:48:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509541385015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:48:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509562352340992[0;39m 生成今日电子书快照开始
2022-07-27 22:48:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509562352340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:48:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509562352340992[0;39m ==> Parameters: 
2022-07-27 22:48:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509562352340992[0;39m <==    Updates: 0
2022-07-27 22:48:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509562352340992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:49:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509583311278080[0;39m 生成今日电子书快照开始
2022-07-27 22:49:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509583311278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509583311278080[0;39m ==> Parameters: 
2022-07-27 22:49:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509583311278080[0;39m <==    Updates: 0
2022-07-27 22:49:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509583311278080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:49:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509604312158208[0;39m 生成今日电子书快照开始
2022-07-27 22:49:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509604312158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509604312158208[0;39m ==> Parameters: 
2022-07-27 22:49:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509604312158208[0;39m <==    Updates: 0
2022-07-27 22:49:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509604312158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:49:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207509604320546816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:49:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509604320546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:49:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509604320546816[0;39m ==> Parameters: 
2022-07-27 22:49:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509604320546816[0;39m <==    Updates: 7
2022-07-27 22:49:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207509604320546816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:49:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509625287872512[0;39m 生成今日电子书快照开始
2022-07-27 22:49:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509625287872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509625287872512[0;39m ==> Parameters: 
2022-07-27 22:49:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509625287872512[0;39m <==    Updates: 0
2022-07-27 22:49:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509625287872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:49:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509646251003904[0;39m 生成今日电子书快照开始
2022-07-27 22:49:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509646251003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509646251003904[0;39m ==> Parameters: 
2022-07-27 22:49:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509646251003904[0;39m <==    Updates: 0
2022-07-27 22:49:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509646251003904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:49:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509667230912512[0;39m 生成今日电子书快照开始
2022-07-27 22:49:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509667230912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509667230912512[0;39m ==> Parameters: 
2022-07-27 22:49:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509667230912512[0;39m <==    Updates: 0
2022-07-27 22:49:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509667230912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:49:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509688189849600[0;39m 生成今日电子书快照开始
2022-07-27 22:49:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509688189849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509688189849600[0;39m ==> Parameters: 
2022-07-27 22:49:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509688189849600[0;39m <==    Updates: 0
2022-07-27 22:49:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509688189849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:49:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509709140398080[0;39m 生成今日电子书快照开始
2022-07-27 22:49:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509709140398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509709140398080[0;39m ==> Parameters: 
2022-07-27 22:49:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509709140398080[0;39m <==    Updates: 0
2022-07-27 22:49:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509709140398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:49:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207509730103529472[0;39m 更新电子书下的文档数据开始
2022-07-27 22:49:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509730103529472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:49:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509730103529472[0;39m ==> Parameters: 
2022-07-27 22:49:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509730103529472[0;39m <==    Updates: 7
2022-07-27 22:49:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207509730103529472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:49:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509730111918080[0;39m 生成今日电子书快照开始
2022-07-27 22:49:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509730111918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509730111918080[0;39m ==> Parameters: 
2022-07-27 22:49:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509730111918080[0;39m <==    Updates: 0
2022-07-27 22:49:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509730111918080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:49:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509751100215296[0;39m 生成今日电子书快照开始
2022-07-27 22:49:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509751100215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509751100215296[0;39m ==> Parameters: 
2022-07-27 22:49:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509751100215296[0;39m <==    Updates: 0
2022-07-27 22:49:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509751100215296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:49:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509772105289728[0;39m 生成今日电子书快照开始
2022-07-27 22:49:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509772105289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509772105289728[0;39m ==> Parameters: 
2022-07-27 22:49:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509772105289728[0;39m <==    Updates: 0
2022-07-27 22:49:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509772105289728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:49:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509793060032512[0;39m 生成今日电子书快照开始
2022-07-27 22:49:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509793060032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509793060032512[0;39m ==> Parameters: 
2022-07-27 22:49:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509793060032512[0;39m <==    Updates: 0
2022-07-27 22:49:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509793060032512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:49:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509814027358208[0;39m 生成今日电子书快照开始
2022-07-27 22:49:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509814027358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:49:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509814027358208[0;39m ==> Parameters: 
2022-07-27 22:49:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509814027358208[0;39m <==    Updates: 0
2022-07-27 22:49:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509814027358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:50:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509834961129472[0;39m 生成今日电子书快照开始
2022-07-27 22:50:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509834961129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509834961129472[0;39m ==> Parameters: 
2022-07-27 22:50:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509834961129472[0;39m <==    Updates: 0
2022-07-27 22:50:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509834961129472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:50:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207509855966203904[0;39m 更新电子书下的文档数据开始
2022-07-27 22:50:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509855966203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:50:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509855966203904[0;39m ==> Parameters: 
2022-07-27 22:50:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509855966203904[0;39m <==    Updates: 7
2022-07-27 22:50:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207509855966203904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:50:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509855970398208[0;39m 生成今日电子书快照开始
2022-07-27 22:50:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509855970398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509855970398208[0;39m ==> Parameters: 
2022-07-27 22:50:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509855970398208[0;39m <==    Updates: 0
2022-07-27 22:50:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509855970398208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:50:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509876916752384[0;39m 生成今日电子书快照开始
2022-07-27 22:50:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509876916752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509876916752384[0;39m ==> Parameters: 
2022-07-27 22:50:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509876916752384[0;39m <==    Updates: 0
2022-07-27 22:50:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509876916752384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:50:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509897934409728[0;39m 生成今日电子书快照开始
2022-07-27 22:50:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509897934409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509897934409728[0;39m ==> Parameters: 
2022-07-27 22:50:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509897934409728[0;39m <==    Updates: 0
2022-07-27 22:50:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509897934409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:50:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509918905929728[0;39m 生成今日电子书快照开始
2022-07-27 22:50:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509918905929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509918905929728[0;39m ==> Parameters: 
2022-07-27 22:50:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509918905929728[0;39m <==    Updates: 0
2022-07-27 22:50:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509918905929728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:50:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509939869061120[0;39m 生成今日电子书快照开始
2022-07-27 22:50:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509939869061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509939869061120[0;39m ==> Parameters: 
2022-07-27 22:50:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509939869061120[0;39m <==    Updates: 0
2022-07-27 22:50:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509939869061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:50:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509960827998208[0;39m 生成今日电子书快照开始
2022-07-27 22:50:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509960827998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509960827998208[0;39m ==> Parameters: 
2022-07-27 22:50:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509960827998208[0;39m <==    Updates: 0
2022-07-27 22:50:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509960827998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:50:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207509981795323904[0;39m 生成今日电子书快照开始
2022-07-27 22:50:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509981795323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509981795323904[0;39m ==> Parameters: 
2022-07-27 22:50:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207509981795323904[0;39m <==    Updates: 0
2022-07-27 22:50:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207509981795323904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:50:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207509981803712512[0;39m 更新电子书下的文档数据开始
2022-07-27 22:50:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509981803712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:50:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509981803712512[0;39m ==> Parameters: 
2022-07-27 22:50:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207509981803712512[0;39m <==    Updates: 7
2022-07-27 22:50:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207509981803712512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:50:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510002745872384[0;39m 生成今日电子书快照开始
2022-07-27 22:50:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510002745872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510002745872384[0;39m ==> Parameters: 
2022-07-27 22:50:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510002745872384[0;39m <==    Updates: 0
2022-07-27 22:50:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510002745872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:50:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510023763529728[0;39m 生成今日电子书快照开始
2022-07-27 22:50:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510023763529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510023763529728[0;39m ==> Parameters: 
2022-07-27 22:50:45.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510023763529728[0;39m <==    Updates: 0
2022-07-27 22:50:45.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510023763529728[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:50:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510044718272512[0;39m 生成今日电子书快照开始
2022-07-27 22:50:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510044718272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510044718272512[0;39m ==> Parameters: 
2022-07-27 22:50:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510044718272512[0;39m <==    Updates: 0
2022-07-27 22:50:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510044718272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:50:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510065673015296[0;39m 生成今日电子书快照开始
2022-07-27 22:50:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510065673015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:50:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510065673015296[0;39m ==> Parameters: 
2022-07-27 22:50:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510065673015296[0;39m <==    Updates: 0
2022-07-27 22:50:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510065673015296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:51:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510086631952384[0;39m 生成今日电子书快照开始
2022-07-27 22:51:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510086631952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510086631952384[0;39m ==> Parameters: 
2022-07-27 22:51:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510086631952384[0;39m <==    Updates: 0
2022-07-27 22:51:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510086631952384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:51:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510107599278080[0;39m 生成今日电子书快照开始
2022-07-27 22:51:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510107599278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510107599278080[0;39m ==> Parameters: 
2022-07-27 22:51:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510107599278080[0;39m <==    Updates: 0
2022-07-27 22:51:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510107599278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:51:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207510107607666688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:51:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510107607666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:51:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510107607666688[0;39m ==> Parameters: 
2022-07-27 22:51:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510107607666688[0;39m <==    Updates: 7
2022-07-27 22:51:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207510107607666688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:51:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510128600158208[0;39m 生成今日电子书快照开始
2022-07-27 22:51:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510128600158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510128600158208[0;39m ==> Parameters: 
2022-07-27 22:51:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510128600158208[0;39m <==    Updates: 0
2022-07-27 22:51:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510128600158208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:51:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510149533929472[0;39m 生成今日电子书快照开始
2022-07-27 22:51:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510149533929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510149533929472[0;39m ==> Parameters: 
2022-07-27 22:51:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510149533929472[0;39m <==    Updates: 0
2022-07-27 22:51:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510149533929472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:51:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510170509643776[0;39m 生成今日电子书快照开始
2022-07-27 22:51:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510170509643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510170509643776[0;39m ==> Parameters: 
2022-07-27 22:51:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510170509643776[0;39m <==    Updates: 0
2022-07-27 22:51:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510170509643776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:51:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510191514718208[0;39m 生成今日电子书快照开始
2022-07-27 22:51:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510191514718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510191514718208[0;39m ==> Parameters: 
2022-07-27 22:51:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510191514718208[0;39m <==    Updates: 0
2022-07-27 22:51:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510191514718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:51:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510212486238208[0;39m 生成今日电子书快照开始
2022-07-27 22:51:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510212486238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510212486238208[0;39m ==> Parameters: 
2022-07-27 22:51:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510212486238208[0;39m <==    Updates: 0
2022-07-27 22:51:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510212486238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:51:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510233466146816[0;39m 生成今日电子书快照开始
2022-07-27 22:51:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510233466146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510233466146816[0;39m ==> Parameters: 
2022-07-27 22:51:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510233466146816[0;39m <==    Updates: 0
2022-07-27 22:51:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510233466146816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:51:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207510233478729728[0;39m 更新电子书下的文档数据开始
2022-07-27 22:51:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510233478729728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:51:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510233478729728[0;39m ==> Parameters: 
2022-07-27 22:51:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510233478729728[0;39m <==    Updates: 7
2022-07-27 22:51:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207510233478729728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:51:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510254454444032[0;39m 生成今日电子书快照开始
2022-07-27 22:51:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510254454444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510254454444032[0;39m ==> Parameters: 
2022-07-27 22:51:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510254454444032[0;39m <==    Updates: 0
2022-07-27 22:51:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510254454444032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:51:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510275425964032[0;39m 生成今日电子书快照开始
2022-07-27 22:51:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510275425964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510275425964032[0;39m ==> Parameters: 
2022-07-27 22:51:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510275425964032[0;39m <==    Updates: 0
2022-07-27 22:51:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510275425964032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:51:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510296355540992[0;39m 生成今日电子书快照开始
2022-07-27 22:51:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510296355540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510296355540992[0;39m ==> Parameters: 
2022-07-27 22:51:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510296355540992[0;39m <==    Updates: 0
2022-07-27 22:51:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510296355540992[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:51:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510317331255296[0;39m 生成今日电子书快照开始
2022-07-27 22:51:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510317331255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:51:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510317331255296[0;39m ==> Parameters: 
2022-07-27 22:51:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510317331255296[0;39m <==    Updates: 0
2022-07-27 22:51:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510317331255296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:52:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510338294386688[0;39m 生成今日电子书快照开始
2022-07-27 22:52:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510338294386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510338294386688[0;39m ==> Parameters: 
2022-07-27 22:52:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510338294386688[0;39m <==    Updates: 0
2022-07-27 22:52:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510338294386688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:52:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207510359291072512[0;39m 更新电子书下的文档数据开始
2022-07-27 22:52:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510359291072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:52:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510359291072512[0;39m ==> Parameters: 
2022-07-27 22:52:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510359291072512[0;39m <==    Updates: 7
2022-07-27 22:52:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207510359291072512[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-27 22:52:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510359316238336[0;39m 生成今日电子书快照开始
2022-07-27 22:52:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510359316238336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510359316238336[0;39m ==> Parameters: 
2022-07-27 22:52:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510359316238336[0;39m <==    Updates: 0
2022-07-27 22:52:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510359316238336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:52:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510380266786816[0;39m 生成今日电子书快照开始
2022-07-27 22:52:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510380266786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510380266786816[0;39m ==> Parameters: 
2022-07-27 22:52:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510380266786816[0;39m <==    Updates: 0
2022-07-27 22:52:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510380266786816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:52:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510401234112512[0;39m 生成今日电子书快照开始
2022-07-27 22:52:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510401234112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510401234112512[0;39m ==> Parameters: 
2022-07-27 22:52:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510401234112512[0;39m <==    Updates: 0
2022-07-27 22:52:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510401234112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:52:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510422163689472[0;39m 生成今日电子书快照开始
2022-07-27 22:52:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510422163689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510422163689472[0;39m ==> Parameters: 
2022-07-27 22:52:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510422163689472[0;39m <==    Updates: 0
2022-07-27 22:52:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510422163689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:52:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510443139403776[0;39m 生成今日电子书快照开始
2022-07-27 22:52:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510443139403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510443139403776[0;39m ==> Parameters: 
2022-07-27 22:52:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510443139403776[0;39m <==    Updates: 0
2022-07-27 22:52:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510443139403776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:52:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510464110923776[0;39m 生成今日电子书快照开始
2022-07-27 22:52:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510464110923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510464110923776[0;39m ==> Parameters: 
2022-07-27 22:52:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510464110923776[0;39m <==    Updates: 0
2022-07-27 22:52:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510464110923776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:52:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510485082443776[0;39m 生成今日电子书快照开始
2022-07-27 22:52:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510485082443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510485082443776[0;39m ==> Parameters: 
2022-07-27 22:52:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510485082443776[0;39m <==    Updates: 0
2022-07-27 22:52:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510485082443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:52:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207510485095026688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:52:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510485095026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:52:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510485095026688[0;39m ==> Parameters: 
2022-07-27 22:52:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510485095026688[0;39m <==    Updates: 7
2022-07-27 22:52:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207510485095026688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:52:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510506079129600[0;39m 生成今日电子书快照开始
2022-07-27 22:52:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510506079129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510506079129600[0;39m ==> Parameters: 
2022-07-27 22:52:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510506079129600[0;39m <==    Updates: 0
2022-07-27 22:52:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510506079129600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:52:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510527038066688[0;39m 生成今日电子书快照开始
2022-07-27 22:52:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510527038066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510527038066688[0;39m ==> Parameters: 
2022-07-27 22:52:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510527038066688[0;39m <==    Updates: 0
2022-07-27 22:52:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510527038066688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:52:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510548051529728[0;39m 生成今日电子书快照开始
2022-07-27 22:52:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510548051529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510548051529728[0;39m ==> Parameters: 
2022-07-27 22:52:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510548051529728[0;39m <==    Updates: 0
2022-07-27 22:52:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510548051529728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:52:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510569027244032[0;39m 生成今日电子书快照开始
2022-07-27 22:52:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510569027244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:52:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510569027244032[0;39m ==> Parameters: 
2022-07-27 22:52:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510569027244032[0;39m <==    Updates: 0
2022-07-27 22:52:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510569027244032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:53:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510589961015296[0;39m 生成今日电子书快照开始
2022-07-27 22:53:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510589961015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510589961015296[0;39m ==> Parameters: 
2022-07-27 22:53:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510589961015296[0;39m <==    Updates: 0
2022-07-27 22:53:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510589961015296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:53:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207510610932535296[0;39m 更新电子书下的文档数据开始
2022-07-27 22:53:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510610932535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:53:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510610932535296[0;39m ==> Parameters: 
2022-07-27 22:53:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510610932535296[0;39m <==    Updates: 7
2022-07-27 22:53:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207510610932535296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:53:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510610936729600[0;39m 生成今日电子书快照开始
2022-07-27 22:53:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510610936729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510610936729600[0;39m ==> Parameters: 
2022-07-27 22:53:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510610936729600[0;39m <==    Updates: 0
2022-07-27 22:53:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510610936729600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:53:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510631883083776[0;39m 生成今日电子书快照开始
2022-07-27 22:53:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510631883083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510631883083776[0;39m ==> Parameters: 
2022-07-27 22:53:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510631883083776[0;39m <==    Updates: 0
2022-07-27 22:53:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510631883083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:53:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510652862992384[0;39m 生成今日电子书快照开始
2022-07-27 22:53:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510652862992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510652862992384[0;39m ==> Parameters: 
2022-07-27 22:53:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510652862992384[0;39m <==    Updates: 0
2022-07-27 22:53:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510652862992384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:53:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510673876455424[0;39m 生成今日电子书快照开始
2022-07-27 22:53:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510673876455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510673876455424[0;39m ==> Parameters: 
2022-07-27 22:53:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510673876455424[0;39m <==    Updates: 0
2022-07-27 22:53:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510673876455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:53:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510694847975424[0;39m 生成今日电子书快照开始
2022-07-27 22:53:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510694847975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510694847975424[0;39m ==> Parameters: 
2022-07-27 22:53:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510694847975424[0;39m <==    Updates: 0
2022-07-27 22:53:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510694847975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:53:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510715815301120[0;39m 生成今日电子书快照开始
2022-07-27 22:53:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510715815301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510715815301120[0;39m ==> Parameters: 
2022-07-27 22:53:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510715815301120[0;39m <==    Updates: 0
2022-07-27 22:53:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510715815301120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:53:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510736786821120[0;39m 生成今日电子书快照开始
2022-07-27 22:53:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510736786821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510736786821120[0;39m ==> Parameters: 
2022-07-27 22:53:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510736786821120[0;39m <==    Updates: 0
2022-07-27 22:53:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510736786821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:53:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207510736795209728[0;39m 更新电子书下的文档数据开始
2022-07-27 22:53:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510736795209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:53:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510736795209728[0;39m ==> Parameters: 
2022-07-27 22:53:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510736795209728[0;39m <==    Updates: 7
2022-07-27 22:53:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207510736795209728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:53:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510757745758208[0;39m 生成今日电子书快照开始
2022-07-27 22:53:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510757745758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510757745758208[0;39m ==> Parameters: 
2022-07-27 22:53:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510757745758208[0;39m <==    Updates: 0
2022-07-27 22:53:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510757745758208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-27 22:53:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510778729861120[0;39m 生成今日电子书快照开始
2022-07-27 22:53:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510778729861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510778729861120[0;39m ==> Parameters: 
2022-07-27 22:53:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510778729861120[0;39m <==    Updates: 0
2022-07-27 22:53:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510778729861120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:53:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510799676215296[0;39m 生成今日电子书快照开始
2022-07-27 22:53:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510799676215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510799676215296[0;39m ==> Parameters: 
2022-07-27 22:53:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510799676215296[0;39m <==    Updates: 0
2022-07-27 22:53:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510799676215296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:53:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510820651929600[0;39m 生成今日电子书快照开始
2022-07-27 22:53:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510820651929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:53:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510820651929600[0;39m ==> Parameters: 
2022-07-27 22:53:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510820651929600[0;39m <==    Updates: 0
2022-07-27 22:53:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510820651929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:54:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510841657004032[0;39m 生成今日电子书快照开始
2022-07-27 22:54:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510841657004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510841657004032[0;39m ==> Parameters: 
2022-07-27 22:54:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510841657004032[0;39m <==    Updates: 0
2022-07-27 22:54:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510841657004032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:54:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510862603358208[0;39m 生成今日电子书快照开始
2022-07-27 22:54:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510862603358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510862603358208[0;39m ==> Parameters: 
2022-07-27 22:54:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510862603358208[0;39m <==    Updates: 0
2022-07-27 22:54:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510862603358208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:54:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207510862607552512[0;39m 更新电子书下的文档数据开始
2022-07-27 22:54:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510862607552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:54:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510862607552512[0;39m ==> Parameters: 
2022-07-27 22:54:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510862607552512[0;39m <==    Updates: 7
2022-07-27 22:54:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207510862607552512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:54:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510883583266816[0;39m 生成今日电子书快照开始
2022-07-27 22:54:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510883583266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510883583266816[0;39m ==> Parameters: 
2022-07-27 22:54:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510883583266816[0;39m <==    Updates: 0
2022-07-27 22:54:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510883583266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:54:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510904529620992[0;39m 生成今日电子书快照开始
2022-07-27 22:54:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510904529620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510904529620992[0;39m ==> Parameters: 
2022-07-27 22:54:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510904529620992[0;39m <==    Updates: 0
2022-07-27 22:54:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510904529620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:54:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510925522112512[0;39m 生成今日电子书快照开始
2022-07-27 22:54:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510925522112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510925522112512[0;39m ==> Parameters: 
2022-07-27 22:54:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510925522112512[0;39m <==    Updates: 0
2022-07-27 22:54:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510925522112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:54:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510946464272384[0;39m 生成今日电子书快照开始
2022-07-27 22:54:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510946464272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510946464272384[0;39m ==> Parameters: 
2022-07-27 22:54:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510946464272384[0;39m <==    Updates: 0
2022-07-27 22:54:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510946464272384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:54:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510967477735424[0;39m 生成今日电子书快照开始
2022-07-27 22:54:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510967477735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510967477735424[0;39m ==> Parameters: 
2022-07-27 22:54:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510967477735424[0;39m <==    Updates: 0
2022-07-27 22:54:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510967477735424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:54:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207510988424089600[0;39m 生成今日电子书快照开始
2022-07-27 22:54:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510988424089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510988424089600[0;39m ==> Parameters: 
2022-07-27 22:54:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207510988424089600[0;39m <==    Updates: 0
2022-07-27 22:54:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207510988424089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:54:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207510988432478208[0;39m 更新电子书下的文档数据开始
2022-07-27 22:54:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510988432478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:54:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510988432478208[0;39m ==> Parameters: 
2022-07-27 22:54:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207510988432478208[0;39m <==    Updates: 7
2022-07-27 22:54:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207510988432478208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:54:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511009370443776[0;39m 生成今日电子书快照开始
2022-07-27 22:54:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511009370443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511009370443776[0;39m ==> Parameters: 
2022-07-27 22:54:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511009370443776[0;39m <==    Updates: 0
2022-07-27 22:54:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511009370443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:54:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511030396489728[0;39m 生成今日电子书快照开始
2022-07-27 22:54:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511030396489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511030396489728[0;39m ==> Parameters: 
2022-07-27 22:54:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511030396489728[0;39m <==    Updates: 0
2022-07-27 22:54:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511030396489728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:54:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511051313483776[0;39m 生成今日电子书快照开始
2022-07-27 22:54:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511051313483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511051313483776[0;39m ==> Parameters: 
2022-07-27 22:54:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511051313483776[0;39m <==    Updates: 0
2022-07-27 22:54:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511051313483776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:54:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511072322752512[0;39m 生成今日电子书快照开始
2022-07-27 22:54:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511072322752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:54:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511072322752512[0;39m ==> Parameters: 
2022-07-27 22:54:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511072322752512[0;39m <==    Updates: 0
2022-07-27 22:54:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511072322752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511093260718080[0;39m 生成今日电子书快照开始
2022-07-27 22:55:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511093260718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511093260718080[0;39m ==> Parameters: 
2022-07-27 22:55:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511093260718080[0;39m <==    Updates: 0
2022-07-27 22:55:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511093260718080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-27 22:55:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511114274181120[0;39m 生成今日电子书快照开始
2022-07-27 22:55:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511114274181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511114274181120[0;39m ==> Parameters: 
2022-07-27 22:55:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511114274181120[0;39m <==    Updates: 0
2022-07-27 22:55:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511114274181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207511114282569728[0;39m 更新电子书下的文档数据开始
2022-07-27 22:55:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511114282569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:55:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511114282569728[0;39m ==> Parameters: 
2022-07-27 22:55:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511114282569728[0;39m <==    Updates: 7
2022-07-27 22:55:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207511114282569728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:55:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511135203758080[0;39m 生成今日电子书快照开始
2022-07-27 22:55:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511135203758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511135203758080[0;39m ==> Parameters: 
2022-07-27 22:55:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511135203758080[0;39m <==    Updates: 0
2022-07-27 22:55:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511135203758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511156217221120[0;39m 生成今日电子书快照开始
2022-07-27 22:55:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511156217221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511156217221120[0;39m ==> Parameters: 
2022-07-27 22:55:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511156217221120[0;39m <==    Updates: 0
2022-07-27 22:55:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511156217221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511177180352512[0;39m 生成今日电子书快照开始
2022-07-27 22:55:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511177180352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511177180352512[0;39m ==> Parameters: 
2022-07-27 22:55:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511177180352512[0;39m <==    Updates: 0
2022-07-27 22:55:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511177180352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511198151872512[0;39m 生成今日电子书快照开始
2022-07-27 22:55:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511198151872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511198151872512[0;39m ==> Parameters: 
2022-07-27 22:55:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511198151872512[0;39m <==    Updates: 0
2022-07-27 22:55:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511198151872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511219144364032[0;39m 生成今日电子书快照开始
2022-07-27 22:55:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511219144364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511219144364032[0;39m ==> Parameters: 
2022-07-27 22:55:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511219144364032[0;39m <==    Updates: 0
2022-07-27 22:55:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511219144364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207511240090718208[0;39m 更新电子书下的文档数据开始
2022-07-27 22:55:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511240090718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:55:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511240090718208[0;39m ==> Parameters: 
2022-07-27 22:55:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511240090718208[0;39m <==    Updates: 7
2022-07-27 22:55:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207511240090718208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:55:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511240099106816[0;39m 生成今日电子书快照开始
2022-07-27 22:55:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511240099106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511240099106816[0;39m ==> Parameters: 
2022-07-27 22:55:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511240099106816[0;39m <==    Updates: 0
2022-07-27 22:55:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511240099106816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:55:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511261053849600[0;39m 生成今日电子书快照开始
2022-07-27 22:55:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511261053849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511261053849600[0;39m ==> Parameters: 
2022-07-27 22:55:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511261053849600[0;39m <==    Updates: 0
2022-07-27 22:55:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511261053849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511282012786688[0;39m 生成今日电子书快照开始
2022-07-27 22:55:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511282012786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511282012786688[0;39m ==> Parameters: 
2022-07-27 22:55:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511282012786688[0;39m <==    Updates: 0
2022-07-27 22:55:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511282012786688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:55:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511303009472512[0;39m 生成今日电子书快照开始
2022-07-27 22:55:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511303009472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511303009472512[0;39m ==> Parameters: 
2022-07-27 22:55:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511303009472512[0;39m <==    Updates: 0
2022-07-27 22:55:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511303009472512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:55:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511323939049472[0;39m 生成今日电子书快照开始
2022-07-27 22:55:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511323939049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:55:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511323939049472[0;39m ==> Parameters: 
2022-07-27 22:55:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511323939049472[0;39m <==    Updates: 0
2022-07-27 22:55:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511323939049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:56:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511344944123904[0;39m 生成今日电子书快照开始
2022-07-27 22:56:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511344944123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511344944123904[0;39m ==> Parameters: 
2022-07-27 22:56:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511344944123904[0;39m <==    Updates: 0
2022-07-27 22:56:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511344944123904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:56:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207511365882089472[0;39m 更新电子书下的文档数据开始
2022-07-27 22:56:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511365882089472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:56:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511365882089472[0;39m ==> Parameters: 
2022-07-27 22:56:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511365882089472[0;39m <==    Updates: 7
2022-07-27 22:56:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207511365882089472[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-27 22:56:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511365907255296[0;39m 生成今日电子书快照开始
2022-07-27 22:56:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511365907255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511365907255296[0;39m ==> Parameters: 
2022-07-27 22:56:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511365907255296[0;39m <==    Updates: 0
2022-07-27 22:56:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511365907255296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:56:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511386874580992[0;39m 生成今日电子书快照开始
2022-07-27 22:56:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511386874580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511386874580992[0;39m ==> Parameters: 
2022-07-27 22:56:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511386874580992[0;39m <==    Updates: 0
2022-07-27 22:56:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511386874580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:56:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511407833518080[0;39m 生成今日电子书快照开始
2022-07-27 22:56:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511407833518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511407833518080[0;39m ==> Parameters: 
2022-07-27 22:56:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511407833518080[0;39m <==    Updates: 0
2022-07-27 22:56:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511407833518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:56:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511428809232384[0;39m 生成今日电子书快照开始
2022-07-27 22:56:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511428809232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511428809232384[0;39m ==> Parameters: 
2022-07-27 22:56:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511428809232384[0;39m <==    Updates: 0
2022-07-27 22:56:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511428809232384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:56:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511449831084032[0;39m 生成今日电子书快照开始
2022-07-27 22:56:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511449831084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511449831084032[0;39m ==> Parameters: 
2022-07-27 22:56:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511449831084032[0;39m <==    Updates: 0
2022-07-27 22:56:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511449831084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:56:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511470743883776[0;39m 生成今日电子书快照开始
2022-07-27 22:56:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511470743883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511470743883776[0;39m ==> Parameters: 
2022-07-27 22:56:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511470743883776[0;39m <==    Updates: 0
2022-07-27 22:56:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511470743883776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:56:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207511491719598080[0;39m 更新电子书下的文档数据开始
2022-07-27 22:56:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511491719598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:56:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511491719598080[0;39m ==> Parameters: 
2022-07-27 22:56:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511491719598080[0;39m <==    Updates: 7
2022-07-27 22:56:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207511491719598080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:56:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511491727986688[0;39m 生成今日电子书快照开始
2022-07-27 22:56:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511491727986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511491727986688[0;39m ==> Parameters: 
2022-07-27 22:56:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511491727986688[0;39m <==    Updates: 0
2022-07-27 22:56:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511491727986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:56:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511512707895296[0;39m 生成今日电子书快照开始
2022-07-27 22:56:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511512707895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511512707895296[0;39m ==> Parameters: 
2022-07-27 22:56:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511512707895296[0;39m <==    Updates: 0
2022-07-27 22:56:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511512707895296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:56:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511533704581120[0;39m 生成今日电子书快照开始
2022-07-27 22:56:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511533704581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511533704581120[0;39m ==> Parameters: 
2022-07-27 22:56:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511533704581120[0;39m <==    Updates: 0
2022-07-27 22:56:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511533704581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:56:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511554663518208[0;39m 生成今日电子书快照开始
2022-07-27 22:56:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511554663518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511554663518208[0;39m ==> Parameters: 
2022-07-27 22:56:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511554663518208[0;39m <==    Updates: 0
2022-07-27 22:56:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511554663518208[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-27 22:56:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511575618260992[0;39m 生成今日电子书快照开始
2022-07-27 22:56:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511575618260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:56:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511575618260992[0;39m ==> Parameters: 
2022-07-27 22:56:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511575618260992[0;39m <==    Updates: 0
2022-07-27 22:56:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511575618260992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:57:00.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511596564615168[0;39m 生成今日电子书快照开始
2022-07-27 22:57:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511596564615168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511596564615168[0;39m ==> Parameters: 
2022-07-27 22:57:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511596564615168[0;39m <==    Updates: 0
2022-07-27 22:57:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511596564615168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:57:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511617569689600[0;39m 生成今日电子书快照开始
2022-07-27 22:57:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511617569689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511617569689600[0;39m ==> Parameters: 
2022-07-27 22:57:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511617569689600[0;39m <==    Updates: 0
2022-07-27 22:57:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511617569689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:57:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207511617578078208[0;39m 更新电子书下的文档数据开始
2022-07-27 22:57:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511617578078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:57:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511617578078208[0;39m ==> Parameters: 
2022-07-27 22:57:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511617578078208[0;39m <==    Updates: 7
2022-07-27 22:57:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207511617578078208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:57:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511638566375424[0;39m 生成今日电子书快照开始
2022-07-27 22:57:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511638566375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511638566375424[0;39m ==> Parameters: 
2022-07-27 22:57:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511638566375424[0;39m <==    Updates: 0
2022-07-27 22:57:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511638566375424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:57:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511659529506816[0;39m 生成今日电子书快照开始
2022-07-27 22:57:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511659529506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511659529506816[0;39m ==> Parameters: 
2022-07-27 22:57:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511659529506816[0;39m <==    Updates: 0
2022-07-27 22:57:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511659529506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:57:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511680488443904[0;39m 生成今日电子书快照开始
2022-07-27 22:57:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511680488443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511680488443904[0;39m ==> Parameters: 
2022-07-27 22:57:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511680488443904[0;39m <==    Updates: 0
2022-07-27 22:57:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511680488443904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:57:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511701476741120[0;39m 生成今日电子书快照开始
2022-07-27 22:57:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511701476741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511701476741120[0;39m ==> Parameters: 
2022-07-27 22:57:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511701476741120[0;39m <==    Updates: 0
2022-07-27 22:57:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511701476741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:57:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511722427289600[0;39m 生成今日电子书快照开始
2022-07-27 22:57:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511722427289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511722427289600[0;39m ==> Parameters: 
2022-07-27 22:57:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511722427289600[0;39m <==    Updates: 0
2022-07-27 22:57:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511722427289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:57:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207511743386226688[0;39m 更新电子书下的文档数据开始
2022-07-27 22:57:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511743386226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:57:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511743386226688[0;39m ==> Parameters: 
2022-07-27 22:57:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511743386226688[0;39m <==    Updates: 7
2022-07-27 22:57:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207511743386226688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:57:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511743394615296[0;39m 生成今日电子书快照开始
2022-07-27 22:57:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511743394615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511743394615296[0;39m ==> Parameters: 
2022-07-27 22:57:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511743394615296[0;39m <==    Updates: 0
2022-07-27 22:57:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511743394615296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:57:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511764399689728[0;39m 生成今日电子书快照开始
2022-07-27 22:57:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511764399689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511764399689728[0;39m ==> Parameters: 
2022-07-27 22:57:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511764399689728[0;39m <==    Updates: 0
2022-07-27 22:57:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511764399689728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:57:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511785358626816[0;39m 生成今日电子书快照开始
2022-07-27 22:57:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511785358626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511785358626816[0;39m ==> Parameters: 
2022-07-27 22:57:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511785358626816[0;39m <==    Updates: 0
2022-07-27 22:57:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511785358626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:57:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511806304980992[0;39m 生成今日电子书快照开始
2022-07-27 22:57:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511806304980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511806304980992[0;39m ==> Parameters: 
2022-07-27 22:57:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511806304980992[0;39m <==    Updates: 0
2022-07-27 22:57:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511806304980992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-27 22:57:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511827289083904[0;39m 生成今日电子书快照开始
2022-07-27 22:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511827289083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511827289083904[0;39m ==> Parameters: 
2022-07-27 22:57:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511827289083904[0;39m <==    Updates: 0
2022-07-27 22:57:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511827289083904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:58:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511848248020992[0;39m 生成今日电子书快照开始
2022-07-27 22:58:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511848248020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511848248020992[0;39m ==> Parameters: 
2022-07-27 22:58:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511848248020992[0;39m <==    Updates: 0
2022-07-27 22:58:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511848248020992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:58:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207511869236318208[0;39m 更新电子书下的文档数据开始
2022-07-27 22:58:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511869236318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:58:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511869236318208[0;39m ==> Parameters: 
2022-07-27 22:58:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511869236318208[0;39m <==    Updates: 7
2022-07-27 22:58:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207511869236318208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:58:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511869244706816[0;39m 生成今日电子书快照开始
2022-07-27 22:58:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511869244706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511869244706816[0;39m ==> Parameters: 
2022-07-27 22:58:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511869244706816[0;39m <==    Updates: 0
2022-07-27 22:58:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511869244706816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-27 22:58:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511890191060992[0;39m 生成今日电子书快照开始
2022-07-27 22:58:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511890191060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511890191060992[0;39m ==> Parameters: 
2022-07-27 22:58:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511890191060992[0;39m <==    Updates: 0
2022-07-27 22:58:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511890191060992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:58:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511911175163904[0;39m 生成今日电子书快照开始
2022-07-27 22:58:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511911175163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511911175163904[0;39m ==> Parameters: 
2022-07-27 22:58:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511911175163904[0;39m <==    Updates: 0
2022-07-27 22:58:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511911175163904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:58:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511932129906688[0;39m 生成今日电子书快照开始
2022-07-27 22:58:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511932129906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511932129906688[0;39m ==> Parameters: 
2022-07-27 22:58:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511932129906688[0;39m <==    Updates: 0
2022-07-27 22:58:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511932129906688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:58:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511953093038080[0;39m 生成今日电子书快照开始
2022-07-27 22:58:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511953093038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511953093038080[0;39m ==> Parameters: 
2022-07-27 22:58:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511953093038080[0;39m <==    Updates: 0
2022-07-27 22:58:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511953093038080[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-27 22:58:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511974110695424[0;39m 生成今日电子书快照开始
2022-07-27 22:58:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511974110695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511974110695424[0;39m ==> Parameters: 
2022-07-27 22:58:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511974110695424[0;39m <==    Updates: 0
2022-07-27 22:58:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511974110695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:58:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207511995073826816[0;39m 生成今日电子书快照开始
2022-07-27 22:58:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511995073826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511995073826816[0;39m ==> Parameters: 
2022-07-27 22:58:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207511995073826816[0;39m <==    Updates: 0
2022-07-27 22:58:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207511995073826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:58:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207511995082215424[0;39m 更新电子书下的文档数据开始
2022-07-27 22:58:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511995082215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:58:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511995082215424[0;39m ==> Parameters: 
2022-07-27 22:58:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207511995082215424[0;39m <==    Updates: 7
2022-07-27 22:58:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207511995082215424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-27 22:58:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512016015986688[0;39m 生成今日电子书快照开始
2022-07-27 22:58:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512016015986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512016015986688[0;39m ==> Parameters: 
2022-07-27 22:58:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512016015986688[0;39m <==    Updates: 0
2022-07-27 22:58:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512016015986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:58:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512037008478208[0;39m 生成今日电子书快照开始
2022-07-27 22:58:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512037008478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512037008478208[0;39m ==> Parameters: 
2022-07-27 22:58:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512037008478208[0;39m <==    Updates: 0
2022-07-27 22:58:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512037008478208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:58:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512057950638080[0;39m 生成今日电子书快照开始
2022-07-27 22:58:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512057950638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512057950638080[0;39m ==> Parameters: 
2022-07-27 22:58:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512057950638080[0;39m <==    Updates: 0
2022-07-27 22:58:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512057950638080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:58:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512078968295424[0;39m 生成今日电子书快照开始
2022-07-27 22:58:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512078968295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:58:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512078968295424[0;39m ==> Parameters: 
2022-07-27 22:58:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512078968295424[0;39m <==    Updates: 0
2022-07-27 22:58:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512078968295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:59:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512099914649600[0;39m 生成今日电子书快照开始
2022-07-27 22:59:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512099914649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:59:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512099914649600[0;39m ==> Parameters: 
2022-07-27 22:59:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512099914649600[0;39m <==    Updates: 0
2022-07-27 22:59:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512099914649600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:59:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m207512120902946816[0;39m 更新电子书下的文档数据开始
2022-07-27 22:59:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207512120902946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-27 22:59:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207512120902946816[0;39m ==> Parameters: 
2022-07-27 22:59:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m207512120902946816[0;39m <==    Updates: 7
2022-07-27 22:59:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m207512120902946816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-27 22:59:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512120907141120[0;39m 生成今日电子书快照开始
2022-07-27 22:59:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512120907141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:59:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512120907141120[0;39m ==> Parameters: 
2022-07-27 22:59:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512120907141120[0;39m <==    Updates: 0
2022-07-27 22:59:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512120907141120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:59:06.392 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m207506328938221568[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-27 22:59:06.392 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m207506328938221568[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-27 22:59:06.392 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m207506328938221568[0;39m 登录校验开始，token：207474798689914880
2022-07-27 22:59:06.429 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m207506328938221568[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"207474798689914880"}
2022-07-27 22:59:06.430 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512126850469888[0;39m ------------- 开始 -------------
2022-07-27 22:59:06.430 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512126850469888[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-27 22:59:06.430 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512126850469888[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-27 22:59:06.430 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512126850469888[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:06.431 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512126850469888[0;39m 请求参数: [{"content":"<blockquote><ul><li><font size=\"4\">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size=\"4\">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size=\"4\">Vue3数据绑定显示列表数据（双向数据绑定）<br><font face=\"仿宋\">实时将后端的值刷新到前端页面上，html代码要拿到响应式变量，需要在setup最后return出去，大体流程如下：<br>前端页面写上{{ebooks}}<br>eg：const=ebooks ref():<br>axios.get(\"路径\").then((resonse)=&gt;{<br>const data=response.data;<br>ebooks.value=data.content（后端电子书的内容）<br>})<br><br>return {ebooks</font></font><font face=\"仿宋\">}</font></li></ul></blockquote>","ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2}]
2022-07-27 22:59:06.432 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207512126850469888[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-27 22:59:06.432 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207512126850469888[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), 前后端交互融合(String), 5(Integer), 5(Integer), 2(Integer), 202715322204164096(Long)
2022-07-27 22:59:06.437 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m207512126850469888[0;39m <==    Updates: 1
2022-07-27 22:59:06.438 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207512126850469888[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-27 22:59:06.438 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207512126850469888[0;39m ==> Parameters: <blockquote><ul><li><font size="4">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size="4">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size="4">Vue3数据绑定显示列表数据（双向数据绑定）<br><font face="仿宋">实时将后端的值刷新到前端页面上，html代码要拿到响应式变量，需要在setup最后return出去，大体流程如下：<br>前端页面写上{{ebooks}}<br>eg：const=ebooks ref():<br>axios.get("路径").then((resonse)=&gt;{<br>const data=response.data;<br>ebooks.value=data.content（后端电子书的内容）<br>})<br><br>return {ebooks</font></font><font face="仿宋">}</font></li></ul></blockquote>(String), 202715322204164096(Long)
2022-07-27 22:59:06.439 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m207512126850469888[0;39m <==    Updates: 1
2022-07-27 22:59:06.553 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512126850469888[0;39m 返回结果: {"success":true}
2022-07-27 22:59:06.554 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512126850469888[0;39m ------------- 结束 耗时：124 ms -------------
2022-07-27 22:59:06.556 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m207512126850469888[0;39m ------------- LoginInterceptor 结束 耗时：164 ms -------------
2022-07-27 22:59:06.568 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512127429283840[0;39m ------------- 开始 -------------
2022-07-27 22:59:06.569 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512127429283840[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-27 22:59:06.569 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512127429283840[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-27 22:59:06.569 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512127429283840[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:06.569 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512127429283840[0;39m 请求参数: [202714600712572928]
2022-07-27 22:59:06.570 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207512127429283840[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-27 22:59:06.570 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207512127429283840[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-27 22:59:06.571 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 22:59:06.572 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 24, 2
2022-07-27 22:59:06.572 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 26, 3
2022-07-27 22:59:06.572 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 24, 2
2022-07-27 22:59:06.573 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 13, 2
2022-07-27 22:59:06.573 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 5, 2
2022-07-27 22:59:06.573 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-27 22:59:06.574 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-27 22:59:06.574 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 3, 1
2022-07-27 22:59:06.575 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-27 22:59:06.575 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-27 22:59:06.576 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-27 22:59:06.576 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512127429283840[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-27 22:59:06.577 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207512127429283840[0;39m <==      Total: 12
2022-07-27 22:59:06.578 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512127429283840[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":26,"voteCount":3},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":13,"voteCount":2},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-27 22:59:06.578 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512127429283840[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-27 22:59:07.964 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512133284532224[0;39m ------------- 开始 -------------
2022-07-27 22:59:07.965 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512133284532224[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-27 22:59:07.965 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512133284532224[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-27 22:59:07.966 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512133284532224[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:07.966 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512133284532224[0;39m 请求参数: []
2022-07-27 22:59:07.966 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512133292920833[0;39m ------------- 开始 -------------
2022-07-27 22:59:07.966 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512133292920832[0;39m ------------- 开始 -------------
2022-07-27 22:59:07.967 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512133292920833[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-27 22:59:07.967 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512133292920832[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-27 22:59:07.967 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512133292920833[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-27 22:59:07.967 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512133292920832[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-27 22:59:07.967 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512133292920833[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:07.967 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512133292920832[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:07.967 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512133292920833[0;39m 请求参数: []
2022-07-27 22:59:07.967 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512133292920832[0;39m 请求参数: []
2022-07-27 22:59:07.970 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m207512133292920832[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-27 22:59:07.970 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m207512133284532224[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-27 22:59:07.970 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m207512133292920832[0;39m ==> Parameters: 
2022-07-27 22:59:07.970 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m207512133284532224[0;39m ==> Parameters: 
2022-07-27 22:59:07.971 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m207512133284532224[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-27 22:59:07.971 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207512133292920832[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-27 22:59:07.972 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m207512133284532224[0;39m <==        Row: 2022-07-26, 219, 43, 219, 43
2022-07-27 22:59:07.972 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207512133292920832[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-27 22:59:07.973 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207512133292920833[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-27 22:59:07.974 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207512133292920833[0;39m ==> Parameters: 
2022-07-27 22:59:07.974 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m207512133284532224[0;39m <==        Row: 2022-07-27, 226, 43, 7, 0
2022-07-27 22:59:07.974 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207512133292920832[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-27 22:59:07.974 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207512133292920832[0;39m <==        Row: 2022-07-14, 47, 13
2022-07-27 22:59:07.974 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m207512133284532224[0;39m <==      Total: 2
2022-07-27 22:59:07.976 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207512133292920832[0;39m <==        Row: 2022-07-16, 153, 37
2022-07-27 22:59:07.977 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207512133292920832[0;39m <==        Row: 2022-07-17, 2, 0
2022-07-27 22:59:07.977 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512133284532224[0;39m 返回结果: {"content":[{"date":1658764800000,"viewCount":219,"viewIncrease":219,"voteCount":43,"voteIncrease":43},{"date":1658851200000,"viewCount":226,"viewIncrease":7,"voteCount":43,"voteIncrease":0}],"success":true}
2022-07-27 22:59:07.977 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512133284532224[0;39m ------------- 结束 耗时：13 ms -------------
2022-07-27 22:59:07.978 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207512133292920832[0;39m <==        Row: 2022-07-20, 166, 38
2022-07-27 22:59:07.978 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==    Columns: id, parent, name, sort
2022-07-27 22:59:07.978 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-27 22:59:07.978 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m207512133292920832[0;39m <==        Row: 2022-07-26, 219, 43
2022-07-27 22:59:07.978 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 101, 100, Vue, 101
2022-07-27 22:59:07.978 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m207512133292920832[0;39m <==      Total: 7
2022-07-27 22:59:07.979 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-27 22:59:07.979 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512133292920832[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6},{"date":1657728000000,"viewCount":0,"viewIncrease":47,"voteCount":0,"voteIncrease":13},{"date":1657900800000,"viewCount":0,"viewIncrease":153,"voteCount":0,"voteIncrease":37},{"date":1657987200000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":0},{"date":1658246400000,"viewCount":0,"viewIncrease":166,"voteCount":0,"voteIncrease":38},{"date":1658764800000,"viewCount":0,"viewIncrease":219,"voteCount":0,"voteIncrease":43}],"success":true}
2022-07-27 22:59:07.979 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 200, 0, Java, 200
2022-07-27 22:59:07.979 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512133292920832[0;39m ------------- 结束 耗时：13 ms -------------
2022-07-27 22:59:07.979 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-27 22:59:07.980 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-27 22:59:07.981 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-27 22:59:07.982 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 300, 0, Python, 300
2022-07-27 22:59:07.982 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-27 22:59:07.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-27 22:59:07.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-27 22:59:07.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-27 22:59:07.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 500, 0, 其它, 500
2022-07-27 22:59:07.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-27 22:59:07.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-27 22:59:07.986 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m207512133292920833[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-27 22:59:07.987 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m207512133292920833[0;39m <==      Total: 16
2022-07-27 22:59:07.999 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512133292920833[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-27 22:59:08.000 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512133292920833[0;39m ------------- 结束 耗时：34 ms -------------
2022-07-27 22:59:09.938 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512141564088320[0;39m ------------- 开始 -------------
2022-07-27 22:59:09.938 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512141564088320[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-27 22:59:09.938 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512141564088320[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-27 22:59:09.938 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512141564088320[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:09.939 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512141564088320[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-27 22:59:09.947 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207512141564088320[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-27 22:59:09.947 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207512141564088320[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-27 22:59:09.948 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m207512141564088320[0;39m <==    Columns: count(0)
2022-07-27 22:59:09.948 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m207512141564088320[0;39m <==        Row: 1
2022-07-27 22:59:09.949 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m207512141564088320[0;39m <==      Total: 1
2022-07-27 22:59:09.950 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207512141564088320[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-27 22:59:09.951 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207512141564088320[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-27 22:59:09.952 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207512141564088320[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-27 22:59:09.953 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m207512141564088320[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 12, 109, 18
2022-07-27 22:59:09.953 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m207512141564088320[0;39m <==      Total: 1
2022-07-27 22:59:09.954 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m207512141564088320[0;39m 总行数：1
2022-07-27 22:59:09.954 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m207512141564088320[0;39m 总页数：1
2022-07-27 22:59:09.961 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512141564088320[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":12,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":109,"voteCount":18}],"total":1},"success":true}
2022-07-27 22:59:09.962 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512141564088320[0;39m ------------- 结束 耗时：24 ms -------------
2022-07-27 22:59:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512141866078208[0;39m 生成今日电子书快照开始
2022-07-27 22:59:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512141866078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:59:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512141866078208[0;39m ==> Parameters: 
2022-07-27 22:59:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512141866078208[0;39m <==    Updates: 0
2022-07-27 22:59:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512141866078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:59:11.161 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512146693722112[0;39m ------------- 开始 -------------
2022-07-27 22:59:11.161 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512146693722112[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-27 22:59:11.162 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512146693722112[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-27 22:59:11.162 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512146693722112[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:11.163 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512146693722112[0;39m 请求参数: [202714600712572928]
2022-07-27 22:59:11.164 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207512146693722112[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-27 22:59:11.164 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207512146693722112[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-27 22:59:11.165 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 22:59:11.165 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 24, 2
2022-07-27 22:59:11.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 26, 3
2022-07-27 22:59:11.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 24, 2
2022-07-27 22:59:11.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 13, 2
2022-07-27 22:59:11.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 5, 2
2022-07-27 22:59:11.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-27 22:59:11.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-27 22:59:11.168 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 3, 1
2022-07-27 22:59:11.168 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-27 22:59:11.168 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-27 22:59:11.168 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-27 22:59:11.168 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m207512146693722112[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-27 22:59:11.169 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m207512146693722112[0;39m <==      Total: 12
2022-07-27 22:59:11.170 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512146693722112[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":26,"voteCount":3},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":24,"voteCount":2},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":13,"voteCount":2},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":5,"voteCount":2},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-27 22:59:11.170 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512146693722112[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-27 22:59:11.185 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512146794385408[0;39m ------------- 开始 -------------
2022-07-27 22:59:11.185 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512146794385408[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-27 22:59:11.185 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512146794385408[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 22:59:11.186 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512146794385408[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:11.186 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512146794385408[0;39m 请求参数: [202714909656616960]
2022-07-27 22:59:11.187 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512146794385408[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 22:59:11.187 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512146794385408[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-27 22:59:11.188 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207512146794385408[0;39m <==    Columns: id, content
2022-07-27 22:59:11.188 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207512146794385408[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-27 22:59:11.189 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512146794385408[0;39m <==      Total: 1
2022-07-27 22:59:11.189 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512146794385408[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 22:59:11.189 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512146794385408[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-27 22:59:11.223 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512146794385408[0;39m <==    Updates: 1
2022-07-27 22:59:11.224 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512146794385408[0;39m 返回结果: {"content":"<blockquote><h2><b>前端：</b>Vue CLI(生成一个前端框架)、Vue3、Ant Design Vue(UI组件)、router、vuex、axios</h2><p><br></p><h2><b>后端：</b>SpringBoot核心知识体系AOP、拦截器、过滤器、异步化、定时任务、websocket、多环境、缓存、消息队列...</h2></blockquote>","success":true}
2022-07-27 22:59:11.224 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512146794385408[0;39m ------------- 结束 耗时：39 ms -------------
2022-07-27 22:59:12.213 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512151106129920[0;39m ------------- 开始 -------------
2022-07-27 22:59:12.213 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512151106129920[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202714909656616960 GET
2022-07-27 22:59:12.214 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512151106129920[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-27 22:59:12.214 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512151106129920[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:12.214 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512151106129920[0;39m 请求参数: [202714909656616960]
2022-07-27 22:59:12.256 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m207512151106129920[0;39m key不存在，放入：DOC_VOTE_202714909656616960_127.0.0.1，过期 86400 秒
2022-07-27 22:59:12.293 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512151106129920[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-27 22:59:12.294 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512151106129920[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-27 22:59:12.312 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512151106129920[0;39m <==    Updates: 1
2022-07-27 22:59:12.312 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512151106129920[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-27 22:59:12.312 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512151106129920[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-27 22:59:12.313 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m207512151106129920[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 22:59:12.313 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m207512151106129920[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 25, 3
2022-07-27 22:59:12.313 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512151106129920[0;39m <==      Total: 1
2022-07-27 22:59:12.317 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512151106129920[0;39m 返回结果: {"success":true}
2022-07-27 22:59:12.317 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512151106129920[0;39m ------------- 结束 耗时：104 ms -------------
2022-07-27 22:59:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512160753029120[0;39m ------------- 开始 -------------
2022-07-27 22:59:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512160753029120[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715322204164096 GET
2022-07-27 22:59:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512160753029120[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 22:59:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512160753029120[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:14.514 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512160753029120[0;39m 请求参数: [202715322204164096]
2022-07-27 22:59:14.514 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512160753029120[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 22:59:14.514 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512160753029120[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 22:59:14.515 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207512160753029120[0;39m <==    Columns: id, content
2022-07-27 22:59:14.515 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207512160753029120[0;39m <==        Row: 202715322204164096, <<BLOB>>
2022-07-27 22:59:14.516 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512160753029120[0;39m <==      Total: 1
2022-07-27 22:59:14.516 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512160753029120[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 22:59:14.517 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512160753029120[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 22:59:14.533 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512160753029120[0;39m <==    Updates: 1
2022-07-27 22:59:14.534 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512160753029120[0;39m 返回结果: {"content":"<blockquote><ul><li><font size=\"4\">集成HTTP库axios<br>npm install axios --save&nbsp;</font></li><li><font size=\"4\">前后端分离的项目的跨域问题？<br>CorsConfig类</font></li><li><font size=\"4\">Vue3数据绑定显示列表数据（双向数据绑定）<br><font face=\"仿宋\">实时将后端的值刷新到前端页面上，html代码要拿到响应式变量，需要在setup最后return出去，大体流程如下：<br>前端页面写上{{ebooks}}<br>eg：const=ebooks ref():<br>axios.get(\"路径\").then((resonse)=&gt;{<br>const data=response.data;<br>ebooks.value=data.content（后端电子书的内容）<br>})<br><br>return {ebooks</font></font><font face=\"仿宋\">}</font></li></ul></blockquote>","success":true}
2022-07-27 22:59:14.535 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512160753029120[0;39m ------------- 结束 耗时：22 ms -------------
2022-07-27 22:59:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512162825015296[0;39m 生成今日电子书快照开始
2022-07-27 22:59:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512162825015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:59:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512162825015296[0;39m ==> Parameters: 
2022-07-27 22:59:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512162825015296[0;39m <==    Updates: 0
2022-07-27 22:59:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512162825015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:59:16.348 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512168449576960[0;39m ------------- 开始 -------------
2022-07-27 22:59:16.348 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512168449576960[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715322204164096 GET
2022-07-27 22:59:16.348 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512168449576960[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-27 22:59:16.349 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512168449576960[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:16.349 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512168449576960[0;39m 请求参数: [202715322204164096]
2022-07-27 22:59:16.384 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m207512168449576960[0;39m key不存在，放入：DOC_VOTE_202715322204164096_127.0.0.1，过期 86400 秒
2022-07-27 22:59:16.421 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512168449576960[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-27 22:59:16.421 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512168449576960[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 22:59:16.436 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512168449576960[0;39m <==    Updates: 1
2022-07-27 22:59:16.436 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512168449576960[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-27 22:59:16.437 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512168449576960[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-27 22:59:16.437 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m207512168449576960[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 22:59:16.437 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m207512168449576960[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 6, 3
2022-07-27 22:59:16.438 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512168449576960[0;39m <==      Total: 1
2022-07-27 22:59:16.438 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512168449576960[0;39m 返回结果: {"success":true}
2022-07-27 22:59:16.438 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512168449576960[0;39m ------------- 结束 耗时：90 ms -------------
2022-07-27 22:59:17.158 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512171846963200[0;39m ------------- 开始 -------------
2022-07-27 22:59:17.158 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512171846963200[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715412436226048 GET
2022-07-27 22:59:17.158 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512171846963200[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 22:59:17.158 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512171846963200[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:17.159 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512171846963200[0;39m 请求参数: [202715412436226048]
2022-07-27 22:59:17.159 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512171846963200[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 22:59:17.159 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512171846963200[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-27 22:59:17.160 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207512171846963200[0;39m <==    Columns: id, content
2022-07-27 22:59:17.160 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207512171846963200[0;39m <==        Row: 202715412436226048, <<BLOB>>
2022-07-27 22:59:17.160 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512171846963200[0;39m <==      Total: 1
2022-07-27 22:59:17.161 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512171846963200[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 22:59:17.161 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512171846963200[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-27 22:59:17.176 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512171846963200[0;39m <==    Updates: 1
2022-07-27 22:59:17.177 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512171846963200[0;39m 返回结果: {"content":"","success":true}
2022-07-27 22:59:17.177 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512171846963200[0;39m ------------- 结束 耗时：19 ms -------------
2022-07-27 22:59:17.873 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512174845890560[0;39m ------------- 开始 -------------
2022-07-27 22:59:17.874 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512174845890560[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715172312322048 GET
2022-07-27 22:59:17.874 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512174845890560[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-27 22:59:17.874 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512174845890560[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:17.874 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512174845890560[0;39m 请求参数: [202715172312322048]
2022-07-27 22:59:17.874 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512174845890560[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-27 22:59:17.875 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512174845890560[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-27 22:59:17.875 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207512174845890560[0;39m <==    Columns: id, content
2022-07-27 22:59:17.876 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m207512174845890560[0;39m <==        Row: 202715172312322048, <<BLOB>>
2022-07-27 22:59:17.876 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m207512174845890560[0;39m <==      Total: 1
2022-07-27 22:59:17.876 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512174845890560[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-27 22:59:17.876 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512174845890560[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-27 22:59:17.892 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m207512174845890560[0;39m <==    Updates: 1
2022-07-27 22:59:17.893 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512174845890560[0;39m 返回结果: {"content":"<blockquote><ul><li><font size=\"4\" face=\"楷体\">数据库准备</font></li><li><font size=\"4\" face=\"楷体\">IDEA关联数据库</font></li><li><font size=\"4\" face=\"楷体\">集成Mybatis（持久层（Mapper/Dao）框架，访问数据库）</font></li><li><font size=\"4\" face=\"楷体\">Mybatis Generator的使用</font></li></ul></blockquote><p>&nbsp; &nbsp; &nbsp; &nbsp; <font size=\"4\" face=\"楷体\" style=\"background-color: rgb(249, 150, 59);\">1.&nbsp;</font><font size=\"3\"><b style=\"background-color: rgb(249, 150, 59);\">持久层框架：Mybatis，Hiberate有什么区别？</b></font></p><p>&nbsp; &nbsp;&nbsp;&nbsp;<span style=\"background-color: rgb(238, 236, 224);\">&nbsp;&nbsp;&nbsp;<font size=\"3\" style=\"\">前者是半自动（需自己写sql）的，后者是全自动的</font></span></p><p>&nbsp; &nbsp; &nbsp;&nbsp;<font face=\"宋体\">&nbsp;<b style=\"\"><font size=\"3\" style=\"background-color: rgb(249, 150, 59);\">&nbsp;2. 如何集成Mybatis？</font></b></font></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=\"3\" style=\"background-color: rgb(238, 236, 224);\">先在pom文件集成Mybatis和Mysql——&gt;配置数据源（applicaiton.yml）&nbsp;</font><span style=\"background-color: rgb(238, 236, 224);\"><font size=\"3\" style=\"\"><br></font></span></p><hr><p style=\"line-height:1.6;\">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i><font color=\"#c24f4a\">&nbsp;&nbsp;&nbsp;<u style=\"background-color: rgb(238, 236, 224);\"><font size=\"4\">记得在application.java 加入mapperScan扫描注解</font></u></font></i></p><pre type=\"Java\"><code><xmp>　　　　# 配置mybatis所有Mapper.xml所在的路径，使其被识别</xmp><xmp><br></xmp><xmp>　　　　mybatis.mapper-locations=classpath:/mapper/**/*.xml</xmp></code></pre><p>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br></p><hr><p>&nbsp; &nbsp; &nbsp; &nbsp; <b><font size=\"3\" face=\"宋体\" style=\"background-color: rgb(249, 150, 59);\">3. 集成Mybatis官方代码生成器？</font></b><br></p><p style=\"text-align:center;\">&nbsp;<span style=\"background-color: rgb(238, 236, 224);\"><b> &nbsp;先在pom文件集成插件，然后在相对路径下新建：</b></span><b style=\"background-color: rgb(238, 236, 224);\">generator-config.xml</b><br></p><pre type=\"Java\"><code><xmp>  <!-- mybatis generator 自动生成代码插件 -->\n            <plugin>\n                <groupId>org.mybatis.generator</groupId>\n                <artifactId>mybatis-generator-maven-plugin</artifactId>\n                <version>1.4.0</version>\n                <configuration>\n                    <configurationFile>src/main/resources/generator/generator-config.xml</configurationFile>\n                    <overwrite>true</overwrite>\n                    <verbose>true</verbose>\n                </configuration>\n                <dependencies>\n                    <dependency>\n                        <groupId>mysql</groupId>\n                        <artifactId>mysql-connector-java</artifactId>\n                        <version>8.0.22</version>\n                    </dependency>\n                </dependencies>\n            </plugin></xmp></code></pre><p style=\"text-align:center;\"><b style=\"background-color: rgb(238, 236, 224);\">增加启动命令，点击Edit Configuration——add maven——Command line：mybatis-generator:generate -e</b></p><p style=\"text-align:center;\"><img src=\"https://i.postimg.cc/Y08Kc8Tz/1658809334271.png\" style=\"max-width:100%;\" width=\"30%\"></p><hr><p style=\"text-align:left;\"><b><font size=\"3\" style=\"background-color: rgb(249, 150, 59);\">4. 项目的后端会有很多的接口，为了让前端能够统一处理逻辑（登录校验、权限校验），需要统一后端的返回值。（CommonResp：通用的返回类）</font></b></p><p style=\"text-align:left;\">&nbsp; &nbsp; &nbsp; &nbsp;<span style=\"background-color: rgb(238, 236, 224);\"><font size=\"3\"> req类：因为当获取前端的值较多或者是多个值时，req中的所有值中会自动映射看前端需要那个值。</font><b><font size=\"3\" style=\"\"><br></font></b></span></p><p style=\"text-align:left;\"><span style=\"background-color: rgb(238, 236, 224);\">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><font size=\"3\"><span style=\"background-color: rgb(238, 236, 224);\">resp类：返回值，作用和req一样。</span><br></font></p><p style=\"text-align:left;\">&nbsp; &nbsp;<span style=\"background-color: rgb(194, 79, 74);\"> &nbsp;</span><font size=\"3\"><strike style=\"background-color: rgb(194, 79, 74);\"> &nbsp; 注：controller不要出现实体类</strike><span style=\"background-color: rgb(238, 236, 224);\"><br></span></font></p><p style=\"text-align:left;\"><font size=\"3\"><strike style=\"background-color: rgb(194, 79, 74);\"><br></strike></font></p><p style=\"text-align:left;\"><b style=\"background-color: rgb(249, 150, 59);\">4. 制作CopyUtil封装BeanUtils</b><br></p><p style=\"text-align:left;\">&nbsp; &nbsp; <font size=\"3\" style=\"background-color: rgb(238, 236, 224);\">里面包含单体复制和实体复制，因为controller不能出现实体类的值，避免外界人士看到，所以把实体类的值赋值到resp中，就用到了BeanUtil实现赋值。本次编写了一个CopyUtils里面封装了单体复制和列表复制，可以使用更少的代码实现一样的功能</font><b><br></b></p><p style=\"text-align:left;\"><font size=\"3\" style=\"background-color: rgb(238, 236, 224);\"><br></font></p><p style=\"text-align:left;\"><b style=\"background-color: rgb(249, 150, 59);\">5. 泛型和object的区别？</b><font size=\"3\" style=\"background-color: rgb(238, 236, 224);\"><br></font></p><p style=\"text-align:left;\">&nbsp; &nbsp; &nbsp;<span style=\"background-color: rgb(238, 236, 224);\">1. 使用泛型不需要做强制类型转换<b style=\"\"><br></b></span></p><p style=\"text-align:left;\"><span style=\"background-color: rgb(238, 236, 224);\">&nbsp; &nbsp; 2. 编译时更安全。<strong>如果使用Object类的话，你没法保证返回的类型一定是Foo，也许是其它类型。这时你就会在运行时得到一个类型转换异常（ClassCastException）</strong></span><br></p><p style=\"text-align:left;\"><span style=\"background-color: rgb(238, 236, 224);\"><strong><br></strong></span></p><p>&nbsp; &nbsp;&nbsp;<strong>泛型引用</strong></p><pre><code>　　　　String result = doSomeThing(\"参数是String\");</code></pre><p>&nbsp; &nbsp;&nbsp;<strong>Object引用</strong></p><pre><code>　　　　String result = (String)doSomeThing(\"参数是String\");</code></pre>","success":true}
2022-07-27 22:59:17.893 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512174845890560[0;39m ------------- 结束 耗时：20 ms -------------
2022-07-27 22:59:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512183813312512[0;39m 生成今日电子书快照开始
2022-07-27 22:59:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512183813312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:59:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512183813312512[0;39m ==> Parameters: 
2022-07-27 22:59:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512183813312512[0;39m <==    Updates: 0
2022-07-27 22:59:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512183813312512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-27 22:59:21.101 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m207512188385103872[0;39m ------------- 开始 -------------
2022-07-27 22:59:21.101 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m207512188385103872[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715172312322048 GET
2022-07-27 22:59:21.101 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m207512188385103872[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-27 22:59:21.101 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m207512188385103872[0;39m 远程地址: 127.0.0.1
2022-07-27 22:59:21.101 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m207512188385103872[0;39m 请求参数: [202715172312322048]
2022-07-27 22:59:21.136 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m207512188385103872[0;39m key不存在，放入：DOC_VOTE_202715172312322048_127.0.0.1，过期 86400 秒
2022-07-27 22:59:21.172 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512188385103872[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-27 22:59:21.173 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512188385103872[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-27 22:59:21.188 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m207512188385103872[0;39m <==    Updates: 1
2022-07-27 22:59:21.188 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512188385103872[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-27 22:59:21.189 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512188385103872[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-27 22:59:21.189 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m207512188385103872[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-27 22:59:21.189 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m207512188385103872[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 25, 3
2022-07-27 22:59:21.190 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m207512188385103872[0;39m <==      Total: 1
2022-07-27 22:59:21.190 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m207512188385103872[0;39m 返回结果: {"success":true}
2022-07-27 22:59:21.190 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m207512188385103872[0;39m ------------- 结束 耗时：89 ms -------------
2022-07-27 22:59:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512204768055296[0;39m 生成今日电子书快照开始
2022-07-27 22:59:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512204768055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:59:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512204768055296[0;39m ==> Parameters: 
2022-07-27 22:59:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512204768055296[0;39m <==    Updates: 0
2022-07-27 22:59:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512204768055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:59:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m207512225722798080[0;39m 生成今日电子书快照开始
2022-07-27 22:59:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512225722798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-27 22:59:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512225722798080[0;39m ==> Parameters: 
2022-07-27 22:59:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m207512225722798080[0;39m <==    Updates: 0
2022-07-27 22:59:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m207512225722798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-27 22:59:30.943 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-2 - Shutdown initiated...
2022-07-27 22:59:30.948 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-2 - Shutdown completed.
