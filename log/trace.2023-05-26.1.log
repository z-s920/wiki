2023-05-26 22:18:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441635410055168[0;39m 生成今日电子书快照开始
2023-05-26 22:18:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441635410055168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:18:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441635410055168[0;39m ==> Parameters: 
2023-05-26 22:18:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441635410055168[0;39m <==    Updates: 0
2023-05-26 22:18:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441635410055168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:18:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441656410935296[0;39m 生成今日电子书快照开始
2023-05-26 22:18:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441656410935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:18:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441656410935296[0;39m ==> Parameters: 
2023-05-26 22:18:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441656410935296[0;39m <==    Updates: 0
2023-05-26 22:18:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441656410935296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:18:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441677382455296[0;39m 生成今日电子书快照开始
2023-05-26 22:18:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441677382455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:18:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441677382455296[0;39m ==> Parameters: 
2023-05-26 22:18:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441677382455296[0;39m <==    Updates: 0
2023-05-26 22:18:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441677382455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:18:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119441677395038208[0;39m 更新电子书下的文档数据开始
2023-05-26 22:18:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441677395038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:18:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441677395038208[0;39m ==> Parameters: 
2023-05-26 22:18:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441677395038208[0;39m <==    Updates: 8
2023-05-26 22:18:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119441677395038208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:18:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441698383335424[0;39m 生成今日电子书快照开始
2023-05-26 22:18:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441698383335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:18:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441698383335424[0;39m ==> Parameters: 
2023-05-26 22:18:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441698383335424[0;39m <==    Updates: 0
2023-05-26 22:18:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441698383335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:18:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441719312912384[0;39m 生成今日电子书快照开始
2023-05-26 22:18:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441719312912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:18:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441719312912384[0;39m ==> Parameters: 
2023-05-26 22:18:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441719312912384[0;39m <==    Updates: 0
2023-05-26 22:18:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441719312912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:18:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441740280238080[0;39m 生成今日电子书快照开始
2023-05-26 22:18:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441740280238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:18:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441740280238080[0;39m ==> Parameters: 
2023-05-26 22:18:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441740280238080[0;39m <==    Updates: 0
2023-05-26 22:18:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441740280238080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:18:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441761243369472[0;39m 生成今日电子书快照开始
2023-05-26 22:18:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441761243369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:18:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441761243369472[0;39m ==> Parameters: 
2023-05-26 22:18:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441761243369472[0;39m <==    Updates: 0
2023-05-26 22:18:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441761243369472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:19:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441782235860992[0;39m 生成今日电子书快照开始
2023-05-26 22:19:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441782235860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441782235860992[0;39m ==> Parameters: 
2023-05-26 22:19:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441782235860992[0;39m <==    Updates: 0
2023-05-26 22:19:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441782235860992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:19:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119441803219963904[0;39m 更新电子书下的文档数据开始
2023-05-26 22:19:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441803219963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:19:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441803219963904[0;39m ==> Parameters: 
2023-05-26 22:19:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441803219963904[0;39m <==    Updates: 8
2023-05-26 22:19:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119441803219963904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:19:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441803224158208[0;39m 生成今日电子书快照开始
2023-05-26 22:19:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441803224158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441803224158208[0;39m ==> Parameters: 
2023-05-26 22:19:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441803224158208[0;39m <==    Updates: 0
2023-05-26 22:19:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441803224158208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:19:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441824170512384[0;39m 生成今日电子书快照开始
2023-05-26 22:19:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441824170512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441824170512384[0;39m ==> Parameters: 
2023-05-26 22:19:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441824170512384[0;39m <==    Updates: 0
2023-05-26 22:19:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441824170512384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:19:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441845137838080[0;39m 生成今日电子书快照开始
2023-05-26 22:19:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441845137838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441845137838080[0;39m ==> Parameters: 
2023-05-26 22:19:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441845137838080[0;39m <==    Updates: 0
2023-05-26 22:19:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441845137838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:19:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441866138718208[0;39m 生成今日电子书快照开始
2023-05-26 22:19:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441866138718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441866138718208[0;39m ==> Parameters: 
2023-05-26 22:19:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441866138718208[0;39m <==    Updates: 0
2023-05-26 22:19:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441866138718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:19:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441887080878080[0;39m 生成今日电子书快照开始
2023-05-26 22:19:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441887080878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441887080878080[0;39m ==> Parameters: 
2023-05-26 22:19:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441887080878080[0;39m <==    Updates: 0
2023-05-26 22:19:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441887080878080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:19:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441908098535424[0;39m 生成今日电子书快照开始
2023-05-26 22:19:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441908098535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441908098535424[0;39m ==> Parameters: 
2023-05-26 22:19:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441908098535424[0;39m <==    Updates: 0
2023-05-26 22:19:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441908098535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:19:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441929070055424[0;39m 生成今日电子书快照开始
2023-05-26 22:19:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441929070055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441929070055424[0;39m ==> Parameters: 
2023-05-26 22:19:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441929070055424[0;39m <==    Updates: 0
2023-05-26 22:19:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441929070055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:19:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119441929078444032[0;39m 更新电子书下的文档数据开始
2023-05-26 22:19:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441929078444032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:19:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441929078444032[0;39m ==> Parameters: 
2023-05-26 22:19:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119441929078444032[0;39m <==    Updates: 8
2023-05-26 22:19:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119441929078444032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:19:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441950037381120[0;39m 生成今日电子书快照开始
2023-05-26 22:19:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441950037381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441950037381120[0;39m ==> Parameters: 
2023-05-26 22:19:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441950037381120[0;39m <==    Updates: 0
2023-05-26 22:19:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441950037381120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:19:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441970966958080[0;39m 生成今日电子书快照开始
2023-05-26 22:19:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441970966958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441970966958080[0;39m ==> Parameters: 
2023-05-26 22:19:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441970966958080[0;39m <==    Updates: 0
2023-05-26 22:19:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441970966958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:19:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119441991976226816[0;39m 生成今日电子书快照开始
2023-05-26 22:19:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441991976226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441991976226816[0;39m ==> Parameters: 
2023-05-26 22:19:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119441991976226816[0;39m <==    Updates: 0
2023-05-26 22:19:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119441991976226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:19:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442012926775296[0;39m 生成今日电子书快照开始
2023-05-26 22:19:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442012926775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:19:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442012926775296[0;39m ==> Parameters: 
2023-05-26 22:19:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442012926775296[0;39m <==    Updates: 0
2023-05-26 22:19:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442012926775296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:20:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442033927655424[0;39m 生成今日电子书快照开始
2023-05-26 22:20:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442033927655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442033927655424[0;39m ==> Parameters: 
2023-05-26 22:20:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442033927655424[0;39m <==    Updates: 0
2023-05-26 22:20:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442033927655424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:20:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442054869815296[0;39m 生成今日电子书快照开始
2023-05-26 22:20:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442054869815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442054869815296[0;39m ==> Parameters: 
2023-05-26 22:20:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442054869815296[0;39m <==    Updates: 0
2023-05-26 22:20:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442054869815296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:20:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119442054878203904[0;39m 更新电子书下的文档数据开始
2023-05-26 22:20:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442054878203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:20:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442054878203904[0;39m ==> Parameters: 
2023-05-26 22:20:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442054878203904[0;39m <==    Updates: 8
2023-05-26 22:20:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119442054878203904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:20:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442075816169472[0;39m 生成今日电子书快照开始
2023-05-26 22:20:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442075816169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442075816169472[0;39m ==> Parameters: 
2023-05-26 22:20:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442075816169472[0;39m <==    Updates: 0
2023-05-26 22:20:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442075816169472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:20:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442096812855296[0;39m 生成今日电子书快照开始
2023-05-26 22:20:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442096812855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442096812855296[0;39m ==> Parameters: 
2023-05-26 22:20:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442096812855296[0;39m <==    Updates: 0
2023-05-26 22:20:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442096812855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:20:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442117792763904[0;39m 生成今日电子书快照开始
2023-05-26 22:20:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442117792763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442117792763904[0;39m ==> Parameters: 
2023-05-26 22:20:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442117792763904[0;39m <==    Updates: 0
2023-05-26 22:20:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442117792763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:20:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442138785255424[0;39m 生成今日电子书快照开始
2023-05-26 22:20:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442138785255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442138785255424[0;39m ==> Parameters: 
2023-05-26 22:20:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442138785255424[0;39m <==    Updates: 0
2023-05-26 22:20:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442138785255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:20:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442159744192512[0;39m 生成今日电子书快照开始
2023-05-26 22:20:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442159744192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442159744192512[0;39m ==> Parameters: 
2023-05-26 22:20:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442159744192512[0;39m <==    Updates: 0
2023-05-26 22:20:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442159744192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:20:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119442180686352384[0;39m 更新电子书下的文档数据开始
2023-05-26 22:20:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442180686352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:20:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442180686352384[0;39m ==> Parameters: 
2023-05-26 22:20:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442180686352384[0;39m <==    Updates: 8
2023-05-26 22:20:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119442180686352384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:20:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442180694740992[0;39m 生成今日电子书快照开始
2023-05-26 22:20:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442180694740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442180694740992[0;39m ==> Parameters: 
2023-05-26 22:20:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442180694740992[0;39m <==    Updates: 0
2023-05-26 22:20:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442180694740992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:20:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442201662066688[0;39m 生成今日电子书快照开始
2023-05-26 22:20:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442201662066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442201662066688[0;39m ==> Parameters: 
2023-05-26 22:20:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442201662066688[0;39m <==    Updates: 0
2023-05-26 22:20:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442201662066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:20:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442222671335424[0;39m 生成今日电子书快照开始
2023-05-26 22:20:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442222671335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442222671335424[0;39m ==> Parameters: 
2023-05-26 22:20:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442222671335424[0;39m <==    Updates: 0
2023-05-26 22:20:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442222671335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:20:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442243588329472[0;39m 生成今日电子书快照开始
2023-05-26 22:20:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442243588329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442243588329472[0;39m ==> Parameters: 
2023-05-26 22:20:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442243588329472[0;39m <==    Updates: 0
2023-05-26 22:20:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442243588329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:20:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442264585015296[0;39m 生成今日电子书快照开始
2023-05-26 22:20:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442264585015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:20:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442264585015296[0;39m ==> Parameters: 
2023-05-26 22:20:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442264585015296[0;39m <==    Updates: 0
2023-05-26 22:20:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442264585015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442285552340992[0;39m 生成今日电子书快照开始
2023-05-26 22:21:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442285552340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442285552340992[0;39m ==> Parameters: 
2023-05-26 22:21:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442285552340992[0;39m <==    Updates: 0
2023-05-26 22:21:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442285552340992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:21:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119442306515472384[0;39m 更新电子书下的文档数据开始
2023-05-26 22:21:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442306515472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:21:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442306515472384[0;39m ==> Parameters: 
2023-05-26 22:21:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442306515472384[0;39m <==    Updates: 8
2023-05-26 22:21:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119442306515472384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:21:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442306519666688[0;39m 生成今日电子书快照开始
2023-05-26 22:21:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442306519666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442306519666688[0;39m ==> Parameters: 
2023-05-26 22:21:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442306519666688[0;39m <==    Updates: 0
2023-05-26 22:21:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442306519666688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442327507963904[0;39m 生成今日电子书快照开始
2023-05-26 22:21:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442327507963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442327507963904[0;39m ==> Parameters: 
2023-05-26 22:21:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442327507963904[0;39m <==    Updates: 0
2023-05-26 22:21:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442327507963904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442348462706688[0;39m 生成今日电子书快照开始
2023-05-26 22:21:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442348462706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442348462706688[0;39m ==> Parameters: 
2023-05-26 22:21:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442348462706688[0;39m <==    Updates: 0
2023-05-26 22:21:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442348462706688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:21:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442369434226688[0;39m 生成今日电子书快照开始
2023-05-26 22:21:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442369434226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442369434226688[0;39m ==> Parameters: 
2023-05-26 22:21:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442369434226688[0;39m <==    Updates: 0
2023-05-26 22:21:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442369434226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442390447689728[0;39m 生成今日电子书快照开始
2023-05-26 22:21:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442390447689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442390447689728[0;39m ==> Parameters: 
2023-05-26 22:21:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442390447689728[0;39m <==    Updates: 0
2023-05-26 22:21:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442390447689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442411398238208[0;39m 生成今日电子书快照开始
2023-05-26 22:21:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442411398238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442411398238208[0;39m ==> Parameters: 
2023-05-26 22:21:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442411398238208[0;39m <==    Updates: 0
2023-05-26 22:21:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442411398238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442432361369600[0;39m 生成今日电子书快照开始
2023-05-26 22:21:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442432361369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442432361369600[0;39m ==> Parameters: 
2023-05-26 22:21:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442432361369600[0;39m <==    Updates: 0
2023-05-26 22:21:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442432361369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119442432369758208[0;39m 更新电子书下的文档数据开始
2023-05-26 22:21:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442432369758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:21:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442432369758208[0;39m ==> Parameters: 
2023-05-26 22:21:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442432369758208[0;39m <==    Updates: 8
2023-05-26 22:21:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119442432369758208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:21:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442453358055424[0;39m 生成今日电子书快照开始
2023-05-26 22:21:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442453358055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442453358055424[0;39m ==> Parameters: 
2023-05-26 22:21:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442453358055424[0;39m <==    Updates: 0
2023-05-26 22:21:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442453358055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442474304409600[0;39m 生成今日电子书快照开始
2023-05-26 22:21:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442474304409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442474304409600[0;39m ==> Parameters: 
2023-05-26 22:21:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442474304409600[0;39m <==    Updates: 0
2023-05-26 22:21:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442474304409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442495263346688[0;39m 生成今日电子书快照开始
2023-05-26 22:21:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442495263346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442495263346688[0;39m ==> Parameters: 
2023-05-26 22:21:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442495263346688[0;39m <==    Updates: 0
2023-05-26 22:21:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442495263346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:21:55.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442516213895168[0;39m 生成今日电子书快照开始
2023-05-26 22:21:55.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442516213895168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:21:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442516213895168[0;39m ==> Parameters: 
2023-05-26 22:21:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442516213895168[0;39m <==    Updates: 0
2023-05-26 22:21:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442516213895168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:22:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442537193803776[0;39m 生成今日电子书快照开始
2023-05-26 22:22:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442537193803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442537193803776[0;39m ==> Parameters: 
2023-05-26 22:22:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442537193803776[0;39m <==    Updates: 0
2023-05-26 22:22:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442537193803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:22:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119442558194683904[0;39m 更新电子书下的文档数据开始
2023-05-26 22:22:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442558194683904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:22:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442558194683904[0;39m ==> Parameters: 
2023-05-26 22:22:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442558194683904[0;39m <==    Updates: 8
2023-05-26 22:22:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119442558194683904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:22:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442558198878208[0;39m 生成今日电子书快照开始
2023-05-26 22:22:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442558198878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442558198878208[0;39m ==> Parameters: 
2023-05-26 22:22:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442558198878208[0;39m <==    Updates: 0
2023-05-26 22:22:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442558198878208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:22:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442579141038080[0;39m 生成今日电子书快照开始
2023-05-26 22:22:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442579141038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442579141038080[0;39m ==> Parameters: 
2023-05-26 22:22:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442579141038080[0;39m <==    Updates: 0
2023-05-26 22:22:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442579141038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:22:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442600112558080[0;39m 生成今日电子书快照开始
2023-05-26 22:22:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442600112558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442600112558080[0;39m ==> Parameters: 
2023-05-26 22:22:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442600112558080[0;39m <==    Updates: 0
2023-05-26 22:22:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442600112558080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:22:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442621079883776[0;39m 生成今日电子书快照开始
2023-05-26 22:22:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442621079883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442621079883776[0;39m ==> Parameters: 
2023-05-26 22:22:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442621079883776[0;39m <==    Updates: 0
2023-05-26 22:22:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442621079883776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:22:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442642093346816[0;39m 生成今日电子书快照开始
2023-05-26 22:22:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442642093346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442642093346816[0;39m ==> Parameters: 
2023-05-26 22:22:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442642093346816[0;39m <==    Updates: 0
2023-05-26 22:22:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442642093346816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:22:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442663039700992[0;39m 生成今日电子书快照开始
2023-05-26 22:22:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442663039700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442663039700992[0;39m ==> Parameters: 
2023-05-26 22:22:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442663039700992[0;39m <==    Updates: 0
2023-05-26 22:22:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442663039700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:22:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442684023803904[0;39m 生成今日电子书快照开始
2023-05-26 22:22:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442684023803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442684023803904[0;39m ==> Parameters: 
2023-05-26 22:22:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442684023803904[0;39m <==    Updates: 0
2023-05-26 22:22:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442684023803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:22:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119442684032192512[0;39m 更新电子书下的文档数据开始
2023-05-26 22:22:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442684032192512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:22:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442684032192512[0;39m ==> Parameters: 
2023-05-26 22:22:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442684032192512[0;39m <==    Updates: 8
2023-05-26 22:22:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119442684032192512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:22:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442704991129600[0;39m 生成今日电子书快照开始
2023-05-26 22:22:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442704991129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442704991129600[0;39m ==> Parameters: 
2023-05-26 22:22:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442704991129600[0;39m <==    Updates: 0
2023-05-26 22:22:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442704991129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:22:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442725962649600[0;39m 生成今日电子书快照开始
2023-05-26 22:22:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442725962649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442725962649600[0;39m ==> Parameters: 
2023-05-26 22:22:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442725962649600[0;39m <==    Updates: 0
2023-05-26 22:22:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442725962649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:22:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442746929975296[0;39m 生成今日电子书快照开始
2023-05-26 22:22:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442746929975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442746929975296[0;39m ==> Parameters: 
2023-05-26 22:22:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442746929975296[0;39m <==    Updates: 0
2023-05-26 22:22:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442746929975296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:22:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442767901495296[0;39m 生成今日电子书快照开始
2023-05-26 22:22:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442767901495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:22:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442767901495296[0;39m ==> Parameters: 
2023-05-26 22:22:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442767901495296[0;39m <==    Updates: 0
2023-05-26 22:22:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442767901495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:23:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442788852043776[0;39m 生成今日电子书快照开始
2023-05-26 22:23:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442788852043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442788852043776[0;39m ==> Parameters: 
2023-05-26 22:23:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442788852043776[0;39m <==    Updates: 0
2023-05-26 22:23:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442788852043776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:23:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119442809819369472[0;39m 更新电子书下的文档数据开始
2023-05-26 22:23:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442809819369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:23:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442809819369472[0;39m ==> Parameters: 
2023-05-26 22:23:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442809819369472[0;39m <==    Updates: 8
2023-05-26 22:23:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119442809819369472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:23:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442809827758080[0;39m 生成今日电子书快照开始
2023-05-26 22:23:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442809827758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442809827758080[0;39m ==> Parameters: 
2023-05-26 22:23:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442809827758080[0;39m <==    Updates: 0
2023-05-26 22:23:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442809827758080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:23:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442830853804032[0;39m 生成今日电子书快照开始
2023-05-26 22:23:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442830853804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442830853804032[0;39m ==> Parameters: 
2023-05-26 22:23:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442830853804032[0;39m <==    Updates: 0
2023-05-26 22:23:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442830853804032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:23:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442851816935424[0;39m 生成今日电子书快照开始
2023-05-26 22:23:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442851816935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442851816935424[0;39m ==> Parameters: 
2023-05-26 22:23:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442851816935424[0;39m <==    Updates: 0
2023-05-26 22:23:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442851816935424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:23:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442872771678208[0;39m 生成今日电子书快照开始
2023-05-26 22:23:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442872771678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442872771678208[0;39m ==> Parameters: 
2023-05-26 22:23:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442872771678208[0;39m <==    Updates: 0
2023-05-26 22:23:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442872771678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:23:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442893705449472[0;39m 生成今日电子书快照开始
2023-05-26 22:23:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442893705449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442893705449472[0;39m ==> Parameters: 
2023-05-26 22:23:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442893705449472[0;39m <==    Updates: 0
2023-05-26 22:23:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442893705449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:23:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442914689552384[0;39m 生成今日电子书快照开始
2023-05-26 22:23:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442914689552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442914689552384[0;39m ==> Parameters: 
2023-05-26 22:23:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442914689552384[0;39m <==    Updates: 0
2023-05-26 22:23:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442914689552384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:23:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119442935707209728[0;39m 更新电子书下的文档数据开始
2023-05-26 22:23:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442935707209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:23:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442935707209728[0;39m ==> Parameters: 
2023-05-26 22:23:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119442935707209728[0;39m <==    Updates: 8
2023-05-26 22:23:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119442935707209728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:23:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442935715598336[0;39m 生成今日电子书快照开始
2023-05-26 22:23:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442935715598336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442935715598336[0;39m ==> Parameters: 
2023-05-26 22:23:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442935715598336[0;39m <==    Updates: 0
2023-05-26 22:23:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442935715598336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:23:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442956653563904[0;39m 生成今日电子书快照开始
2023-05-26 22:23:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442956653563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442956653563904[0;39m ==> Parameters: 
2023-05-26 22:23:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442956653563904[0;39m <==    Updates: 0
2023-05-26 22:23:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442956653563904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:23:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442977629278208[0;39m 生成今日电子书快照开始
2023-05-26 22:23:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442977629278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442977629278208[0;39m ==> Parameters: 
2023-05-26 22:23:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442977629278208[0;39m <==    Updates: 0
2023-05-26 22:23:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442977629278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:23:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119442998571438080[0;39m 生成今日电子书快照开始
2023-05-26 22:23:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442998571438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442998571438080[0;39m ==> Parameters: 
2023-05-26 22:23:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119442998571438080[0;39m <==    Updates: 0
2023-05-26 22:23:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119442998571438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:23:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443019568123904[0;39m 生成今日电子书快照开始
2023-05-26 22:23:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443019568123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:23:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443019568123904[0;39m ==> Parameters: 
2023-05-26 22:23:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443019568123904[0;39m <==    Updates: 0
2023-05-26 22:23:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443019568123904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443040531255296[0;39m 生成今日电子书快照开始
2023-05-26 22:24:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443040531255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443040531255296[0;39m ==> Parameters: 
2023-05-26 22:24:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443040531255296[0;39m <==    Updates: 0
2023-05-26 22:24:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443040531255296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:24:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119443061515358208[0;39m 更新电子书下的文档数据开始
2023-05-26 22:24:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443061515358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:24:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443061515358208[0;39m ==> Parameters: 
2023-05-26 22:24:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443061515358208[0;39m <==    Updates: 8
2023-05-26 22:24:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119443061515358208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:24:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443061523746816[0;39m 生成今日电子书快照开始
2023-05-26 22:24:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443061523746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443061523746816[0;39m ==> Parameters: 
2023-05-26 22:24:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443061523746816[0;39m <==    Updates: 0
2023-05-26 22:24:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443061523746816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:24:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443082453323776[0;39m 生成今日电子书快照开始
2023-05-26 22:24:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443082453323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443082453323776[0;39m ==> Parameters: 
2023-05-26 22:24:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443082453323776[0;39m <==    Updates: 0
2023-05-26 22:24:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443082453323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443103429038080[0;39m 生成今日电子书快照开始
2023-05-26 22:24:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443103429038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443103429038080[0;39m ==> Parameters: 
2023-05-26 22:24:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443103429038080[0;39m <==    Updates: 0
2023-05-26 22:24:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443103429038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443124442501120[0;39m 生成今日电子书快照开始
2023-05-26 22:24:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443124442501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443124442501120[0;39m ==> Parameters: 
2023-05-26 22:24:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443124442501120[0;39m <==    Updates: 0
2023-05-26 22:24:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443124442501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443145405632512[0;39m 生成今日电子书快照开始
2023-05-26 22:24:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443145405632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443145405632512[0;39m ==> Parameters: 
2023-05-26 22:24:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443145405632512[0;39m <==    Updates: 0
2023-05-26 22:24:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443145405632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443166372958208[0;39m 生成今日电子书快照开始
2023-05-26 22:24:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443166372958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443166372958208[0;39m ==> Parameters: 
2023-05-26 22:24:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443166372958208[0;39m <==    Updates: 0
2023-05-26 22:24:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443166372958208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119443187331895296[0;39m 更新电子书下的文档数据开始
2023-05-26 22:24:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443187331895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:24:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443187331895296[0;39m ==> Parameters: 
2023-05-26 22:24:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443187331895296[0;39m <==    Updates: 8
2023-05-26 22:24:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119443187331895296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:24:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443187340283904[0;39m 生成今日电子书快照开始
2023-05-26 22:24:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443187340283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443187340283904[0;39m ==> Parameters: 
2023-05-26 22:24:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443187340283904[0;39m <==    Updates: 0
2023-05-26 22:24:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443187340283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443208282443776[0;39m 生成今日电子书快照开始
2023-05-26 22:24:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443208282443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443208282443776[0;39m ==> Parameters: 
2023-05-26 22:24:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443208282443776[0;39m <==    Updates: 0
2023-05-26 22:24:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443208282443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443229283323904[0;39m 生成今日电子书快照开始
2023-05-26 22:24:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443229283323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443229283323904[0;39m ==> Parameters: 
2023-05-26 22:24:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443229283323904[0;39m <==    Updates: 0
2023-05-26 22:24:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443229283323904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443250254843904[0;39m 生成今日电子书快照开始
2023-05-26 22:24:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443250254843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443250254843904[0;39m ==> Parameters: 
2023-05-26 22:24:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443250254843904[0;39m <==    Updates: 0
2023-05-26 22:24:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443250254843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:24:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443271251529728[0;39m 生成今日电子书快照开始
2023-05-26 22:24:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443271251529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:24:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443271251529728[0;39m ==> Parameters: 
2023-05-26 22:24:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443271251529728[0;39m <==    Updates: 0
2023-05-26 22:24:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443271251529728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:25:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443292193689600[0;39m 生成今日电子书快照开始
2023-05-26 22:25:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443292193689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443292193689600[0;39m ==> Parameters: 
2023-05-26 22:25:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443292193689600[0;39m <==    Updates: 0
2023-05-26 22:25:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443292193689600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:25:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443313156820992[0;39m 生成今日电子书快照开始
2023-05-26 22:25:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443313156820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443313156820992[0;39m ==> Parameters: 
2023-05-26 22:25:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443313156820992[0;39m <==    Updates: 0
2023-05-26 22:25:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443313156820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:25:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119443313165209600[0;39m 更新电子书下的文档数据开始
2023-05-26 22:25:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443313165209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:25:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443313165209600[0;39m ==> Parameters: 
2023-05-26 22:25:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443313165209600[0;39m <==    Updates: 8
2023-05-26 22:25:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119443313165209600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:25:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443334115758080[0;39m 生成今日电子书快照开始
2023-05-26 22:25:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443334115758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443334115758080[0;39m ==> Parameters: 
2023-05-26 22:25:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443334115758080[0;39m <==    Updates: 0
2023-05-26 22:25:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443334115758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:25:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443355083083776[0;39m 生成今日电子书快照开始
2023-05-26 22:25:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443355083083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443355083083776[0;39m ==> Parameters: 
2023-05-26 22:25:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443355083083776[0;39m <==    Updates: 0
2023-05-26 22:25:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443355083083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:25:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443376071380992[0;39m 生成今日电子书快照开始
2023-05-26 22:25:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443376071380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443376071380992[0;39m ==> Parameters: 
2023-05-26 22:25:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443376071380992[0;39m <==    Updates: 0
2023-05-26 22:25:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443376071380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:25:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443397063872512[0;39m 生成今日电子书快照开始
2023-05-26 22:25:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443397063872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443397063872512[0;39m ==> Parameters: 
2023-05-26 22:25:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443397063872512[0;39m <==    Updates: 0
2023-05-26 22:25:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443397063872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:25:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443417993449472[0;39m 生成今日电子书快照开始
2023-05-26 22:25:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443417993449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443417993449472[0;39m ==> Parameters: 
2023-05-26 22:25:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443417993449472[0;39m <==    Updates: 0
2023-05-26 22:25:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443417993449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:25:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443439002718208[0;39m 生成今日电子书快照开始
2023-05-26 22:25:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443439002718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443439002718208[0;39m ==> Parameters: 
2023-05-26 22:25:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443439002718208[0;39m <==    Updates: 0
2023-05-26 22:25:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443439002718208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:25:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119443439006912512[0;39m 更新电子书下的文档数据开始
2023-05-26 22:25:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443439006912512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:25:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443439006912512[0;39m ==> Parameters: 
2023-05-26 22:25:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443439006912512[0;39m <==    Updates: 8
2023-05-26 22:25:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119443439006912512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:25:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443459944878080[0;39m 生成今日电子书快照开始
2023-05-26 22:25:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443459944878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443459944878080[0;39m ==> Parameters: 
2023-05-26 22:25:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443459944878080[0;39m <==    Updates: 0
2023-05-26 22:25:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443459944878080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:25:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443480933175296[0;39m 生成今日电子书快照开始
2023-05-26 22:25:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443480933175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443480933175296[0;39m ==> Parameters: 
2023-05-26 22:25:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443480933175296[0;39m <==    Updates: 0
2023-05-26 22:25:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443480933175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:25:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443501942444032[0;39m 生成今日电子书快照开始
2023-05-26 22:25:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443501942444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443501942444032[0;39m ==> Parameters: 
2023-05-26 22:25:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443501942444032[0;39m <==    Updates: 0
2023-05-26 22:25:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443501942444032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:25:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443522901381120[0;39m 生成今日电子书快照开始
2023-05-26 22:25:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443522901381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:25:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443522901381120[0;39m ==> Parameters: 
2023-05-26 22:25:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443522901381120[0;39m <==    Updates: 0
2023-05-26 22:25:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443522901381120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:26:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443543868706816[0;39m 生成今日电子书快照开始
2023-05-26 22:26:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443543868706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443543868706816[0;39m ==> Parameters: 
2023-05-26 22:26:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443543868706816[0;39m <==    Updates: 0
2023-05-26 22:26:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443543868706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:26:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443564794089472[0;39m 生成今日电子书快照开始
2023-05-26 22:26:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443564794089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443564794089472[0;39m ==> Parameters: 
2023-05-26 22:26:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443564794089472[0;39m <==    Updates: 0
2023-05-26 22:26:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443564794089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:26:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119443564802478080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:26:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443564802478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:26:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443564802478080[0;39m ==> Parameters: 
2023-05-26 22:26:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443564802478080[0;39m <==    Updates: 8
2023-05-26 22:26:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119443564802478080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:26:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443585828524032[0;39m 生成今日电子书快照开始
2023-05-26 22:26:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443585828524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443585828524032[0;39m ==> Parameters: 
2023-05-26 22:26:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443585828524032[0;39m <==    Updates: 0
2023-05-26 22:26:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443585828524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:26:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443606795849728[0;39m 生成今日电子书快照开始
2023-05-26 22:26:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443606795849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443606795849728[0;39m ==> Parameters: 
2023-05-26 22:26:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443606795849728[0;39m <==    Updates: 0
2023-05-26 22:26:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443606795849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:26:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443627733815296[0;39m 生成今日电子书快照开始
2023-05-26 22:26:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443627733815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443627733815296[0;39m ==> Parameters: 
2023-05-26 22:26:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443627733815296[0;39m <==    Updates: 0
2023-05-26 22:26:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443627733815296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:26:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443648696946688[0;39m 生成今日电子书快照开始
2023-05-26 22:26:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443648696946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443648696946688[0;39m ==> Parameters: 
2023-05-26 22:26:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443648696946688[0;39m <==    Updates: 0
2023-05-26 22:26:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443648696946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:26:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443669702021120[0;39m 生成今日电子书快照开始
2023-05-26 22:26:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443669702021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443669702021120[0;39m ==> Parameters: 
2023-05-26 22:26:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443669702021120[0;39m <==    Updates: 0
2023-05-26 22:26:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443669702021120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:26:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119443690635792384[0;39m 更新电子书下的文档数据开始
2023-05-26 22:26:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443690635792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:26:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443690635792384[0;39m ==> Parameters: 
2023-05-26 22:26:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443690635792384[0;39m <==    Updates: 8
2023-05-26 22:26:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119443690635792384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:26:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443690644180992[0;39m 生成今日电子书快照开始
2023-05-26 22:26:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443690644180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443690644180992[0;39m ==> Parameters: 
2023-05-26 22:26:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443690644180992[0;39m <==    Updates: 0
2023-05-26 22:26:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443690644180992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:26:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443711632478208[0;39m 生成今日电子书快照开始
2023-05-26 22:26:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443711632478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443711632478208[0;39m ==> Parameters: 
2023-05-26 22:26:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443711632478208[0;39m <==    Updates: 0
2023-05-26 22:26:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443711632478208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:26:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443732616581120[0;39m 生成今日电子书快照开始
2023-05-26 22:26:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443732616581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443732616581120[0;39m ==> Parameters: 
2023-05-26 22:26:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443732616581120[0;39m <==    Updates: 0
2023-05-26 22:26:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443732616581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:26:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443753583906816[0;39m 生成今日电子书快照开始
2023-05-26 22:26:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443753583906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443753583906816[0;39m ==> Parameters: 
2023-05-26 22:26:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443753583906816[0;39m <==    Updates: 0
2023-05-26 22:26:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443753583906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:26:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443774526066688[0;39m 生成今日电子书快照开始
2023-05-26 22:26:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443774526066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:26:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443774526066688[0;39m ==> Parameters: 
2023-05-26 22:26:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443774526066688[0;39m <==    Updates: 0
2023-05-26 22:26:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443774526066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:27:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443795497586688[0;39m 生成今日电子书快照开始
2023-05-26 22:27:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443795497586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443795497586688[0;39m ==> Parameters: 
2023-05-26 22:27:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443795497586688[0;39m <==    Updates: 0
2023-05-26 22:27:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443795497586688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:27:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119443816464912384[0;39m 更新电子书下的文档数据开始
2023-05-26 22:27:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443816464912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:27:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443816464912384[0;39m ==> Parameters: 
2023-05-26 22:27:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443816464912384[0;39m <==    Updates: 8
2023-05-26 22:27:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119443816464912384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:27:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443816473300992[0;39m 生成今日电子书快照开始
2023-05-26 22:27:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443816473300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443816473300992[0;39m ==> Parameters: 
2023-05-26 22:27:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443816473300992[0;39m <==    Updates: 0
2023-05-26 22:27:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443816473300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:27:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443837474181120[0;39m 生成今日电子书快照开始
2023-05-26 22:27:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443837474181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443837474181120[0;39m ==> Parameters: 
2023-05-26 22:27:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443837474181120[0;39m <==    Updates: 0
2023-05-26 22:27:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443837474181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:27:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443858428923904[0;39m 生成今日电子书快照开始
2023-05-26 22:27:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443858428923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443858428923904[0;39m ==> Parameters: 
2023-05-26 22:27:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443858428923904[0;39m <==    Updates: 0
2023-05-26 22:27:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443858428923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:27:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443879417221120[0;39m 生成今日电子书快照开始
2023-05-26 22:27:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443879417221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443879417221120[0;39m ==> Parameters: 
2023-05-26 22:27:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443879417221120[0;39m <==    Updates: 0
2023-05-26 22:27:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443879417221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:27:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443900384546816[0;39m 生成今日电子书快照开始
2023-05-26 22:27:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443900384546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443900384546816[0;39m ==> Parameters: 
2023-05-26 22:27:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443900384546816[0;39m <==    Updates: 0
2023-05-26 22:27:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443900384546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:27:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443921339289600[0;39m 生成今日电子书快照开始
2023-05-26 22:27:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443921339289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443921339289600[0;39m ==> Parameters: 
2023-05-26 22:27:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443921339289600[0;39m <==    Updates: 0
2023-05-26 22:27:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443921339289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:27:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119443942289838080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:27:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443942289838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:27:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443942289838080[0;39m ==> Parameters: 
2023-05-26 22:27:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119443942289838080[0;39m <==    Updates: 8
2023-05-26 22:27:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119443942289838080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:27:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443942294032384[0;39m 生成今日电子书快照开始
2023-05-26 22:27:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443942294032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443942294032384[0;39m ==> Parameters: 
2023-05-26 22:27:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443942294032384[0;39m <==    Updates: 0
2023-05-26 22:27:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443942294032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:27:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443963265552384[0;39m 生成今日电子书快照开始
2023-05-26 22:27:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443963265552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443963265552384[0;39m ==> Parameters: 
2023-05-26 22:27:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443963265552384[0;39m <==    Updates: 0
2023-05-26 22:27:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443963265552384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:27:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119443984270626816[0;39m 生成今日电子书快照开始
2023-05-26 22:27:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443984270626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443984270626816[0;39m ==> Parameters: 
2023-05-26 22:27:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119443984270626816[0;39m <==    Updates: 0
2023-05-26 22:27:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119443984270626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:27:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444005229563904[0;39m 生成今日电子书快照开始
2023-05-26 22:27:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444005229563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444005229563904[0;39m ==> Parameters: 
2023-05-26 22:27:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444005229563904[0;39m <==    Updates: 0
2023-05-26 22:27:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444005229563904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:27:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444026222055424[0;39m 生成今日电子书快照开始
2023-05-26 22:27:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444026222055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:27:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444026222055424[0;39m ==> Parameters: 
2023-05-26 22:27:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444026222055424[0;39m <==    Updates: 0
2023-05-26 22:27:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444026222055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444047143243776[0;39m 生成今日电子书快照开始
2023-05-26 22:28:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444047143243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444047143243776[0;39m ==> Parameters: 
2023-05-26 22:28:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444047143243776[0;39m <==    Updates: 0
2023-05-26 22:28:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444047143243776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:28:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119444068148318208[0;39m 更新电子书下的文档数据开始
2023-05-26 22:28:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444068148318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:28:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444068148318208[0;39m ==> Parameters: 
2023-05-26 22:28:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444068148318208[0;39m <==    Updates: 8
2023-05-26 22:28:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119444068148318208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:28:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444068156706816[0;39m 生成今日电子书快照开始
2023-05-26 22:28:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444068156706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444068156706816[0;39m ==> Parameters: 
2023-05-26 22:28:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444068156706816[0;39m <==    Updates: 0
2023-05-26 22:28:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444068156706816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:28:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444089082089472[0;39m 生成今日电子书快照开始
2023-05-26 22:28:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444089082089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444089082089472[0;39m ==> Parameters: 
2023-05-26 22:28:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444089082089472[0;39m <==    Updates: 0
2023-05-26 22:28:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444089082089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444110116524032[0;39m 生成今日电子书快照开始
2023-05-26 22:28:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444110116524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444110116524032[0;39m ==> Parameters: 
2023-05-26 22:28:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444110116524032[0;39m <==    Updates: 0
2023-05-26 22:28:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444110116524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444131058683904[0;39m 生成今日电子书快照开始
2023-05-26 22:28:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444131058683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444131058683904[0;39m ==> Parameters: 
2023-05-26 22:28:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444131058683904[0;39m <==    Updates: 0
2023-05-26 22:28:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444131058683904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:28:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444152013426688[0;39m 生成今日电子书快照开始
2023-05-26 22:28:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444152013426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444152013426688[0;39m ==> Parameters: 
2023-05-26 22:28:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444152013426688[0;39m <==    Updates: 0
2023-05-26 22:28:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444152013426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444172989140992[0;39m 生成今日电子书快照开始
2023-05-26 22:28:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444172989140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444172989140992[0;39m ==> Parameters: 
2023-05-26 22:28:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444172989140992[0;39m <==    Updates: 0
2023-05-26 22:28:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444172989140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119444193939689472[0;39m 更新电子书下的文档数据开始
2023-05-26 22:28:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444193939689472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:28:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444193939689472[0;39m ==> Parameters: 
2023-05-26 22:28:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444193939689472[0;39m <==    Updates: 8
2023-05-26 22:28:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119444193939689472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:28:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444193948078080[0;39m 生成今日电子书快照开始
2023-05-26 22:28:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444193948078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444193948078080[0;39m ==> Parameters: 
2023-05-26 22:28:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444193948078080[0;39m <==    Updates: 0
2023-05-26 22:28:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444193948078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444214915403776[0;39m 生成今日电子书快照开始
2023-05-26 22:28:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444214915403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444214915403776[0;39m ==> Parameters: 
2023-05-26 22:28:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444214915403776[0;39m <==    Updates: 0
2023-05-26 22:28:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444214915403776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444235920478208[0;39m 生成今日电子书快照开始
2023-05-26 22:28:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444235920478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444235920478208[0;39m ==> Parameters: 
2023-05-26 22:28:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444235920478208[0;39m <==    Updates: 0
2023-05-26 22:28:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444235920478208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444256908775424[0;39m 生成今日电子书快照开始
2023-05-26 22:28:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444256908775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444256908775424[0;39m ==> Parameters: 
2023-05-26 22:28:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444256908775424[0;39m <==    Updates: 0
2023-05-26 22:28:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444256908775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:28:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444277850935296[0;39m 生成今日电子书快照开始
2023-05-26 22:28:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444277850935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:28:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444277850935296[0;39m ==> Parameters: 
2023-05-26 22:28:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444277850935296[0;39m <==    Updates: 0
2023-05-26 22:28:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444277850935296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444298814066688[0;39m 生成今日电子书快照开始
2023-05-26 22:29:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444298814066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444298814066688[0;39m ==> Parameters: 
2023-05-26 22:29:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444298814066688[0;39m <==    Updates: 0
2023-05-26 22:29:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444298814066688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:29:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444319823335424[0;39m 生成今日电子书快照开始
2023-05-26 22:29:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444319823335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444319823335424[0;39m ==> Parameters: 
2023-05-26 22:29:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444319823335424[0;39m <==    Updates: 0
2023-05-26 22:29:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444319823335424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:29:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119444319840112640[0;39m 更新电子书下的文档数据开始
2023-05-26 22:29:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444319840112640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:29:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444319840112640[0;39m ==> Parameters: 
2023-05-26 22:29:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444319840112640[0;39m <==    Updates: 8
2023-05-26 22:29:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119444319840112640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:29:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444340761300992[0;39m 生成今日电子书快照开始
2023-05-26 22:29:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444340761300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444340761300992[0;39m ==> Parameters: 
2023-05-26 22:29:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444340761300992[0;39m <==    Updates: 0
2023-05-26 22:29:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444340761300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444361724432384[0;39m 生成今日电子书快照开始
2023-05-26 22:29:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444361724432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444361724432384[0;39m ==> Parameters: 
2023-05-26 22:29:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444361724432384[0;39m <==    Updates: 0
2023-05-26 22:29:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444361724432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444382721118208[0;39m 生成今日电子书快照开始
2023-05-26 22:29:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444382721118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444382721118208[0;39m ==> Parameters: 
2023-05-26 22:29:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444382721118208[0;39m <==    Updates: 0
2023-05-26 22:29:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444382721118208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444403709415424[0;39m 生成今日电子书快照开始
2023-05-26 22:29:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444403709415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444403709415424[0;39m ==> Parameters: 
2023-05-26 22:29:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444403709415424[0;39m <==    Updates: 0
2023-05-26 22:29:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444403709415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444424651575296[0;39m 生成今日电子书快照开始
2023-05-26 22:29:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444424651575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444424651575296[0;39m ==> Parameters: 
2023-05-26 22:29:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444424651575296[0;39m <==    Updates: 0
2023-05-26 22:29:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444424651575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119444445618900992[0;39m 更新电子书下的文档数据开始
2023-05-26 22:29:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444445618900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:29:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444445618900992[0;39m ==> Parameters: 
2023-05-26 22:29:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444445618900992[0;39m <==    Updates: 8
2023-05-26 22:29:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119444445618900992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:29:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444445627289600[0;39m 生成今日电子书快照开始
2023-05-26 22:29:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444445627289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444445627289600[0;39m ==> Parameters: 
2023-05-26 22:29:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444445627289600[0;39m <==    Updates: 0
2023-05-26 22:29:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444445627289600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:29:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444466623975424[0;39m 生成今日电子书快照开始
2023-05-26 22:29:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444466623975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444466623975424[0;39m ==> Parameters: 
2023-05-26 22:29:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444466623975424[0;39m <==    Updates: 0
2023-05-26 22:29:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444466623975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444487545163776[0;39m 生成今日电子书快照开始
2023-05-26 22:29:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444487545163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444487545163776[0;39m ==> Parameters: 
2023-05-26 22:29:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444487545163776[0;39m <==    Updates: 0
2023-05-26 22:29:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444487545163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444508562821120[0;39m 生成今日电子书快照开始
2023-05-26 22:29:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444508562821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444508562821120[0;39m ==> Parameters: 
2023-05-26 22:29:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444508562821120[0;39m <==    Updates: 0
2023-05-26 22:29:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444508562821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:29:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444529484009472[0;39m 生成今日电子书快照开始
2023-05-26 22:29:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444529484009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:29:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444529484009472[0;39m ==> Parameters: 
2023-05-26 22:29:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444529484009472[0;39m <==    Updates: 0
2023-05-26 22:29:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444529484009472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444550497472512[0;39m 生成今日电子书快照开始
2023-05-26 22:30:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444550497472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444550497472512[0;39m ==> Parameters: 
2023-05-26 22:30:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444550497472512[0;39m <==    Updates: 0
2023-05-26 22:30:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444550497472512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:30:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119444571460603904[0;39m 更新电子书下的文档数据开始
2023-05-26 22:30:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444571460603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:30:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444571460603904[0;39m ==> Parameters: 
2023-05-26 22:30:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444571460603904[0;39m <==    Updates: 8
2023-05-26 22:30:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119444571460603904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:30:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444571468992512[0;39m 生成今日电子书快照开始
2023-05-26 22:30:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444571468992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444571468992512[0;39m ==> Parameters: 
2023-05-26 22:30:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444571468992512[0;39m <==    Updates: 0
2023-05-26 22:30:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444571468992512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:30:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444592406958080[0;39m 生成今日电子书快照开始
2023-05-26 22:30:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444592406958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444592406958080[0;39m ==> Parameters: 
2023-05-26 22:30:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444592406958080[0;39m <==    Updates: 0
2023-05-26 22:30:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444592406958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444613403643904[0;39m 生成今日电子书快照开始
2023-05-26 22:30:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444613403643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444613403643904[0;39m ==> Parameters: 
2023-05-26 22:30:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444613403643904[0;39m <==    Updates: 0
2023-05-26 22:30:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444613403643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444634366775296[0;39m 生成今日电子书快照开始
2023-05-26 22:30:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444634366775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444634366775296[0;39m ==> Parameters: 
2023-05-26 22:30:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444634366775296[0;39m <==    Updates: 0
2023-05-26 22:30:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444634366775296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444655371849728[0;39m 生成今日电子书快照开始
2023-05-26 22:30:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444655371849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444655371849728[0;39m ==> Parameters: 
2023-05-26 22:30:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444655371849728[0;39m <==    Updates: 0
2023-05-26 22:30:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444655371849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444676293038080[0;39m 生成今日电子书快照开始
2023-05-26 22:30:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444676293038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444676293038080[0;39m ==> Parameters: 
2023-05-26 22:30:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444676293038080[0;39m <==    Updates: 0
2023-05-26 22:30:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444676293038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444697264558080[0;39m 生成今日电子书快照开始
2023-05-26 22:30:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444697264558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444697264558080[0;39m ==> Parameters: 
2023-05-26 22:30:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444697264558080[0;39m <==    Updates: 0
2023-05-26 22:30:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444697264558080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:30:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119444697272946688[0;39m 更新电子书下的文档数据开始
2023-05-26 22:30:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444697272946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:30:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444697272946688[0;39m ==> Parameters: 
2023-05-26 22:30:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444697272946688[0;39m <==    Updates: 8
2023-05-26 22:30:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119444697272946688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:30:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444718261243904[0;39m 生成今日电子书快照开始
2023-05-26 22:30:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444718261243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444718261243904[0;39m ==> Parameters: 
2023-05-26 22:30:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444718261243904[0;39m <==    Updates: 0
2023-05-26 22:30:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444718261243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444739262124032[0;39m 生成今日电子书快照开始
2023-05-26 22:30:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444739262124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444739262124032[0;39m ==> Parameters: 
2023-05-26 22:30:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444739262124032[0;39m <==    Updates: 0
2023-05-26 22:30:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444739262124032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444760212672512[0;39m 生成今日电子书快照开始
2023-05-26 22:30:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444760212672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444760212672512[0;39m ==> Parameters: 
2023-05-26 22:30:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444760212672512[0;39m <==    Updates: 0
2023-05-26 22:30:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444760212672512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:30:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444781154832384[0;39m 生成今日电子书快照开始
2023-05-26 22:30:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444781154832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:30:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444781154832384[0;39m ==> Parameters: 
2023-05-26 22:30:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444781154832384[0;39m <==    Updates: 0
2023-05-26 22:30:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444781154832384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:31:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444802159906816[0;39m 生成今日电子书快照开始
2023-05-26 22:31:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444802159906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444802159906816[0;39m ==> Parameters: 
2023-05-26 22:31:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444802159906816[0;39m <==    Updates: 0
2023-05-26 22:31:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444802159906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119444823102066688[0;39m 更新电子书下的文档数据开始
2023-05-26 22:31:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444823102066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:31:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444823102066688[0;39m ==> Parameters: 
2023-05-26 22:31:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444823102066688[0;39m <==    Updates: 8
2023-05-26 22:31:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119444823102066688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:31:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444823110455296[0;39m 生成今日电子书快照开始
2023-05-26 22:31:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444823110455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444823110455296[0;39m ==> Parameters: 
2023-05-26 22:31:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444823110455296[0;39m <==    Updates: 0
2023-05-26 22:31:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444823110455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444844111335424[0;39m 生成今日电子书快照开始
2023-05-26 22:31:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444844111335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444844111335424[0;39m ==> Parameters: 
2023-05-26 22:31:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444844111335424[0;39m <==    Updates: 0
2023-05-26 22:31:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444844111335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444865070272512[0;39m 生成今日电子书快照开始
2023-05-26 22:31:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444865070272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444865070272512[0;39m ==> Parameters: 
2023-05-26 22:31:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444865070272512[0;39m <==    Updates: 0
2023-05-26 22:31:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444865070272512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:31:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444886054375424[0;39m 生成今日电子书快照开始
2023-05-26 22:31:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444886054375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444886054375424[0;39m ==> Parameters: 
2023-05-26 22:31:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444886054375424[0;39m <==    Updates: 0
2023-05-26 22:31:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444886054375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444906988146688[0;39m 生成今日电子书快照开始
2023-05-26 22:31:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444906988146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444906988146688[0;39m ==> Parameters: 
2023-05-26 22:31:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444906988146688[0;39m <==    Updates: 0
2023-05-26 22:31:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444906988146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444927984832512[0;39m 生成今日电子书快照开始
2023-05-26 22:31:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444927984832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444927984832512[0;39m ==> Parameters: 
2023-05-26 22:31:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444927984832512[0;39m <==    Updates: 0
2023-05-26 22:31:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444927984832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119444948973129728[0;39m 更新电子书下的文档数据开始
2023-05-26 22:31:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444948973129728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:31:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444948973129728[0;39m ==> Parameters: 
2023-05-26 22:31:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119444948973129728[0;39m <==    Updates: 8
2023-05-26 22:31:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119444948973129728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:31:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444948981518336[0;39m 生成今日电子书快照开始
2023-05-26 22:31:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444948981518336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444948981518336[0;39m ==> Parameters: 
2023-05-26 22:31:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444948981518336[0;39m <==    Updates: 0
2023-05-26 22:31:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444948981518336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:31:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444969944649728[0;39m 生成今日电子书快照开始
2023-05-26 22:31:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444969944649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444969944649728[0;39m ==> Parameters: 
2023-05-26 22:31:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444969944649728[0;39m <==    Updates: 0
2023-05-26 22:31:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444969944649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119444990857449472[0;39m 生成今日电子书快照开始
2023-05-26 22:31:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444990857449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444990857449472[0;39m ==> Parameters: 
2023-05-26 22:31:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119444990857449472[0;39m <==    Updates: 0
2023-05-26 22:31:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119444990857449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445011891884032[0;39m 生成今日电子书快照开始
2023-05-26 22:31:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445011891884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445011891884032[0;39m ==> Parameters: 
2023-05-26 22:31:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445011891884032[0;39m <==    Updates: 0
2023-05-26 22:31:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445011891884032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:31:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445032842432512[0;39m 生成今日电子书快照开始
2023-05-26 22:31:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445032842432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:31:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445032842432512[0;39m ==> Parameters: 
2023-05-26 22:31:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445032842432512[0;39m <==    Updates: 0
2023-05-26 22:31:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445032842432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:32:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445053805563904[0;39m 生成今日电子书快照开始
2023-05-26 22:32:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445053805563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445053805563904[0;39m ==> Parameters: 
2023-05-26 22:32:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445053805563904[0;39m <==    Updates: 0
2023-05-26 22:32:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445053805563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:32:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119445074747723776[0;39m 更新电子书下的文档数据开始
2023-05-26 22:32:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445074747723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:32:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445074747723776[0;39m ==> Parameters: 
2023-05-26 22:32:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445074747723776[0;39m <==    Updates: 8
2023-05-26 22:32:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119445074747723776[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 22:32:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445074751918080[0;39m 生成今日电子书快照开始
2023-05-26 22:32:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445074751918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445074751918080[0;39m ==> Parameters: 
2023-05-26 22:32:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445074751918080[0;39m <==    Updates: 0
2023-05-26 22:32:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445074751918080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:32:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445095727632384[0;39m 生成今日电子书快照开始
2023-05-26 22:32:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445095727632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445095727632384[0;39m ==> Parameters: 
2023-05-26 22:32:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445095727632384[0;39m <==    Updates: 0
2023-05-26 22:32:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445095727632384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:32:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445116699152384[0;39m 生成今日电子书快照开始
2023-05-26 22:32:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445116699152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445116699152384[0;39m ==> Parameters: 
2023-05-26 22:32:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445116699152384[0;39m <==    Updates: 0
2023-05-26 22:32:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445116699152384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:32:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445137704226816[0;39m 生成今日电子书快照开始
2023-05-26 22:32:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445137704226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445137704226816[0;39m ==> Parameters: 
2023-05-26 22:32:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445137704226816[0;39m <==    Updates: 0
2023-05-26 22:32:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445137704226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:32:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445158642192384[0;39m 生成今日电子书快照开始
2023-05-26 22:32:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445158642192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445158642192384[0;39m ==> Parameters: 
2023-05-26 22:32:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445158642192384[0;39m <==    Updates: 0
2023-05-26 22:32:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445158642192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:32:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445179634683904[0;39m 生成今日电子书快照开始
2023-05-26 22:32:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445179634683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445179634683904[0;39m ==> Parameters: 
2023-05-26 22:32:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445179634683904[0;39m <==    Updates: 0
2023-05-26 22:32:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445179634683904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:32:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445200576843776[0;39m 生成今日电子书快照开始
2023-05-26 22:32:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445200576843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445200576843776[0;39m ==> Parameters: 
2023-05-26 22:32:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445200576843776[0;39m <==    Updates: 0
2023-05-26 22:32:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445200576843776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:32:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119445200581038080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:32:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445200581038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:32:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445200581038080[0;39m ==> Parameters: 
2023-05-26 22:32:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445200581038080[0;39m <==    Updates: 8
2023-05-26 22:32:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119445200581038080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:32:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445221598695424[0;39m 生成今日电子书快照开始
2023-05-26 22:32:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445221598695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445221598695424[0;39m ==> Parameters: 
2023-05-26 22:32:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445221598695424[0;39m <==    Updates: 0
2023-05-26 22:32:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445221598695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:32:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445242528272384[0;39m 生成今日电子书快照开始
2023-05-26 22:32:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445242528272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445242528272384[0;39m ==> Parameters: 
2023-05-26 22:32:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445242528272384[0;39m <==    Updates: 0
2023-05-26 22:32:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445242528272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:32:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445263495598080[0;39m 生成今日电子书快照开始
2023-05-26 22:32:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445263495598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445263495598080[0;39m ==> Parameters: 
2023-05-26 22:32:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445263495598080[0;39m <==    Updates: 0
2023-05-26 22:32:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445263495598080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:32:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445284479700992[0;39m 生成今日电子书快照开始
2023-05-26 22:32:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445284479700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:32:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445284479700992[0;39m ==> Parameters: 
2023-05-26 22:32:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445284479700992[0;39m <==    Updates: 0
2023-05-26 22:32:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445284479700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445305451220992[0;39m 生成今日电子书快照开始
2023-05-26 22:33:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445305451220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445305451220992[0;39m ==> Parameters: 
2023-05-26 22:33:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445305451220992[0;39m <==    Updates: 0
2023-05-26 22:33:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445305451220992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445326447906816[0;39m 生成今日电子书快照开始
2023-05-26 22:33:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445326447906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445326447906816[0;39m ==> Parameters: 
2023-05-26 22:33:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445326447906816[0;39m <==    Updates: 0
2023-05-26 22:33:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445326447906816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:33:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119445326452101120[0;39m 更新电子书下的文档数据开始
2023-05-26 22:33:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445326452101120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:33:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445326452101120[0;39m ==> Parameters: 
2023-05-26 22:33:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445326452101120[0;39m <==    Updates: 8
2023-05-26 22:33:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119445326452101120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:33:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445347402649600[0;39m 生成今日电子书快照开始
2023-05-26 22:33:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445347402649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445347402649600[0;39m ==> Parameters: 
2023-05-26 22:33:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445347402649600[0;39m <==    Updates: 0
2023-05-26 22:33:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445347402649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445368353198080[0;39m 生成今日电子书快照开始
2023-05-26 22:33:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445368353198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445368353198080[0;39m ==> Parameters: 
2023-05-26 22:33:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445368353198080[0;39m <==    Updates: 0
2023-05-26 22:33:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445368353198080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445389358272512[0;39m 生成今日电子书快照开始
2023-05-26 22:33:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445389358272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445389358272512[0;39m ==> Parameters: 
2023-05-26 22:33:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445389358272512[0;39m <==    Updates: 0
2023-05-26 22:33:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445389358272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445410338181120[0;39m 生成今日电子书快照开始
2023-05-26 22:33:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445410338181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445410338181120[0;39m ==> Parameters: 
2023-05-26 22:33:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445410338181120[0;39m <==    Updates: 0
2023-05-26 22:33:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445410338181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445431292923904[0;39m 生成今日电子书快照开始
2023-05-26 22:33:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445431292923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445431292923904[0;39m ==> Parameters: 
2023-05-26 22:33:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445431292923904[0;39m <==    Updates: 0
2023-05-26 22:33:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445431292923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119445452277026816[0;39m 更新电子书下的文档数据开始
2023-05-26 22:33:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445452277026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:33:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445452277026816[0;39m ==> Parameters: 
2023-05-26 22:33:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445452277026816[0;39m <==    Updates: 8
2023-05-26 22:33:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119445452277026816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:33:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445452281221120[0;39m 生成今日电子书快照开始
2023-05-26 22:33:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445452281221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445452281221120[0;39m ==> Parameters: 
2023-05-26 22:33:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445452281221120[0;39m <==    Updates: 0
2023-05-26 22:33:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445452281221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445473244352512[0;39m 生成今日电子书快照开始
2023-05-26 22:33:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445473244352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445473244352512[0;39m ==> Parameters: 
2023-05-26 22:33:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445473244352512[0;39m <==    Updates: 0
2023-05-26 22:33:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445473244352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445494224261120[0;39m 生成今日电子书快照开始
2023-05-26 22:33:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445494224261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445494224261120[0;39m ==> Parameters: 
2023-05-26 22:33:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445494224261120[0;39m <==    Updates: 0
2023-05-26 22:33:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445494224261120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445515145449472[0;39m 生成今日电子书快照开始
2023-05-26 22:33:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445515145449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445515145449472[0;39m ==> Parameters: 
2023-05-26 22:33:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445515145449472[0;39m <==    Updates: 0
2023-05-26 22:33:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445515145449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:33:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445536146329600[0;39m 生成今日电子书快照开始
2023-05-26 22:33:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445536146329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:33:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445536146329600[0;39m ==> Parameters: 
2023-05-26 22:33:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445536146329600[0;39m <==    Updates: 0
2023-05-26 22:33:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445536146329600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:34:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445557134626816[0;39m 生成今日电子书快照开始
2023-05-26 22:34:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445557134626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445557134626816[0;39m ==> Parameters: 
2023-05-26 22:34:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445557134626816[0;39m <==    Updates: 0
2023-05-26 22:34:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445557134626816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:34:05.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445578055815168[0;39m 生成今日电子书快照开始
2023-05-26 22:34:05.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445578055815168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445578055815168[0;39m ==> Parameters: 
2023-05-26 22:34:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445578055815168[0;39m <==    Updates: 0
2023-05-26 22:34:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445578055815168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:34:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119445578064203776[0;39m 更新电子书下的文档数据开始
2023-05-26 22:34:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445578064203776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:34:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445578064203776[0;39m ==> Parameters: 
2023-05-26 22:34:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445578064203776[0;39m <==    Updates: 8
2023-05-26 22:34:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119445578064203776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:34:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445599077666816[0;39m 生成今日电子书快照开始
2023-05-26 22:34:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445599077666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445599077666816[0;39m ==> Parameters: 
2023-05-26 22:34:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445599077666816[0;39m <==    Updates: 0
2023-05-26 22:34:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445599077666816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:34:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445620024020992[0;39m 生成今日电子书快照开始
2023-05-26 22:34:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445620024020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445620024020992[0;39m ==> Parameters: 
2023-05-26 22:34:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445620024020992[0;39m <==    Updates: 0
2023-05-26 22:34:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445620024020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:34:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445640987152384[0;39m 生成今日电子书快照开始
2023-05-26 22:34:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445640987152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445640987152384[0;39m ==> Parameters: 
2023-05-26 22:34:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445640987152384[0;39m <==    Updates: 0
2023-05-26 22:34:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445640987152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:34:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445661962866688[0;39m 生成今日电子书快照开始
2023-05-26 22:34:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445661962866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445661962866688[0;39m ==> Parameters: 
2023-05-26 22:34:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445661962866688[0;39m <==    Updates: 0
2023-05-26 22:34:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445661962866688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:34:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445682951163904[0;39m 生成今日电子书快照开始
2023-05-26 22:34:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445682951163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445682951163904[0;39m ==> Parameters: 
2023-05-26 22:34:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445682951163904[0;39m <==    Updates: 0
2023-05-26 22:34:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445682951163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:34:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119445703897518080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445703897518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445703897518080[0;39m ==> Parameters: 
2023-05-26 22:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445703897518080[0;39m <==    Updates: 8
2023-05-26 22:34:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119445703897518080[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 22:34:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445703901712384[0;39m 生成今日电子书快照开始
2023-05-26 22:34:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445703901712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445703901712384[0;39m ==> Parameters: 
2023-05-26 22:34:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445703901712384[0;39m <==    Updates: 0
2023-05-26 22:34:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445703901712384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:34:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445724906786816[0;39m 生成今日电子书快照开始
2023-05-26 22:34:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445724906786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445724906786816[0;39m ==> Parameters: 
2023-05-26 22:34:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445724906786816[0;39m <==    Updates: 0
2023-05-26 22:34:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445724906786816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:34:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445745840558080[0;39m 生成今日电子书快照开始
2023-05-26 22:34:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445745840558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445745840558080[0;39m ==> Parameters: 
2023-05-26 22:34:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445745840558080[0;39m <==    Updates: 0
2023-05-26 22:34:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445745840558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:34:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445766845632512[0;39m 生成今日电子书快照开始
2023-05-26 22:34:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445766845632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445766845632512[0;39m ==> Parameters: 
2023-05-26 22:34:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445766845632512[0;39m <==    Updates: 0
2023-05-26 22:34:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445766845632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:34:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445787829735424[0;39m 生成今日电子书快照开始
2023-05-26 22:34:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445787829735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:34:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445787829735424[0;39m ==> Parameters: 
2023-05-26 22:34:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445787829735424[0;39m <==    Updates: 0
2023-05-26 22:34:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445787829735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:35:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445808767700992[0;39m 生成今日电子书快照开始
2023-05-26 22:35:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445808767700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445808767700992[0;39m ==> Parameters: 
2023-05-26 22:35:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445808767700992[0;39m <==    Updates: 0
2023-05-26 22:35:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445808767700992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:35:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445829730832384[0;39m 生成今日电子书快照开始
2023-05-26 22:35:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445829730832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445829730832384[0;39m ==> Parameters: 
2023-05-26 22:35:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445829730832384[0;39m <==    Updates: 0
2023-05-26 22:35:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445829730832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:35:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119445829739220992[0;39m 更新电子书下的文档数据开始
2023-05-26 22:35:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445829739220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:35:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445829739220992[0;39m ==> Parameters: 
2023-05-26 22:35:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445829739220992[0;39m <==    Updates: 8
2023-05-26 22:35:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119445829739220992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:35:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445850710740992[0;39m 生成今日电子书快照开始
2023-05-26 22:35:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445850710740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445850710740992[0;39m ==> Parameters: 
2023-05-26 22:35:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445850710740992[0;39m <==    Updates: 0
2023-05-26 22:35:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445850710740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:35:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445871699038208[0;39m 生成今日电子书快照开始
2023-05-26 22:35:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445871699038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445871699038208[0;39m ==> Parameters: 
2023-05-26 22:35:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445871699038208[0;39m <==    Updates: 0
2023-05-26 22:35:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445871699038208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:35:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445892657975296[0;39m 生成今日电子书快照开始
2023-05-26 22:35:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445892657975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445892657975296[0;39m ==> Parameters: 
2023-05-26 22:35:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445892657975296[0;39m <==    Updates: 0
2023-05-26 22:35:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445892657975296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:35:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445913667244032[0;39m 生成今日电子书快照开始
2023-05-26 22:35:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445913667244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445913667244032[0;39m ==> Parameters: 
2023-05-26 22:35:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445913667244032[0;39m <==    Updates: 0
2023-05-26 22:35:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445913667244032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:35:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445934617792512[0;39m 生成今日电子书快照开始
2023-05-26 22:35:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445934617792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445934617792512[0;39m ==> Parameters: 
2023-05-26 22:35:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445934617792512[0;39m <==    Updates: 0
2023-05-26 22:35:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445934617792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:35:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119445955551563776[0;39m 更新电子书下的文档数据开始
2023-05-26 22:35:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445955551563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:35:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445955551563776[0;39m ==> Parameters: 
2023-05-26 22:35:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119445955551563776[0;39m <==    Updates: 8
2023-05-26 22:35:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119445955551563776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:35:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445955555758080[0;39m 生成今日电子书快照开始
2023-05-26 22:35:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445955555758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445955555758080[0;39m ==> Parameters: 
2023-05-26 22:35:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445955555758080[0;39m <==    Updates: 0
2023-05-26 22:35:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445955555758080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:35:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445976544055296[0;39m 生成今日电子书快照开始
2023-05-26 22:35:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445976544055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445976544055296[0;39m ==> Parameters: 
2023-05-26 22:35:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445976544055296[0;39m <==    Updates: 0
2023-05-26 22:35:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445976544055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:35:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119445997549129728[0;39m 生成今日电子书快照开始
2023-05-26 22:35:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445997549129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445997549129728[0;39m ==> Parameters: 
2023-05-26 22:35:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119445997549129728[0;39m <==    Updates: 0
2023-05-26 22:35:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119445997549129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:35:50.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446018457735168[0;39m 生成今日电子书快照开始
2023-05-26 22:35:50.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446018457735168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446018457735168[0;39m ==> Parameters: 
2023-05-26 22:35:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446018457735168[0;39m <==    Updates: 0
2023-05-26 22:35:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446018457735168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:35:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446039458615296[0;39m 生成今日电子书快照开始
2023-05-26 22:35:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446039458615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:35:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446039458615296[0;39m ==> Parameters: 
2023-05-26 22:35:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446039458615296[0;39m <==    Updates: 0
2023-05-26 22:35:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446039458615296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:36:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446060409163776[0;39m 生成今日电子书快照开始
2023-05-26 22:36:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446060409163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446060409163776[0;39m ==> Parameters: 
2023-05-26 22:36:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446060409163776[0;39m <==    Updates: 0
2023-05-26 22:36:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446060409163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:36:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446081414238208[0;39m 生成今日电子书快照开始
2023-05-26 22:36:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446081414238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446081414238208[0;39m ==> Parameters: 
2023-05-26 22:36:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446081414238208[0;39m <==    Updates: 0
2023-05-26 22:36:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446081414238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:36:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119446081422626816[0;39m 更新电子书下的文档数据开始
2023-05-26 22:36:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446081422626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:36:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446081422626816[0;39m ==> Parameters: 
2023-05-26 22:36:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446081422626816[0;39m <==    Updates: 8
2023-05-26 22:36:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119446081422626816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:36:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446102381563904[0;39m 生成今日电子书快照开始
2023-05-26 22:36:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446102381563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446102381563904[0;39m ==> Parameters: 
2023-05-26 22:36:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446102381563904[0;39m <==    Updates: 0
2023-05-26 22:36:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446102381563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:36:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446123344695296[0;39m 生成今日电子书快照开始
2023-05-26 22:36:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446123344695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446123344695296[0;39m ==> Parameters: 
2023-05-26 22:36:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446123344695296[0;39m <==    Updates: 0
2023-05-26 22:36:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446123344695296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:36:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446144332992512[0;39m 生成今日电子书快照开始
2023-05-26 22:36:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446144332992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446144332992512[0;39m ==> Parameters: 
2023-05-26 22:36:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446144332992512[0;39m <==    Updates: 0
2023-05-26 22:36:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446144332992512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:36:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446165287735296[0;39m 生成今日电子书快照开始
2023-05-26 22:36:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446165287735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446165287735296[0;39m ==> Parameters: 
2023-05-26 22:36:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446165287735296[0;39m <==    Updates: 0
2023-05-26 22:36:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446165287735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:36:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446186267643904[0;39m 生成今日电子书快照开始
2023-05-26 22:36:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446186267643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446186267643904[0;39m ==> Parameters: 
2023-05-26 22:36:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446186267643904[0;39m <==    Updates: 0
2023-05-26 22:36:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446186267643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:36:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446207268524032[0;39m 生成今日电子书快照开始
2023-05-26 22:36:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446207268524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446207268524032[0;39m ==> Parameters: 
2023-05-26 22:36:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446207268524032[0;39m <==    Updates: 0
2023-05-26 22:36:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446207268524032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:36:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119446207272718336[0;39m 更新电子书下的文档数据开始
2023-05-26 22:36:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446207272718336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:36:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446207272718336[0;39m ==> Parameters: 
2023-05-26 22:36:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446207272718336[0;39m <==    Updates: 8
2023-05-26 22:36:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119446207272718336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:36:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446228235849728[0;39m 生成今日电子书快照开始
2023-05-26 22:36:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446228235849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446228235849728[0;39m ==> Parameters: 
2023-05-26 22:36:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446228235849728[0;39m <==    Updates: 0
2023-05-26 22:36:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446228235849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:36:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446249198981120[0;39m 生成今日电子书快照开始
2023-05-26 22:36:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446249198981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446249198981120[0;39m ==> Parameters: 
2023-05-26 22:36:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446249198981120[0;39m <==    Updates: 0
2023-05-26 22:36:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446249198981120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:36:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446270132752384[0;39m 生成今日电子书快照开始
2023-05-26 22:36:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446270132752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446270132752384[0;39m ==> Parameters: 
2023-05-26 22:36:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446270132752384[0;39m <==    Updates: 0
2023-05-26 22:36:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446270132752384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2023-05-26 22:36:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446291091689472[0;39m 生成今日电子书快照开始
2023-05-26 22:36:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446291091689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:36:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446291091689472[0;39m ==> Parameters: 
2023-05-26 22:36:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446291091689472[0;39m <==    Updates: 0
2023-05-26 22:36:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446291091689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:37:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446312096763904[0;39m 生成今日电子书快照开始
2023-05-26 22:37:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446312096763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446312096763904[0;39m ==> Parameters: 
2023-05-26 22:37:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446312096763904[0;39m <==    Updates: 0
2023-05-26 22:37:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446312096763904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:37:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446333085061120[0;39m 生成今日电子书快照开始
2023-05-26 22:37:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446333085061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446333085061120[0;39m ==> Parameters: 
2023-05-26 22:37:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446333085061120[0;39m <==    Updates: 0
2023-05-26 22:37:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446333085061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:37:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119446333093449728[0;39m 更新电子书下的文档数据开始
2023-05-26 22:37:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446333093449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:37:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446333093449728[0;39m ==> Parameters: 
2023-05-26 22:37:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446333093449728[0;39m <==    Updates: 8
2023-05-26 22:37:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119446333093449728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:37:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446354027220992[0;39m 生成今日电子书快照开始
2023-05-26 22:37:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446354027220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446354027220992[0;39m ==> Parameters: 
2023-05-26 22:37:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446354027220992[0;39m <==    Updates: 0
2023-05-26 22:37:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446354027220992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:37:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446375036489728[0;39m 生成今日电子书快照开始
2023-05-26 22:37:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446375036489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446375036489728[0;39m ==> Parameters: 
2023-05-26 22:37:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446375036489728[0;39m <==    Updates: 0
2023-05-26 22:37:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446375036489728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:37:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446396003815424[0;39m 生成今日电子书快照开始
2023-05-26 22:37:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446396003815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446396003815424[0;39m ==> Parameters: 
2023-05-26 22:37:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446396003815424[0;39m <==    Updates: 0
2023-05-26 22:37:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446396003815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:37:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446416941780992[0;39m 生成今日电子书快照开始
2023-05-26 22:37:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446416941780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446416941780992[0;39m ==> Parameters: 
2023-05-26 22:37:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446416941780992[0;39m <==    Updates: 0
2023-05-26 22:37:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446416941780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:37:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446437921689600[0;39m 生成今日电子书快照开始
2023-05-26 22:37:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446437921689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446437921689600[0;39m ==> Parameters: 
2023-05-26 22:37:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446437921689600[0;39m <==    Updates: 0
2023-05-26 22:37:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446437921689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:37:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119446458922569728[0;39m 更新电子书下的文档数据开始
2023-05-26 22:37:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446458922569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:37:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446458922569728[0;39m ==> Parameters: 
2023-05-26 22:37:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446458922569728[0;39m <==    Updates: 8
2023-05-26 22:37:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119446458922569728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:37:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446458926764032[0;39m 生成今日电子书快照开始
2023-05-26 22:37:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446458926764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446458926764032[0;39m ==> Parameters: 
2023-05-26 22:37:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446458926764032[0;39m <==    Updates: 0
2023-05-26 22:37:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446458926764032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:37:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446479868923904[0;39m 生成今日电子书快照开始
2023-05-26 22:37:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446479868923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446479868923904[0;39m ==> Parameters: 
2023-05-26 22:37:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446479868923904[0;39m <==    Updates: 0
2023-05-26 22:37:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446479868923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:37:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446500840443904[0;39m 生成今日电子书快照开始
2023-05-26 22:37:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446500840443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446500840443904[0;39m ==> Parameters: 
2023-05-26 22:37:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446500840443904[0;39m <==    Updates: 0
2023-05-26 22:37:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446500840443904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:37:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446521820352512[0;39m 生成今日电子书快照开始
2023-05-26 22:37:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446521820352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446521820352512[0;39m ==> Parameters: 
2023-05-26 22:37:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446521820352512[0;39m <==    Updates: 0
2023-05-26 22:37:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446521820352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:37:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446542770900992[0;39m 生成今日电子书快照开始
2023-05-26 22:37:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446542770900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:37:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446542770900992[0;39m ==> Parameters: 
2023-05-26 22:37:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446542770900992[0;39m <==    Updates: 0
2023-05-26 22:37:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446542770900992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:38:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446563780169728[0;39m 生成今日电子书快照开始
2023-05-26 22:38:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446563780169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446563780169728[0;39m ==> Parameters: 
2023-05-26 22:38:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446563780169728[0;39m <==    Updates: 0
2023-05-26 22:38:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446563780169728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446584713940992[0;39m 生成今日电子书快照开始
2023-05-26 22:38:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446584713940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446584713940992[0;39m ==> Parameters: 
2023-05-26 22:38:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446584713940992[0;39m <==    Updates: 0
2023-05-26 22:38:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446584713940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119446584722329600[0;39m 更新电子书下的文档数据开始
2023-05-26 22:38:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446584722329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:38:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446584722329600[0;39m ==> Parameters: 
2023-05-26 22:38:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446584722329600[0;39m <==    Updates: 8
2023-05-26 22:38:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119446584722329600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:38:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446605693849600[0;39m 生成今日电子书快照开始
2023-05-26 22:38:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446605693849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446605693849600[0;39m ==> Parameters: 
2023-05-26 22:38:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446605693849600[0;39m <==    Updates: 0
2023-05-26 22:38:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446605693849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446626690535424[0;39m 生成今日电子书快照开始
2023-05-26 22:38:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446626690535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446626690535424[0;39m ==> Parameters: 
2023-05-26 22:38:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446626690535424[0;39m <==    Updates: 0
2023-05-26 22:38:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446626690535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446647641083904[0;39m 生成今日电子书快照开始
2023-05-26 22:38:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446647641083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446647641083904[0;39m ==> Parameters: 
2023-05-26 22:38:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446647641083904[0;39m <==    Updates: 0
2023-05-26 22:38:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446647641083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446668608409600[0;39m 生成今日电子书快照开始
2023-05-26 22:38:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446668608409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446668608409600[0;39m ==> Parameters: 
2023-05-26 22:38:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446668608409600[0;39m <==    Updates: 0
2023-05-26 22:38:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446668608409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446689567346688[0;39m 生成今日电子书快照开始
2023-05-26 22:38:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446689567346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446689567346688[0;39m ==> Parameters: 
2023-05-26 22:38:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446689567346688[0;39m <==    Updates: 0
2023-05-26 22:38:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446689567346688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:38:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119446710555643904[0;39m 更新电子书下的文档数据开始
2023-05-26 22:38:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446710555643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:38:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446710555643904[0;39m ==> Parameters: 
2023-05-26 22:38:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446710555643904[0;39m <==    Updates: 8
2023-05-26 22:38:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119446710555643904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:38:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446710559838208[0;39m 生成今日电子书快照开始
2023-05-26 22:38:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446710559838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446710559838208[0;39m ==> Parameters: 
2023-05-26 22:38:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446710559838208[0;39m <==    Updates: 0
2023-05-26 22:38:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446710559838208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446731493609472[0;39m 生成今日电子书快照开始
2023-05-26 22:38:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446731493609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446731493609472[0;39m ==> Parameters: 
2023-05-26 22:38:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446731493609472[0;39m <==    Updates: 0
2023-05-26 22:38:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446731493609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446752486100992[0;39m 生成今日电子书快照开始
2023-05-26 22:38:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446752486100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446752486100992[0;39m ==> Parameters: 
2023-05-26 22:38:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446752486100992[0;39m <==    Updates: 0
2023-05-26 22:38:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446752486100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446773482786816[0;39m 生成今日电子书快照开始
2023-05-26 22:38:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446773482786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446773482786816[0;39m ==> Parameters: 
2023-05-26 22:38:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446773482786816[0;39m <==    Updates: 0
2023-05-26 22:38:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446773482786816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:38:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446794454306816[0;39m 生成今日电子书快照开始
2023-05-26 22:38:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446794454306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:38:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446794454306816[0;39m ==> Parameters: 
2023-05-26 22:38:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446794454306816[0;39m <==    Updates: 0
2023-05-26 22:38:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446794454306816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:39:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446815383883776[0;39m 生成今日电子书快照开始
2023-05-26 22:39:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446815383883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446815383883776[0;39m ==> Parameters: 
2023-05-26 22:39:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446815383883776[0;39m <==    Updates: 0
2023-05-26 22:39:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446815383883776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:39:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446836380569600[0;39m 生成今日电子书快照开始
2023-05-26 22:39:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446836380569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446836380569600[0;39m ==> Parameters: 
2023-05-26 22:39:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446836380569600[0;39m <==    Updates: 0
2023-05-26 22:39:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446836380569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:39:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119446836388958208[0;39m 更新电子书下的文档数据开始
2023-05-26 22:39:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446836388958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:39:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446836388958208[0;39m ==> Parameters: 
2023-05-26 22:39:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446836388958208[0;39m <==    Updates: 8
2023-05-26 22:39:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119446836388958208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:39:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446857373061120[0;39m 生成今日电子书快照开始
2023-05-26 22:39:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446857373061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446857373061120[0;39m ==> Parameters: 
2023-05-26 22:39:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446857373061120[0;39m <==    Updates: 0
2023-05-26 22:39:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446857373061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:39:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446878331998208[0;39m 生成今日电子书快照开始
2023-05-26 22:39:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446878331998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446878331998208[0;39m ==> Parameters: 
2023-05-26 22:39:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446878331998208[0;39m <==    Updates: 0
2023-05-26 22:39:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446878331998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:39:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446899282546688[0;39m 生成今日电子书快照开始
2023-05-26 22:39:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446899282546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446899282546688[0;39m ==> Parameters: 
2023-05-26 22:39:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446899282546688[0;39m <==    Updates: 0
2023-05-26 22:39:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446899282546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:39:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446920237289472[0;39m 生成今日电子书快照开始
2023-05-26 22:39:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446920237289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446920237289472[0;39m ==> Parameters: 
2023-05-26 22:39:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446920237289472[0;39m <==    Updates: 0
2023-05-26 22:39:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446920237289472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:39:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446941229780992[0;39m 生成今日电子书快照开始
2023-05-26 22:39:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446941229780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446941229780992[0;39m ==> Parameters: 
2023-05-26 22:39:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446941229780992[0;39m <==    Updates: 0
2023-05-26 22:39:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446941229780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:39:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446962222272512[0;39m 生成今日电子书快照开始
2023-05-26 22:39:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446962222272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446962222272512[0;39m ==> Parameters: 
2023-05-26 22:39:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446962222272512[0;39m <==    Updates: 0
2023-05-26 22:39:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446962222272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:39:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119446962230661120[0;39m 更新电子书下的文档数据开始
2023-05-26 22:39:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446962230661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:39:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446962230661120[0;39m ==> Parameters: 
2023-05-26 22:39:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119446962230661120[0;39m <==    Updates: 8
2023-05-26 22:39:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119446962230661120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:39:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119446983185403904[0;39m 生成今日电子书快照开始
2023-05-26 22:39:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446983185403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446983185403904[0;39m ==> Parameters: 
2023-05-26 22:39:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119446983185403904[0;39m <==    Updates: 0
2023-05-26 22:39:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119446983185403904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:39:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447004156923904[0;39m 生成今日电子书快照开始
2023-05-26 22:39:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447004156923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447004156923904[0;39m ==> Parameters: 
2023-05-26 22:39:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447004156923904[0;39m <==    Updates: 0
2023-05-26 22:39:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447004156923904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:39:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447025145221120[0;39m 生成今日电子书快照开始
2023-05-26 22:39:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447025145221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447025145221120[0;39m ==> Parameters: 
2023-05-26 22:39:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447025145221120[0;39m <==    Updates: 0
2023-05-26 22:39:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447025145221120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:39:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447046095769600[0;39m 生成今日电子书快照开始
2023-05-26 22:39:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447046095769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:39:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447046095769600[0;39m ==> Parameters: 
2023-05-26 22:39:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447046095769600[0;39m <==    Updates: 0
2023-05-26 22:39:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447046095769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447067058900992[0;39m 生成今日电子书快照开始
2023-05-26 22:40:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447067058900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447067058900992[0;39m ==> Parameters: 
2023-05-26 22:40:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447067058900992[0;39m <==    Updates: 0
2023-05-26 22:40:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447067058900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119447088017838080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:40:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447088017838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:40:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447088017838080[0;39m ==> Parameters: 
2023-05-26 22:40:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447088017838080[0;39m <==    Updates: 8
2023-05-26 22:40:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119447088017838080[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 22:40:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447088022032384[0;39m 生成今日电子书快照开始
2023-05-26 22:40:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447088022032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447088022032384[0;39m ==> Parameters: 
2023-05-26 22:40:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447088022032384[0;39m <==    Updates: 0
2023-05-26 22:40:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447088022032384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:40:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447108993552384[0;39m 生成今日电子书快照开始
2023-05-26 22:40:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447108993552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447108993552384[0;39m ==> Parameters: 
2023-05-26 22:40:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447108993552384[0;39m <==    Updates: 0
2023-05-26 22:40:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447108993552384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447130002821120[0;39m 生成今日电子书快照开始
2023-05-26 22:40:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447130002821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447130002821120[0;39m ==> Parameters: 
2023-05-26 22:40:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447130002821120[0;39m <==    Updates: 0
2023-05-26 22:40:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447130002821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447150940786688[0;39m 生成今日电子书快照开始
2023-05-26 22:40:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447150940786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447150940786688[0;39m ==> Parameters: 
2023-05-26 22:40:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447150940786688[0;39m <==    Updates: 0
2023-05-26 22:40:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447150940786688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447171903918080[0;39m 生成今日电子书快照开始
2023-05-26 22:40:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447171903918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447171903918080[0;39m ==> Parameters: 
2023-05-26 22:40:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447171903918080[0;39m <==    Updates: 0
2023-05-26 22:40:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447171903918080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447192883826688[0;39m 生成今日电子书快照开始
2023-05-26 22:40:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447192883826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447192883826688[0;39m ==> Parameters: 
2023-05-26 22:40:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447192883826688[0;39m <==    Updates: 0
2023-05-26 22:40:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447192883826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119447213872123904[0;39m 更新电子书下的文档数据开始
2023-05-26 22:40:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447213872123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:40:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447213872123904[0;39m ==> Parameters: 
2023-05-26 22:40:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447213872123904[0;39m <==    Updates: 8
2023-05-26 22:40:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119447213872123904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:40:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447213880512512[0;39m 生成今日电子书快照开始
2023-05-26 22:40:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447213880512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447213880512512[0;39m ==> Parameters: 
2023-05-26 22:40:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447213880512512[0;39m <==    Updates: 0
2023-05-26 22:40:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447213880512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447234822672384[0;39m 生成今日电子书快照开始
2023-05-26 22:40:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447234822672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447234822672384[0;39m ==> Parameters: 
2023-05-26 22:40:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447234822672384[0;39m <==    Updates: 0
2023-05-26 22:40:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447234822672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447255802580992[0;39m 生成今日电子书快照开始
2023-05-26 22:40:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447255802580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447255802580992[0;39m ==> Parameters: 
2023-05-26 22:40:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447255802580992[0;39m <==    Updates: 0
2023-05-26 22:40:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447255802580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:40:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447276765712384[0;39m 生成今日电子书快照开始
2023-05-26 22:40:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447276765712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447276765712384[0;39m ==> Parameters: 
2023-05-26 22:40:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447276765712384[0;39m <==    Updates: 0
2023-05-26 22:40:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447276765712384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:40:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447297762398208[0;39m 生成今日电子书快照开始
2023-05-26 22:40:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447297762398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:40:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447297762398208[0;39m ==> Parameters: 
2023-05-26 22:40:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447297762398208[0;39m <==    Updates: 0
2023-05-26 22:40:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447297762398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447318712946688[0;39m 生成今日电子书快照开始
2023-05-26 22:41:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447318712946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447318712946688[0;39m ==> Parameters: 
2023-05-26 22:41:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447318712946688[0;39m <==    Updates: 0
2023-05-26 22:41:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447318712946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119447339676078080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:41:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447339676078080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:41:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447339676078080[0;39m ==> Parameters: 
2023-05-26 22:41:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447339676078080[0;39m <==    Updates: 8
2023-05-26 22:41:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119447339676078080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:41:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447339684466688[0;39m 生成今日电子书快照开始
2023-05-26 22:41:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447339684466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447339684466688[0;39m ==> Parameters: 
2023-05-26 22:41:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447339684466688[0;39m <==    Updates: 0
2023-05-26 22:41:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447339684466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447360651792384[0;39m 生成今日电子书快照开始
2023-05-26 22:41:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447360651792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447360651792384[0;39m ==> Parameters: 
2023-05-26 22:41:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447360651792384[0;39m <==    Updates: 0
2023-05-26 22:41:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447360651792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447381627506688[0;39m 生成今日电子书快照开始
2023-05-26 22:41:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447381627506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447381627506688[0;39m ==> Parameters: 
2023-05-26 22:41:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447381627506688[0;39m <==    Updates: 0
2023-05-26 22:41:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447381627506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447402586443776[0;39m 生成今日电子书快照开始
2023-05-26 22:41:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447402586443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447402586443776[0;39m ==> Parameters: 
2023-05-26 22:41:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447402586443776[0;39m <==    Updates: 0
2023-05-26 22:41:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447402586443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447423574740992[0;39m 生成今日电子书快照开始
2023-05-26 22:41:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447423574740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447423574740992[0;39m ==> Parameters: 
2023-05-26 22:41:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447423574740992[0;39m <==    Updates: 0
2023-05-26 22:41:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447423574740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447444563038208[0;39m 生成今日电子书快照开始
2023-05-26 22:41:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447444563038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447444563038208[0;39m ==> Parameters: 
2023-05-26 22:41:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447444563038208[0;39m <==    Updates: 0
2023-05-26 22:41:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447444563038208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:41:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119447465542946816[0;39m 更新电子书下的文档数据开始
2023-05-26 22:41:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447465542946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:41:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447465542946816[0;39m ==> Parameters: 
2023-05-26 22:41:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447465542946816[0;39m <==    Updates: 8
2023-05-26 22:41:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119447465542946816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:41:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447465551335424[0;39m 生成今日电子书快照开始
2023-05-26 22:41:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447465551335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447465551335424[0;39m ==> Parameters: 
2023-05-26 22:41:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447465551335424[0;39m <==    Updates: 0
2023-05-26 22:41:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447465551335424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:41:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447486493495296[0;39m 生成今日电子书快照开始
2023-05-26 22:41:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447486493495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447486493495296[0;39m ==> Parameters: 
2023-05-26 22:41:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447486493495296[0;39m <==    Updates: 0
2023-05-26 22:41:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447486493495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447507485986816[0;39m 生成今日电子书快照开始
2023-05-26 22:41:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447507485986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447507485986816[0;39m ==> Parameters: 
2023-05-26 22:41:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447507485986816[0;39m <==    Updates: 0
2023-05-26 22:41:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447507485986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447528444923904[0;39m 生成今日电子书快照开始
2023-05-26 22:41:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447528444923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447528444923904[0;39m ==> Parameters: 
2023-05-26 22:41:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447528444923904[0;39m <==    Updates: 0
2023-05-26 22:41:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447528444923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:41:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447549408055296[0;39m 生成今日电子书快照开始
2023-05-26 22:41:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447549408055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:41:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447549408055296[0;39m ==> Parameters: 
2023-05-26 22:41:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447549408055296[0;39m <==    Updates: 0
2023-05-26 22:41:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447549408055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:42:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447570383769600[0;39m 生成今日电子书快照开始
2023-05-26 22:42:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447570383769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447570383769600[0;39m ==> Parameters: 
2023-05-26 22:42:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447570383769600[0;39m <==    Updates: 0
2023-05-26 22:42:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447570383769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:42:05.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119447591321735168[0;39m 更新电子书下的文档数据开始
2023-05-26 22:42:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447591321735168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:42:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447591321735168[0;39m ==> Parameters: 
2023-05-26 22:42:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447591321735168[0;39m <==    Updates: 8
2023-05-26 22:42:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119447591321735168[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2023-05-26 22:42:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447591334318080[0;39m 生成今日电子书快照开始
2023-05-26 22:42:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447591334318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447591334318080[0;39m ==> Parameters: 
2023-05-26 22:42:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447591334318080[0;39m <==    Updates: 0
2023-05-26 22:42:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447591334318080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:42:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447612314226688[0;39m 生成今日电子书快照开始
2023-05-26 22:42:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447612314226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447612314226688[0;39m ==> Parameters: 
2023-05-26 22:42:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447612314226688[0;39m <==    Updates: 0
2023-05-26 22:42:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447612314226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:42:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447633273163776[0;39m 生成今日电子书快照开始
2023-05-26 22:42:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447633273163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447633273163776[0;39m ==> Parameters: 
2023-05-26 22:42:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447633273163776[0;39m <==    Updates: 0
2023-05-26 22:42:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447633273163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:42:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447654240489472[0;39m 生成今日电子书快照开始
2023-05-26 22:42:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447654240489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447654240489472[0;39m ==> Parameters: 
2023-05-26 22:42:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447654240489472[0;39m <==    Updates: 0
2023-05-26 22:42:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447654240489472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:42:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447675253952512[0;39m 生成今日电子书快照开始
2023-05-26 22:42:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447675253952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447675253952512[0;39m ==> Parameters: 
2023-05-26 22:42:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447675253952512[0;39m <==    Updates: 0
2023-05-26 22:42:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447675253952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:42:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447696242249728[0;39m 生成今日电子书快照开始
2023-05-26 22:42:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447696242249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447696242249728[0;39m ==> Parameters: 
2023-05-26 22:42:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447696242249728[0;39m <==    Updates: 0
2023-05-26 22:42:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447696242249728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:42:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119447717205381120[0;39m 更新电子书下的文档数据开始
2023-05-26 22:42:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447717205381120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:42:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447717205381120[0;39m ==> Parameters: 
2023-05-26 22:42:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447717205381120[0;39m <==    Updates: 8
2023-05-26 22:42:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119447717205381120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:42:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447717213769728[0;39m 生成今日电子书快照开始
2023-05-26 22:42:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447717213769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447717213769728[0;39m ==> Parameters: 
2023-05-26 22:42:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447717213769728[0;39m <==    Updates: 0
2023-05-26 22:42:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447717213769728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:42:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447738147540992[0;39m 生成今日电子书快照开始
2023-05-26 22:42:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447738147540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447738147540992[0;39m ==> Parameters: 
2023-05-26 22:42:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447738147540992[0;39m <==    Updates: 0
2023-05-26 22:42:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447738147540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:42:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447759110672384[0;39m 生成今日电子书快照开始
2023-05-26 22:42:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447759110672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447759110672384[0;39m ==> Parameters: 
2023-05-26 22:42:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447759110672384[0;39m <==    Updates: 0
2023-05-26 22:42:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447759110672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:42:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447780086386688[0;39m 生成今日电子书快照开始
2023-05-26 22:42:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447780086386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447780086386688[0;39m ==> Parameters: 
2023-05-26 22:42:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447780086386688[0;39m <==    Updates: 0
2023-05-26 22:42:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447780086386688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:42:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447801066295296[0;39m 生成今日电子书快照开始
2023-05-26 22:42:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447801066295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:42:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447801066295296[0;39m ==> Parameters: 
2023-05-26 22:42:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447801066295296[0;39m <==    Updates: 0
2023-05-26 22:42:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447801066295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:43:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447822046203904[0;39m 生成今日电子书快照开始
2023-05-26 22:43:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447822046203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447822046203904[0;39m ==> Parameters: 
2023-05-26 22:43:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447822046203904[0;39m <==    Updates: 0
2023-05-26 22:43:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447822046203904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:43:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447843030306816[0;39m 生成今日电子书快照开始
2023-05-26 22:43:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447843030306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447843030306816[0;39m ==> Parameters: 
2023-05-26 22:43:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447843030306816[0;39m <==    Updates: 0
2023-05-26 22:43:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447843030306816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:43:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119447843038695424[0;39m 更新电子书下的文档数据开始
2023-05-26 22:43:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447843038695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:43:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447843038695424[0;39m ==> Parameters: 
2023-05-26 22:43:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447843038695424[0;39m <==    Updates: 8
2023-05-26 22:43:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119447843038695424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:43:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447863993438208[0;39m 生成今日电子书快照开始
2023-05-26 22:43:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447863993438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447863993438208[0;39m ==> Parameters: 
2023-05-26 22:43:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447863993438208[0;39m <==    Updates: 0
2023-05-26 22:43:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447863993438208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:43:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447884990124032[0;39m 生成今日电子书快照开始
2023-05-26 22:43:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447884990124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447884990124032[0;39m ==> Parameters: 
2023-05-26 22:43:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447884990124032[0;39m <==    Updates: 0
2023-05-26 22:43:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447884990124032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:43:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447905932283904[0;39m 生成今日电子书快照开始
2023-05-26 22:43:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447905932283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447905932283904[0;39m ==> Parameters: 
2023-05-26 22:43:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447905932283904[0;39m <==    Updates: 0
2023-05-26 22:43:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447905932283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:43:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447926924775424[0;39m 生成今日电子书快照开始
2023-05-26 22:43:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447926924775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447926924775424[0;39m ==> Parameters: 
2023-05-26 22:43:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447926924775424[0;39m <==    Updates: 0
2023-05-26 22:43:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447926924775424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:43:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447947887906816[0;39m 生成今日电子书快照开始
2023-05-26 22:43:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447947887906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447947887906816[0;39m ==> Parameters: 
2023-05-26 22:43:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447947887906816[0;39m <==    Updates: 0
2023-05-26 22:43:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447947887906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:43:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447968863621120[0;39m 生成今日电子书快照开始
2023-05-26 22:43:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447968863621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447968863621120[0;39m ==> Parameters: 
2023-05-26 22:43:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447968863621120[0;39m <==    Updates: 0
2023-05-26 22:43:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447968863621120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:43:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119447968872009728[0;39m 更新电子书下的文档数据开始
2023-05-26 22:43:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447968872009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:43:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447968872009728[0;39m ==> Parameters: 
2023-05-26 22:43:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119447968872009728[0;39m <==    Updates: 8
2023-05-26 22:43:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119447968872009728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:43:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119447989826752512[0;39m 生成今日电子书快照开始
2023-05-26 22:43:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447989826752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447989826752512[0;39m ==> Parameters: 
2023-05-26 22:43:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119447989826752512[0;39m <==    Updates: 0
2023-05-26 22:43:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119447989826752512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:43:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448010785689600[0;39m 生成今日电子书快照开始
2023-05-26 22:43:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448010785689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448010785689600[0;39m ==> Parameters: 
2023-05-26 22:43:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448010785689600[0;39m <==    Updates: 0
2023-05-26 22:43:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448010785689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:43:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448031727849472[0;39m 生成今日电子书快照开始
2023-05-26 22:43:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448031727849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448031727849472[0;39m ==> Parameters: 
2023-05-26 22:43:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448031727849472[0;39m <==    Updates: 0
2023-05-26 22:43:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448031727849472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:43:55.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448052695175168[0;39m 生成今日电子书快照开始
2023-05-26 22:43:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448052695175168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:43:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448052695175168[0;39m ==> Parameters: 
2023-05-26 22:43:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448052695175168[0;39m <==    Updates: 0
2023-05-26 22:43:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448052695175168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:44:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448073708638208[0;39m 生成今日电子书快照开始
2023-05-26 22:44:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448073708638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448073708638208[0;39m ==> Parameters: 
2023-05-26 22:44:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448073708638208[0;39m <==    Updates: 0
2023-05-26 22:44:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448073708638208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:44:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448094688546816[0;39m 生成今日电子书快照开始
2023-05-26 22:44:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448094688546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448094688546816[0;39m ==> Parameters: 
2023-05-26 22:44:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448094688546816[0;39m <==    Updates: 0
2023-05-26 22:44:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448094688546816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:44:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119448094701129728[0;39m 更新电子书下的文档数据开始
2023-05-26 22:44:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448094701129728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:44:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448094701129728[0;39m ==> Parameters: 
2023-05-26 22:44:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448094701129728[0;39m <==    Updates: 8
2023-05-26 22:44:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119448094701129728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:44:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448115634900992[0;39m 生成今日电子书快照开始
2023-05-26 22:44:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448115634900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448115634900992[0;39m ==> Parameters: 
2023-05-26 22:44:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448115634900992[0;39m <==    Updates: 0
2023-05-26 22:44:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448115634900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:44:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448136598032384[0;39m 生成今日电子书快照开始
2023-05-26 22:44:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448136598032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448136598032384[0;39m ==> Parameters: 
2023-05-26 22:44:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448136598032384[0;39m <==    Updates: 0
2023-05-26 22:44:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448136598032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:44:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448157565358080[0;39m 生成今日电子书快照开始
2023-05-26 22:44:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448157565358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448157565358080[0;39m ==> Parameters: 
2023-05-26 22:44:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448157565358080[0;39m <==    Updates: 0
2023-05-26 22:44:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448157565358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:44:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448178583015424[0;39m 生成今日电子书快照开始
2023-05-26 22:44:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448178583015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448178583015424[0;39m ==> Parameters: 
2023-05-26 22:44:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448178583015424[0;39m <==    Updates: 0
2023-05-26 22:44:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448178583015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:44:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448199562924032[0;39m 生成今日电子书快照开始
2023-05-26 22:44:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448199562924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448199562924032[0;39m ==> Parameters: 
2023-05-26 22:44:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448199562924032[0;39m <==    Updates: 0
2023-05-26 22:44:30.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448199562924032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:44:35.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448220467335168[0;39m 生成今日电子书快照开始
2023-05-26 22:44:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448220467335168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448220467335168[0;39m ==> Parameters: 
2023-05-26 22:44:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448220467335168[0;39m <==    Updates: 0
2023-05-26 22:44:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448220467335168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:44:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119448220479918080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:44:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448220479918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:44:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448220479918080[0;39m ==> Parameters: 
2023-05-26 22:44:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448220479918080[0;39m <==    Updates: 8
2023-05-26 22:44:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119448220479918080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:44:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448241501769728[0;39m 生成今日电子书快照开始
2023-05-26 22:44:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448241501769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448241501769728[0;39m ==> Parameters: 
2023-05-26 22:44:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448241501769728[0;39m <==    Updates: 0
2023-05-26 22:44:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448241501769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:44:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448262469095424[0;39m 生成今日电子书快照开始
2023-05-26 22:44:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448262469095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448262469095424[0;39m ==> Parameters: 
2023-05-26 22:44:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448262469095424[0;39m <==    Updates: 0
2023-05-26 22:44:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448262469095424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:44:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448283411255296[0;39m 生成今日电子书快照开始
2023-05-26 22:44:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448283411255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448283411255296[0;39m ==> Parameters: 
2023-05-26 22:44:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448283411255296[0;39m <==    Updates: 0
2023-05-26 22:44:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448283411255296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:44:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448304395358208[0;39m 生成今日电子书快照开始
2023-05-26 22:44:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448304395358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:44:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448304395358208[0;39m ==> Parameters: 
2023-05-26 22:44:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448304395358208[0;39m <==    Updates: 0
2023-05-26 22:44:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448304395358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448325354295296[0;39m 生成今日电子书快照开始
2023-05-26 22:45:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448325354295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448325354295296[0;39m ==> Parameters: 
2023-05-26 22:45:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448325354295296[0;39m <==    Updates: 0
2023-05-26 22:45:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448325354295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119448346325815296[0;39m 更新电子书下的文档数据开始
2023-05-26 22:45:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448346325815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:45:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448346325815296[0;39m ==> Parameters: 
2023-05-26 22:45:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448346325815296[0;39m <==    Updates: 8
2023-05-26 22:45:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119448346325815296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:45:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448346334203904[0;39m 生成今日电子书快照开始
2023-05-26 22:45:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448346334203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448346334203904[0;39m ==> Parameters: 
2023-05-26 22:45:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448346334203904[0;39m <==    Updates: 0
2023-05-26 22:45:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448346334203904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:45:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448367305723904[0;39m 生成今日电子书快照开始
2023-05-26 22:45:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448367305723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448367305723904[0;39m ==> Parameters: 
2023-05-26 22:45:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448367305723904[0;39m <==    Updates: 0
2023-05-26 22:45:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448367305723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448388306604032[0;39m 生成今日电子书快照开始
2023-05-26 22:45:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448388306604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448388306604032[0;39m ==> Parameters: 
2023-05-26 22:45:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448388306604032[0;39m <==    Updates: 0
2023-05-26 22:45:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448388306604032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448409273929728[0;39m 生成今日电子书快照开始
2023-05-26 22:45:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448409273929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448409273929728[0;39m ==> Parameters: 
2023-05-26 22:45:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448409273929728[0;39m <==    Updates: 0
2023-05-26 22:45:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448409273929728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448430220283904[0;39m 生成今日电子书快照开始
2023-05-26 22:45:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448430220283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448430220283904[0;39m ==> Parameters: 
2023-05-26 22:45:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448430220283904[0;39m <==    Updates: 0
2023-05-26 22:45:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448430220283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448451204386816[0;39m 生成今日电子书快照开始
2023-05-26 22:45:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448451204386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448451204386816[0;39m ==> Parameters: 
2023-05-26 22:45:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448451204386816[0;39m <==    Updates: 0
2023-05-26 22:45:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448451204386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448472163323904[0;39m 生成今日电子书快照开始
2023-05-26 22:45:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448472163323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448472163323904[0;39m ==> Parameters: 
2023-05-26 22:45:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448472163323904[0;39m <==    Updates: 0
2023-05-26 22:45:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448472163323904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119448472171712512[0;39m 更新电子书下的文档数据开始
2023-05-26 22:45:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448472171712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:45:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448472171712512[0;39m ==> Parameters: 
2023-05-26 22:45:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448472171712512[0;39m <==    Updates: 8
2023-05-26 22:45:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119448472171712512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:45:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448493113872384[0;39m 生成今日电子书快照开始
2023-05-26 22:45:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448493113872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448493113872384[0;39m ==> Parameters: 
2023-05-26 22:45:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448493113872384[0;39m <==    Updates: 0
2023-05-26 22:45:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448493113872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448514093780992[0;39m 生成今日电子书快照开始
2023-05-26 22:45:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448514093780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448514093780992[0;39m ==> Parameters: 
2023-05-26 22:45:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448514093780992[0;39m <==    Updates: 0
2023-05-26 22:45:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448514093780992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:45:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448535044329472[0;39m 生成今日电子书快照开始
2023-05-26 22:45:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448535044329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448535044329472[0;39m ==> Parameters: 
2023-05-26 22:45:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448535044329472[0;39m <==    Updates: 0
2023-05-26 22:45:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448535044329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:45:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448556057792512[0;39m 生成今日电子书快照开始
2023-05-26 22:45:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448556057792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:45:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448556057792512[0;39m ==> Parameters: 
2023-05-26 22:45:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448556057792512[0;39m <==    Updates: 0
2023-05-26 22:45:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448556057792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448577041895424[0;39m 生成今日电子书快照开始
2023-05-26 22:46:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448577041895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448577041895424[0;39m ==> Parameters: 
2023-05-26 22:46:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448577041895424[0;39m <==    Updates: 0
2023-05-26 22:46:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448577041895424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:46:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448597967278080[0;39m 生成今日电子书快照开始
2023-05-26 22:46:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448597967278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448597967278080[0;39m ==> Parameters: 
2023-05-26 22:46:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448597967278080[0;39m <==    Updates: 0
2023-05-26 22:46:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448597967278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119448597975666688[0;39m 更新电子书下的文档数据开始
2023-05-26 22:46:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448597975666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:46:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448597975666688[0;39m ==> Parameters: 
2023-05-26 22:46:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448597975666688[0;39m <==    Updates: 8
2023-05-26 22:46:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119448597975666688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:46:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448618930409472[0;39m 生成今日电子书快照开始
2023-05-26 22:46:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448618930409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448618930409472[0;39m ==> Parameters: 
2023-05-26 22:46:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448618930409472[0;39m <==    Updates: 0
2023-05-26 22:46:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448618930409472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448639931289600[0;39m 生成今日电子书快照开始
2023-05-26 22:46:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448639931289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448639931289600[0;39m ==> Parameters: 
2023-05-26 22:46:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448639931289600[0;39m <==    Updates: 0
2023-05-26 22:46:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448639931289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448660907003904[0;39m 生成今日电子书快照开始
2023-05-26 22:46:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448660907003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448660907003904[0;39m ==> Parameters: 
2023-05-26 22:46:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448660907003904[0;39m <==    Updates: 0
2023-05-26 22:46:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448660907003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448681853358080[0;39m 生成今日电子书快照开始
2023-05-26 22:46:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448681853358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448681853358080[0;39m ==> Parameters: 
2023-05-26 22:46:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448681853358080[0;39m <==    Updates: 0
2023-05-26 22:46:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448681853358080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:46:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448702824878080[0;39m 生成今日电子书快照开始
2023-05-26 22:46:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448702824878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448702824878080[0;39m ==> Parameters: 
2023-05-26 22:46:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448702824878080[0;39m <==    Updates: 0
2023-05-26 22:46:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448702824878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119448723838341120[0;39m 更新电子书下的文档数据开始
2023-05-26 22:46:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448723838341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:46:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448723838341120[0;39m ==> Parameters: 
2023-05-26 22:46:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448723838341120[0;39m <==    Updates: 8
2023-05-26 22:46:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119448723838341120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:46:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448723846729728[0;39m 生成今日电子书快照开始
2023-05-26 22:46:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448723846729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448723846729728[0;39m ==> Parameters: 
2023-05-26 22:46:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448723846729728[0;39m <==    Updates: 0
2023-05-26 22:46:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448723846729728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:46:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448744755335168[0;39m 生成今日电子书快照开始
2023-05-26 22:46:40.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448744755335168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448744755335168[0;39m ==> Parameters: 
2023-05-26 22:46:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448744755335168[0;39m <==    Updates: 0
2023-05-26 22:46:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448744755335168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448765777186816[0;39m 生成今日电子书快照开始
2023-05-26 22:46:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448765777186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448765777186816[0;39m ==> Parameters: 
2023-05-26 22:46:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448765777186816[0;39m <==    Updates: 0
2023-05-26 22:46:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448765777186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448786719346688[0;39m 生成今日电子书快照开始
2023-05-26 22:46:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448786719346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448786719346688[0;39m ==> Parameters: 
2023-05-26 22:46:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448786719346688[0;39m <==    Updates: 0
2023-05-26 22:46:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448786719346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:46:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448807674089472[0;39m 生成今日电子书快照开始
2023-05-26 22:46:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448807674089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:46:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448807674089472[0;39m ==> Parameters: 
2023-05-26 22:46:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448807674089472[0;39m <==    Updates: 0
2023-05-26 22:46:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448807674089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:47:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448828683358208[0;39m 生成今日电子书快照开始
2023-05-26 22:47:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448828683358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448828683358208[0;39m ==> Parameters: 
2023-05-26 22:47:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448828683358208[0;39m <==    Updates: 0
2023-05-26 22:47:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448828683358208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:47:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119448849642295296[0;39m 更新电子书下的文档数据开始
2023-05-26 22:47:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448849642295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:47:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448849642295296[0;39m ==> Parameters: 
2023-05-26 22:47:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448849642295296[0;39m <==    Updates: 8
2023-05-26 22:47:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119448849642295296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:47:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448849646489600[0;39m 生成今日电子书快照开始
2023-05-26 22:47:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448849646489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448849646489600[0;39m ==> Parameters: 
2023-05-26 22:47:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448849646489600[0;39m <==    Updates: 0
2023-05-26 22:47:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448849646489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:47:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448870613815296[0;39m 生成今日电子书快照开始
2023-05-26 22:47:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448870613815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448870613815296[0;39m ==> Parameters: 
2023-05-26 22:47:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448870613815296[0;39m <==    Updates: 0
2023-05-26 22:47:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448870613815296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:47:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448891618889728[0;39m 生成今日电子书快照开始
2023-05-26 22:47:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448891618889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448891618889728[0;39m ==> Parameters: 
2023-05-26 22:47:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448891618889728[0;39m <==    Updates: 0
2023-05-26 22:47:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448891618889728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:47:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448912569438208[0;39m 生成今日电子书快照开始
2023-05-26 22:47:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448912569438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448912569438208[0;39m ==> Parameters: 
2023-05-26 22:47:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448912569438208[0;39m <==    Updates: 0
2023-05-26 22:47:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448912569438208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:47:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448933507403776[0;39m 生成今日电子书快照开始
2023-05-26 22:47:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448933507403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448933507403776[0;39m ==> Parameters: 
2023-05-26 22:47:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448933507403776[0;39m <==    Updates: 0
2023-05-26 22:47:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448933507403776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:47:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448954533449728[0;39m 生成今日电子书快照开始
2023-05-26 22:47:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448954533449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448954533449728[0;39m ==> Parameters: 
2023-05-26 22:47:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448954533449728[0;39m <==    Updates: 0
2023-05-26 22:47:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448954533449728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:47:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448975483998208[0;39m 生成今日电子书快照开始
2023-05-26 22:47:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448975483998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448975483998208[0;39m ==> Parameters: 
2023-05-26 22:47:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448975483998208[0;39m <==    Updates: 0
2023-05-26 22:47:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448975483998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:47:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119448975492386816[0;39m 更新电子书下的文档数据开始
2023-05-26 22:47:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448975492386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:47:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448975492386816[0;39m ==> Parameters: 
2023-05-26 22:47:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119448975492386816[0;39m <==    Updates: 8
2023-05-26 22:47:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119448975492386816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:47:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119448996421963776[0;39m 生成今日电子书快照开始
2023-05-26 22:47:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448996421963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448996421963776[0;39m ==> Parameters: 
2023-05-26 22:47:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119448996421963776[0;39m <==    Updates: 0
2023-05-26 22:47:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119448996421963776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:47:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449017439621120[0;39m 生成今日电子书快照开始
2023-05-26 22:47:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449017439621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449017439621120[0;39m ==> Parameters: 
2023-05-26 22:47:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449017439621120[0;39m <==    Updates: 0
2023-05-26 22:47:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449017439621120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:47:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449038390169600[0;39m 生成今日电子书快照开始
2023-05-26 22:47:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449038390169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449038390169600[0;39m ==> Parameters: 
2023-05-26 22:47:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449038390169600[0;39m <==    Updates: 0
2023-05-26 22:47:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449038390169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:47:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449059332329472[0;39m 生成今日电子书快照开始
2023-05-26 22:47:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449059332329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:47:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449059332329472[0;39m ==> Parameters: 
2023-05-26 22:47:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449059332329472[0;39m <==    Updates: 0
2023-05-26 22:47:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449059332329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:48:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449080358375424[0;39m 生成今日电子书快照开始
2023-05-26 22:48:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449080358375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449080358375424[0;39m ==> Parameters: 
2023-05-26 22:48:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449080358375424[0;39m <==    Updates: 0
2023-05-26 22:48:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449080358375424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:48:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449101329895424[0;39m 生成今日电子书快照开始
2023-05-26 22:48:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449101329895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449101329895424[0;39m ==> Parameters: 
2023-05-26 22:48:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449101329895424[0;39m <==    Updates: 0
2023-05-26 22:48:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449101329895424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:48:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119449101342478336[0;39m 更新电子书下的文档数据开始
2023-05-26 22:48:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449101342478336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:48:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449101342478336[0;39m ==> Parameters: 
2023-05-26 22:48:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449101342478336[0;39m <==    Updates: 8
2023-05-26 22:48:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119449101342478336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:48:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449122251083776[0;39m 生成今日电子书快照开始
2023-05-26 22:48:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449122251083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449122251083776[0;39m ==> Parameters: 
2023-05-26 22:48:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449122251083776[0;39m <==    Updates: 0
2023-05-26 22:48:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449122251083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:48:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449143272935424[0;39m 生成今日电子书快照开始
2023-05-26 22:48:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449143272935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449143272935424[0;39m ==> Parameters: 
2023-05-26 22:48:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449143272935424[0;39m <==    Updates: 0
2023-05-26 22:48:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449143272935424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:48:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449164231872512[0;39m 生成今日电子书快照开始
2023-05-26 22:48:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449164231872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449164231872512[0;39m ==> Parameters: 
2023-05-26 22:48:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449164231872512[0;39m <==    Updates: 0
2023-05-26 22:48:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449164231872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:48:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449185224364032[0;39m 生成今日电子书快照开始
2023-05-26 22:48:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449185224364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449185224364032[0;39m ==> Parameters: 
2023-05-26 22:48:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449185224364032[0;39m <==    Updates: 0
2023-05-26 22:48:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449185224364032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:48:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449206162329600[0;39m 生成今日电子书快照开始
2023-05-26 22:48:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449206162329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449206162329600[0;39m ==> Parameters: 
2023-05-26 22:48:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449206162329600[0;39m <==    Updates: 0
2023-05-26 22:48:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449206162329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:48:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449227133849600[0;39m 生成今日电子书快照开始
2023-05-26 22:48:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449227133849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449227133849600[0;39m ==> Parameters: 
2023-05-26 22:48:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449227133849600[0;39m <==    Updates: 0
2023-05-26 22:48:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449227133849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:48:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119449227142238208[0;39m 更新电子书下的文档数据开始
2023-05-26 22:48:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449227142238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:48:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449227142238208[0;39m ==> Parameters: 
2023-05-26 22:48:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449227142238208[0;39m <==    Updates: 8
2023-05-26 22:48:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119449227142238208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:48:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449248096980992[0;39m 生成今日电子书快照开始
2023-05-26 22:48:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449248096980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449248096980992[0;39m ==> Parameters: 
2023-05-26 22:48:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449248096980992[0;39m <==    Updates: 0
2023-05-26 22:48:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449248096980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:48:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449269047529472[0;39m 生成今日电子书快照开始
2023-05-26 22:48:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449269047529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449269047529472[0;39m ==> Parameters: 
2023-05-26 22:48:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449269047529472[0;39m <==    Updates: 0
2023-05-26 22:48:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449269047529472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:48:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449290035826688[0;39m 生成今日电子书快照开始
2023-05-26 22:48:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449290035826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449290035826688[0;39m ==> Parameters: 
2023-05-26 22:48:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449290035826688[0;39m <==    Updates: 0
2023-05-26 22:48:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449290035826688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:48:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449310998958080[0;39m 生成今日电子书快照开始
2023-05-26 22:48:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449310998958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:48:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449310998958080[0;39m ==> Parameters: 
2023-05-26 22:48:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449310998958080[0;39m <==    Updates: 0
2023-05-26 22:48:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449310998958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:49:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449331995643904[0;39m 生成今日电子书快照开始
2023-05-26 22:49:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449331995643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449331995643904[0;39m ==> Parameters: 
2023-05-26 22:49:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449331995643904[0;39m <==    Updates: 0
2023-05-26 22:49:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449331995643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:49:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449352996524032[0;39m 生成今日电子书快照开始
2023-05-26 22:49:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449352996524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449352996524032[0;39m ==> Parameters: 
2023-05-26 22:49:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449352996524032[0;39m <==    Updates: 0
2023-05-26 22:49:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449352996524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:49:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119449353004912640[0;39m 更新电子书下的文档数据开始
2023-05-26 22:49:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449353004912640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:49:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449353004912640[0;39m ==> Parameters: 
2023-05-26 22:49:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449353004912640[0;39m <==    Updates: 8
2023-05-26 22:49:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119449353004912640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:49:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449373913518080[0;39m 生成今日电子书快照开始
2023-05-26 22:49:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449373913518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449373913518080[0;39m ==> Parameters: 
2023-05-26 22:49:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449373913518080[0;39m <==    Updates: 0
2023-05-26 22:49:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449373913518080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:49:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449394885038080[0;39m 生成今日电子书快照开始
2023-05-26 22:49:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449394885038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449394885038080[0;39m ==> Parameters: 
2023-05-26 22:49:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449394885038080[0;39m <==    Updates: 0
2023-05-26 22:49:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449394885038080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:49:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449415915278336[0;39m 生成今日电子书快照开始
2023-05-26 22:49:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449415915278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449415915278336[0;39m ==> Parameters: 
2023-05-26 22:49:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449415915278336[0;39m <==    Updates: 0
2023-05-26 22:49:20.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449415915278336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:49:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449436865826816[0;39m 生成今日电子书快照开始
2023-05-26 22:49:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449436865826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449436865826816[0;39m ==> Parameters: 
2023-05-26 22:49:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449436865826816[0;39m <==    Updates: 0
2023-05-26 22:49:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449436865826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:49:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449457812180992[0;39m 生成今日电子书快照开始
2023-05-26 22:49:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449457812180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449457812180992[0;39m ==> Parameters: 
2023-05-26 22:49:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449457812180992[0;39m <==    Updates: 0
2023-05-26 22:49:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449457812180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:49:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119449478813061120[0;39m 更新电子书下的文档数据开始
2023-05-26 22:49:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449478813061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:49:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449478813061120[0;39m ==> Parameters: 
2023-05-26 22:49:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449478813061120[0;39m <==    Updates: 8
2023-05-26 22:49:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119449478813061120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:49:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449478821449728[0;39m 生成今日电子书快照开始
2023-05-26 22:49:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449478821449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449478821449728[0;39m ==> Parameters: 
2023-05-26 22:49:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449478821449728[0;39m <==    Updates: 0
2023-05-26 22:49:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449478821449728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:49:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449499755220992[0;39m 生成今日电子书快照开始
2023-05-26 22:49:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449499755220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449499755220992[0;39m ==> Parameters: 
2023-05-26 22:49:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449499755220992[0;39m <==    Updates: 0
2023-05-26 22:49:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449499755220992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:49:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449520722546688[0;39m 生成今日电子书快照开始
2023-05-26 22:49:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449520722546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449520722546688[0;39m ==> Parameters: 
2023-05-26 22:49:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449520722546688[0;39m <==    Updates: 0
2023-05-26 22:49:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449520722546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:49:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449541731815424[0;39m 生成今日电子书快照开始
2023-05-26 22:49:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449541731815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449541731815424[0;39m ==> Parameters: 
2023-05-26 22:49:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449541731815424[0;39m <==    Updates: 0
2023-05-26 22:49:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449541731815424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:49:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449562686558208[0;39m 生成今日电子书快照开始
2023-05-26 22:49:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449562686558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:49:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449562686558208[0;39m ==> Parameters: 
2023-05-26 22:49:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449562686558208[0;39m <==    Updates: 0
2023-05-26 22:49:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449562686558208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449583632912384[0;39m 生成今日电子书快照开始
2023-05-26 22:50:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449583632912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449583632912384[0;39m ==> Parameters: 
2023-05-26 22:50:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449583632912384[0;39m <==    Updates: 0
2023-05-26 22:50:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449583632912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119449604642181120[0;39m 更新电子书下的文档数据开始
2023-05-26 22:50:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449604642181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:50:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449604642181120[0;39m ==> Parameters: 
2023-05-26 22:50:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449604642181120[0;39m <==    Updates: 8
2023-05-26 22:50:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119449604642181120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:50:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449604650569728[0;39m 生成今日电子书快照开始
2023-05-26 22:50:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449604650569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449604650569728[0;39m ==> Parameters: 
2023-05-26 22:50:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449604650569728[0;39m <==    Updates: 0
2023-05-26 22:50:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449604650569728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:50:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449625605312512[0;39m 生成今日电子书快照开始
2023-05-26 22:50:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449625605312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449625605312512[0;39m ==> Parameters: 
2023-05-26 22:50:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449625605312512[0;39m <==    Updates: 0
2023-05-26 22:50:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449625605312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449646555860992[0;39m 生成今日电子书快照开始
2023-05-26 22:50:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449646555860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449646555860992[0;39m ==> Parameters: 
2023-05-26 22:50:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449646555860992[0;39m <==    Updates: 0
2023-05-26 22:50:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449646555860992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449667518992384[0;39m 生成今日电子书快照开始
2023-05-26 22:50:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449667518992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449667518992384[0;39m ==> Parameters: 
2023-05-26 22:50:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449667518992384[0;39m <==    Updates: 0
2023-05-26 22:50:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449667518992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449688536649728[0;39m 生成今日电子书快照开始
2023-05-26 22:50:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449688536649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449688536649728[0;39m ==> Parameters: 
2023-05-26 22:50:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449688536649728[0;39m <==    Updates: 0
2023-05-26 22:50:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449688536649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449709495586816[0;39m 生成今日电子书快照开始
2023-05-26 22:50:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449709495586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449709495586816[0;39m ==> Parameters: 
2023-05-26 22:50:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449709495586816[0;39m <==    Updates: 0
2023-05-26 22:50:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449709495586816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:50:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119449730450329600[0;39m 更新电子书下的文档数据开始
2023-05-26 22:50:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449730450329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:50:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449730450329600[0;39m ==> Parameters: 
2023-05-26 22:50:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449730450329600[0;39m <==    Updates: 8
2023-05-26 22:50:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119449730450329600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:50:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449730454523904[0;39m 生成今日电子书快照开始
2023-05-26 22:50:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449730454523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449730454523904[0;39m ==> Parameters: 
2023-05-26 22:50:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449730454523904[0;39m <==    Updates: 0
2023-05-26 22:50:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449730454523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449751413460992[0;39m 生成今日电子书快照开始
2023-05-26 22:50:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449751413460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449751413460992[0;39m ==> Parameters: 
2023-05-26 22:50:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449751413460992[0;39m <==    Updates: 0
2023-05-26 22:50:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449751413460992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:50:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449772401758208[0;39m 生成今日电子书快照开始
2023-05-26 22:50:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449772401758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449772401758208[0;39m ==> Parameters: 
2023-05-26 22:50:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449772401758208[0;39m <==    Updates: 0
2023-05-26 22:50:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449772401758208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449793339723776[0;39m 生成今日电子书快照开始
2023-05-26 22:50:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449793339723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449793339723776[0;39m ==> Parameters: 
2023-05-26 22:50:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449793339723776[0;39m <==    Updates: 0
2023-05-26 22:50:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449793339723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:50:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449814319632384[0;39m 生成今日电子书快照开始
2023-05-26 22:50:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449814319632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:50:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449814319632384[0;39m ==> Parameters: 
2023-05-26 22:50:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449814319632384[0;39m <==    Updates: 0
2023-05-26 22:50:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449814319632384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:51:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449835307929600[0;39m 生成今日电子书快照开始
2023-05-26 22:51:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449835307929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449835307929600[0;39m ==> Parameters: 
2023-05-26 22:51:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449835307929600[0;39m <==    Updates: 0
2023-05-26 22:51:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449835307929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449856254283776[0;39m 生成今日电子书快照开始
2023-05-26 22:51:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449856254283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449856254283776[0;39m ==> Parameters: 
2023-05-26 22:51:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449856254283776[0;39m <==    Updates: 0
2023-05-26 22:51:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449856254283776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:51:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119449856258478080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:51:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449856258478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:51:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449856258478080[0;39m ==> Parameters: 
2023-05-26 22:51:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449856258478080[0;39m <==    Updates: 8
2023-05-26 22:51:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119449856258478080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:51:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449877229998080[0;39m 生成今日电子书快照开始
2023-05-26 22:51:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449877229998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449877229998080[0;39m ==> Parameters: 
2023-05-26 22:51:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449877229998080[0;39m <==    Updates: 0
2023-05-26 22:51:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449877229998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449898197323776[0;39m 生成今日电子书快照开始
2023-05-26 22:51:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449898197323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449898197323776[0;39m ==> Parameters: 
2023-05-26 22:51:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449898197323776[0;39m <==    Updates: 0
2023-05-26 22:51:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449898197323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449919181426688[0;39m 生成今日电子书快照开始
2023-05-26 22:51:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449919181426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449919181426688[0;39m ==> Parameters: 
2023-05-26 22:51:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449919181426688[0;39m <==    Updates: 0
2023-05-26 22:51:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449919181426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449940190695424[0;39m 生成今日电子书快照开始
2023-05-26 22:51:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449940190695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449940190695424[0;39m ==> Parameters: 
2023-05-26 22:51:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449940190695424[0;39m <==    Updates: 0
2023-05-26 22:51:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449940190695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449961149632512[0;39m 生成今日电子书快照开始
2023-05-26 22:51:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449961149632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449961149632512[0;39m ==> Parameters: 
2023-05-26 22:51:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449961149632512[0;39m <==    Updates: 0
2023-05-26 22:51:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449961149632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119449982104375296[0;39m 生成今日电子书快照开始
2023-05-26 22:51:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449982104375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449982104375296[0;39m ==> Parameters: 
2023-05-26 22:51:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119449982104375296[0;39m <==    Updates: 0
2023-05-26 22:51:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119449982104375296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:51:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119449982116958208[0;39m 更新电子书下的文档数据开始
2023-05-26 22:51:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449982116958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:51:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449982116958208[0;39m ==> Parameters: 
2023-05-26 22:51:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119449982116958208[0;39m <==    Updates: 8
2023-05-26 22:51:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119449982116958208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:51:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450003059118080[0;39m 生成今日电子书快照开始
2023-05-26 22:51:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450003059118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450003059118080[0;39m ==> Parameters: 
2023-05-26 22:51:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450003059118080[0;39m <==    Updates: 0
2023-05-26 22:51:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450003059118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450024043220992[0;39m 生成今日电子书快照开始
2023-05-26 22:51:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450024043220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450024043220992[0;39m ==> Parameters: 
2023-05-26 22:51:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450024043220992[0;39m <==    Updates: 0
2023-05-26 22:51:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450024043220992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450045048295424[0;39m 生成今日电子书快照开始
2023-05-26 22:51:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450045048295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450045048295424[0;39m ==> Parameters: 
2023-05-26 22:51:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450045048295424[0;39m <==    Updates: 0
2023-05-26 22:51:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450045048295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:51:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450066007232512[0;39m 生成今日电子书快照开始
2023-05-26 22:51:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450066007232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:51:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450066007232512[0;39m ==> Parameters: 
2023-05-26 22:51:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450066007232512[0;39m <==    Updates: 0
2023-05-26 22:51:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450066007232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:52:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450086957780992[0;39m 生成今日电子书快照开始
2023-05-26 22:52:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450086957780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450086957780992[0;39m ==> Parameters: 
2023-05-26 22:52:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450086957780992[0;39m <==    Updates: 0
2023-05-26 22:52:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450086957780992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:52:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450107941883904[0;39m 生成今日电子书快照开始
2023-05-26 22:52:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450107941883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450107941883904[0;39m ==> Parameters: 
2023-05-26 22:52:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450107941883904[0;39m <==    Updates: 0
2023-05-26 22:52:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450107941883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:52:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119450107950272512[0;39m 更新电子书下的文档数据开始
2023-05-26 22:52:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450107950272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:52:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450107950272512[0;39m ==> Parameters: 
2023-05-26 22:52:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450107950272512[0;39m <==    Updates: 8
2023-05-26 22:52:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119450107950272512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:52:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450128930181120[0;39m 生成今日电子书快照开始
2023-05-26 22:52:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450128930181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450128930181120[0;39m ==> Parameters: 
2023-05-26 22:52:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450128930181120[0;39m <==    Updates: 0
2023-05-26 22:52:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450128930181120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:52:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450149868146688[0;39m 生成今日电子书快照开始
2023-05-26 22:52:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450149868146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450149868146688[0;39m ==> Parameters: 
2023-05-26 22:52:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450149868146688[0;39m <==    Updates: 0
2023-05-26 22:52:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450149868146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:52:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450170827083776[0;39m 生成今日电子书快照开始
2023-05-26 22:52:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450170827083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450170827083776[0;39m ==> Parameters: 
2023-05-26 22:52:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450170827083776[0;39m <==    Updates: 0
2023-05-26 22:52:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450170827083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:52:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450191815380992[0;39m 生成今日电子书快照开始
2023-05-26 22:52:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450191815380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450191815380992[0;39m ==> Parameters: 
2023-05-26 22:52:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450191815380992[0;39m <==    Updates: 0
2023-05-26 22:52:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450191815380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:52:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450212786900992[0;39m 生成今日电子书快照开始
2023-05-26 22:52:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450212786900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450212786900992[0;39m ==> Parameters: 
2023-05-26 22:52:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450212786900992[0;39m <==    Updates: 0
2023-05-26 22:52:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450212786900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:52:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450233750032384[0;39m 生成今日电子书快照开始
2023-05-26 22:52:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450233750032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450233750032384[0;39m ==> Parameters: 
2023-05-26 22:52:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450233750032384[0;39m <==    Updates: 0
2023-05-26 22:52:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450233750032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:52:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119450233758420992[0;39m 更新电子书下的文档数据开始
2023-05-26 22:52:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450233758420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:52:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450233758420992[0;39m ==> Parameters: 
2023-05-26 22:52:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450233758420992[0;39m <==    Updates: 8
2023-05-26 22:52:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119450233758420992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:52:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450254750912512[0;39m 生成今日电子书快照开始
2023-05-26 22:52:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450254750912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450254750912512[0;39m ==> Parameters: 
2023-05-26 22:52:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450254750912512[0;39m <==    Updates: 0
2023-05-26 22:52:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450254750912512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:52:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450275718238208[0;39m 生成今日电子书快照开始
2023-05-26 22:52:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450275718238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450275718238208[0;39m ==> Parameters: 
2023-05-26 22:52:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450275718238208[0;39m <==    Updates: 0
2023-05-26 22:52:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450275718238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:52:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450296706535424[0;39m 生成今日电子书快照开始
2023-05-26 22:52:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450296706535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450296706535424[0;39m ==> Parameters: 
2023-05-26 22:52:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450296706535424[0;39m <==    Updates: 0
2023-05-26 22:52:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450296706535424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:52:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450317652889600[0;39m 生成今日电子书快照开始
2023-05-26 22:52:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450317652889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:52:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450317652889600[0;39m ==> Parameters: 
2023-05-26 22:52:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450317652889600[0;39m <==    Updates: 0
2023-05-26 22:52:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450317652889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:53:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450338607632384[0;39m 生成今日电子书快照开始
2023-05-26 22:53:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450338607632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450338607632384[0;39m ==> Parameters: 
2023-05-26 22:53:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450338607632384[0;39m <==    Updates: 0
2023-05-26 22:53:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450338607632384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:53:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119450359621095424[0;39m 更新电子书下的文档数据开始
2023-05-26 22:53:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450359621095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:53:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450359621095424[0;39m ==> Parameters: 
2023-05-26 22:53:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450359621095424[0;39m <==    Updates: 8
2023-05-26 22:53:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119450359621095424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:53:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450359629484032[0;39m 生成今日电子书快照开始
2023-05-26 22:53:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450359629484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450359629484032[0;39m ==> Parameters: 
2023-05-26 22:53:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450359629484032[0;39m <==    Updates: 0
2023-05-26 22:53:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450359629484032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:53:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450380596809728[0;39m 生成今日电子书快照开始
2023-05-26 22:53:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450380596809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450380596809728[0;39m ==> Parameters: 
2023-05-26 22:53:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450380596809728[0;39m <==    Updates: 0
2023-05-26 22:53:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450380596809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:53:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450401555746816[0;39m 生成今日电子书快照开始
2023-05-26 22:53:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450401555746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450401555746816[0;39m ==> Parameters: 
2023-05-26 22:53:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450401555746816[0;39m <==    Updates: 0
2023-05-26 22:53:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450401555746816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:53:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450422481129472[0;39m 生成今日电子书快照开始
2023-05-26 22:53:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450422481129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450422481129472[0;39m ==> Parameters: 
2023-05-26 22:53:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450422481129472[0;39m <==    Updates: 0
2023-05-26 22:53:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450422481129472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:53:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450443465232384[0;39m 生成今日电子书快照开始
2023-05-26 22:53:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450443465232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450443465232384[0;39m ==> Parameters: 
2023-05-26 22:53:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450443465232384[0;39m <==    Updates: 0
2023-05-26 22:53:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450443465232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:53:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450464449335296[0;39m 生成今日电子书快照开始
2023-05-26 22:53:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450464449335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450464449335296[0;39m ==> Parameters: 
2023-05-26 22:53:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450464449335296[0;39m <==    Updates: 0
2023-05-26 22:53:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450464449335296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:53:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119450485454409728[0;39m 更新电子书下的文档数据开始
2023-05-26 22:53:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450485454409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:53:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450485454409728[0;39m ==> Parameters: 
2023-05-26 22:53:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450485454409728[0;39m <==    Updates: 8
2023-05-26 22:53:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119450485454409728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:53:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450485462798336[0;39m 生成今日电子书快照开始
2023-05-26 22:53:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450485462798336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450485462798336[0;39m ==> Parameters: 
2023-05-26 22:53:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450485462798336[0;39m <==    Updates: 0
2023-05-26 22:53:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450485462798336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:53:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450506404958208[0;39m 生成今日电子书快照开始
2023-05-26 22:53:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450506404958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450506404958208[0;39m ==> Parameters: 
2023-05-26 22:53:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450506404958208[0;39m <==    Updates: 0
2023-05-26 22:53:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450506404958208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:53:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450527347118080[0;39m 生成今日电子书快照开始
2023-05-26 22:53:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450527347118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450527347118080[0;39m ==> Parameters: 
2023-05-26 22:53:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450527347118080[0;39m <==    Updates: 0
2023-05-26 22:53:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450527347118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:53:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450548339609600[0;39m 生成今日电子书快照开始
2023-05-26 22:53:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450548339609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450548339609600[0;39m ==> Parameters: 
2023-05-26 22:53:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450548339609600[0;39m <==    Updates: 0
2023-05-26 22:53:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450548339609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:53:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450569298546688[0;39m 生成今日电子书快照开始
2023-05-26 22:53:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450569298546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:53:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450569298546688[0;39m ==> Parameters: 
2023-05-26 22:53:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450569298546688[0;39m <==    Updates: 0
2023-05-26 22:53:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450569298546688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:54:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450590261678080[0;39m 生成今日电子书快照开始
2023-05-26 22:54:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450590261678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450590261678080[0;39m ==> Parameters: 
2023-05-26 22:54:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450590261678080[0;39m <==    Updates: 0
2023-05-26 22:54:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450590261678080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:54:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119450611224809472[0;39m 更新电子书下的文档数据开始
2023-05-26 22:54:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450611224809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:54:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450611224809472[0;39m ==> Parameters: 
2023-05-26 22:54:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450611224809472[0;39m <==    Updates: 8
2023-05-26 22:54:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119450611224809472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:54:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450611233198080[0;39m 生成今日电子书快照开始
2023-05-26 22:54:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450611233198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450611233198080[0;39m ==> Parameters: 
2023-05-26 22:54:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450611233198080[0;39m <==    Updates: 0
2023-05-26 22:54:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450611233198080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:54:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450632255049728[0;39m 生成今日电子书快照开始
2023-05-26 22:54:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450632255049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450632255049728[0;39m ==> Parameters: 
2023-05-26 22:54:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450632255049728[0;39m <==    Updates: 0
2023-05-26 22:54:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450632255049728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:54:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450653193015296[0;39m 生成今日电子书快照开始
2023-05-26 22:54:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450653193015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450653193015296[0;39m ==> Parameters: 
2023-05-26 22:54:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450653193015296[0;39m <==    Updates: 0
2023-05-26 22:54:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450653193015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:54:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450674193895424[0;39m 生成今日电子书快照开始
2023-05-26 22:54:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450674193895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450674193895424[0;39m ==> Parameters: 
2023-05-26 22:54:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450674193895424[0;39m <==    Updates: 0
2023-05-26 22:54:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450674193895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:54:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450695161221120[0;39m 生成今日电子书快照开始
2023-05-26 22:54:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450695161221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450695161221120[0;39m ==> Parameters: 
2023-05-26 22:54:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450695161221120[0;39m <==    Updates: 0
2023-05-26 22:54:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450695161221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:54:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450716094992384[0;39m 生成今日电子书快照开始
2023-05-26 22:54:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450716094992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450716094992384[0;39m ==> Parameters: 
2023-05-26 22:54:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450716094992384[0;39m <==    Updates: 0
2023-05-26 22:54:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450716094992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:54:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119450737062318080[0;39m 更新电子书下的文档数据开始
2023-05-26 22:54:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450737062318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:54:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450737062318080[0;39m ==> Parameters: 
2023-05-26 22:54:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450737062318080[0;39m <==    Updates: 8
2023-05-26 22:54:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119450737062318080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:54:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450737070706688[0;39m 生成今日电子书快照开始
2023-05-26 22:54:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450737070706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450737070706688[0;39m ==> Parameters: 
2023-05-26 22:54:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450737070706688[0;39m <==    Updates: 0
2023-05-26 22:54:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450737070706688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:54:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450758079975424[0;39m 生成今日电子书快照开始
2023-05-26 22:54:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450758079975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450758079975424[0;39m ==> Parameters: 
2023-05-26 22:54:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450758079975424[0;39m <==    Updates: 0
2023-05-26 22:54:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450758079975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:54:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450779005358080[0;39m 生成今日电子书快照开始
2023-05-26 22:54:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450779005358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450779005358080[0;39m ==> Parameters: 
2023-05-26 22:54:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450779005358080[0;39m <==    Updates: 0
2023-05-26 22:54:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450779005358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:54:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450799993655296[0;39m 生成今日电子书快照开始
2023-05-26 22:54:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450799993655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450799993655296[0;39m ==> Parameters: 
2023-05-26 22:54:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450799993655296[0;39m <==    Updates: 0
2023-05-26 22:54:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450799993655296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:54:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450820969369600[0;39m 生成今日电子书快照开始
2023-05-26 22:54:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450820969369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:54:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450820969369600[0;39m ==> Parameters: 
2023-05-26 22:54:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450820969369600[0;39m <==    Updates: 0
2023-05-26 22:54:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450820969369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450841949278208[0;39m 生成今日电子书快照开始
2023-05-26 22:55:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450841949278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450841949278208[0;39m ==> Parameters: 
2023-05-26 22:55:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450841949278208[0;39m <==    Updates: 0
2023-05-26 22:55:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450841949278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119450862941769728[0;39m 更新电子书下的文档数据开始
2023-05-26 22:55:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450862941769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:55:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450862941769728[0;39m ==> Parameters: 
2023-05-26 22:55:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450862941769728[0;39m <==    Updates: 8
2023-05-26 22:55:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119450862941769728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:55:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450862950158336[0;39m 生成今日电子书快照开始
2023-05-26 22:55:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450862950158336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450862950158336[0;39m ==> Parameters: 
2023-05-26 22:55:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450862950158336[0;39m <==    Updates: 0
2023-05-26 22:55:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450862950158336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:55:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450883892318208[0;39m 生成今日电子书快照开始
2023-05-26 22:55:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450883892318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450883892318208[0;39m ==> Parameters: 
2023-05-26 22:55:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450883892318208[0;39m <==    Updates: 0
2023-05-26 22:55:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450883892318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450904855449600[0;39m 生成今日电子书快照开始
2023-05-26 22:55:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450904855449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450904855449600[0;39m ==> Parameters: 
2023-05-26 22:55:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450904855449600[0;39m <==    Updates: 0
2023-05-26 22:55:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450904855449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450925852135424[0;39m 生成今日电子书快照开始
2023-05-26 22:55:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450925852135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450925852135424[0;39m ==> Parameters: 
2023-05-26 22:55:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450925852135424[0;39m <==    Updates: 0
2023-05-26 22:55:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450925852135424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450946823655424[0;39m 生成今日电子书快照开始
2023-05-26 22:55:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450946823655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450946823655424[0;39m ==> Parameters: 
2023-05-26 22:55:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450946823655424[0;39m <==    Updates: 0
2023-05-26 22:55:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450946823655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450967795175424[0;39m 生成今日电子书快照开始
2023-05-26 22:55:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450967795175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450967795175424[0;39m ==> Parameters: 
2023-05-26 22:55:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450967795175424[0;39m <==    Updates: 0
2023-05-26 22:55:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450967795175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119450988741529600[0;39m 更新电子书下的文档数据开始
2023-05-26 22:55:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450988741529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:55:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450988741529600[0;39m ==> Parameters: 
2023-05-26 22:55:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119450988741529600[0;39m <==    Updates: 8
2023-05-26 22:55:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119450988741529600[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 22:55:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119450988745723904[0;39m 生成今日电子书快照开始
2023-05-26 22:55:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450988745723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450988745723904[0;39m ==> Parameters: 
2023-05-26 22:55:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119450988745723904[0;39m <==    Updates: 0
2023-05-26 22:55:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119450988745723904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:55:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451009734021120[0;39m 生成今日电子书快照开始
2023-05-26 22:55:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451009734021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451009734021120[0;39m ==> Parameters: 
2023-05-26 22:55:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451009734021120[0;39m <==    Updates: 0
2023-05-26 22:55:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451009734021120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451030684569600[0;39m 生成今日电子书快照开始
2023-05-26 22:55:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451030684569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451030684569600[0;39m ==> Parameters: 
2023-05-26 22:55:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451030684569600[0;39m <==    Updates: 0
2023-05-26 22:55:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451030684569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451051626729472[0;39m 生成今日电子书快照开始
2023-05-26 22:55:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451051626729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451051626729472[0;39m ==> Parameters: 
2023-05-26 22:55:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451051626729472[0;39m <==    Updates: 0
2023-05-26 22:55:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451051626729472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:55:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451072631803904[0;39m 生成今日电子书快照开始
2023-05-26 22:55:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451072631803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:55:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451072631803904[0;39m ==> Parameters: 
2023-05-26 22:55:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451072631803904[0;39m <==    Updates: 0
2023-05-26 22:55:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451072631803904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:56:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451093586546688[0;39m 生成今日电子书快照开始
2023-05-26 22:56:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451093586546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451093586546688[0;39m ==> Parameters: 
2023-05-26 22:56:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451093586546688[0;39m <==    Updates: 0
2023-05-26 22:56:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451093586546688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:56:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451114587426816[0;39m 生成今日电子书快照开始
2023-05-26 22:56:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451114587426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451114587426816[0;39m ==> Parameters: 
2023-05-26 22:56:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451114587426816[0;39m <==    Updates: 0
2023-05-26 22:56:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451114587426816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:56:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119451114595815424[0;39m 更新电子书下的文档数据开始
2023-05-26 22:56:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451114595815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:56:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451114595815424[0;39m ==> Parameters: 
2023-05-26 22:56:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451114595815424[0;39m <==    Updates: 8
2023-05-26 22:56:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119451114595815424[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 22:56:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451135550558208[0;39m 生成今日电子书快照开始
2023-05-26 22:56:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451135550558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451135550558208[0;39m ==> Parameters: 
2023-05-26 22:56:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451135550558208[0;39m <==    Updates: 0
2023-05-26 22:56:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451135550558208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:56:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451156534661120[0;39m 生成今日电子书快照开始
2023-05-26 22:56:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451156534661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451156534661120[0;39m ==> Parameters: 
2023-05-26 22:56:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451156534661120[0;39m <==    Updates: 0
2023-05-26 22:56:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451156534661120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:56:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451177489403904[0;39m 生成今日电子书快照开始
2023-05-26 22:56:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451177489403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451177489403904[0;39m ==> Parameters: 
2023-05-26 22:56:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451177489403904[0;39m <==    Updates: 0
2023-05-26 22:56:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451177489403904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:56:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451198435758080[0;39m 生成今日电子书快照开始
2023-05-26 22:56:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451198435758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451198435758080[0;39m ==> Parameters: 
2023-05-26 22:56:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451198435758080[0;39m <==    Updates: 0
2023-05-26 22:56:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451198435758080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:56:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451219411472384[0;39m 生成今日电子书快照开始
2023-05-26 22:56:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451219411472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451219411472384[0;39m ==> Parameters: 
2023-05-26 22:56:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451219411472384[0;39m <==    Updates: 0
2023-05-26 22:56:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451219411472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:56:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119451240374603776[0;39m 更新电子书下的文档数据开始
2023-05-26 22:56:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451240374603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:56:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451240374603776[0;39m ==> Parameters: 
2023-05-26 22:56:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451240374603776[0;39m <==    Updates: 8
2023-05-26 22:56:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119451240374603776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:56:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451240382992384[0;39m 生成今日电子书快照开始
2023-05-26 22:56:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451240382992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451240382992384[0;39m ==> Parameters: 
2023-05-26 22:56:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451240382992384[0;39m <==    Updates: 0
2023-05-26 22:56:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451240382992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:56:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451261388066816[0;39m 生成今日电子书快照开始
2023-05-26 22:56:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451261388066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451261388066816[0;39m ==> Parameters: 
2023-05-26 22:56:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451261388066816[0;39m <==    Updates: 0
2023-05-26 22:56:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451261388066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:56:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451282313449472[0;39m 生成今日电子书快照开始
2023-05-26 22:56:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451282313449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451282313449472[0;39m ==> Parameters: 
2023-05-26 22:56:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451282313449472[0;39m <==    Updates: 0
2023-05-26 22:56:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451282313449472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:56:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451303339495424[0;39m 生成今日电子书快照开始
2023-05-26 22:56:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451303339495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451303339495424[0;39m ==> Parameters: 
2023-05-26 22:56:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451303339495424[0;39m <==    Updates: 0
2023-05-26 22:56:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451303339495424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:56:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451324290043904[0;39m 生成今日电子书快照开始
2023-05-26 22:56:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451324290043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:56:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451324290043904[0;39m ==> Parameters: 
2023-05-26 22:56:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451324290043904[0;39m <==    Updates: 0
2023-05-26 22:56:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451324290043904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:57:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451345286729728[0;39m 生成今日电子书快照开始
2023-05-26 22:57:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451345286729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451345286729728[0;39m ==> Parameters: 
2023-05-26 22:57:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451345286729728[0;39m <==    Updates: 0
2023-05-26 22:57:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451345286729728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119451366216306688[0;39m 更新电子书下的文档数据开始
2023-05-26 22:57:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451366216306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:57:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451366216306688[0;39m ==> Parameters: 
2023-05-26 22:57:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451366216306688[0;39m <==    Updates: 8
2023-05-26 22:57:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119451366216306688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:57:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451366224695296[0;39m 生成今日电子书快照开始
2023-05-26 22:57:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451366224695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451366224695296[0;39m ==> Parameters: 
2023-05-26 22:57:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451366224695296[0;39m <==    Updates: 0
2023-05-26 22:57:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451366224695296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:57:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451387208798208[0;39m 生成今日电子书快照开始
2023-05-26 22:57:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451387208798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451387208798208[0;39m ==> Parameters: 
2023-05-26 22:57:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451387208798208[0;39m <==    Updates: 0
2023-05-26 22:57:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451387208798208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451408155152384[0;39m 生成今日电子书快照开始
2023-05-26 22:57:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451408155152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451408155152384[0;39m ==> Parameters: 
2023-05-26 22:57:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451408155152384[0;39m <==    Updates: 0
2023-05-26 22:57:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451408155152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451429164421120[0;39m 生成今日电子书快照开始
2023-05-26 22:57:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451429164421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451429164421120[0;39m ==> Parameters: 
2023-05-26 22:57:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451429164421120[0;39m <==    Updates: 0
2023-05-26 22:57:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451429164421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451450140135424[0;39m 生成今日电子书快照开始
2023-05-26 22:57:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451450140135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451450140135424[0;39m ==> Parameters: 
2023-05-26 22:57:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451450140135424[0;39m <==    Updates: 0
2023-05-26 22:57:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451450140135424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451471094878208[0;39m 生成今日电子书快照开始
2023-05-26 22:57:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451471094878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451471094878208[0;39m ==> Parameters: 
2023-05-26 22:57:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451471094878208[0;39m <==    Updates: 0
2023-05-26 22:57:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451471094878208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:35.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451492024455168[0;39m 生成今日电子书快照开始
2023-05-26 22:57:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451492024455168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451492024455168[0;39m ==> Parameters: 
2023-05-26 22:57:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451492024455168[0;39m <==    Updates: 0
2023-05-26 22:57:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451492024455168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119451492032843776[0;39m 更新电子书下的文档数据开始
2023-05-26 22:57:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451492032843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:57:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451492032843776[0;39m ==> Parameters: 
2023-05-26 22:57:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451492032843776[0;39m <==    Updates: 8
2023-05-26 22:57:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119451492032843776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:57:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451513042112512[0;39m 生成今日电子书快照开始
2023-05-26 22:57:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451513042112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451513042112512[0;39m ==> Parameters: 
2023-05-26 22:57:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451513042112512[0;39m <==    Updates: 0
2023-05-26 22:57:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451513042112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451533984272384[0;39m 生成今日电子书快照开始
2023-05-26 22:57:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451533984272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451533984272384[0;39m ==> Parameters: 
2023-05-26 22:57:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451533984272384[0;39m <==    Updates: 0
2023-05-26 22:57:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451533984272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451554972569600[0;39m 生成今日电子书快照开始
2023-05-26 22:57:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451554972569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451554972569600[0;39m ==> Parameters: 
2023-05-26 22:57:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451554972569600[0;39m <==    Updates: 0
2023-05-26 22:57:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451554972569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:57:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451575948283904[0;39m 生成今日电子书快照开始
2023-05-26 22:57:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451575948283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451575948283904[0;39m ==> Parameters: 
2023-05-26 22:57:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451575948283904[0;39m <==    Updates: 0
2023-05-26 22:57:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451575948283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451596907220992[0;39m 生成今日电子书快照开始
2023-05-26 22:58:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451596907220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451596907220992[0;39m ==> Parameters: 
2023-05-26 22:58:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451596907220992[0;39m <==    Updates: 0
2023-05-26 22:58:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451596907220992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451617861963776[0;39m 生成今日电子书快照开始
2023-05-26 22:58:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451617861963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451617861963776[0;39m ==> Parameters: 
2023-05-26 22:58:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451617861963776[0;39m <==    Updates: 0
2023-05-26 22:58:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451617861963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119451617870352384[0;39m 更新电子书下的文档数据开始
2023-05-26 22:58:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451617870352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:58:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451617870352384[0;39m ==> Parameters: 
2023-05-26 22:58:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451617870352384[0;39m <==    Updates: 8
2023-05-26 22:58:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119451617870352384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:58:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451638850260992[0;39m 生成今日电子书快照开始
2023-05-26 22:58:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451638850260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451638850260992[0;39m ==> Parameters: 
2023-05-26 22:58:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451638850260992[0;39m <==    Updates: 0
2023-05-26 22:58:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451638850260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451659825975296[0;39m 生成今日电子书快照开始
2023-05-26 22:58:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451659825975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451659825975296[0;39m ==> Parameters: 
2023-05-26 22:58:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451659825975296[0;39m <==    Updates: 0
2023-05-26 22:58:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451659825975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451680776523776[0;39m 生成今日电子书快照开始
2023-05-26 22:58:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451680776523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451680776523776[0;39m ==> Parameters: 
2023-05-26 22:58:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451680776523776[0;39m <==    Updates: 0
2023-05-26 22:58:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451680776523776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:58:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451701760626688[0;39m 生成今日电子书快照开始
2023-05-26 22:58:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451701760626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451701760626688[0;39m ==> Parameters: 
2023-05-26 22:58:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451701760626688[0;39m <==    Updates: 0
2023-05-26 22:58:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451701760626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451722719563776[0;39m 生成今日电子书快照开始
2023-05-26 22:58:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451722719563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451722719563776[0;39m ==> Parameters: 
2023-05-26 22:58:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451722719563776[0;39m <==    Updates: 0
2023-05-26 22:58:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451722719563776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119451743741415424[0;39m 更新电子书下的文档数据开始
2023-05-26 22:58:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451743741415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:58:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451743741415424[0;39m ==> Parameters: 
2023-05-26 22:58:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451743741415424[0;39m <==    Updates: 8
2023-05-26 22:58:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119451743741415424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:58:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451743749804032[0;39m 生成今日电子书快照开始
2023-05-26 22:58:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451743749804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451743749804032[0;39m ==> Parameters: 
2023-05-26 22:58:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451743749804032[0;39m <==    Updates: 0
2023-05-26 22:58:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451743749804032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451764683575296[0;39m 生成今日电子书快照开始
2023-05-26 22:58:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451764683575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451764683575296[0;39m ==> Parameters: 
2023-05-26 22:58:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451764683575296[0;39m <==    Updates: 0
2023-05-26 22:58:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451764683575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451785684455424[0;39m 生成今日电子书快照开始
2023-05-26 22:58:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451785684455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451785684455424[0;39m ==> Parameters: 
2023-05-26 22:58:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451785684455424[0;39m <==    Updates: 0
2023-05-26 22:58:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451785684455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451806651781120[0;39m 生成今日电子书快照开始
2023-05-26 22:58:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451806651781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451806651781120[0;39m ==> Parameters: 
2023-05-26 22:58:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451806651781120[0;39m <==    Updates: 0
2023-05-26 22:58:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451806651781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:58:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451827614912512[0;39m 生成今日电子书快照开始
2023-05-26 22:58:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451827614912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:58:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451827614912512[0;39m ==> Parameters: 
2023-05-26 22:58:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451827614912512[0;39m <==    Updates: 0
2023-05-26 22:58:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451827614912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:59:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451848552878080[0;39m 生成今日电子书快照开始
2023-05-26 22:59:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451848552878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451848552878080[0;39m ==> Parameters: 
2023-05-26 22:59:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451848552878080[0;39m <==    Updates: 0
2023-05-26 22:59:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451848552878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:59:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119451869516009472[0;39m 更新电子书下的文档数据开始
2023-05-26 22:59:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451869516009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:59:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451869516009472[0;39m ==> Parameters: 
2023-05-26 22:59:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451869516009472[0;39m <==    Updates: 8
2023-05-26 22:59:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119451869516009472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 22:59:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451869524398080[0;39m 生成今日电子书快照开始
2023-05-26 22:59:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451869524398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451869524398080[0;39m ==> Parameters: 
2023-05-26 22:59:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451869524398080[0;39m <==    Updates: 0
2023-05-26 22:59:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451869524398080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:59:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451890533666816[0;39m 生成今日电子书快照开始
2023-05-26 22:59:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451890533666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451890533666816[0;39m ==> Parameters: 
2023-05-26 22:59:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451890533666816[0;39m <==    Updates: 0
2023-05-26 22:59:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451890533666816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:59:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451911480020992[0;39m 生成今日电子书快照开始
2023-05-26 22:59:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451911480020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451911480020992[0;39m ==> Parameters: 
2023-05-26 22:59:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451911480020992[0;39m <==    Updates: 0
2023-05-26 22:59:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451911480020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:59:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451932476706816[0;39m 生成今日电子书快照开始
2023-05-26 22:59:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451932476706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451932476706816[0;39m ==> Parameters: 
2023-05-26 22:59:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451932476706816[0;39m <==    Updates: 0
2023-05-26 22:59:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451932476706816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:59:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451953460809728[0;39m 生成今日电子书快照开始
2023-05-26 22:59:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451953460809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451953460809728[0;39m ==> Parameters: 
2023-05-26 22:59:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451953460809728[0;39m <==    Updates: 0
2023-05-26 22:59:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451953460809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:59:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451974428135424[0;39m 生成今日电子书快照开始
2023-05-26 22:59:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451974428135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451974428135424[0;39m ==> Parameters: 
2023-05-26 22:59:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451974428135424[0;39m <==    Updates: 0
2023-05-26 22:59:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451974428135424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 22:59:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119451995391266816[0;39m 更新电子书下的文档数据开始
2023-05-26 22:59:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451995391266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 22:59:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451995391266816[0;39m ==> Parameters: 
2023-05-26 22:59:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119451995391266816[0;39m <==    Updates: 8
2023-05-26 22:59:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119451995391266816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 22:59:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119451995395461120[0;39m 生成今日电子书快照开始
2023-05-26 22:59:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451995395461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451995395461120[0;39m ==> Parameters: 
2023-05-26 22:59:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119451995395461120[0;39m <==    Updates: 0
2023-05-26 22:59:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119451995395461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:59:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452016320843776[0;39m 生成今日电子书快照开始
2023-05-26 22:59:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452016320843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452016320843776[0;39m ==> Parameters: 
2023-05-26 22:59:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452016320843776[0;39m <==    Updates: 0
2023-05-26 22:59:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452016320843776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 22:59:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452037325918208[0;39m 生成今日电子书快照开始
2023-05-26 22:59:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452037325918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452037325918208[0;39m ==> Parameters: 
2023-05-26 22:59:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452037325918208[0;39m <==    Updates: 0
2023-05-26 22:59:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452037325918208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:59:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452058301632512[0;39m 生成今日电子书快照开始
2023-05-26 22:59:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452058301632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452058301632512[0;39m ==> Parameters: 
2023-05-26 22:59:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452058301632512[0;39m <==    Updates: 0
2023-05-26 22:59:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452058301632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 22:59:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452079264763904[0;39m 生成今日电子书快照开始
2023-05-26 22:59:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452079264763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 22:59:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452079264763904[0;39m ==> Parameters: 
2023-05-26 22:59:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452079264763904[0;39m <==    Updates: 0
2023-05-26 22:59:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452079264763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:00:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452100219506688[0;39m 生成今日电子书快照开始
2023-05-26 23:00:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452100219506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452100219506688[0;39m ==> Parameters: 
2023-05-26 23:00:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452100219506688[0;39m <==    Updates: 0
2023-05-26 23:00:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452100219506688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:00:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452121220386816[0;39m 生成今日电子书快照开始
2023-05-26 23:00:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452121220386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452121220386816[0;39m ==> Parameters: 
2023-05-26 23:00:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452121220386816[0;39m <==    Updates: 0
2023-05-26 23:00:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452121220386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:00:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119452121228775424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:00:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452121228775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:00:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452121228775424[0;39m ==> Parameters: 
2023-05-26 23:00:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452121228775424[0;39m <==    Updates: 8
2023-05-26 23:00:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119452121228775424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:00:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452142191906816[0;39m 生成今日电子书快照开始
2023-05-26 23:00:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452142191906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452142191906816[0;39m ==> Parameters: 
2023-05-26 23:00:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452142191906816[0;39m <==    Updates: 0
2023-05-26 23:00:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452142191906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:00:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452163171815424[0;39m 生成今日电子书快照开始
2023-05-26 23:00:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452163171815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452163171815424[0;39m ==> Parameters: 
2023-05-26 23:00:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452163171815424[0;39m <==    Updates: 0
2023-05-26 23:00:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452163171815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:00:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452184088809472[0;39m 生成今日电子书快照开始
2023-05-26 23:00:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452184088809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452184088809472[0;39m ==> Parameters: 
2023-05-26 23:00:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452184088809472[0;39m <==    Updates: 0
2023-05-26 23:00:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452184088809472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:00:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452205068718080[0;39m 生成今日电子书快照开始
2023-05-26 23:00:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452205068718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452205068718080[0;39m ==> Parameters: 
2023-05-26 23:00:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452205068718080[0;39m <==    Updates: 0
2023-05-26 23:00:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452205068718080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:00:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452226044432384[0;39m 生成今日电子书快照开始
2023-05-26 23:00:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452226044432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452226044432384[0;39m ==> Parameters: 
2023-05-26 23:00:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452226044432384[0;39m <==    Updates: 0
2023-05-26 23:00:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452226044432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:00:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452247045312512[0;39m 生成今日电子书快照开始
2023-05-26 23:00:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452247045312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452247045312512[0;39m ==> Parameters: 
2023-05-26 23:00:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452247045312512[0;39m <==    Updates: 0
2023-05-26 23:00:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452247045312512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:00:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119452247049506816[0;39m 更新电子书下的文档数据开始
2023-05-26 23:00:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452247049506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:00:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452247049506816[0;39m ==> Parameters: 
2023-05-26 23:00:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452247049506816[0;39m <==    Updates: 8
2023-05-26 23:00:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119452247049506816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:00:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452268012638208[0;39m 生成今日电子书快照开始
2023-05-26 23:00:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452268012638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452268012638208[0;39m ==> Parameters: 
2023-05-26 23:00:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452268012638208[0;39m <==    Updates: 0
2023-05-26 23:00:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452268012638208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:00:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452289005129728[0;39m 生成今日电子书快照开始
2023-05-26 23:00:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452289005129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452289005129728[0;39m ==> Parameters: 
2023-05-26 23:00:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452289005129728[0;39m <==    Updates: 0
2023-05-26 23:00:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452289005129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:00:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452309955678208[0;39m 生成今日电子书快照开始
2023-05-26 23:00:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452309955678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452309955678208[0;39m ==> Parameters: 
2023-05-26 23:00:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452309955678208[0;39m <==    Updates: 0
2023-05-26 23:00:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452309955678208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:00:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452330952364032[0;39m 生成今日电子书快照开始
2023-05-26 23:00:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452330952364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:00:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452330952364032[0;39m ==> Parameters: 
2023-05-26 23:00:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452330952364032[0;39m <==    Updates: 0
2023-05-26 23:00:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452330952364032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:01:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452351898718208[0;39m 生成今日电子书快照开始
2023-05-26 23:01:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452351898718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452351898718208[0;39m ==> Parameters: 
2023-05-26 23:01:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452351898718208[0;39m <==    Updates: 0
2023-05-26 23:01:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452351898718208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:01:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452372836683776[0;39m 生成今日电子书快照开始
2023-05-26 23:01:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452372836683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452372836683776[0;39m ==> Parameters: 
2023-05-26 23:01:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452372836683776[0;39m <==    Updates: 0
2023-05-26 23:01:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452372836683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:01:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119452372845072384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:01:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452372845072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:01:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452372845072384[0;39m ==> Parameters: 
2023-05-26 23:01:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452372845072384[0;39m <==    Updates: 8
2023-05-26 23:01:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119452372845072384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:01:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452393829175296[0;39m 生成今日电子书快照开始
2023-05-26 23:01:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452393829175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452393829175296[0;39m ==> Parameters: 
2023-05-26 23:01:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452393829175296[0;39m <==    Updates: 0
2023-05-26 23:01:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452393829175296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:01:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452414825861120[0;39m 生成今日电子书快照开始
2023-05-26 23:01:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452414825861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452414825861120[0;39m ==> Parameters: 
2023-05-26 23:01:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452414825861120[0;39m <==    Updates: 0
2023-05-26 23:01:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452414825861120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:01:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452435763826688[0;39m 生成今日电子书快照开始
2023-05-26 23:01:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452435763826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452435763826688[0;39m ==> Parameters: 
2023-05-26 23:01:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452435763826688[0;39m <==    Updates: 0
2023-05-26 23:01:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452435763826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:01:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452456773095424[0;39m 生成今日电子书快照开始
2023-05-26 23:01:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452456773095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452456773095424[0;39m ==> Parameters: 
2023-05-26 23:01:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452456773095424[0;39m <==    Updates: 0
2023-05-26 23:01:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452456773095424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:01:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452477736226816[0;39m 生成今日电子书快照开始
2023-05-26 23:01:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452477736226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452477736226816[0;39m ==> Parameters: 
2023-05-26 23:01:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452477736226816[0;39m <==    Updates: 0
2023-05-26 23:01:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452477736226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:01:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452498699358208[0;39m 生成今日电子书快照开始
2023-05-26 23:01:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452498699358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452498699358208[0;39m ==> Parameters: 
2023-05-26 23:01:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452498699358208[0;39m <==    Updates: 0
2023-05-26 23:01:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452498699358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:01:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119452498707746816[0;39m 更新电子书下的文档数据开始
2023-05-26 23:01:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452498707746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:01:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452498707746816[0;39m ==> Parameters: 
2023-05-26 23:01:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452498707746816[0;39m <==    Updates: 8
2023-05-26 23:01:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119452498707746816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:01:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452519666683904[0;39m 生成今日电子书快照开始
2023-05-26 23:01:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452519666683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452519666683904[0;39m ==> Parameters: 
2023-05-26 23:01:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452519666683904[0;39m <==    Updates: 0
2023-05-26 23:01:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452519666683904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:01:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452540646592512[0;39m 生成今日电子书快照开始
2023-05-26 23:01:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452540646592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452540646592512[0;39m ==> Parameters: 
2023-05-26 23:01:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452540646592512[0;39m <==    Updates: 0
2023-05-26 23:01:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452540646592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:01:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452561626501120[0;39m 生成今日电子书快照开始
2023-05-26 23:01:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452561626501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452561626501120[0;39m ==> Parameters: 
2023-05-26 23:01:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452561626501120[0;39m <==    Updates: 0
2023-05-26 23:01:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452561626501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:01:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452582568660992[0;39m 生成今日电子书快照开始
2023-05-26 23:01:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452582568660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:01:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452582568660992[0;39m ==> Parameters: 
2023-05-26 23:01:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452582568660992[0;39m <==    Updates: 0
2023-05-26 23:01:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452582568660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452603535986688[0;39m 生成今日电子书快照开始
2023-05-26 23:02:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452603535986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452603535986688[0;39m ==> Parameters: 
2023-05-26 23:02:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452603535986688[0;39m <==    Updates: 0
2023-05-26 23:02:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452603535986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119452624494923776[0;39m 更新电子书下的文档数据开始
2023-05-26 23:02:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452624494923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:02:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452624494923776[0;39m ==> Parameters: 
2023-05-26 23:02:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452624494923776[0;39m <==    Updates: 8
2023-05-26 23:02:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119452624494923776[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:02:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452624494923777[0;39m 生成今日电子书快照开始
2023-05-26 23:02:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452624494923777[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452624494923777[0;39m ==> Parameters: 
2023-05-26 23:02:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452624494923777[0;39m <==    Updates: 0
2023-05-26 23:02:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452624494923777[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:02:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452645483220992[0;39m 生成今日电子书快照开始
2023-05-26 23:02:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452645483220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452645483220992[0;39m ==> Parameters: 
2023-05-26 23:02:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452645483220992[0;39m <==    Updates: 0
2023-05-26 23:02:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452645483220992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452666475712512[0;39m 生成今日电子书快照开始
2023-05-26 23:02:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452666475712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452666475712512[0;39m ==> Parameters: 
2023-05-26 23:02:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452666475712512[0;39m <==    Updates: 0
2023-05-26 23:02:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452666475712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452687443038208[0;39m 生成今日电子书快照开始
2023-05-26 23:02:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452687443038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452687443038208[0;39m ==> Parameters: 
2023-05-26 23:02:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452687443038208[0;39m <==    Updates: 0
2023-05-26 23:02:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452687443038208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:02:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452708406169600[0;39m 生成今日电子书快照开始
2023-05-26 23:02:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452708406169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452708406169600[0;39m ==> Parameters: 
2023-05-26 23:02:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452708406169600[0;39m <==    Updates: 0
2023-05-26 23:02:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452708406169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452729348329472[0;39m 生成今日电子书快照开始
2023-05-26 23:02:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452729348329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452729348329472[0;39m ==> Parameters: 
2023-05-26 23:02:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452729348329472[0;39m <==    Updates: 0
2023-05-26 23:02:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452729348329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452750357598208[0;39m 生成今日电子书快照开始
2023-05-26 23:02:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452750357598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452750357598208[0;39m ==> Parameters: 
2023-05-26 23:02:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452750357598208[0;39m <==    Updates: 0
2023-05-26 23:02:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452750357598208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119452750365986816[0;39m 更新电子书下的文档数据开始
2023-05-26 23:02:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452750365986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:02:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452750365986816[0;39m ==> Parameters: 
2023-05-26 23:02:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452750365986816[0;39m <==    Updates: 8
2023-05-26 23:02:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119452750365986816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:02:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452771341701120[0;39m 生成今日电子书快照开始
2023-05-26 23:02:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452771341701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452771341701120[0;39m ==> Parameters: 
2023-05-26 23:02:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452771341701120[0;39m <==    Updates: 0
2023-05-26 23:02:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452771341701120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452792296443904[0;39m 生成今日电子书快照开始
2023-05-26 23:02:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452792296443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452792296443904[0;39m ==> Parameters: 
2023-05-26 23:02:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452792296443904[0;39m <==    Updates: 0
2023-05-26 23:02:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452792296443904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:02:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452813234409472[0;39m 生成今日电子书快照开始
2023-05-26 23:02:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452813234409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452813234409472[0;39m ==> Parameters: 
2023-05-26 23:02:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452813234409472[0;39m <==    Updates: 0
2023-05-26 23:02:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452813234409472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:02:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452834205929472[0;39m 生成今日电子书快照开始
2023-05-26 23:02:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452834205929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:02:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452834205929472[0;39m ==> Parameters: 
2023-05-26 23:02:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452834205929472[0;39m <==    Updates: 0
2023-05-26 23:02:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452834205929472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:03:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452855223586816[0;39m 生成今日电子书快照开始
2023-05-26 23:03:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452855223586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452855223586816[0;39m ==> Parameters: 
2023-05-26 23:03:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452855223586816[0;39m <==    Updates: 0
2023-05-26 23:03:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452855223586816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:03:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119452876186718208[0;39m 更新电子书下的文档数据开始
2023-05-26 23:03:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452876186718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:03:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452876186718208[0;39m ==> Parameters: 
2023-05-26 23:03:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119452876186718208[0;39m <==    Updates: 8
2023-05-26 23:03:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119452876186718208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:03:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452876195106816[0;39m 生成今日电子书快照开始
2023-05-26 23:03:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452876195106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452876195106816[0;39m ==> Parameters: 
2023-05-26 23:03:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452876195106816[0;39m <==    Updates: 0
2023-05-26 23:03:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452876195106816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:03:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452897170821120[0;39m 生成今日电子书快照开始
2023-05-26 23:03:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452897170821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452897170821120[0;39m ==> Parameters: 
2023-05-26 23:03:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452897170821120[0;39m <==    Updates: 0
2023-05-26 23:03:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452897170821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:03:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452918154924032[0;39m 生成今日电子书快照开始
2023-05-26 23:03:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452918154924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452918154924032[0;39m ==> Parameters: 
2023-05-26 23:03:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452918154924032[0;39m <==    Updates: 0
2023-05-26 23:03:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452918154924032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:03:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452939097083904[0;39m 生成今日电子书快照开始
2023-05-26 23:03:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452939097083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452939097083904[0;39m ==> Parameters: 
2023-05-26 23:03:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452939097083904[0;39m <==    Updates: 0
2023-05-26 23:03:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452939097083904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:03:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452960043438080[0;39m 生成今日电子书快照开始
2023-05-26 23:03:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452960043438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452960043438080[0;39m ==> Parameters: 
2023-05-26 23:03:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452960043438080[0;39m <==    Updates: 0
2023-05-26 23:03:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452960043438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:03:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119452981019152384[0;39m 生成今日电子书快照开始
2023-05-26 23:03:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452981019152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452981019152384[0;39m ==> Parameters: 
2023-05-26 23:03:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119452981019152384[0;39m <==    Updates: 0
2023-05-26 23:03:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119452981019152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:03:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119453002028421120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:03:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453002028421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:03:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453002028421120[0;39m ==> Parameters: 
2023-05-26 23:03:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453002028421120[0;39m <==    Updates: 8
2023-05-26 23:03:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119453002028421120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:03:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453002036809728[0;39m 生成今日电子书快照开始
2023-05-26 23:03:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453002036809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453002036809728[0;39m ==> Parameters: 
2023-05-26 23:03:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453002036809728[0;39m <==    Updates: 0
2023-05-26 23:03:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453002036809728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:03:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453022945415168[0;39m 生成今日电子书快照开始
2023-05-26 23:03:40.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453022945415168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453022945415168[0;39m ==> Parameters: 
2023-05-26 23:03:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453022945415168[0;39m <==    Updates: 0
2023-05-26 23:03:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453022945415168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:03:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453043937906688[0;39m 生成今日电子书快照开始
2023-05-26 23:03:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453043937906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453043937906688[0;39m ==> Parameters: 
2023-05-26 23:03:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453043937906688[0;39m <==    Updates: 0
2023-05-26 23:03:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453043937906688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:03:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453064942981120[0;39m 生成今日电子书快照开始
2023-05-26 23:03:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453064942981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453064942981120[0;39m ==> Parameters: 
2023-05-26 23:03:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453064942981120[0;39m <==    Updates: 0
2023-05-26 23:03:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453064942981120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:03:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453085914501120[0;39m 生成今日电子书快照开始
2023-05-26 23:03:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453085914501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:03:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453085914501120[0;39m ==> Parameters: 
2023-05-26 23:03:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453085914501120[0;39m <==    Updates: 0
2023-05-26 23:03:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453085914501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:04:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453106839883776[0;39m 生成今日电子书快照开始
2023-05-26 23:04:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453106839883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453106839883776[0;39m ==> Parameters: 
2023-05-26 23:04:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453106839883776[0;39m <==    Updates: 0
2023-05-26 23:04:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453106839883776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-26 23:04:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119453127832375296[0;39m 更新电子书下的文档数据开始
2023-05-26 23:04:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453127832375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:04:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453127832375296[0;39m ==> Parameters: 
2023-05-26 23:04:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453127832375296[0;39m <==    Updates: 8
2023-05-26 23:04:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119453127832375296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:04:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453127840763904[0;39m 生成今日电子书快照开始
2023-05-26 23:04:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453127840763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453127840763904[0;39m ==> Parameters: 
2023-05-26 23:04:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453127840763904[0;39m <==    Updates: 0
2023-05-26 23:04:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453127840763904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:04:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453148787118080[0;39m 生成今日电子书快照开始
2023-05-26 23:04:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453148787118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453148787118080[0;39m ==> Parameters: 
2023-05-26 23:04:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453148787118080[0;39m <==    Updates: 0
2023-05-26 23:04:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453148787118080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:04:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453169775415296[0;39m 生成今日电子书快照开始
2023-05-26 23:04:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453169775415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453169775415296[0;39m ==> Parameters: 
2023-05-26 23:04:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453169775415296[0;39m <==    Updates: 0
2023-05-26 23:04:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453169775415296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:04:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453190767906816[0;39m 生成今日电子书快照开始
2023-05-26 23:04:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453190767906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453190767906816[0;39m ==> Parameters: 
2023-05-26 23:04:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453190767906816[0;39m <==    Updates: 0
2023-05-26 23:04:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453190767906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:04:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453211705872384[0;39m 生成今日电子书快照开始
2023-05-26 23:04:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453211705872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453211705872384[0;39m ==> Parameters: 
2023-05-26 23:04:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453211705872384[0;39m <==    Updates: 0
2023-05-26 23:04:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453211705872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:04:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453232715141120[0;39m 生成今日电子书快照开始
2023-05-26 23:04:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453232715141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453232715141120[0;39m ==> Parameters: 
2023-05-26 23:04:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453232715141120[0;39m <==    Updates: 0
2023-05-26 23:04:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453232715141120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:04:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119453253640523776[0;39m 更新电子书下的文档数据开始
2023-05-26 23:04:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453253640523776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:04:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453253640523776[0;39m ==> Parameters: 
2023-05-26 23:04:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453253640523776[0;39m <==    Updates: 8
2023-05-26 23:04:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119453253640523776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:04:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453253648912384[0;39m 生成今日电子书快照开始
2023-05-26 23:04:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453253648912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453253648912384[0;39m ==> Parameters: 
2023-05-26 23:04:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453253648912384[0;39m <==    Updates: 0
2023-05-26 23:04:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453253648912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:04:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453274620432384[0;39m 生成今日电子书快照开始
2023-05-26 23:04:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453274620432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453274620432384[0;39m ==> Parameters: 
2023-05-26 23:04:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453274620432384[0;39m <==    Updates: 0
2023-05-26 23:04:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453274620432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:04:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453295587758080[0;39m 生成今日电子书快照开始
2023-05-26 23:04:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453295587758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453295587758080[0;39m ==> Parameters: 
2023-05-26 23:04:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453295587758080[0;39m <==    Updates: 0
2023-05-26 23:04:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453295587758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:04:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453316567666688[0;39m 生成今日电子书快照开始
2023-05-26 23:04:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453316567666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453316567666688[0;39m ==> Parameters: 
2023-05-26 23:04:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453316567666688[0;39m <==    Updates: 0
2023-05-26 23:04:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453316567666688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:04:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453337581129728[0;39m 生成今日电子书快照开始
2023-05-26 23:04:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453337581129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:04:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453337581129728[0;39m ==> Parameters: 
2023-05-26 23:04:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453337581129728[0;39m <==    Updates: 0
2023-05-26 23:04:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453337581129728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:05:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453358548455424[0;39m 生成今日电子书快照开始
2023-05-26 23:05:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453358548455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453358548455424[0;39m ==> Parameters: 
2023-05-26 23:05:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453358548455424[0;39m <==    Updates: 0
2023-05-26 23:05:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453358548455424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:05:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453379473838080[0;39m 生成今日电子书快照开始
2023-05-26 23:05:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453379473838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453379473838080[0;39m ==> Parameters: 
2023-05-26 23:05:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453379473838080[0;39m <==    Updates: 0
2023-05-26 23:05:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453379473838080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:05:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119453379478032384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:05:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453379478032384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:05:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453379478032384[0;39m ==> Parameters: 
2023-05-26 23:05:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453379478032384[0;39m <==    Updates: 8
2023-05-26 23:05:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119453379478032384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:05:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453400445358080[0;39m 生成今日电子书快照开始
2023-05-26 23:05:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453400445358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453400445358080[0;39m ==> Parameters: 
2023-05-26 23:05:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453400445358080[0;39m <==    Updates: 0
2023-05-26 23:05:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453400445358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:05:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453421446238208[0;39m 生成今日电子书快照开始
2023-05-26 23:05:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453421446238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453421446238208[0;39m ==> Parameters: 
2023-05-26 23:05:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453421446238208[0;39m <==    Updates: 0
2023-05-26 23:05:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453421446238208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:05:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453442430341120[0;39m 生成今日电子书快照开始
2023-05-26 23:05:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453442430341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453442430341120[0;39m ==> Parameters: 
2023-05-26 23:05:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453442430341120[0;39m <==    Updates: 0
2023-05-26 23:05:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453442430341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:05:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453463372500992[0;39m 生成今日电子书快照开始
2023-05-26 23:05:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453463372500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453463372500992[0;39m ==> Parameters: 
2023-05-26 23:05:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453463372500992[0;39m <==    Updates: 0
2023-05-26 23:05:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453463372500992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:05:30.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453484318855168[0;39m 生成今日电子书快照开始
2023-05-26 23:05:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453484318855168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453484318855168[0;39m ==> Parameters: 
2023-05-26 23:05:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453484318855168[0;39m <==    Updates: 0
2023-05-26 23:05:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453484318855168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:05:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453505298763776[0;39m 生成今日电子书快照开始
2023-05-26 23:05:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453505298763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453505298763776[0;39m ==> Parameters: 
2023-05-26 23:05:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453505298763776[0;39m <==    Updates: 0
2023-05-26 23:05:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453505298763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:05:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119453505307152384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:05:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453505307152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:05:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453505307152384[0;39m ==> Parameters: 
2023-05-26 23:05:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453505307152384[0;39m <==    Updates: 8
2023-05-26 23:05:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119453505307152384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:05:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453526316421120[0;39m 生成今日电子书快照开始
2023-05-26 23:05:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453526316421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453526316421120[0;39m ==> Parameters: 
2023-05-26 23:05:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453526316421120[0;39m <==    Updates: 0
2023-05-26 23:05:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453526316421120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:05:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453547287941120[0;39m 生成今日电子书快照开始
2023-05-26 23:05:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453547287941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453547287941120[0;39m ==> Parameters: 
2023-05-26 23:05:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453547287941120[0;39m <==    Updates: 0
2023-05-26 23:05:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453547287941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:05:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453568255266816[0;39m 生成今日电子书快照开始
2023-05-26 23:05:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453568255266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453568255266816[0;39m ==> Parameters: 
2023-05-26 23:05:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453568255266816[0;39m <==    Updates: 0
2023-05-26 23:05:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453568255266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:05:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453589210009600[0;39m 生成今日电子书快照开始
2023-05-26 23:05:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453589210009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:05:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453589210009600[0;39m ==> Parameters: 
2023-05-26 23:05:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453589210009600[0;39m <==    Updates: 0
2023-05-26 23:05:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453589210009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:06:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453610164752384[0;39m 生成今日电子书快照开始
2023-05-26 23:06:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453610164752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453610164752384[0;39m ==> Parameters: 
2023-05-26 23:06:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453610164752384[0;39m <==    Updates: 0
2023-05-26 23:06:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453610164752384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-26 23:06:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453631136272384[0;39m 生成今日电子书快照开始
2023-05-26 23:06:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453631136272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453631136272384[0;39m ==> Parameters: 
2023-05-26 23:06:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453631136272384[0;39m <==    Updates: 0
2023-05-26 23:06:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453631136272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:06:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119453631144660992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:06:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453631144660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:06:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453631144660992[0;39m ==> Parameters: 
2023-05-26 23:06:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453631144660992[0;39m <==    Updates: 8
2023-05-26 23:06:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119453631144660992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:06:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453652145541120[0;39m 生成今日电子书快照开始
2023-05-26 23:06:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453652145541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453652145541120[0;39m ==> Parameters: 
2023-05-26 23:06:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453652145541120[0;39m <==    Updates: 0
2023-05-26 23:06:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453652145541120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:06:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453673096089600[0;39m 生成今日电子书快照开始
2023-05-26 23:06:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453673096089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453673096089600[0;39m ==> Parameters: 
2023-05-26 23:06:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453673096089600[0;39m <==    Updates: 0
2023-05-26 23:06:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453673096089600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:06:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453694088581120[0;39m 生成今日电子书快照开始
2023-05-26 23:06:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453694088581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453694088581120[0;39m ==> Parameters: 
2023-05-26 23:06:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453694088581120[0;39m <==    Updates: 0
2023-05-26 23:06:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453694088581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:06:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453715060101120[0;39m 生成今日电子书快照开始
2023-05-26 23:06:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453715060101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453715060101120[0;39m ==> Parameters: 
2023-05-26 23:06:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453715060101120[0;39m <==    Updates: 0
2023-05-26 23:06:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453715060101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:06:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453736014843904[0;39m 生成今日电子书快照开始
2023-05-26 23:06:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453736014843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453736014843904[0;39m ==> Parameters: 
2023-05-26 23:06:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453736014843904[0;39m <==    Updates: 0
2023-05-26 23:06:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453736014843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:06:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119453756973780992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:06:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453756973780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:06:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453756973780992[0;39m ==> Parameters: 
2023-05-26 23:06:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453756973780992[0;39m <==    Updates: 8
2023-05-26 23:06:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119453756973780992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:06:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453756977975296[0;39m 生成今日电子书快照开始
2023-05-26 23:06:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453756977975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453756977975296[0;39m ==> Parameters: 
2023-05-26 23:06:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453756977975296[0;39m <==    Updates: 0
2023-05-26 23:06:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453756977975296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:06:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453777936912384[0;39m 生成今日电子书快照开始
2023-05-26 23:06:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453777936912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453777936912384[0;39m ==> Parameters: 
2023-05-26 23:06:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453777936912384[0;39m <==    Updates: 0
2023-05-26 23:06:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453777936912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:06:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453798950375424[0;39m 生成今日电子书快照开始
2023-05-26 23:06:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453798950375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453798950375424[0;39m ==> Parameters: 
2023-05-26 23:06:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453798950375424[0;39m <==    Updates: 0
2023-05-26 23:06:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453798950375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:06:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453819921895424[0;39m 生成今日电子书快照开始
2023-05-26 23:06:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453819921895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453819921895424[0;39m ==> Parameters: 
2023-05-26 23:06:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453819921895424[0;39m <==    Updates: 0
2023-05-26 23:06:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453819921895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:06:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453840838889472[0;39m 生成今日电子书快照开始
2023-05-26 23:06:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453840838889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:06:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453840838889472[0;39m ==> Parameters: 
2023-05-26 23:06:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453840838889472[0;39m <==    Updates: 0
2023-05-26 23:06:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453840838889472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453861810409472[0;39m 生成今日电子书快照开始
2023-05-26 23:07:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453861810409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453861810409472[0;39m ==> Parameters: 
2023-05-26 23:07:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453861810409472[0;39m <==    Updates: 0
2023-05-26 23:07:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453861810409472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453882790318080[0;39m 生成今日电子书快照开始
2023-05-26 23:07:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453882790318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453882790318080[0;39m ==> Parameters: 
2023-05-26 23:07:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453882790318080[0;39m <==    Updates: 0
2023-05-26 23:07:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453882790318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119453882798706688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:07:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453882798706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:07:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453882798706688[0;39m ==> Parameters: 
2023-05-26 23:07:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119453882798706688[0;39m <==    Updates: 8
2023-05-26 23:07:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119453882798706688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:07:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453903820558336[0;39m 生成今日电子书快照开始
2023-05-26 23:07:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453903820558336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453903820558336[0;39m ==> Parameters: 
2023-05-26 23:07:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453903820558336[0;39m <==    Updates: 0
2023-05-26 23:07:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453903820558336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:07:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453924758523904[0;39m 生成今日电子书快照开始
2023-05-26 23:07:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453924758523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453924758523904[0;39m ==> Parameters: 
2023-05-26 23:07:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453924758523904[0;39m <==    Updates: 0
2023-05-26 23:07:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453924758523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453945746821120[0;39m 生成今日电子书快照开始
2023-05-26 23:07:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453945746821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453945746821120[0;39m ==> Parameters: 
2023-05-26 23:07:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453945746821120[0;39m <==    Updates: 0
2023-05-26 23:07:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453945746821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453966676398080[0;39m 生成今日电子书快照开始
2023-05-26 23:07:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453966676398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453966676398080[0;39m ==> Parameters: 
2023-05-26 23:07:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453966676398080[0;39m <==    Updates: 0
2023-05-26 23:07:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453966676398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119453987706638336[0;39m 生成今日电子书快照开始
2023-05-26 23:07:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453987706638336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453987706638336[0;39m ==> Parameters: 
2023-05-26 23:07:30.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119453987706638336[0;39m <==    Updates: 0
2023-05-26 23:07:30.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119453987706638336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454008615243776[0;39m 生成今日电子书快照开始
2023-05-26 23:07:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454008615243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454008615243776[0;39m ==> Parameters: 
2023-05-26 23:07:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454008615243776[0;39m <==    Updates: 0
2023-05-26 23:07:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454008615243776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119454008623632384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:07:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454008623632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:07:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454008623632384[0;39m ==> Parameters: 
2023-05-26 23:07:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454008623632384[0;39m <==    Updates: 8
2023-05-26 23:07:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119454008623632384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:07:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454029641289728[0;39m 生成今日电子书快照开始
2023-05-26 23:07:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454029641289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454029641289728[0;39m ==> Parameters: 
2023-05-26 23:07:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454029641289728[0;39m <==    Updates: 0
2023-05-26 23:07:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454029641289728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:07:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454050608615424[0;39m 生成今日电子书快照开始
2023-05-26 23:07:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454050608615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454050608615424[0;39m ==> Parameters: 
2023-05-26 23:07:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454050608615424[0;39m <==    Updates: 0
2023-05-26 23:07:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454050608615424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454071559163904[0;39m 生成今日电子书快照开始
2023-05-26 23:07:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454071559163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454071559163904[0;39m ==> Parameters: 
2023-05-26 23:07:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454071559163904[0;39m <==    Updates: 0
2023-05-26 23:07:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454071559163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:07:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454092505518080[0;39m 生成今日电子书快照开始
2023-05-26 23:07:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454092505518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:07:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454092505518080[0;39m ==> Parameters: 
2023-05-26 23:07:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454092505518080[0;39m <==    Updates: 0
2023-05-26 23:07:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454092505518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454113523175424[0;39m 生成今日电子书快照开始
2023-05-26 23:08:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454113523175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454113523175424[0;39m ==> Parameters: 
2023-05-26 23:08:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454113523175424[0;39m <==    Updates: 0
2023-05-26 23:08:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454113523175424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:08:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119454134435975168[0;39m 更新电子书下的文档数据开始
2023-05-26 23:08:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454134435975168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:08:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454134435975168[0;39m ==> Parameters: 
2023-05-26 23:08:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454134435975168[0;39m <==    Updates: 8
2023-05-26 23:08:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119454134435975168[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:08:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454134444363776[0;39m 生成今日电子书快照开始
2023-05-26 23:08:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454134444363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454134444363776[0;39m ==> Parameters: 
2023-05-26 23:08:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454134444363776[0;39m <==    Updates: 0
2023-05-26 23:08:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454134444363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454155453632512[0;39m 生成今日电子书快照开始
2023-05-26 23:08:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454155453632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454155453632512[0;39m ==> Parameters: 
2023-05-26 23:08:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454155453632512[0;39m <==    Updates: 0
2023-05-26 23:08:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454155453632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454176395792384[0;39m 生成今日电子书快照开始
2023-05-26 23:08:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454176395792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454176395792384[0;39m ==> Parameters: 
2023-05-26 23:08:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454176395792384[0;39m <==    Updates: 0
2023-05-26 23:08:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454176395792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454197384089600[0;39m 生成今日电子书快照开始
2023-05-26 23:08:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454197384089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454197384089600[0;39m ==> Parameters: 
2023-05-26 23:08:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454197384089600[0;39m <==    Updates: 0
2023-05-26 23:08:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454197384089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454218343026688[0;39m 生成今日电子书快照开始
2023-05-26 23:08:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454218343026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454218343026688[0;39m ==> Parameters: 
2023-05-26 23:08:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454218343026688[0;39m <==    Updates: 0
2023-05-26 23:08:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454218343026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454239310352384[0;39m 生成今日电子书快照开始
2023-05-26 23:08:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454239310352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454239310352384[0;39m ==> Parameters: 
2023-05-26 23:08:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454239310352384[0;39m <==    Updates: 0
2023-05-26 23:08:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454239310352384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:08:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119454260319621120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:08:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454260319621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:08:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454260319621120[0;39m ==> Parameters: 
2023-05-26 23:08:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454260319621120[0;39m <==    Updates: 8
2023-05-26 23:08:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119454260319621120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:08:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454260328009728[0;39m 生成今日电子书快照开始
2023-05-26 23:08:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454260328009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454260328009728[0;39m ==> Parameters: 
2023-05-26 23:08:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454260328009728[0;39m <==    Updates: 0
2023-05-26 23:08:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454260328009728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454281249198080[0;39m 生成今日电子书快照开始
2023-05-26 23:08:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454281249198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454281249198080[0;39m ==> Parameters: 
2023-05-26 23:08:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454281249198080[0;39m <==    Updates: 0
2023-05-26 23:08:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454281249198080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:08:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454302224912384[0;39m 生成今日电子书快照开始
2023-05-26 23:08:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454302224912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454302224912384[0;39m ==> Parameters: 
2023-05-26 23:08:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454302224912384[0;39m <==    Updates: 0
2023-05-26 23:08:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454302224912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454323229986816[0;39m 生成今日电子书快照开始
2023-05-26 23:08:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454323229986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454323229986816[0;39m ==> Parameters: 
2023-05-26 23:08:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454323229986816[0;39m <==    Updates: 0
2023-05-26 23:08:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454323229986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:08:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454344209895424[0;39m 生成今日电子书快照开始
2023-05-26 23:08:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454344209895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:08:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454344209895424[0;39m ==> Parameters: 
2023-05-26 23:08:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454344209895424[0;39m <==    Updates: 0
2023-05-26 23:08:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454344209895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454365156249600[0;39m 生成今日电子书快照开始
2023-05-26 23:09:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454365156249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454365156249600[0;39m ==> Parameters: 
2023-05-26 23:09:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454365156249600[0;39m <==    Updates: 0
2023-05-26 23:09:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454365156249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119454386102603776[0;39m 更新电子书下的文档数据开始
2023-05-26 23:09:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454386102603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:09:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454386102603776[0;39m ==> Parameters: 
2023-05-26 23:09:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454386102603776[0;39m <==    Updates: 8
2023-05-26 23:09:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119454386102603776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:09:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454386110992384[0;39m 生成今日电子书快照开始
2023-05-26 23:09:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454386110992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454386110992384[0;39m ==> Parameters: 
2023-05-26 23:09:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454386110992384[0;39m <==    Updates: 0
2023-05-26 23:09:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454386110992384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:09:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454407103483904[0;39m 生成今日电子书快照开始
2023-05-26 23:09:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454407103483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454407103483904[0;39m ==> Parameters: 
2023-05-26 23:09:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454407103483904[0;39m <==    Updates: 0
2023-05-26 23:09:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454407103483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454428062420992[0;39m 生成今日电子书快照开始
2023-05-26 23:09:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454428062420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454428062420992[0;39m ==> Parameters: 
2023-05-26 23:09:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454428062420992[0;39m <==    Updates: 0
2023-05-26 23:09:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454428062420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454449063301120[0;39m 生成今日电子书快照开始
2023-05-26 23:09:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454449063301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454449063301120[0;39m ==> Parameters: 
2023-05-26 23:09:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454449063301120[0;39m <==    Updates: 0
2023-05-26 23:09:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454449063301120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454469980295168[0;39m 生成今日电子书快照开始
2023-05-26 23:09:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454469980295168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454469980295168[0;39m ==> Parameters: 
2023-05-26 23:09:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454469980295168[0;39m <==    Updates: 0
2023-05-26 23:09:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454469980295168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454490993758208[0;39m 生成今日电子书快照开始
2023-05-26 23:09:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454490993758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454490993758208[0;39m ==> Parameters: 
2023-05-26 23:09:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454490993758208[0;39m <==    Updates: 0
2023-05-26 23:09:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454490993758208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454511952695296[0;39m 生成今日电子书快照开始
2023-05-26 23:09:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454511952695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454511952695296[0;39m ==> Parameters: 
2023-05-26 23:09:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454511952695296[0;39m <==    Updates: 0
2023-05-26 23:09:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454511952695296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119454511961083904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:09:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454511961083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:09:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454511961083904[0;39m ==> Parameters: 
2023-05-26 23:09:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454511961083904[0;39m <==    Updates: 8
2023-05-26 23:09:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119454511961083904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:09:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454532940992512[0;39m 生成今日电子书快照开始
2023-05-26 23:09:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454532940992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454532940992512[0;39m ==> Parameters: 
2023-05-26 23:09:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454532940992512[0;39m <==    Updates: 0
2023-05-26 23:09:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454532940992512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454553925095424[0;39m 生成今日电子书快照开始
2023-05-26 23:09:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454553925095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454553925095424[0;39m ==> Parameters: 
2023-05-26 23:09:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454553925095424[0;39m <==    Updates: 0
2023-05-26 23:09:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454553925095424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:09:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454574888226816[0;39m 生成今日电子书快照开始
2023-05-26 23:09:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454574888226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454574888226816[0;39m ==> Parameters: 
2023-05-26 23:09:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454574888226816[0;39m <==    Updates: 0
2023-05-26 23:09:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454574888226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:09:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454595847163904[0;39m 生成今日电子书快照开始
2023-05-26 23:09:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454595847163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:09:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454595847163904[0;39m ==> Parameters: 
2023-05-26 23:09:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454595847163904[0;39m <==    Updates: 0
2023-05-26 23:09:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454595847163904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:10:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454616848044032[0;39m 生成今日电子书快照开始
2023-05-26 23:10:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454616848044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454616848044032[0;39m ==> Parameters: 
2023-05-26 23:10:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454616848044032[0;39m <==    Updates: 0
2023-05-26 23:10:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454616848044032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:10:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454637811175424[0;39m 生成今日电子书快照开始
2023-05-26 23:10:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454637811175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454637811175424[0;39m ==> Parameters: 
2023-05-26 23:10:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454637811175424[0;39m <==    Updates: 0
2023-05-26 23:10:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454637811175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:10:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119454637819564032[0;39m 更新电子书下的文档数据开始
2023-05-26 23:10:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454637819564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:10:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454637819564032[0;39m ==> Parameters: 
2023-05-26 23:10:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454637819564032[0;39m <==    Updates: 8
2023-05-26 23:10:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119454637819564032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:10:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454658770112512[0;39m 生成今日电子书快照开始
2023-05-26 23:10:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454658770112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454658770112512[0;39m ==> Parameters: 
2023-05-26 23:10:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454658770112512[0;39m <==    Updates: 0
2023-05-26 23:10:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454658770112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:10:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454679720660992[0;39m 生成今日电子书快照开始
2023-05-26 23:10:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454679720660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454679720660992[0;39m ==> Parameters: 
2023-05-26 23:10:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454679720660992[0;39m <==    Updates: 0
2023-05-26 23:10:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454679720660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:10:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454700696375296[0;39m 生成今日电子书快照开始
2023-05-26 23:10:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454700696375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454700696375296[0;39m ==> Parameters: 
2023-05-26 23:10:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454700696375296[0;39m <==    Updates: 0
2023-05-26 23:10:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454700696375296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:10:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454721659506688[0;39m 生成今日电子书快照开始
2023-05-26 23:10:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454721659506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454721659506688[0;39m ==> Parameters: 
2023-05-26 23:10:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454721659506688[0;39m <==    Updates: 0
2023-05-26 23:10:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454721659506688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:10:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454742664581120[0;39m 生成今日电子书快照开始
2023-05-26 23:10:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454742664581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454742664581120[0;39m ==> Parameters: 
2023-05-26 23:10:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454742664581120[0;39m <==    Updates: 0
2023-05-26 23:10:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454742664581120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:10:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454763610935296[0;39m 生成今日电子书快照开始
2023-05-26 23:10:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454763610935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454763610935296[0;39m ==> Parameters: 
2023-05-26 23:10:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454763610935296[0;39m <==    Updates: 0
2023-05-26 23:10:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454763610935296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:10:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119454763619323904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:10:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454763619323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:10:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454763619323904[0;39m ==> Parameters: 
2023-05-26 23:10:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454763619323904[0;39m <==    Updates: 8
2023-05-26 23:10:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119454763619323904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:10:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454784565678080[0;39m 生成今日电子书快照开始
2023-05-26 23:10:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454784565678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454784565678080[0;39m ==> Parameters: 
2023-05-26 23:10:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454784565678080[0;39m <==    Updates: 0
2023-05-26 23:10:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454784565678080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:10:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454805591724032[0;39m 生成今日电子书快照开始
2023-05-26 23:10:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454805591724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454805591724032[0;39m ==> Parameters: 
2023-05-26 23:10:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454805591724032[0;39m <==    Updates: 0
2023-05-26 23:10:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454805591724032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:10:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454826563244032[0;39m 生成今日电子书快照开始
2023-05-26 23:10:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454826563244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454826563244032[0;39m ==> Parameters: 
2023-05-26 23:10:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454826563244032[0;39m <==    Updates: 0
2023-05-26 23:10:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454826563244032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:10:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454847497015296[0;39m 生成今日电子书快照开始
2023-05-26 23:10:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454847497015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:10:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454847497015296[0;39m ==> Parameters: 
2023-05-26 23:10:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454847497015296[0;39m <==    Updates: 0
2023-05-26 23:10:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454847497015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454868468535296[0;39m 生成今日电子书快照开始
2023-05-26 23:11:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454868468535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454868468535296[0;39m ==> Parameters: 
2023-05-26 23:11:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454868468535296[0;39m <==    Updates: 0
2023-05-26 23:11:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454868468535296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119454889469415424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:11:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454889469415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:11:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454889469415424[0;39m ==> Parameters: 
2023-05-26 23:11:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119454889469415424[0;39m <==    Updates: 8
2023-05-26 23:11:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119454889469415424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:11:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454889473609728[0;39m 生成今日电子书快照开始
2023-05-26 23:11:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454889473609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454889473609728[0;39m ==> Parameters: 
2023-05-26 23:11:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454889473609728[0;39m <==    Updates: 0
2023-05-26 23:11:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454889473609728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454910445129728[0;39m 生成今日电子书快照开始
2023-05-26 23:11:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454910445129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454910445129728[0;39m ==> Parameters: 
2023-05-26 23:11:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454910445129728[0;39m <==    Updates: 0
2023-05-26 23:11:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454910445129728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:11:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454931391483904[0;39m 生成今日电子书快照开始
2023-05-26 23:11:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454931391483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454931391483904[0;39m ==> Parameters: 
2023-05-26 23:11:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454931391483904[0;39m <==    Updates: 0
2023-05-26 23:11:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454931391483904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:11:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454952358809600[0;39m 生成今日电子书快照开始
2023-05-26 23:11:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454952358809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454952358809600[0;39m ==> Parameters: 
2023-05-26 23:11:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454952358809600[0;39m <==    Updates: 0
2023-05-26 23:11:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454952358809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454973334523904[0;39m 生成今日电子书快照开始
2023-05-26 23:11:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454973334523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454973334523904[0;39m ==> Parameters: 
2023-05-26 23:11:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454973334523904[0;39m <==    Updates: 0
2023-05-26 23:11:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454973334523904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:11:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119454994293460992[0;39m 生成今日电子书快照开始
2023-05-26 23:11:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454994293460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454994293460992[0;39m ==> Parameters: 
2023-05-26 23:11:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119454994293460992[0;39m <==    Updates: 0
2023-05-26 23:11:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119454994293460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455015256592384[0;39m 生成今日电子书快照开始
2023-05-26 23:11:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455015256592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455015256592384[0;39m ==> Parameters: 
2023-05-26 23:11:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455015256592384[0;39m <==    Updates: 0
2023-05-26 23:11:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455015256592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119455015264980992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:11:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455015264980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:11:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455015264980992[0;39m ==> Parameters: 
2023-05-26 23:11:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455015264980992[0;39m <==    Updates: 8
2023-05-26 23:11:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119455015264980992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:11:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455036228112384[0;39m 生成今日电子书快照开始
2023-05-26 23:11:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455036228112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455036228112384[0;39m ==> Parameters: 
2023-05-26 23:11:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455036228112384[0;39m <==    Updates: 0
2023-05-26 23:11:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455036228112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455057212215296[0;39m 生成今日电子书快照开始
2023-05-26 23:11:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455057212215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455057212215296[0;39m ==> Parameters: 
2023-05-26 23:11:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455057212215296[0;39m <==    Updates: 0
2023-05-26 23:11:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455057212215296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455078183735296[0;39m 生成今日电子书快照开始
2023-05-26 23:11:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455078183735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455078183735296[0;39m ==> Parameters: 
2023-05-26 23:11:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455078183735296[0;39m <==    Updates: 0
2023-05-26 23:11:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455078183735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:11:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455099188809728[0;39m 生成今日电子书快照开始
2023-05-26 23:11:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455099188809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:11:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455099188809728[0;39m ==> Parameters: 
2023-05-26 23:11:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455099188809728[0;39m <==    Updates: 0
2023-05-26 23:11:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455099188809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:12:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455120135163904[0;39m 生成今日电子书快照开始
2023-05-26 23:12:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455120135163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455120135163904[0;39m ==> Parameters: 
2023-05-26 23:12:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455120135163904[0;39m <==    Updates: 0
2023-05-26 23:12:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455120135163904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:12:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455141085712384[0;39m 生成今日电子书快照开始
2023-05-26 23:12:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455141085712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455141085712384[0;39m ==> Parameters: 
2023-05-26 23:12:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455141085712384[0;39m <==    Updates: 0
2023-05-26 23:12:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455141085712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:12:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119455141094100992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:12:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455141094100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:12:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455141094100992[0;39m ==> Parameters: 
2023-05-26 23:12:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455141094100992[0;39m <==    Updates: 8
2023-05-26 23:12:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119455141094100992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:12:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455162082398208[0;39m 生成今日电子书快照开始
2023-05-26 23:12:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455162082398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455162082398208[0;39m ==> Parameters: 
2023-05-26 23:12:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455162082398208[0;39m <==    Updates: 0
2023-05-26 23:12:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455162082398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:12:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455183049723904[0;39m 生成今日电子书快照开始
2023-05-26 23:12:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455183049723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455183049723904[0;39m ==> Parameters: 
2023-05-26 23:12:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455183049723904[0;39m <==    Updates: 0
2023-05-26 23:12:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455183049723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:12:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455203991883776[0;39m 生成今日电子书快照开始
2023-05-26 23:12:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455203991883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455203991883776[0;39m ==> Parameters: 
2023-05-26 23:12:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455203991883776[0;39m <==    Updates: 0
2023-05-26 23:12:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455203991883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:12:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455225001152512[0;39m 生成今日电子书快照开始
2023-05-26 23:12:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455225001152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455225001152512[0;39m ==> Parameters: 
2023-05-26 23:12:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455225001152512[0;39m <==    Updates: 0
2023-05-26 23:12:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455225001152512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:12:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455245951700992[0;39m 生成今日电子书快照开始
2023-05-26 23:12:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455245951700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455245951700992[0;39m ==> Parameters: 
2023-05-26 23:12:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455245951700992[0;39m <==    Updates: 0
2023-05-26 23:12:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455245951700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:12:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119455266935803904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:12:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455266935803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:12:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455266935803904[0;39m ==> Parameters: 
2023-05-26 23:12:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455266935803904[0;39m <==    Updates: 8
2023-05-26 23:12:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119455266935803904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:12:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455266944192512[0;39m 生成今日电子书快照开始
2023-05-26 23:12:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455266944192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455266944192512[0;39m ==> Parameters: 
2023-05-26 23:12:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455266944192512[0;39m <==    Updates: 0
2023-05-26 23:12:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455266944192512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:12:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455287919906816[0;39m 生成今日电子书快照开始
2023-05-26 23:12:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455287919906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455287919906816[0;39m ==> Parameters: 
2023-05-26 23:12:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455287919906816[0;39m <==    Updates: 0
2023-05-26 23:12:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455287919906816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:12:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455308891426816[0;39m 生成今日电子书快照开始
2023-05-26 23:12:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455308891426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455308891426816[0;39m ==> Parameters: 
2023-05-26 23:12:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455308891426816[0;39m <==    Updates: 0
2023-05-26 23:12:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455308891426816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:12:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455329841975296[0;39m 生成今日电子书快照开始
2023-05-26 23:12:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455329841975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455329841975296[0;39m ==> Parameters: 
2023-05-26 23:12:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455329841975296[0;39m <==    Updates: 0
2023-05-26 23:12:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455329841975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:12:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455350796718080[0;39m 生成今日电子书快照开始
2023-05-26 23:12:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455350796718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:12:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455350796718080[0;39m ==> Parameters: 
2023-05-26 23:12:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455350796718080[0;39m <==    Updates: 0
2023-05-26 23:12:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455350796718080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:13:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455371759849472[0;39m 生成今日电子书快照开始
2023-05-26 23:13:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455371759849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455371759849472[0;39m ==> Parameters: 
2023-05-26 23:13:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455371759849472[0;39m <==    Updates: 0
2023-05-26 23:13:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455371759849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:13:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119455392773312512[0;39m 更新电子书下的文档数据开始
2023-05-26 23:13:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455392773312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:13:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455392773312512[0;39m ==> Parameters: 
2023-05-26 23:13:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455392773312512[0;39m <==    Updates: 8
2023-05-26 23:13:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119455392773312512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:13:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455392777506816[0;39m 生成今日电子书快照开始
2023-05-26 23:13:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455392777506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455392777506816[0;39m ==> Parameters: 
2023-05-26 23:13:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455392777506816[0;39m <==    Updates: 0
2023-05-26 23:13:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455392777506816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:13:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455413736443904[0;39m 生成今日电子书快照开始
2023-05-26 23:13:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455413736443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455413736443904[0;39m ==> Parameters: 
2023-05-26 23:13:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455413736443904[0;39m <==    Updates: 0
2023-05-26 23:13:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455413736443904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:13:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455434695380992[0;39m 生成今日电子书快照开始
2023-05-26 23:13:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455434695380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455434695380992[0;39m ==> Parameters: 
2023-05-26 23:13:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455434695380992[0;39m <==    Updates: 0
2023-05-26 23:13:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455434695380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:13:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455455675289600[0;39m 生成今日电子书快照开始
2023-05-26 23:13:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455455675289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455455675289600[0;39m ==> Parameters: 
2023-05-26 23:13:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455455675289600[0;39m <==    Updates: 0
2023-05-26 23:13:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455455675289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:13:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455476638420992[0;39m 生成今日电子书快照开始
2023-05-26 23:13:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455476638420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455476638420992[0;39m ==> Parameters: 
2023-05-26 23:13:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455476638420992[0;39m <==    Updates: 0
2023-05-26 23:13:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455476638420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:13:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455497597358080[0;39m 生成今日电子书快照开始
2023-05-26 23:13:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455497597358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455497597358080[0;39m ==> Parameters: 
2023-05-26 23:13:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455497597358080[0;39m <==    Updates: 0
2023-05-26 23:13:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455497597358080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:13:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455518560489472[0;39m 生成今日电子书快照开始
2023-05-26 23:13:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455518560489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455518560489472[0;39m ==> Parameters: 
2023-05-26 23:13:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455518560489472[0;39m <==    Updates: 0
2023-05-26 23:13:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455518560489472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:13:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119455518568878080[0;39m 更新电子书下的文档数据开始
2023-05-26 23:13:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455518568878080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:13:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455518568878080[0;39m ==> Parameters: 
2023-05-26 23:13:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455518568878080[0;39m <==    Updates: 8
2023-05-26 23:13:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119455518568878080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:13:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455539573952512[0;39m 生成今日电子书快照开始
2023-05-26 23:13:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455539573952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455539573952512[0;39m ==> Parameters: 
2023-05-26 23:13:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455539573952512[0;39m <==    Updates: 0
2023-05-26 23:13:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455539573952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:13:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455560507723776[0;39m 生成今日电子书快照开始
2023-05-26 23:13:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455560507723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455560507723776[0;39m ==> Parameters: 
2023-05-26 23:13:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455560507723776[0;39m <==    Updates: 0
2023-05-26 23:13:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455560507723776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:13:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455581521186816[0;39m 生成今日电子书快照开始
2023-05-26 23:13:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455581521186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455581521186816[0;39m ==> Parameters: 
2023-05-26 23:13:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455581521186816[0;39m <==    Updates: 0
2023-05-26 23:13:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455581521186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:13:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455602492706816[0;39m 生成今日电子书快照开始
2023-05-26 23:13:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455602492706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:13:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455602492706816[0;39m ==> Parameters: 
2023-05-26 23:13:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455602492706816[0;39m <==    Updates: 0
2023-05-26 23:13:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455602492706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:14:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455623439060992[0;39m 生成今日电子书快照开始
2023-05-26 23:14:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455623439060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455623439060992[0;39m ==> Parameters: 
2023-05-26 23:14:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455623439060992[0;39m <==    Updates: 0
2023-05-26 23:14:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455623439060992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:14:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119455644452524032[0;39m 更新电子书下的文档数据开始
2023-05-26 23:14:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455644452524032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:14:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455644452524032[0;39m ==> Parameters: 
2023-05-26 23:14:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455644452524032[0;39m <==    Updates: 8
2023-05-26 23:14:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119455644452524032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:14:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455644456718336[0;39m 生成今日电子书快照开始
2023-05-26 23:14:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455644456718336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455644456718336[0;39m ==> Parameters: 
2023-05-26 23:14:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455644456718336[0;39m <==    Updates: 0
2023-05-26 23:14:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455644456718336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:14:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455665415655424[0;39m 生成今日电子书快照开始
2023-05-26 23:14:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455665415655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455665415655424[0;39m ==> Parameters: 
2023-05-26 23:14:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455665415655424[0;39m <==    Updates: 0
2023-05-26 23:14:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455665415655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:14:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455686382981120[0;39m 生成今日电子书快照开始
2023-05-26 23:14:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455686382981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455686382981120[0;39m ==> Parameters: 
2023-05-26 23:14:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455686382981120[0;39m <==    Updates: 0
2023-05-26 23:14:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455686382981120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:14:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455707304169472[0;39m 生成今日电子书快照开始
2023-05-26 23:14:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455707304169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455707304169472[0;39m ==> Parameters: 
2023-05-26 23:14:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455707304169472[0;39m <==    Updates: 0
2023-05-26 23:14:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455707304169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:14:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455728338604032[0;39m 生成今日电子书快照开始
2023-05-26 23:14:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455728338604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455728338604032[0;39m ==> Parameters: 
2023-05-26 23:14:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455728338604032[0;39m <==    Updates: 0
2023-05-26 23:14:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455728338604032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:14:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455749268180992[0;39m 生成今日电子书快照开始
2023-05-26 23:14:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455749268180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455749268180992[0;39m ==> Parameters: 
2023-05-26 23:14:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455749268180992[0;39m <==    Updates: 0
2023-05-26 23:14:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455749268180992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:14:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455770227118080[0;39m 生成今日电子书快照开始
2023-05-26 23:14:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455770227118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455770227118080[0;39m ==> Parameters: 
2023-05-26 23:14:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455770227118080[0;39m <==    Updates: 0
2023-05-26 23:14:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455770227118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:14:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119455770235506688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:14:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455770235506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:14:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455770235506688[0;39m ==> Parameters: 
2023-05-26 23:14:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455770235506688[0;39m <==    Updates: 8
2023-05-26 23:14:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119455770235506688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:14:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455791240581120[0;39m 生成今日电子书快照开始
2023-05-26 23:14:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455791240581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455791240581120[0;39m ==> Parameters: 
2023-05-26 23:14:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455791240581120[0;39m <==    Updates: 0
2023-05-26 23:14:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455791240581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:14:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455812191129600[0;39m 生成今日电子书快照开始
2023-05-26 23:14:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455812191129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455812191129600[0;39m ==> Parameters: 
2023-05-26 23:14:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455812191129600[0;39m <==    Updates: 0
2023-05-26 23:14:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455812191129600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:14:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455833187815424[0;39m 生成今日电子书快照开始
2023-05-26 23:14:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455833187815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455833187815424[0;39m ==> Parameters: 
2023-05-26 23:14:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455833187815424[0;39m <==    Updates: 0
2023-05-26 23:14:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455833187815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:14:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455854159335424[0;39m 生成今日电子书快照开始
2023-05-26 23:14:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455854159335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:14:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455854159335424[0;39m ==> Parameters: 
2023-05-26 23:14:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455854159335424[0;39m <==    Updates: 0
2023-05-26 23:14:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455854159335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:15:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455875118272512[0;39m 生成今日电子书快照开始
2023-05-26 23:15:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455875118272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455875118272512[0;39m ==> Parameters: 
2023-05-26 23:15:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455875118272512[0;39m <==    Updates: 0
2023-05-26 23:15:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455875118272512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:15:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119455896077209600[0;39m 更新电子书下的文档数据开始
2023-05-26 23:15:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455896077209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:15:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455896077209600[0;39m ==> Parameters: 
2023-05-26 23:15:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119455896077209600[0;39m <==    Updates: 8
2023-05-26 23:15:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119455896077209600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:15:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455896085598208[0;39m 生成今日电子书快照开始
2023-05-26 23:15:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455896085598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455896085598208[0;39m ==> Parameters: 
2023-05-26 23:15:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455896085598208[0;39m <==    Updates: 0
2023-05-26 23:15:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455896085598208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:15:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455917061312512[0;39m 生成今日电子书快照开始
2023-05-26 23:15:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455917061312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455917061312512[0;39m ==> Parameters: 
2023-05-26 23:15:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455917061312512[0;39m <==    Updates: 0
2023-05-26 23:15:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455917061312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:15:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455937990889472[0;39m 生成今日电子书快照开始
2023-05-26 23:15:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455937990889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455937990889472[0;39m ==> Parameters: 
2023-05-26 23:15:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455937990889472[0;39m <==    Updates: 0
2023-05-26 23:15:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455937990889472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:15:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455958995963904[0;39m 生成今日电子书快照开始
2023-05-26 23:15:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455958995963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455958995963904[0;39m ==> Parameters: 
2023-05-26 23:15:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455958995963904[0;39m <==    Updates: 0
2023-05-26 23:15:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455958995963904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:15:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119455979980066816[0;39m 生成今日电子书快照开始
2023-05-26 23:15:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455979980066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455979980066816[0;39m ==> Parameters: 
2023-05-26 23:15:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119455979980066816[0;39m <==    Updates: 0
2023-05-26 23:15:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119455979980066816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:15:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456000947392512[0;39m 生成今日电子书快照开始
2023-05-26 23:15:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456000947392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456000947392512[0;39m ==> Parameters: 
2023-05-26 23:15:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456000947392512[0;39m <==    Updates: 0
2023-05-26 23:15:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456000947392512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:15:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456021927301120[0;39m 生成今日电子书快照开始
2023-05-26 23:15:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456021927301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456021927301120[0;39m ==> Parameters: 
2023-05-26 23:15:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456021927301120[0;39m <==    Updates: 0
2023-05-26 23:15:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456021927301120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:15:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119456021939884032[0;39m 更新电子书下的文档数据开始
2023-05-26 23:15:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456021939884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:15:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456021939884032[0;39m ==> Parameters: 
2023-05-26 23:15:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456021939884032[0;39m <==    Updates: 8
2023-05-26 23:15:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119456021939884032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:15:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456042877849600[0;39m 生成今日电子书快照开始
2023-05-26 23:15:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456042877849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456042877849600[0;39m ==> Parameters: 
2023-05-26 23:15:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456042877849600[0;39m <==    Updates: 0
2023-05-26 23:15:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456042877849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:15:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456063870341120[0;39m 生成今日电子书快照开始
2023-05-26 23:15:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456063870341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456063870341120[0;39m ==> Parameters: 
2023-05-26 23:15:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456063870341120[0;39m <==    Updates: 0
2023-05-26 23:15:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456063870341120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:15:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456084854444032[0;39m 生成今日电子书快照开始
2023-05-26 23:15:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456084854444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456084854444032[0;39m ==> Parameters: 
2023-05-26 23:15:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456084854444032[0;39m <==    Updates: 0
2023-05-26 23:15:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456084854444032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:15:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456105821769728[0;39m 生成今日电子书快照开始
2023-05-26 23:15:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456105821769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:15:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456105821769728[0;39m ==> Parameters: 
2023-05-26 23:15:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456105821769728[0;39m <==    Updates: 0
2023-05-26 23:15:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456105821769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:16:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456126780706816[0;39m 生成今日电子书快照开始
2023-05-26 23:16:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456126780706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456126780706816[0;39m ==> Parameters: 
2023-05-26 23:16:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456126780706816[0;39m <==    Updates: 0
2023-05-26 23:16:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456126780706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:16:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456147735449600[0;39m 生成今日电子书快照开始
2023-05-26 23:16:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456147735449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456147735449600[0;39m ==> Parameters: 
2023-05-26 23:16:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456147735449600[0;39m <==    Updates: 0
2023-05-26 23:16:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456147735449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:16:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119456147743838208[0;39m 更新电子书下的文档数据开始
2023-05-26 23:16:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456147743838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:16:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456147743838208[0;39m ==> Parameters: 
2023-05-26 23:16:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456147743838208[0;39m <==    Updates: 8
2023-05-26 23:16:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119456147743838208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:16:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456168727941120[0;39m 生成今日电子书快照开始
2023-05-26 23:16:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456168727941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456168727941120[0;39m ==> Parameters: 
2023-05-26 23:16:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456168727941120[0;39m <==    Updates: 0
2023-05-26 23:16:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456168727941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:16:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456189695266816[0;39m 生成今日电子书快照开始
2023-05-26 23:16:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456189695266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456189695266816[0;39m ==> Parameters: 
2023-05-26 23:16:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456189695266816[0;39m <==    Updates: 0
2023-05-26 23:16:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456189695266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:16:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456210629038080[0;39m 生成今日电子书快照开始
2023-05-26 23:16:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456210629038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456210629038080[0;39m ==> Parameters: 
2023-05-26 23:16:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456210629038080[0;39m <==    Updates: 0
2023-05-26 23:16:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456210629038080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:16:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456231621529600[0;39m 生成今日电子书快照开始
2023-05-26 23:16:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456231621529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456231621529600[0;39m ==> Parameters: 
2023-05-26 23:16:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456231621529600[0;39m <==    Updates: 0
2023-05-26 23:16:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456231621529600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:16:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456252588855296[0;39m 生成今日电子书快照开始
2023-05-26 23:16:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456252588855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456252588855296[0;39m ==> Parameters: 
2023-05-26 23:16:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456252588855296[0;39m <==    Updates: 0
2023-05-26 23:16:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456252588855296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:16:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119456273585541120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:16:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456273585541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:16:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456273585541120[0;39m ==> Parameters: 
2023-05-26 23:16:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456273585541120[0;39m <==    Updates: 8
2023-05-26 23:16:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119456273585541120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:16:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456273593929728[0;39m 生成今日电子书快照开始
2023-05-26 23:16:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456273593929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456273593929728[0;39m ==> Parameters: 
2023-05-26 23:16:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456273593929728[0;39m <==    Updates: 0
2023-05-26 23:16:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456273593929728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:16:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456294561255424[0;39m 生成今日电子书快照开始
2023-05-26 23:16:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456294561255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456294561255424[0;39m ==> Parameters: 
2023-05-26 23:16:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456294561255424[0;39m <==    Updates: 0
2023-05-26 23:16:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456294561255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:16:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456315478249472[0;39m 生成今日电子书快照开始
2023-05-26 23:16:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456315478249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456315478249472[0;39m ==> Parameters: 
2023-05-26 23:16:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456315478249472[0;39m <==    Updates: 0
2023-05-26 23:16:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456315478249472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:16:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456336500101120[0;39m 生成今日电子书快照开始
2023-05-26 23:16:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456336500101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456336500101120[0;39m ==> Parameters: 
2023-05-26 23:16:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456336500101120[0;39m <==    Updates: 0
2023-05-26 23:16:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456336500101120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:16:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456357442260992[0;39m 生成今日电子书快照开始
2023-05-26 23:16:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456357442260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:16:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456357442260992[0;39m ==> Parameters: 
2023-05-26 23:16:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456357442260992[0;39m <==    Updates: 0
2023-05-26 23:16:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456357442260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:17:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456378443141120[0;39m 生成今日电子书快照开始
2023-05-26 23:17:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456378443141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456378443141120[0;39m ==> Parameters: 
2023-05-26 23:17:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456378443141120[0;39m <==    Updates: 0
2023-05-26 23:17:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456378443141120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:17:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119456399389495296[0;39m 更新电子书下的文档数据开始
2023-05-26 23:17:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456399389495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:17:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456399389495296[0;39m ==> Parameters: 
2023-05-26 23:17:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456399389495296[0;39m <==    Updates: 8
2023-05-26 23:17:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119456399389495296[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:17:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456399389495297[0;39m 生成今日电子书快照开始
2023-05-26 23:17:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456399389495297[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456399389495297[0;39m ==> Parameters: 
2023-05-26 23:17:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456399389495297[0;39m <==    Updates: 0
2023-05-26 23:17:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456399389495297[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:17:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456420386181120[0;39m 生成今日电子书快照开始
2023-05-26 23:17:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456420386181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456420386181120[0;39m ==> Parameters: 
2023-05-26 23:17:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456420386181120[0;39m <==    Updates: 0
2023-05-26 23:17:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456420386181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:17:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456441366089728[0;39m 生成今日电子书快照开始
2023-05-26 23:17:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456441366089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456441366089728[0;39m ==> Parameters: 
2023-05-26 23:17:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456441366089728[0;39m <==    Updates: 0
2023-05-26 23:17:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456441366089728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:17:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456462304055296[0;39m 生成今日电子书快照开始
2023-05-26 23:17:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456462304055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456462304055296[0;39m ==> Parameters: 
2023-05-26 23:17:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456462304055296[0;39m <==    Updates: 0
2023-05-26 23:17:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456462304055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:17:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456483283963904[0;39m 生成今日电子书快照开始
2023-05-26 23:17:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456483283963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456483283963904[0;39m ==> Parameters: 
2023-05-26 23:17:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456483283963904[0;39m <==    Updates: 0
2023-05-26 23:17:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456483283963904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:17:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456504280649728[0;39m 生成今日电子书快照开始
2023-05-26 23:17:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456504280649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456504280649728[0;39m ==> Parameters: 
2023-05-26 23:17:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456504280649728[0;39m <==    Updates: 0
2023-05-26 23:17:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456504280649728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:17:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456525206032384[0;39m 生成今日电子书快照开始
2023-05-26 23:17:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456525206032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456525206032384[0;39m ==> Parameters: 
2023-05-26 23:17:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456525206032384[0;39m <==    Updates: 0
2023-05-26 23:17:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456525206032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:17:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119456525214420992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:17:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456525214420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:17:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456525214420992[0;39m ==> Parameters: 
2023-05-26 23:17:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456525214420992[0;39m <==    Updates: 8
2023-05-26 23:17:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119456525214420992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:17:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456546185940992[0;39m 生成今日电子书快照开始
2023-05-26 23:17:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456546185940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456546185940992[0;39m ==> Parameters: 
2023-05-26 23:17:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456546185940992[0;39m <==    Updates: 0
2023-05-26 23:17:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456546185940992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:17:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456567157460992[0;39m 生成今日电子书快照开始
2023-05-26 23:17:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456567157460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456567157460992[0;39m ==> Parameters: 
2023-05-26 23:17:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456567157460992[0;39m <==    Updates: 0
2023-05-26 23:17:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456567157460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:17:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456588166729728[0;39m 生成今日电子书快照开始
2023-05-26 23:17:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456588166729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456588166729728[0;39m ==> Parameters: 
2023-05-26 23:17:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456588166729728[0;39m <==    Updates: 0
2023-05-26 23:17:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456588166729728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:17:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456609129861120[0;39m 生成今日电子书快照开始
2023-05-26 23:17:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456609129861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:17:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456609129861120[0;39m ==> Parameters: 
2023-05-26 23:17:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456609129861120[0;39m <==    Updates: 0
2023-05-26 23:17:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456609129861120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456630063632384[0;39m 生成今日电子书快照开始
2023-05-26 23:18:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456630063632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456630063632384[0;39m ==> Parameters: 
2023-05-26 23:18:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456630063632384[0;39m <==    Updates: 0
2023-05-26 23:18:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456630063632384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-26 23:18:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456651056123904[0;39m 生成今日电子书快照开始
2023-05-26 23:18:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456651056123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456651056123904[0;39m ==> Parameters: 
2023-05-26 23:18:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456651056123904[0;39m <==    Updates: 0
2023-05-26 23:18:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456651056123904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:18:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119456651060318208[0;39m 更新电子书下的文档数据开始
2023-05-26 23:18:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456651060318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:18:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456651060318208[0;39m ==> Parameters: 
2023-05-26 23:18:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456651060318208[0;39m <==    Updates: 8
2023-05-26 23:18:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119456651060318208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:18:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456672044421120[0;39m 生成今日电子书快照开始
2023-05-26 23:18:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456672044421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456672044421120[0;39m ==> Parameters: 
2023-05-26 23:18:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456672044421120[0;39m <==    Updates: 0
2023-05-26 23:18:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456672044421120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:18:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456692965609472[0;39m 生成今日电子书快照开始
2023-05-26 23:18:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456692965609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456692965609472[0;39m ==> Parameters: 
2023-05-26 23:18:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456692965609472[0;39m <==    Updates: 0
2023-05-26 23:18:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456692965609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456713937129472[0;39m 生成今日电子书快照开始
2023-05-26 23:18:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456713937129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456713937129472[0;39m ==> Parameters: 
2023-05-26 23:18:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456713937129472[0;39m <==    Updates: 0
2023-05-26 23:18:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456713937129472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456734917038080[0;39m 生成今日电子书快照开始
2023-05-26 23:18:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456734917038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456734917038080[0;39m ==> Parameters: 
2023-05-26 23:18:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456734917038080[0;39m <==    Updates: 0
2023-05-26 23:18:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456734917038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456755909529600[0;39m 生成今日电子书快照开始
2023-05-26 23:18:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456755909529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456755909529600[0;39m ==> Parameters: 
2023-05-26 23:18:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456755909529600[0;39m <==    Updates: 0
2023-05-26 23:18:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456755909529600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456776851689472[0;39m 生成今日电子书快照开始
2023-05-26 23:18:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456776851689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456776851689472[0;39m ==> Parameters: 
2023-05-26 23:18:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456776851689472[0;39m <==    Updates: 0
2023-05-26 23:18:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456776851689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119456776860078080[0;39m 更新电子书下的文档数据开始
2023-05-26 23:18:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456776860078080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:18:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456776860078080[0;39m ==> Parameters: 
2023-05-26 23:18:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456776860078080[0;39m <==    Updates: 8
2023-05-26 23:18:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119456776860078080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:18:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456797844180992[0;39m 生成今日电子书快照开始
2023-05-26 23:18:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456797844180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456797844180992[0;39m ==> Parameters: 
2023-05-26 23:18:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456797844180992[0;39m <==    Updates: 0
2023-05-26 23:18:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456797844180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456818807312384[0;39m 生成今日电子书快照开始
2023-05-26 23:18:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456818807312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456818807312384[0;39m ==> Parameters: 
2023-05-26 23:18:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456818807312384[0;39m <==    Updates: 0
2023-05-26 23:18:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456818807312384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456839770443776[0;39m 生成今日电子书快照开始
2023-05-26 23:18:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456839770443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456839770443776[0;39m ==> Parameters: 
2023-05-26 23:18:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456839770443776[0;39m <==    Updates: 0
2023-05-26 23:18:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456839770443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:18:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456860767129600[0;39m 生成今日电子书快照开始
2023-05-26 23:18:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456860767129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:18:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456860767129600[0;39m ==> Parameters: 
2023-05-26 23:18:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456860767129600[0;39m <==    Updates: 0
2023-05-26 23:18:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456860767129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:19:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456881717678080[0;39m 生成今日电子书快照开始
2023-05-26 23:19:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456881717678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456881717678080[0;39m ==> Parameters: 
2023-05-26 23:19:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456881717678080[0;39m <==    Updates: 0
2023-05-26 23:19:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456881717678080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:19:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119456902735335424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:19:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456902735335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:19:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456902735335424[0;39m ==> Parameters: 
2023-05-26 23:19:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119456902735335424[0;39m <==    Updates: 8
2023-05-26 23:19:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119456902735335424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:19:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456902743724032[0;39m 生成今日电子书快照开始
2023-05-26 23:19:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456902743724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456902743724032[0;39m ==> Parameters: 
2023-05-26 23:19:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456902743724032[0;39m <==    Updates: 0
2023-05-26 23:19:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456902743724032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:19:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456923702661120[0;39m 生成今日电子书快照开始
2023-05-26 23:19:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456923702661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456923702661120[0;39m ==> Parameters: 
2023-05-26 23:19:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456923702661120[0;39m <==    Updates: 0
2023-05-26 23:19:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456923702661120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:19:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456944678375424[0;39m 生成今日电子书快照开始
2023-05-26 23:19:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456944678375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456944678375424[0;39m ==> Parameters: 
2023-05-26 23:19:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456944678375424[0;39m <==    Updates: 0
2023-05-26 23:19:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456944678375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:19:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456965649895424[0;39m 生成今日电子书快照开始
2023-05-26 23:19:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456965649895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456965649895424[0;39m ==> Parameters: 
2023-05-26 23:19:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456965649895424[0;39m <==    Updates: 0
2023-05-26 23:19:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456965649895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:19:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119456986592055296[0;39m 生成今日电子书快照开始
2023-05-26 23:19:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456986592055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456986592055296[0;39m ==> Parameters: 
2023-05-26 23:19:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119456986592055296[0;39m <==    Updates: 0
2023-05-26 23:19:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119456986592055296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:19:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457007597129728[0;39m 生成今日电子书快照开始
2023-05-26 23:19:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457007597129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457007597129728[0;39m ==> Parameters: 
2023-05-26 23:19:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457007597129728[0;39m <==    Updates: 0
2023-05-26 23:19:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457007597129728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:19:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119457028543483904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:19:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457028543483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:19:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457028543483904[0;39m ==> Parameters: 
2023-05-26 23:19:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457028543483904[0;39m <==    Updates: 8
2023-05-26 23:19:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119457028543483904[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:19:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457028543483905[0;39m 生成今日电子书快照开始
2023-05-26 23:19:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457028543483905[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457028543483905[0;39m ==> Parameters: 
2023-05-26 23:19:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457028543483905[0;39m <==    Updates: 0
2023-05-26 23:19:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457028543483905[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:19:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457049510809600[0;39m 生成今日电子书快照开始
2023-05-26 23:19:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457049510809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457049510809600[0;39m ==> Parameters: 
2023-05-26 23:19:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457049510809600[0;39m <==    Updates: 0
2023-05-26 23:19:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457049510809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:19:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457070465552384[0;39m 生成今日电子书快照开始
2023-05-26 23:19:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457070465552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457070465552384[0;39m ==> Parameters: 
2023-05-26 23:19:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457070465552384[0;39m <==    Updates: 0
2023-05-26 23:19:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457070465552384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:19:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457091462238208[0;39m 生成今日电子书快照开始
2023-05-26 23:19:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457091462238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457091462238208[0;39m ==> Parameters: 
2023-05-26 23:19:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457091462238208[0;39m <==    Updates: 0
2023-05-26 23:19:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457091462238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:19:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457112437952512[0;39m 生成今日电子书快照开始
2023-05-26 23:19:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457112437952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:19:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457112437952512[0;39m ==> Parameters: 
2023-05-26 23:19:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457112437952512[0;39m <==    Updates: 0
2023-05-26 23:19:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457112437952512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:20:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457133401083904[0;39m 生成今日电子书快照开始
2023-05-26 23:20:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457133401083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457133401083904[0;39m ==> Parameters: 
2023-05-26 23:20:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457133401083904[0;39m <==    Updates: 0
2023-05-26 23:20:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457133401083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:20:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457154393575424[0;39m 生成今日电子书快照开始
2023-05-26 23:20:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457154393575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457154393575424[0;39m ==> Parameters: 
2023-05-26 23:20:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457154393575424[0;39m <==    Updates: 0
2023-05-26 23:20:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457154393575424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:20:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119457154410352640[0;39m 更新电子书下的文档数据开始
2023-05-26 23:20:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457154410352640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:20:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457154410352640[0;39m ==> Parameters: 
2023-05-26 23:20:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457154410352640[0;39m <==    Updates: 8
2023-05-26 23:20:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119457154410352640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:20:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457175352512512[0;39m 生成今日电子书快照开始
2023-05-26 23:20:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457175352512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457175352512512[0;39m ==> Parameters: 
2023-05-26 23:20:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457175352512512[0;39m <==    Updates: 0
2023-05-26 23:20:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457175352512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:20:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457196332421120[0;39m 生成今日电子书快照开始
2023-05-26 23:20:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457196332421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457196332421120[0;39m ==> Parameters: 
2023-05-26 23:20:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457196332421120[0;39m <==    Updates: 0
2023-05-26 23:20:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457196332421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:20:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457217261998080[0;39m 生成今日电子书快照开始
2023-05-26 23:20:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457217261998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457217261998080[0;39m ==> Parameters: 
2023-05-26 23:20:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457217261998080[0;39m <==    Updates: 0
2023-05-26 23:20:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457217261998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:20:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457238229323776[0;39m 生成今日电子书快照开始
2023-05-26 23:20:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457238229323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457238229323776[0;39m ==> Parameters: 
2023-05-26 23:20:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457238229323776[0;39m <==    Updates: 0
2023-05-26 23:20:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457238229323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:20:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457259226009600[0;39m 生成今日电子书快照开始
2023-05-26 23:20:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457259226009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457259226009600[0;39m ==> Parameters: 
2023-05-26 23:20:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457259226009600[0;39m <==    Updates: 0
2023-05-26 23:20:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457259226009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:20:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119457280172363776[0;39m 更新电子书下的文档数据开始
2023-05-26 23:20:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457280172363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:20:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457280172363776[0;39m ==> Parameters: 
2023-05-26 23:20:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457280172363776[0;39m <==    Updates: 8
2023-05-26 23:20:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119457280172363776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:20:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457280180752384[0;39m 生成今日电子书快照开始
2023-05-26 23:20:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457280180752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457280180752384[0;39m ==> Parameters: 
2023-05-26 23:20:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457280180752384[0;39m <==    Updates: 0
2023-05-26 23:20:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457280180752384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:20:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457301156466688[0;39m 生成今日电子书快照开始
2023-05-26 23:20:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457301156466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457301156466688[0;39m ==> Parameters: 
2023-05-26 23:20:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457301156466688[0;39m <==    Updates: 0
2023-05-26 23:20:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457301156466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:20:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457322127986688[0;39m 生成今日电子书快照开始
2023-05-26 23:20:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457322127986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457322127986688[0;39m ==> Parameters: 
2023-05-26 23:20:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457322127986688[0;39m <==    Updates: 0
2023-05-26 23:20:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457322127986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:20:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457343095312384[0;39m 生成今日电子书快照开始
2023-05-26 23:20:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457343095312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457343095312384[0;39m ==> Parameters: 
2023-05-26 23:20:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457343095312384[0;39m <==    Updates: 0
2023-05-26 23:20:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457343095312384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:20:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457364117164032[0;39m 生成今日电子书快照开始
2023-05-26 23:20:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457364117164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:20:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457364117164032[0;39m ==> Parameters: 
2023-05-26 23:20:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457364117164032[0;39m <==    Updates: 0
2023-05-26 23:20:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457364117164032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:21:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457385080295424[0;39m 生成今日电子书快照开始
2023-05-26 23:21:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457385080295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457385080295424[0;39m ==> Parameters: 
2023-05-26 23:21:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457385080295424[0;39m <==    Updates: 0
2023-05-26 23:21:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457385080295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:21:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119457406030843904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:21:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457406030843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:21:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457406030843904[0;39m ==> Parameters: 
2023-05-26 23:21:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457406030843904[0;39m <==    Updates: 8
2023-05-26 23:21:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119457406030843904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:21:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457406039232512[0;39m 生成今日电子书快照开始
2023-05-26 23:21:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457406039232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457406039232512[0;39m ==> Parameters: 
2023-05-26 23:21:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457406039232512[0;39m <==    Updates: 0
2023-05-26 23:21:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457406039232512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:21:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457427002363904[0;39m 生成今日电子书快照开始
2023-05-26 23:21:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457427002363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457427002363904[0;39m ==> Parameters: 
2023-05-26 23:21:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457427002363904[0;39m <==    Updates: 0
2023-05-26 23:21:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457427002363904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:21:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457448003244032[0;39m 生成今日电子书快照开始
2023-05-26 23:21:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457448003244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457448003244032[0;39m ==> Parameters: 
2023-05-26 23:21:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457448003244032[0;39m <==    Updates: 0
2023-05-26 23:21:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457448003244032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:21:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457468962181120[0;39m 生成今日电子书快照开始
2023-05-26 23:21:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457468962181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457468962181120[0;39m ==> Parameters: 
2023-05-26 23:21:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457468962181120[0;39m <==    Updates: 0
2023-05-26 23:21:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457468962181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:21:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457489937895424[0;39m 生成今日电子书快照开始
2023-05-26 23:21:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457489937895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457489937895424[0;39m ==> Parameters: 
2023-05-26 23:21:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457489937895424[0;39m <==    Updates: 0
2023-05-26 23:21:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457489937895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:21:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457510892638208[0;39m 生成今日电子书快照开始
2023-05-26 23:21:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457510892638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457510892638208[0;39m ==> Parameters: 
2023-05-26 23:21:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457510892638208[0;39m <==    Updates: 0
2023-05-26 23:21:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457510892638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:21:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119457531847380992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:21:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457531847380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:21:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457531847380992[0;39m ==> Parameters: 
2023-05-26 23:21:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457531847380992[0;39m <==    Updates: 8
2023-05-26 23:21:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119457531847380992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:21:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457531855769600[0;39m 生成今日电子书快照开始
2023-05-26 23:21:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457531855769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457531855769600[0;39m ==> Parameters: 
2023-05-26 23:21:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457531855769600[0;39m <==    Updates: 0
2023-05-26 23:21:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457531855769600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:21:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457552806318080[0;39m 生成今日电子书快照开始
2023-05-26 23:21:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457552806318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457552806318080[0;39m ==> Parameters: 
2023-05-26 23:21:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457552806318080[0;39m <==    Updates: 0
2023-05-26 23:21:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457552806318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:21:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457573828169728[0;39m 生成今日电子书快照开始
2023-05-26 23:21:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457573828169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457573828169728[0;39m ==> Parameters: 
2023-05-26 23:21:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457573828169728[0;39m <==    Updates: 0
2023-05-26 23:21:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457573828169728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:21:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457594740969472[0;39m 生成今日电子书快照开始
2023-05-26 23:21:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457594740969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457594740969472[0;39m ==> Parameters: 
2023-05-26 23:21:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457594740969472[0;39m <==    Updates: 0
2023-05-26 23:21:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457594740969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:21:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457615767015424[0;39m 生成今日电子书快照开始
2023-05-26 23:21:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457615767015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:21:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457615767015424[0;39m ==> Parameters: 
2023-05-26 23:21:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457615767015424[0;39m <==    Updates: 0
2023-05-26 23:21:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457615767015424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:22:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457636709175296[0;39m 生成今日电子书快照开始
2023-05-26 23:22:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457636709175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457636709175296[0;39m ==> Parameters: 
2023-05-26 23:22:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457636709175296[0;39m <==    Updates: 0
2023-05-26 23:22:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457636709175296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:22:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119457657659723776[0;39m 更新电子书下的文档数据开始
2023-05-26 23:22:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457657659723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:22:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457657659723776[0;39m ==> Parameters: 
2023-05-26 23:22:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457657659723776[0;39m <==    Updates: 8
2023-05-26 23:22:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119457657659723776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:22:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457657668112384[0;39m 生成今日电子书快照开始
2023-05-26 23:22:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457657668112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457657668112384[0;39m ==> Parameters: 
2023-05-26 23:22:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457657668112384[0;39m <==    Updates: 0
2023-05-26 23:22:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457657668112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:22:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457678648020992[0;39m 生成今日电子书快照开始
2023-05-26 23:22:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457678648020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457678648020992[0;39m ==> Parameters: 
2023-05-26 23:22:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457678648020992[0;39m <==    Updates: 0
2023-05-26 23:22:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457678648020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:22:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457699640512512[0;39m 生成今日电子书快照开始
2023-05-26 23:22:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457699640512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457699640512512[0;39m ==> Parameters: 
2023-05-26 23:22:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457699640512512[0;39m <==    Updates: 0
2023-05-26 23:22:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457699640512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:22:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457720574283776[0;39m 生成今日电子书快照开始
2023-05-26 23:22:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457720574283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457720574283776[0;39m ==> Parameters: 
2023-05-26 23:22:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457720574283776[0;39m <==    Updates: 0
2023-05-26 23:22:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457720574283776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:22:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457741545803776[0;39m 生成今日电子书快照开始
2023-05-26 23:22:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457741545803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457741545803776[0;39m ==> Parameters: 
2023-05-26 23:22:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457741545803776[0;39m <==    Updates: 0
2023-05-26 23:22:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457741545803776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-26 23:22:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457762555072512[0;39m 生成今日电子书快照开始
2023-05-26 23:22:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457762555072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457762555072512[0;39m ==> Parameters: 
2023-05-26 23:22:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457762555072512[0;39m <==    Updates: 0
2023-05-26 23:22:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457762555072512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:22:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457783547564032[0;39m 生成今日电子书快照开始
2023-05-26 23:22:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457783547564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457783547564032[0;39m ==> Parameters: 
2023-05-26 23:22:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457783547564032[0;39m <==    Updates: 0
2023-05-26 23:22:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457783547564032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:22:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119457783555952640[0;39m 更新电子书下的文档数据开始
2023-05-26 23:22:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457783555952640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:22:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457783555952640[0;39m ==> Parameters: 
2023-05-26 23:22:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457783555952640[0;39m <==    Updates: 8
2023-05-26 23:22:35.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119457783555952640[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:22:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457804498112512[0;39m 生成今日电子书快照开始
2023-05-26 23:22:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457804498112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457804498112512[0;39m ==> Parameters: 
2023-05-26 23:22:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457804498112512[0;39m <==    Updates: 0
2023-05-26 23:22:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457804498112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:22:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457825431883776[0;39m 生成今日电子书快照开始
2023-05-26 23:22:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457825431883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457825431883776[0;39m ==> Parameters: 
2023-05-26 23:22:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457825431883776[0;39m <==    Updates: 0
2023-05-26 23:22:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457825431883776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:22:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457846399209472[0;39m 生成今日电子书快照开始
2023-05-26 23:22:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457846399209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457846399209472[0;39m ==> Parameters: 
2023-05-26 23:22:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457846399209472[0;39m <==    Updates: 0
2023-05-26 23:22:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457846399209472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:22:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457867429449728[0;39m 生成今日电子书快照开始
2023-05-26 23:22:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457867429449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:22:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457867429449728[0;39m ==> Parameters: 
2023-05-26 23:22:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457867429449728[0;39m <==    Updates: 0
2023-05-26 23:22:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457867429449728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:23:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457888359026688[0;39m 生成今日电子书快照开始
2023-05-26 23:23:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457888359026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457888359026688[0;39m ==> Parameters: 
2023-05-26 23:23:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457888359026688[0;39m <==    Updates: 0
2023-05-26 23:23:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457888359026688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:23:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457909334740992[0;39m 生成今日电子书快照开始
2023-05-26 23:23:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457909334740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457909334740992[0;39m ==> Parameters: 
2023-05-26 23:23:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457909334740992[0;39m <==    Updates: 0
2023-05-26 23:23:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457909334740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:23:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119457909343129600[0;39m 更新电子书下的文档数据开始
2023-05-26 23:23:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457909343129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:23:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457909343129600[0;39m ==> Parameters: 
2023-05-26 23:23:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119457909343129600[0;39m <==    Updates: 8
2023-05-26 23:23:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119457909343129600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:23:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457930285289472[0;39m 生成今日电子书快照开始
2023-05-26 23:23:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457930285289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457930285289472[0;39m ==> Parameters: 
2023-05-26 23:23:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457930285289472[0;39m <==    Updates: 0
2023-05-26 23:23:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457930285289472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:23:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457951298752512[0;39m 生成今日电子书快照开始
2023-05-26 23:23:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457951298752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457951298752512[0;39m ==> Parameters: 
2023-05-26 23:23:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457951298752512[0;39m <==    Updates: 0
2023-05-26 23:23:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457951298752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:23:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457972228329472[0;39m 生成今日电子书快照开始
2023-05-26 23:23:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457972228329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457972228329472[0;39m ==> Parameters: 
2023-05-26 23:23:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457972228329472[0;39m <==    Updates: 0
2023-05-26 23:23:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457972228329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:23:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119457993258569728[0;39m 生成今日电子书快照开始
2023-05-26 23:23:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457993258569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457993258569728[0;39m ==> Parameters: 
2023-05-26 23:23:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119457993258569728[0;39m <==    Updates: 0
2023-05-26 23:23:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119457993258569728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:23:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458014183952384[0;39m 生成今日电子书快照开始
2023-05-26 23:23:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458014183952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458014183952384[0;39m ==> Parameters: 
2023-05-26 23:23:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458014183952384[0;39m <==    Updates: 0
2023-05-26 23:23:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458014183952384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:23:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119458035155472384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:23:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458035155472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:23:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458035155472384[0;39m ==> Parameters: 
2023-05-26 23:23:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458035155472384[0;39m <==    Updates: 8
2023-05-26 23:23:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119458035155472384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:23:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458035159666688[0;39m 生成今日电子书快照开始
2023-05-26 23:23:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458035159666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458035159666688[0;39m ==> Parameters: 
2023-05-26 23:23:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458035159666688[0;39m <==    Updates: 0
2023-05-26 23:23:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458035159666688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:23:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458056147963904[0;39m 生成今日电子书快照开始
2023-05-26 23:23:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458056147963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458056147963904[0;39m ==> Parameters: 
2023-05-26 23:23:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458056147963904[0;39m <==    Updates: 0
2023-05-26 23:23:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458056147963904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:23:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458077123678208[0;39m 生成今日电子书快照开始
2023-05-26 23:23:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458077123678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458077123678208[0;39m ==> Parameters: 
2023-05-26 23:23:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458077123678208[0;39m <==    Updates: 0
2023-05-26 23:23:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458077123678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:23:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458098078420992[0;39m 生成今日电子书快照开始
2023-05-26 23:23:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458098078420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458098078420992[0;39m ==> Parameters: 
2023-05-26 23:23:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458098078420992[0;39m <==    Updates: 0
2023-05-26 23:23:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458098078420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:23:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458119070912512[0;39m 生成今日电子书快照开始
2023-05-26 23:23:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458119070912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:23:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458119070912512[0;39m ==> Parameters: 
2023-05-26 23:23:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458119070912512[0;39m <==    Updates: 0
2023-05-26 23:23:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458119070912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:24:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458140013072384[0;39m 生成今日电子书快照开始
2023-05-26 23:24:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458140013072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458140013072384[0;39m ==> Parameters: 
2023-05-26 23:24:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458140013072384[0;39m <==    Updates: 0
2023-05-26 23:24:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458140013072384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:24:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458160992980992[0;39m 生成今日电子书快照开始
2023-05-26 23:24:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458160992980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458160992980992[0;39m ==> Parameters: 
2023-05-26 23:24:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458160992980992[0;39m <==    Updates: 0
2023-05-26 23:24:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458160992980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:24:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119458161001369600[0;39m 更新电子书下的文档数据开始
2023-05-26 23:24:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458161001369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:24:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458161001369600[0;39m ==> Parameters: 
2023-05-26 23:24:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458161001369600[0;39m <==    Updates: 8
2023-05-26 23:24:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119458161001369600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:24:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458181981278208[0;39m 生成今日电子书快照开始
2023-05-26 23:24:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458181981278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458181981278208[0;39m ==> Parameters: 
2023-05-26 23:24:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458181981278208[0;39m <==    Updates: 0
2023-05-26 23:24:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458181981278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:24:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458202936020992[0;39m 生成今日电子书快照开始
2023-05-26 23:24:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458202936020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458202936020992[0;39m ==> Parameters: 
2023-05-26 23:24:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458202936020992[0;39m <==    Updates: 0
2023-05-26 23:24:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458202936020992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:24:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458223907540992[0;39m 生成今日电子书快照开始
2023-05-26 23:24:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458223907540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458223907540992[0;39m ==> Parameters: 
2023-05-26 23:24:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458223907540992[0;39m <==    Updates: 0
2023-05-26 23:24:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458223907540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:24:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458244904226816[0;39m 生成今日电子书快照开始
2023-05-26 23:24:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458244904226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458244904226816[0;39m ==> Parameters: 
2023-05-26 23:24:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458244904226816[0;39m <==    Updates: 0
2023-05-26 23:24:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458244904226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:24:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458265879941120[0;39m 生成今日电子书快照开始
2023-05-26 23:24:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458265879941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458265879941120[0;39m ==> Parameters: 
2023-05-26 23:24:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458265879941120[0;39m <==    Updates: 0
2023-05-26 23:24:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458265879941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:24:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119458286864044032[0;39m 更新电子书下的文档数据开始
2023-05-26 23:24:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458286864044032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:24:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458286864044032[0;39m ==> Parameters: 
2023-05-26 23:24:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458286864044032[0;39m <==    Updates: 8
2023-05-26 23:24:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119458286864044032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:24:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458286868238336[0;39m 生成今日电子书快照开始
2023-05-26 23:24:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458286868238336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458286868238336[0;39m ==> Parameters: 
2023-05-26 23:24:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458286868238336[0;39m <==    Updates: 0
2023-05-26 23:24:35.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458286868238336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:24:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458307814592512[0;39m 生成今日电子书快照开始
2023-05-26 23:24:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458307814592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458307814592512[0;39m ==> Parameters: 
2023-05-26 23:24:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458307814592512[0;39m <==    Updates: 0
2023-05-26 23:24:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458307814592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:24:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458328798695424[0;39m 生成今日电子书快照开始
2023-05-26 23:24:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458328798695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458328798695424[0;39m ==> Parameters: 
2023-05-26 23:24:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458328798695424[0;39m <==    Updates: 0
2023-05-26 23:24:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458328798695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:24:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458349761826816[0;39m 生成今日电子书快照开始
2023-05-26 23:24:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458349761826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458349761826816[0;39m ==> Parameters: 
2023-05-26 23:24:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458349761826816[0;39m <==    Updates: 0
2023-05-26 23:24:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458349761826816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:24:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458370733346816[0;39m 生成今日电子书快照开始
2023-05-26 23:24:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458370733346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:24:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458370733346816[0;39m ==> Parameters: 
2023-05-26 23:24:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458370733346816[0;39m <==    Updates: 0
2023-05-26 23:24:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458370733346816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458391671312384[0;39m 生成今日电子书快照开始
2023-05-26 23:25:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458391671312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458391671312384[0;39m ==> Parameters: 
2023-05-26 23:25:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458391671312384[0;39m <==    Updates: 0
2023-05-26 23:25:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458391671312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:25:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458412667998208[0;39m 生成今日电子书快照开始
2023-05-26 23:25:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458412667998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458412667998208[0;39m ==> Parameters: 
2023-05-26 23:25:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458412667998208[0;39m <==    Updates: 0
2023-05-26 23:25:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458412667998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119458412676386816[0;39m 更新电子书下的文档数据开始
2023-05-26 23:25:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458412676386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:25:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458412676386816[0;39m ==> Parameters: 
2023-05-26 23:25:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458412676386816[0;39m <==    Updates: 8
2023-05-26 23:25:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119458412676386816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:25:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458433647906816[0;39m 生成今日电子书快照开始
2023-05-26 23:25:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458433647906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458433647906816[0;39m ==> Parameters: 
2023-05-26 23:25:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458433647906816[0;39m <==    Updates: 0
2023-05-26 23:25:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458433647906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458454611038208[0;39m 生成今日电子书快照开始
2023-05-26 23:25:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458454611038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458454611038208[0;39m ==> Parameters: 
2023-05-26 23:25:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458454611038208[0;39m <==    Updates: 0
2023-05-26 23:25:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458454611038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458475561586688[0;39m 生成今日电子书快照开始
2023-05-26 23:25:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458475561586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458475561586688[0;39m ==> Parameters: 
2023-05-26 23:25:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458475561586688[0;39m <==    Updates: 0
2023-05-26 23:25:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458475561586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458496554078208[0;39m 生成今日电子书快照开始
2023-05-26 23:25:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458496554078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458496554078208[0;39m ==> Parameters: 
2023-05-26 23:25:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458496554078208[0;39m <==    Updates: 0
2023-05-26 23:25:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458496554078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458517487849472[0;39m 生成今日电子书快照开始
2023-05-26 23:25:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458517487849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458517487849472[0;39m ==> Parameters: 
2023-05-26 23:25:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458517487849472[0;39m <==    Updates: 0
2023-05-26 23:25:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458517487849472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458538480340992[0;39m 生成今日电子书快照开始
2023-05-26 23:25:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458538480340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458538480340992[0;39m ==> Parameters: 
2023-05-26 23:25:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458538480340992[0;39m <==    Updates: 0
2023-05-26 23:25:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458538480340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119458538488729600[0;39m 更新电子书下的文档数据开始
2023-05-26 23:25:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458538488729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:25:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458538488729600[0;39m ==> Parameters: 
2023-05-26 23:25:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458538488729600[0;39m <==    Updates: 8
2023-05-26 23:25:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119458538488729600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:25:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458559464443904[0;39m 生成今日电子书快照开始
2023-05-26 23:25:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458559464443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458559464443904[0;39m ==> Parameters: 
2023-05-26 23:25:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458559464443904[0;39m <==    Updates: 0
2023-05-26 23:25:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458559464443904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458580431769600[0;39m 生成今日电子书快照开始
2023-05-26 23:25:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458580431769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458580431769600[0;39m ==> Parameters: 
2023-05-26 23:25:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458580431769600[0;39m <==    Updates: 0
2023-05-26 23:25:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458580431769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458601432649728[0;39m 生成今日电子书快照开始
2023-05-26 23:25:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458601432649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458601432649728[0;39m ==> Parameters: 
2023-05-26 23:25:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458601432649728[0;39m <==    Updates: 0
2023-05-26 23:25:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458601432649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:25:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458622374809600[0;39m 生成今日电子书快照开始
2023-05-26 23:25:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458622374809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:25:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458622374809600[0;39m ==> Parameters: 
2023-05-26 23:25:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458622374809600[0;39m <==    Updates: 0
2023-05-26 23:25:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458622374809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:26:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458643337940992[0;39m 生成今日电子书快照开始
2023-05-26 23:26:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458643337940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458643337940992[0;39m ==> Parameters: 
2023-05-26 23:26:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458643337940992[0;39m <==    Updates: 0
2023-05-26 23:26:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458643337940992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:26:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458664330432512[0;39m 生成今日电子书快照开始
2023-05-26 23:26:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458664330432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458664330432512[0;39m ==> Parameters: 
2023-05-26 23:26:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458664330432512[0;39m <==    Updates: 0
2023-05-26 23:26:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458664330432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:26:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119458664338821120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:26:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458664338821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:26:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458664338821120[0;39m ==> Parameters: 
2023-05-26 23:26:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458664338821120[0;39m <==    Updates: 8
2023-05-26 23:26:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119458664338821120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:26:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458685306146816[0;39m 生成今日电子书快照开始
2023-05-26 23:26:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458685306146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458685306146816[0;39m ==> Parameters: 
2023-05-26 23:26:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458685306146816[0;39m <==    Updates: 0
2023-05-26 23:26:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458685306146816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:26:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458706294444032[0;39m 生成今日电子书快照开始
2023-05-26 23:26:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458706294444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458706294444032[0;39m ==> Parameters: 
2023-05-26 23:26:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458706294444032[0;39m <==    Updates: 0
2023-05-26 23:26:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458706294444032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:26:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458727249186816[0;39m 生成今日电子书快照开始
2023-05-26 23:26:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458727249186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458727249186816[0;39m ==> Parameters: 
2023-05-26 23:26:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458727249186816[0;39m <==    Updates: 0
2023-05-26 23:26:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458727249186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:26:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458748237484032[0;39m 生成今日电子书快照开始
2023-05-26 23:26:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458748237484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458748237484032[0;39m ==> Parameters: 
2023-05-26 23:26:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458748237484032[0;39m <==    Updates: 0
2023-05-26 23:26:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458748237484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:26:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458769204809728[0;39m 生成今日电子书快照开始
2023-05-26 23:26:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458769204809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458769204809728[0;39m ==> Parameters: 
2023-05-26 23:26:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458769204809728[0;39m <==    Updates: 0
2023-05-26 23:26:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458769204809728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:26:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119458790167941120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:26:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458790167941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:26:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458790167941120[0;39m ==> Parameters: 
2023-05-26 23:26:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458790167941120[0;39m <==    Updates: 8
2023-05-26 23:26:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119458790167941120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:26:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458790176329728[0;39m 生成今日电子书快照开始
2023-05-26 23:26:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458790176329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458790176329728[0;39m ==> Parameters: 
2023-05-26 23:26:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458790176329728[0;39m <==    Updates: 0
2023-05-26 23:26:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458790176329728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:26:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458811101712384[0;39m 生成今日电子书快照开始
2023-05-26 23:26:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458811101712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458811101712384[0;39m ==> Parameters: 
2023-05-26 23:26:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458811101712384[0;39m <==    Updates: 0
2023-05-26 23:26:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458811101712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:26:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458832060649472[0;39m 生成今日电子书快照开始
2023-05-26 23:26:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458832060649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458832060649472[0;39m ==> Parameters: 
2023-05-26 23:26:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458832060649472[0;39m <==    Updates: 0
2023-05-26 23:26:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458832060649472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:26:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458853044752384[0;39m 生成今日电子书快照开始
2023-05-26 23:26:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458853044752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458853044752384[0;39m ==> Parameters: 
2023-05-26 23:26:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458853044752384[0;39m <==    Updates: 0
2023-05-26 23:26:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458853044752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:26:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458874045632512[0;39m 生成今日电子书快照开始
2023-05-26 23:26:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458874045632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:26:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458874045632512[0;39m ==> Parameters: 
2023-05-26 23:26:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458874045632512[0;39m <==    Updates: 0
2023-05-26 23:26:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458874045632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458895008763904[0;39m 生成今日电子书快照开始
2023-05-26 23:27:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458895008763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458895008763904[0;39m ==> Parameters: 
2023-05-26 23:27:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458895008763904[0;39m <==    Updates: 0
2023-05-26 23:27:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458895008763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119458915963506688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:27:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458915963506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:27:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458915963506688[0;39m ==> Parameters: 
2023-05-26 23:27:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119458915963506688[0;39m <==    Updates: 8
2023-05-26 23:27:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119458915963506688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:27:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458915967700992[0;39m 生成今日电子书快照开始
2023-05-26 23:27:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458915967700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458915967700992[0;39m ==> Parameters: 
2023-05-26 23:27:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458915967700992[0;39m <==    Updates: 0
2023-05-26 23:27:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458915967700992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:27:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458936918249472[0;39m 生成今日电子书快照开始
2023-05-26 23:27:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458936918249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458936918249472[0;39m ==> Parameters: 
2023-05-26 23:27:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458936918249472[0;39m <==    Updates: 0
2023-05-26 23:27:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458936918249472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:27:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458957919129600[0;39m 生成今日电子书快照开始
2023-05-26 23:27:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458957919129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458957919129600[0;39m ==> Parameters: 
2023-05-26 23:27:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458957919129600[0;39m <==    Updates: 0
2023-05-26 23:27:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458957919129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458978865483776[0;39m 生成今日电子书快照开始
2023-05-26 23:27:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458978865483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458978865483776[0;39m ==> Parameters: 
2023-05-26 23:27:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458978865483776[0;39m <==    Updates: 0
2023-05-26 23:27:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458978865483776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119458999874752512[0;39m 生成今日电子书快照开始
2023-05-26 23:27:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458999874752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458999874752512[0;39m ==> Parameters: 
2023-05-26 23:27:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119458999874752512[0;39m <==    Updates: 0
2023-05-26 23:27:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119458999874752512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:27:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459020816912384[0;39m 生成今日电子书快照开始
2023-05-26 23:27:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459020816912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459020816912384[0;39m ==> Parameters: 
2023-05-26 23:27:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459020816912384[0;39m <==    Updates: 0
2023-05-26 23:27:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459020816912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459041784238080[0;39m 生成今日电子书快照开始
2023-05-26 23:27:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459041784238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459041784238080[0;39m ==> Parameters: 
2023-05-26 23:27:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459041784238080[0;39m <==    Updates: 0
2023-05-26 23:27:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459041784238080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119459041792626688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:27:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459041792626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:27:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459041792626688[0;39m ==> Parameters: 
2023-05-26 23:27:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459041792626688[0;39m <==    Updates: 8
2023-05-26 23:27:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119459041792626688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:27:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459062776729600[0;39m 生成今日电子书快照开始
2023-05-26 23:27:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459062776729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459062776729600[0;39m ==> Parameters: 
2023-05-26 23:27:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459062776729600[0;39m <==    Updates: 0
2023-05-26 23:27:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459062776729600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459083727278080[0;39m 生成今日电子书快照开始
2023-05-26 23:27:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459083727278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459083727278080[0;39m ==> Parameters: 
2023-05-26 23:27:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459083727278080[0;39m <==    Updates: 0
2023-05-26 23:27:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459083727278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459104690409472[0;39m 生成今日电子书快照开始
2023-05-26 23:27:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459104690409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459104690409472[0;39m ==> Parameters: 
2023-05-26 23:27:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459104690409472[0;39m <==    Updates: 0
2023-05-26 23:27:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459104690409472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:27:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459125695483904[0;39m 生成今日电子书快照开始
2023-05-26 23:27:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459125695483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:27:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459125695483904[0;39m ==> Parameters: 
2023-05-26 23:27:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459125695483904[0;39m <==    Updates: 0
2023-05-26 23:27:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459125695483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459146641838080[0;39m 生成今日电子书快照开始
2023-05-26 23:28:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459146641838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459146641838080[0;39m ==> Parameters: 
2023-05-26 23:28:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459146641838080[0;39m <==    Updates: 0
2023-05-26 23:28:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459146641838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459167651106816[0;39m 生成今日电子书快照开始
2023-05-26 23:28:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459167651106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459167651106816[0;39m ==> Parameters: 
2023-05-26 23:28:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459167651106816[0;39m <==    Updates: 0
2023-05-26 23:28:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459167651106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119459167659495424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:28:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459167659495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:28:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459167659495424[0;39m ==> Parameters: 
2023-05-26 23:28:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459167659495424[0;39m <==    Updates: 8
2023-05-26 23:28:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119459167659495424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:28:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459188610043904[0;39m 生成今日电子书快照开始
2023-05-26 23:28:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459188610043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459188610043904[0;39m ==> Parameters: 
2023-05-26 23:28:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459188610043904[0;39m <==    Updates: 0
2023-05-26 23:28:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459188610043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459209610924032[0;39m 生成今日电子书快照开始
2023-05-26 23:28:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459209610924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459209610924032[0;39m ==> Parameters: 
2023-05-26 23:28:15.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459209610924032[0;39m <==    Updates: 0
2023-05-26 23:28:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459209610924032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:28:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459230527918080[0;39m 生成今日电子书快照开始
2023-05-26 23:28:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459230527918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459230527918080[0;39m ==> Parameters: 
2023-05-26 23:28:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459230527918080[0;39m <==    Updates: 0
2023-05-26 23:28:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459230527918080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:28:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459251524603904[0;39m 生成今日电子书快照开始
2023-05-26 23:28:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459251524603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459251524603904[0;39m ==> Parameters: 
2023-05-26 23:28:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459251524603904[0;39m <==    Updates: 0
2023-05-26 23:28:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459251524603904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459272512901120[0;39m 生成今日电子书快照开始
2023-05-26 23:28:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459272512901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459272512901120[0;39m ==> Parameters: 
2023-05-26 23:28:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459272512901120[0;39m <==    Updates: 0
2023-05-26 23:28:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459272512901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459293484421120[0;39m 生成今日电子书快照开始
2023-05-26 23:28:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459293484421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459293484421120[0;39m ==> Parameters: 
2023-05-26 23:28:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459293484421120[0;39m <==    Updates: 0
2023-05-26 23:28:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459293484421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119459293492809728[0;39m 更新电子书下的文档数据开始
2023-05-26 23:28:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459293492809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:28:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459293492809728[0;39m ==> Parameters: 
2023-05-26 23:28:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459293492809728[0;39m <==    Updates: 8
2023-05-26 23:28:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119459293492809728[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:28:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459314434969600[0;39m 生成今日电子书快照开始
2023-05-26 23:28:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459314434969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459314434969600[0;39m ==> Parameters: 
2023-05-26 23:28:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459314434969600[0;39m <==    Updates: 0
2023-05-26 23:28:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459314434969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:45.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459335372935168[0;39m 生成今日电子书快照开始
2023-05-26 23:28:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459335372935168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459335372935168[0;39m ==> Parameters: 
2023-05-26 23:28:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459335372935168[0;39m <==    Updates: 0
2023-05-26 23:28:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459335372935168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459356369620992[0;39m 生成今日电子书快照开始
2023-05-26 23:28:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459356369620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459356369620992[0;39m ==> Parameters: 
2023-05-26 23:28:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459356369620992[0;39m <==    Updates: 0
2023-05-26 23:28:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459356369620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:28:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459377374695424[0;39m 生成今日电子书快照开始
2023-05-26 23:28:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459377374695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:28:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459377374695424[0;39m ==> Parameters: 
2023-05-26 23:28:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459377374695424[0;39m <==    Updates: 0
2023-05-26 23:28:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459377374695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:29:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459398346215424[0;39m 生成今日电子书快照开始
2023-05-26 23:29:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459398346215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459398346215424[0;39m ==> Parameters: 
2023-05-26 23:29:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459398346215424[0;39m <==    Updates: 0
2023-05-26 23:29:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459398346215424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:29:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459419271598080[0;39m 生成今日电子书快照开始
2023-05-26 23:29:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459419271598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459419271598080[0;39m ==> Parameters: 
2023-05-26 23:29:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459419271598080[0;39m <==    Updates: 0
2023-05-26 23:29:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459419271598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:29:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119459419279986688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:29:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459419279986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:29:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459419279986688[0;39m ==> Parameters: 
2023-05-26 23:29:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459419279986688[0;39m <==    Updates: 8
2023-05-26 23:29:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119459419279986688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:29:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459440255700992[0;39m 生成今日电子书快照开始
2023-05-26 23:29:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459440255700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459440255700992[0;39m ==> Parameters: 
2023-05-26 23:29:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459440255700992[0;39m <==    Updates: 0
2023-05-26 23:29:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459440255700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:29:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459461264969728[0;39m 生成今日电子书快照开始
2023-05-26 23:29:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459461264969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459461264969728[0;39m ==> Parameters: 
2023-05-26 23:29:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459461264969728[0;39m <==    Updates: 0
2023-05-26 23:29:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459461264969728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:29:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459482181963776[0;39m 生成今日电子书快照开始
2023-05-26 23:29:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459482181963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459482181963776[0;39m ==> Parameters: 
2023-05-26 23:29:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459482181963776[0;39m <==    Updates: 0
2023-05-26 23:29:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459482181963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:29:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459503187038208[0;39m 生成今日电子书快照开始
2023-05-26 23:29:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459503187038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459503187038208[0;39m ==> Parameters: 
2023-05-26 23:29:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459503187038208[0;39m <==    Updates: 0
2023-05-26 23:29:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459503187038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:29:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459524162752512[0;39m 生成今日电子书快照开始
2023-05-26 23:29:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459524162752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459524162752512[0;39m ==> Parameters: 
2023-05-26 23:29:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459524162752512[0;39m <==    Updates: 0
2023-05-26 23:29:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459524162752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:29:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119459545151049728[0;39m 更新电子书下的文档数据开始
2023-05-26 23:29:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459545151049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:29:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459545151049728[0;39m ==> Parameters: 
2023-05-26 23:29:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459545151049728[0;39m <==    Updates: 8
2023-05-26 23:29:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119459545151049728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:29:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459545159438336[0;39m 生成今日电子书快照开始
2023-05-26 23:29:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459545159438336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459545159438336[0;39m ==> Parameters: 
2023-05-26 23:29:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459545159438336[0;39m <==    Updates: 0
2023-05-26 23:29:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459545159438336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:29:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459566114181120[0;39m 生成今日电子书快照开始
2023-05-26 23:29:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459566114181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459566114181120[0;39m ==> Parameters: 
2023-05-26 23:29:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459566114181120[0;39m <==    Updates: 0
2023-05-26 23:29:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459566114181120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:29:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459587081506816[0;39m 生成今日电子书快照开始
2023-05-26 23:29:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459587081506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459587081506816[0;39m ==> Parameters: 
2023-05-26 23:29:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459587081506816[0;39m <==    Updates: 0
2023-05-26 23:29:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459587081506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:29:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459608057221120[0;39m 生成今日电子书快照开始
2023-05-26 23:29:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459608057221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459608057221120[0;39m ==> Parameters: 
2023-05-26 23:29:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459608057221120[0;39m <==    Updates: 0
2023-05-26 23:29:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459608057221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:29:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459629003575296[0;39m 生成今日电子书快照开始
2023-05-26 23:29:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459629003575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:29:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459629003575296[0;39m ==> Parameters: 
2023-05-26 23:29:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459629003575296[0;39m <==    Updates: 0
2023-05-26 23:29:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459629003575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459649983483904[0;39m 生成今日电子书快照开始
2023-05-26 23:30:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459649983483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459649983483904[0;39m ==> Parameters: 
2023-05-26 23:30:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459649983483904[0;39m <==    Updates: 0
2023-05-26 23:30:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459649983483904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:30:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119459670946615296[0;39m 更新电子书下的文档数据开始
2023-05-26 23:30:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459670946615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:30:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459670946615296[0;39m ==> Parameters: 
2023-05-26 23:30:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459670946615296[0;39m <==    Updates: 8
2023-05-26 23:30:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119459670946615296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:30:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459670955003904[0;39m 生成今日电子书快照开始
2023-05-26 23:30:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459670955003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459670955003904[0;39m ==> Parameters: 
2023-05-26 23:30:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459670955003904[0;39m <==    Updates: 0
2023-05-26 23:30:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459670955003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459691901358080[0;39m 生成今日电子书快照开始
2023-05-26 23:30:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459691901358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459691901358080[0;39m ==> Parameters: 
2023-05-26 23:30:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459691901358080[0;39m <==    Updates: 0
2023-05-26 23:30:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459691901358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459712910626816[0;39m 生成今日电子书快照开始
2023-05-26 23:30:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459712910626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459712910626816[0;39m ==> Parameters: 
2023-05-26 23:30:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459712910626816[0;39m <==    Updates: 0
2023-05-26 23:30:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459712910626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459733869563904[0;39m 生成今日电子书快照开始
2023-05-26 23:30:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459733869563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459733869563904[0;39m ==> Parameters: 
2023-05-26 23:30:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459733869563904[0;39m <==    Updates: 0
2023-05-26 23:30:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459733869563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459754857861120[0;39m 生成今日电子书快照开始
2023-05-26 23:30:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459754857861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459754857861120[0;39m ==> Parameters: 
2023-05-26 23:30:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459754857861120[0;39m <==    Updates: 0
2023-05-26 23:30:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459754857861120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:30:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459775833575424[0;39m 生成今日电子书快照开始
2023-05-26 23:30:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459775833575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459775833575424[0;39m ==> Parameters: 
2023-05-26 23:30:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459775833575424[0;39m <==    Updates: 0
2023-05-26 23:30:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459775833575424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119459796763152384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:30:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459796763152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:30:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459796763152384[0;39m ==> Parameters: 
2023-05-26 23:30:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459796763152384[0;39m <==    Updates: 8
2023-05-26 23:30:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119459796763152384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:30:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459796767346688[0;39m 生成今日电子书快照开始
2023-05-26 23:30:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459796767346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459796767346688[0;39m ==> Parameters: 
2023-05-26 23:30:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459796767346688[0;39m <==    Updates: 0
2023-05-26 23:30:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459796767346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459817768226816[0;39m 生成今日电子书快照开始
2023-05-26 23:30:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459817768226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459817768226816[0;39m ==> Parameters: 
2023-05-26 23:30:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459817768226816[0;39m <==    Updates: 0
2023-05-26 23:30:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459817768226816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:30:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459838722969600[0;39m 生成今日电子书快照开始
2023-05-26 23:30:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459838722969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459838722969600[0;39m ==> Parameters: 
2023-05-26 23:30:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459838722969600[0;39m <==    Updates: 0
2023-05-26 23:30:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459838722969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459859707072512[0;39m 生成今日电子书快照开始
2023-05-26 23:30:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459859707072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459859707072512[0;39m ==> Parameters: 
2023-05-26 23:30:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459859707072512[0;39m <==    Updates: 0
2023-05-26 23:30:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459859707072512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:30:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459880645038080[0;39m 生成今日电子书快照开始
2023-05-26 23:30:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459880645038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:30:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459880645038080[0;39m ==> Parameters: 
2023-05-26 23:30:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459880645038080[0;39m <==    Updates: 0
2023-05-26 23:30:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459880645038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459901629140992[0;39m 生成今日电子书快照开始
2023-05-26 23:31:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459901629140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459901629140992[0;39m ==> Parameters: 
2023-05-26 23:31:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459901629140992[0;39m <==    Updates: 0
2023-05-26 23:31:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459901629140992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:31:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459922621632512[0;39m 生成今日电子书快照开始
2023-05-26 23:31:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459922621632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459922621632512[0;39m ==> Parameters: 
2023-05-26 23:31:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459922621632512[0;39m <==    Updates: 0
2023-05-26 23:31:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459922621632512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:31:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119459922625826816[0;39m 更新电子书下的文档数据开始
2023-05-26 23:31:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459922625826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:31:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459922625826816[0;39m ==> Parameters: 
2023-05-26 23:31:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119459922625826816[0;39m <==    Updates: 8
2023-05-26 23:31:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119459922625826816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:31:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459943593152512[0;39m 生成今日电子书快照开始
2023-05-26 23:31:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459943593152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459943593152512[0;39m ==> Parameters: 
2023-05-26 23:31:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459943593152512[0;39m <==    Updates: 0
2023-05-26 23:31:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459943593152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459964518535168[0;39m 生成今日电子书快照开始
2023-05-26 23:31:15.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459964518535168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459964518535168[0;39m ==> Parameters: 
2023-05-26 23:31:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459964518535168[0;39m <==    Updates: 0
2023-05-26 23:31:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459964518535168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119459985531998208[0;39m 生成今日电子书快照开始
2023-05-26 23:31:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459985531998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459985531998208[0;39m ==> Parameters: 
2023-05-26 23:31:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119459985531998208[0;39m <==    Updates: 0
2023-05-26 23:31:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119459985531998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460006516101120[0;39m 生成今日电子书快照开始
2023-05-26 23:31:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460006516101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460006516101120[0;39m ==> Parameters: 
2023-05-26 23:31:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460006516101120[0;39m <==    Updates: 0
2023-05-26 23:31:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460006516101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460027454066688[0;39m 生成今日电子书快照开始
2023-05-26 23:31:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460027454066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460027454066688[0;39m ==> Parameters: 
2023-05-26 23:31:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460027454066688[0;39m <==    Updates: 0
2023-05-26 23:31:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460027454066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460048450752512[0;39m 生成今日电子书快照开始
2023-05-26 23:31:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460048450752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460048450752512[0;39m ==> Parameters: 
2023-05-26 23:31:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460048450752512[0;39m <==    Updates: 0
2023-05-26 23:31:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460048450752512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119460048459141120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:31:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460048459141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:31:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460048459141120[0;39m ==> Parameters: 
2023-05-26 23:31:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460048459141120[0;39m <==    Updates: 8
2023-05-26 23:31:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119460048459141120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:31:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460069409689600[0;39m 生成今日电子书快照开始
2023-05-26 23:31:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460069409689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460069409689600[0;39m ==> Parameters: 
2023-05-26 23:31:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460069409689600[0;39m <==    Updates: 0
2023-05-26 23:31:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460069409689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460090397986816[0;39m 生成今日电子书快照开始
2023-05-26 23:31:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460090397986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460090397986816[0;39m ==> Parameters: 
2023-05-26 23:31:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460090397986816[0;39m <==    Updates: 0
2023-05-26 23:31:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460090397986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460111382089728[0;39m 生成今日电子书快照开始
2023-05-26 23:31:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460111382089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460111382089728[0;39m ==> Parameters: 
2023-05-26 23:31:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460111382089728[0;39m <==    Updates: 0
2023-05-26 23:31:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460111382089728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:31:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460132303278080[0;39m 生成今日电子书快照开始
2023-05-26 23:31:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460132303278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:31:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460132303278080[0;39m ==> Parameters: 
2023-05-26 23:31:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460132303278080[0;39m <==    Updates: 0
2023-05-26 23:31:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460132303278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460153283186688[0;39m 生成今日电子书快照开始
2023-05-26 23:32:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460153283186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460153283186688[0;39m ==> Parameters: 
2023-05-26 23:32:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460153283186688[0;39m <==    Updates: 0
2023-05-26 23:32:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460153283186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119460174263095296[0;39m 更新电子书下的文档数据开始
2023-05-26 23:32:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460174263095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:32:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460174263095296[0;39m ==> Parameters: 
2023-05-26 23:32:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460174263095296[0;39m <==    Updates: 8
2023-05-26 23:32:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119460174263095296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:32:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460174271483904[0;39m 生成今日电子书快照开始
2023-05-26 23:32:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460174271483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460174271483904[0;39m ==> Parameters: 
2023-05-26 23:32:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460174271483904[0;39m <==    Updates: 0
2023-05-26 23:32:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460174271483904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:32:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460195222032384[0;39m 生成今日电子书快照开始
2023-05-26 23:32:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460195222032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460195222032384[0;39m ==> Parameters: 
2023-05-26 23:32:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460195222032384[0;39m <==    Updates: 0
2023-05-26 23:32:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460195222032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460216176775168[0;39m 生成今日电子书快照开始
2023-05-26 23:32:15.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460216176775168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460216176775168[0;39m ==> Parameters: 
2023-05-26 23:32:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460216176775168[0;39m <==    Updates: 0
2023-05-26 23:32:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460216176775168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460237202821120[0;39m 生成今日电子书快照开始
2023-05-26 23:32:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460237202821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460237202821120[0;39m ==> Parameters: 
2023-05-26 23:32:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460237202821120[0;39m <==    Updates: 0
2023-05-26 23:32:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460237202821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460258153369600[0;39m 生成今日电子书快照开始
2023-05-26 23:32:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460258153369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460258153369600[0;39m ==> Parameters: 
2023-05-26 23:32:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460258153369600[0;39m <==    Updates: 0
2023-05-26 23:32:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460258153369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460279137472512[0;39m 生成今日电子书快照开始
2023-05-26 23:32:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460279137472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460279137472512[0;39m ==> Parameters: 
2023-05-26 23:32:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460279137472512[0;39m <==    Updates: 0
2023-05-26 23:32:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460279137472512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119460300121575424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:32:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460300121575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:32:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460300121575424[0;39m ==> Parameters: 
2023-05-26 23:32:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460300121575424[0;39m <==    Updates: 8
2023-05-26 23:32:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119460300121575424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:32:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460300125769728[0;39m 生成今日电子书快照开始
2023-05-26 23:32:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460300125769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460300125769728[0;39m ==> Parameters: 
2023-05-26 23:32:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460300125769728[0;39m <==    Updates: 0
2023-05-26 23:32:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460300125769728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:32:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460321093095424[0;39m 生成今日电子书快照开始
2023-05-26 23:32:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460321093095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460321093095424[0;39m ==> Parameters: 
2023-05-26 23:32:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460321093095424[0;39m <==    Updates: 0
2023-05-26 23:32:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460321093095424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460342022672384[0;39m 生成今日电子书快照开始
2023-05-26 23:32:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460342022672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460342022672384[0;39m ==> Parameters: 
2023-05-26 23:32:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460342022672384[0;39m <==    Updates: 0
2023-05-26 23:32:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460342022672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460363019358208[0;39m 生成今日电子书快照开始
2023-05-26 23:32:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460363019358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460363019358208[0;39m ==> Parameters: 
2023-05-26 23:32:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460363019358208[0;39m <==    Updates: 0
2023-05-26 23:32:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460363019358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:32:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460384007655424[0;39m 生成今日电子书快照开始
2023-05-26 23:32:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460384007655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:32:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460384007655424[0;39m ==> Parameters: 
2023-05-26 23:32:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460384007655424[0;39m <==    Updates: 0
2023-05-26 23:32:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460384007655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:33:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460404945620992[0;39m 生成今日电子书快照开始
2023-05-26 23:33:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460404945620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460404945620992[0;39m ==> Parameters: 
2023-05-26 23:33:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460404945620992[0;39m <==    Updates: 0
2023-05-26 23:33:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460404945620992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:33:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460425908752384[0;39m 生成今日电子书快照开始
2023-05-26 23:33:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460425908752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460425908752384[0;39m ==> Parameters: 
2023-05-26 23:33:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460425908752384[0;39m <==    Updates: 0
2023-05-26 23:33:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460425908752384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:33:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119460425921335296[0;39m 更新电子书下的文档数据开始
2023-05-26 23:33:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460425921335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:33:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460425921335296[0;39m ==> Parameters: 
2023-05-26 23:33:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460425921335296[0;39m <==    Updates: 8
2023-05-26 23:33:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119460425921335296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:33:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460446913826816[0;39m 生成今日电子书快照开始
2023-05-26 23:33:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460446913826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460446913826816[0;39m ==> Parameters: 
2023-05-26 23:33:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460446913826816[0;39m <==    Updates: 0
2023-05-26 23:33:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460446913826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:33:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460467893735424[0;39m 生成今日电子书快照开始
2023-05-26 23:33:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460467893735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460467893735424[0;39m ==> Parameters: 
2023-05-26 23:33:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460467893735424[0;39m <==    Updates: 0
2023-05-26 23:33:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460467893735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:33:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460488819118080[0;39m 生成今日电子书快照开始
2023-05-26 23:33:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460488819118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460488819118080[0;39m ==> Parameters: 
2023-05-26 23:33:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460488819118080[0;39m <==    Updates: 0
2023-05-26 23:33:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460488819118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:33:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460509811609600[0;39m 生成今日电子书快照开始
2023-05-26 23:33:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460509811609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460509811609600[0;39m ==> Parameters: 
2023-05-26 23:33:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460509811609600[0;39m <==    Updates: 0
2023-05-26 23:33:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460509811609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:33:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460530753769472[0;39m 生成今日电子书快照开始
2023-05-26 23:33:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460530753769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460530753769472[0;39m ==> Parameters: 
2023-05-26 23:33:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460530753769472[0;39m <==    Updates: 0
2023-05-26 23:33:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460530753769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:33:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460551750455296[0;39m 生成今日电子书快照开始
2023-05-26 23:33:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460551750455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460551750455296[0;39m ==> Parameters: 
2023-05-26 23:33:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460551750455296[0;39m <==    Updates: 0
2023-05-26 23:33:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460551750455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:33:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119460551758843904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:33:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460551758843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:33:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460551758843904[0;39m ==> Parameters: 
2023-05-26 23:33:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460551758843904[0;39m <==    Updates: 8
2023-05-26 23:33:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119460551758843904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:33:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460572730363904[0;39m 生成今日电子书快照开始
2023-05-26 23:33:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460572730363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460572730363904[0;39m ==> Parameters: 
2023-05-26 23:33:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460572730363904[0;39m <==    Updates: 0
2023-05-26 23:33:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460572730363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:33:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460593706078208[0;39m 生成今日电子书快照开始
2023-05-26 23:33:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460593706078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460593706078208[0;39m ==> Parameters: 
2023-05-26 23:33:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460593706078208[0;39m <==    Updates: 0
2023-05-26 23:33:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460593706078208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:33:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460614681792512[0;39m 生成今日电子书快照开始
2023-05-26 23:33:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460614681792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460614681792512[0;39m ==> Parameters: 
2023-05-26 23:33:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460614681792512[0;39m <==    Updates: 0
2023-05-26 23:33:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460614681792512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:33:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460635623952384[0;39m 生成今日电子书快照开始
2023-05-26 23:33:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460635623952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:33:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460635623952384[0;39m ==> Parameters: 
2023-05-26 23:33:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460635623952384[0;39m <==    Updates: 0
2023-05-26 23:33:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460635623952384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:34:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460656629026816[0;39m 生成今日电子书快照开始
2023-05-26 23:34:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460656629026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460656629026816[0;39m ==> Parameters: 
2023-05-26 23:34:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460656629026816[0;39m <==    Updates: 0
2023-05-26 23:34:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460656629026816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:34:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460677613129728[0;39m 生成今日电子书快照开始
2023-05-26 23:34:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460677613129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460677613129728[0;39m ==> Parameters: 
2023-05-26 23:34:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460677613129728[0;39m <==    Updates: 0
2023-05-26 23:34:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460677613129728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:34:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119460677625712640[0;39m 更新电子书下的文档数据开始
2023-05-26 23:34:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460677625712640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:34:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460677625712640[0;39m ==> Parameters: 
2023-05-26 23:34:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460677625712640[0;39m <==    Updates: 8
2023-05-26 23:34:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119460677625712640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:34:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460698576261120[0;39m 生成今日电子书快照开始
2023-05-26 23:34:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460698576261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460698576261120[0;39m ==> Parameters: 
2023-05-26 23:34:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460698576261120[0;39m <==    Updates: 0
2023-05-26 23:34:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460698576261120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:34:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460719518420992[0;39m 生成今日电子书快照开始
2023-05-26 23:34:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460719518420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460719518420992[0;39m ==> Parameters: 
2023-05-26 23:34:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460719518420992[0;39m <==    Updates: 0
2023-05-26 23:34:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460719518420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:34:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460740477358080[0;39m 生成今日电子书快照开始
2023-05-26 23:34:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460740477358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460740477358080[0;39m ==> Parameters: 
2023-05-26 23:34:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460740477358080[0;39m <==    Updates: 0
2023-05-26 23:34:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460740477358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:34:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460761469849600[0;39m 生成今日电子书快照开始
2023-05-26 23:34:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460761469849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460761469849600[0;39m ==> Parameters: 
2023-05-26 23:34:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460761469849600[0;39m <==    Updates: 0
2023-05-26 23:34:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460761469849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:34:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460782458146816[0;39m 生成今日电子书快照开始
2023-05-26 23:34:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460782458146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460782458146816[0;39m ==> Parameters: 
2023-05-26 23:34:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460782458146816[0;39m <==    Updates: 0
2023-05-26 23:34:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460782458146816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:34:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119460803391918080[0;39m 更新电子书下的文档数据开始
2023-05-26 23:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460803391918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460803391918080[0;39m ==> Parameters: 
2023-05-26 23:34:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460803391918080[0;39m <==    Updates: 8
2023-05-26 23:34:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119460803391918080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:34:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460803396112384[0;39m 生成今日电子书快照开始
2023-05-26 23:34:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460803396112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460803396112384[0;39m ==> Parameters: 
2023-05-26 23:34:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460803396112384[0;39m <==    Updates: 0
2023-05-26 23:34:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460803396112384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:34:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460824359243776[0;39m 生成今日电子书快照开始
2023-05-26 23:34:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460824359243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460824359243776[0;39m ==> Parameters: 
2023-05-26 23:34:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460824359243776[0;39m <==    Updates: 0
2023-05-26 23:34:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460824359243776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:34:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460845355929600[0;39m 生成今日电子书快照开始
2023-05-26 23:34:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460845355929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460845355929600[0;39m ==> Parameters: 
2023-05-26 23:34:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460845355929600[0;39m <==    Updates: 0
2023-05-26 23:34:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460845355929600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:34:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460866344226816[0;39m 生成今日电子书快照开始
2023-05-26 23:34:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460866344226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460866344226816[0;39m ==> Parameters: 
2023-05-26 23:34:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460866344226816[0;39m <==    Updates: 0
2023-05-26 23:34:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460866344226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:34:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460887319941120[0;39m 生成今日电子书快照开始
2023-05-26 23:34:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460887319941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:34:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460887319941120[0;39m ==> Parameters: 
2023-05-26 23:34:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460887319941120[0;39m <==    Updates: 0
2023-05-26 23:34:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460887319941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460908241129472[0;39m 生成今日电子书快照开始
2023-05-26 23:35:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460908241129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460908241129472[0;39m ==> Parameters: 
2023-05-26 23:35:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460908241129472[0;39m <==    Updates: 0
2023-05-26 23:35:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460908241129472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:35:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460929225232384[0;39m 生成今日电子书快照开始
2023-05-26 23:35:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460929225232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460929225232384[0;39m ==> Parameters: 
2023-05-26 23:35:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460929225232384[0;39m <==    Updates: 0
2023-05-26 23:35:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460929225232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119460929233620992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:35:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460929233620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:35:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460929233620992[0;39m ==> Parameters: 
2023-05-26 23:35:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119460929233620992[0;39m <==    Updates: 8
2023-05-26 23:35:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119460929233620992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:35:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460950192558080[0;39m 生成今日电子书快照开始
2023-05-26 23:35:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460950192558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460950192558080[0;39m ==> Parameters: 
2023-05-26 23:35:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460950192558080[0;39m <==    Updates: 0
2023-05-26 23:35:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460950192558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460971193438208[0;39m 生成今日电子书快照开始
2023-05-26 23:35:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460971193438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460971193438208[0;39m ==> Parameters: 
2023-05-26 23:35:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460971193438208[0;39m <==    Updates: 0
2023-05-26 23:35:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460971193438208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119460992152375296[0;39m 生成今日电子书快照开始
2023-05-26 23:35:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460992152375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460992152375296[0;39m ==> Parameters: 
2023-05-26 23:35:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119460992152375296[0;39m <==    Updates: 0
2023-05-26 23:35:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119460992152375296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461013132283904[0;39m 生成今日电子书快照开始
2023-05-26 23:35:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461013132283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461013132283904[0;39m ==> Parameters: 
2023-05-26 23:35:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461013132283904[0;39m <==    Updates: 0
2023-05-26 23:35:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461013132283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461034124775424[0;39m 生成今日电子书快照开始
2023-05-26 23:35:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461034124775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461034124775424[0;39m ==> Parameters: 
2023-05-26 23:35:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461034124775424[0;39m <==    Updates: 0
2023-05-26 23:35:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461034124775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119461055087906816[0;39m 更新电子书下的文档数据开始
2023-05-26 23:35:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461055087906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:35:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461055087906816[0;39m ==> Parameters: 
2023-05-26 23:35:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461055087906816[0;39m <==    Updates: 8
2023-05-26 23:35:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119461055087906816[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:35:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461055087906817[0;39m 生成今日电子书快照开始
2023-05-26 23:35:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461055087906817[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461055087906817[0;39m ==> Parameters: 
2023-05-26 23:35:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461055087906817[0;39m <==    Updates: 0
2023-05-26 23:35:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461055087906817[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461076059426816[0;39m 生成今日电子书快照开始
2023-05-26 23:35:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461076059426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461076059426816[0;39m ==> Parameters: 
2023-05-26 23:35:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461076059426816[0;39m <==    Updates: 0
2023-05-26 23:35:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461076059426816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461097014169600[0;39m 生成今日电子书快照开始
2023-05-26 23:35:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461097014169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461097014169600[0;39m ==> Parameters: 
2023-05-26 23:35:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461097014169600[0;39m <==    Updates: 0
2023-05-26 23:35:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461097014169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461117977300992[0;39m 生成今日电子书快照开始
2023-05-26 23:35:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461117977300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461117977300992[0;39m ==> Parameters: 
2023-05-26 23:35:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461117977300992[0;39m <==    Updates: 0
2023-05-26 23:35:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461117977300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:35:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461138990764032[0;39m 生成今日电子书快照开始
2023-05-26 23:35:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461138990764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:35:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461138990764032[0;39m ==> Parameters: 
2023-05-26 23:35:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461138990764032[0;39m <==    Updates: 0
2023-05-26 23:35:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461138990764032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:36:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461159945506816[0;39m 生成今日电子书快照开始
2023-05-26 23:36:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461159945506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461159945506816[0;39m ==> Parameters: 
2023-05-26 23:36:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461159945506816[0;39m <==    Updates: 0
2023-05-26 23:36:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461159945506816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:36:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461180925415424[0;39m 生成今日电子书快照开始
2023-05-26 23:36:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461180925415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461180925415424[0;39m ==> Parameters: 
2023-05-26 23:36:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461180925415424[0;39m <==    Updates: 0
2023-05-26 23:36:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461180925415424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:36:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119461180937998336[0;39m 更新电子书下的文档数据开始
2023-05-26 23:36:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461180937998336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:36:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461180937998336[0;39m ==> Parameters: 
2023-05-26 23:36:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461180937998336[0;39m <==    Updates: 8
2023-05-26 23:36:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119461180937998336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:36:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461201863380992[0;39m 生成今日电子书快照开始
2023-05-26 23:36:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461201863380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461201863380992[0;39m ==> Parameters: 
2023-05-26 23:36:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461201863380992[0;39m <==    Updates: 0
2023-05-26 23:36:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461201863380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:36:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461222860066816[0;39m 生成今日电子书快照开始
2023-05-26 23:36:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461222860066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461222860066816[0;39m ==> Parameters: 
2023-05-26 23:36:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461222860066816[0;39m <==    Updates: 0
2023-05-26 23:36:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461222860066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:36:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461243844169728[0;39m 生成今日电子书快照开始
2023-05-26 23:36:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461243844169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461243844169728[0;39m ==> Parameters: 
2023-05-26 23:36:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461243844169728[0;39m <==    Updates: 0
2023-05-26 23:36:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461243844169728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:36:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461264794718208[0;39m 生成今日电子书快照开始
2023-05-26 23:36:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461264794718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461264794718208[0;39m ==> Parameters: 
2023-05-26 23:36:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461264794718208[0;39m <==    Updates: 0
2023-05-26 23:36:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461264794718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:36:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461285770432512[0;39m 生成今日电子书快照开始
2023-05-26 23:36:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461285770432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461285770432512[0;39m ==> Parameters: 
2023-05-26 23:36:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461285770432512[0;39m <==    Updates: 0
2023-05-26 23:36:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461285770432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:36:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461306720980992[0;39m 生成今日电子书快照开始
2023-05-26 23:36:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461306720980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461306720980992[0;39m ==> Parameters: 
2023-05-26 23:36:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461306720980992[0;39m <==    Updates: 0
2023-05-26 23:36:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461306720980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:36:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119461306729369600[0;39m 更新电子书下的文档数据开始
2023-05-26 23:36:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461306729369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:36:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461306729369600[0;39m ==> Parameters: 
2023-05-26 23:36:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461306729369600[0;39m <==    Updates: 8
2023-05-26 23:36:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119461306729369600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:36:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461327705083904[0;39m 生成今日电子书快照开始
2023-05-26 23:36:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461327705083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461327705083904[0;39m ==> Parameters: 
2023-05-26 23:36:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461327705083904[0;39m <==    Updates: 0
2023-05-26 23:36:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461327705083904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:36:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461348672409600[0;39m 生成今日电子书快照开始
2023-05-26 23:36:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461348672409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461348672409600[0;39m ==> Parameters: 
2023-05-26 23:36:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461348672409600[0;39m <==    Updates: 0
2023-05-26 23:36:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461348672409600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:36:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461369664901120[0;39m 生成今日电子书快照开始
2023-05-26 23:36:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461369664901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461369664901120[0;39m ==> Parameters: 
2023-05-26 23:36:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461369664901120[0;39m <==    Updates: 0
2023-05-26 23:36:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461369664901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:36:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461390602866688[0;39m 生成今日电子书快照开始
2023-05-26 23:36:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461390602866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:36:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461390602866688[0;39m ==> Parameters: 
2023-05-26 23:36:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461390602866688[0;39m <==    Updates: 0
2023-05-26 23:36:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461390602866688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:37:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461411612135424[0;39m 生成今日电子书快照开始
2023-05-26 23:37:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461411612135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461411612135424[0;39m ==> Parameters: 
2023-05-26 23:37:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461411612135424[0;39m <==    Updates: 0
2023-05-26 23:37:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461411612135424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:37:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461432533323776[0;39m 生成今日电子书快照开始
2023-05-26 23:37:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461432533323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461432533323776[0;39m ==> Parameters: 
2023-05-26 23:37:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461432533323776[0;39m <==    Updates: 0
2023-05-26 23:37:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461432533323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:37:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119461432541712384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:37:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461432541712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:37:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461432541712384[0;39m ==> Parameters: 
2023-05-26 23:37:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461432541712384[0;39m <==    Updates: 8
2023-05-26 23:37:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119461432541712384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:37:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461453534203904[0;39m 生成今日电子书快照开始
2023-05-26 23:37:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461453534203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461453534203904[0;39m ==> Parameters: 
2023-05-26 23:37:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461453534203904[0;39m <==    Updates: 0
2023-05-26 23:37:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461453534203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:37:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461474518306816[0;39m 生成今日电子书快照开始
2023-05-26 23:37:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461474518306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461474518306816[0;39m ==> Parameters: 
2023-05-26 23:37:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461474518306816[0;39m <==    Updates: 0
2023-05-26 23:37:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461474518306816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:37:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461495460466688[0;39m 生成今日电子书快照开始
2023-05-26 23:37:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461495460466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461495460466688[0;39m ==> Parameters: 
2023-05-26 23:37:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461495460466688[0;39m <==    Updates: 0
2023-05-26 23:37:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461495460466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:37:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461516415209472[0;39m 生成今日电子书快照开始
2023-05-26 23:37:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461516415209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461516415209472[0;39m ==> Parameters: 
2023-05-26 23:37:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461516415209472[0;39m <==    Updates: 0
2023-05-26 23:37:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461516415209472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:37:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461537441255424[0;39m 生成今日电子书快照开始
2023-05-26 23:37:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461537441255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461537441255424[0;39m ==> Parameters: 
2023-05-26 23:37:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461537441255424[0;39m <==    Updates: 0
2023-05-26 23:37:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461537441255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:37:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119461558408581120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:37:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461558408581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:37:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461558408581120[0;39m ==> Parameters: 
2023-05-26 23:37:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461558408581120[0;39m <==    Updates: 8
2023-05-26 23:37:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119461558408581120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:37:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461558416969728[0;39m 生成今日电子书快照开始
2023-05-26 23:37:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461558416969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461558416969728[0;39m ==> Parameters: 
2023-05-26 23:37:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461558416969728[0;39m <==    Updates: 0
2023-05-26 23:37:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461558416969728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:37:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461579350740992[0;39m 生成今日电子书快照开始
2023-05-26 23:37:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461579350740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461579350740992[0;39m ==> Parameters: 
2023-05-26 23:37:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461579350740992[0;39m <==    Updates: 0
2023-05-26 23:37:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461579350740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:37:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461600334843904[0;39m 生成今日电子书快照开始
2023-05-26 23:37:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461600334843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461600334843904[0;39m ==> Parameters: 
2023-05-26 23:37:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461600334843904[0;39m <==    Updates: 0
2023-05-26 23:37:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461600334843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:37:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461621314752512[0;39m 生成今日电子书快照开始
2023-05-26 23:37:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461621314752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461621314752512[0;39m ==> Parameters: 
2023-05-26 23:37:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461621314752512[0;39m <==    Updates: 0
2023-05-26 23:37:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461621314752512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:37:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461642252718080[0;39m 生成今日电子书快照开始
2023-05-26 23:37:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461642252718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:37:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461642252718080[0;39m ==> Parameters: 
2023-05-26 23:37:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461642252718080[0;39m <==    Updates: 0
2023-05-26 23:37:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461642252718080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461663228432384[0;39m 生成今日电子书快照开始
2023-05-26 23:38:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461663228432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461663228432384[0;39m ==> Parameters: 
2023-05-26 23:38:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461663228432384[0;39m <==    Updates: 0
2023-05-26 23:38:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461663228432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119461684195758080[0;39m 更新电子书下的文档数据开始
2023-05-26 23:38:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461684195758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:38:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461684195758080[0;39m ==> Parameters: 
2023-05-26 23:38:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461684195758080[0;39m <==    Updates: 8
2023-05-26 23:38:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119461684195758080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:38:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461684204146688[0;39m 生成今日电子书快照开始
2023-05-26 23:38:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461684204146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461684204146688[0;39m ==> Parameters: 
2023-05-26 23:38:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461684204146688[0;39m <==    Updates: 0
2023-05-26 23:38:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461684204146688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:38:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461705184055296[0;39m 生成今日电子书快照开始
2023-05-26 23:38:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461705184055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461705184055296[0;39m ==> Parameters: 
2023-05-26 23:38:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461705184055296[0;39m <==    Updates: 0
2023-05-26 23:38:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461705184055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461726172352512[0;39m 生成今日电子书快照开始
2023-05-26 23:38:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461726172352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461726172352512[0;39m ==> Parameters: 
2023-05-26 23:38:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461726172352512[0;39m <==    Updates: 0
2023-05-26 23:38:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461726172352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461747127095296[0;39m 生成今日电子书快照开始
2023-05-26 23:38:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461747127095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461747127095296[0;39m ==> Parameters: 
2023-05-26 23:38:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461747127095296[0;39m <==    Updates: 0
2023-05-26 23:38:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461747127095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461768081838080[0;39m 生成今日电子书快照开始
2023-05-26 23:38:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461768081838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461768081838080[0;39m ==> Parameters: 
2023-05-26 23:38:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461768081838080[0;39m <==    Updates: 0
2023-05-26 23:38:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461768081838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461789078523904[0;39m 生成今日电子书快照开始
2023-05-26 23:38:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461789078523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461789078523904[0;39m ==> Parameters: 
2023-05-26 23:38:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461789078523904[0;39m <==    Updates: 0
2023-05-26 23:38:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461789078523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119461810058432512[0;39m 更新电子书下的文档数据开始
2023-05-26 23:38:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461810058432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:38:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461810058432512[0;39m ==> Parameters: 
2023-05-26 23:38:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461810058432512[0;39m <==    Updates: 8
2023-05-26 23:38:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119461810058432512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:38:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461810066821120[0;39m 生成今日电子书快照开始
2023-05-26 23:38:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461810066821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461810066821120[0;39m ==> Parameters: 
2023-05-26 23:38:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461810066821120[0;39m <==    Updates: 0
2023-05-26 23:38:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461810066821120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:38:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461831025758208[0;39m 生成今日电子书快照开始
2023-05-26 23:38:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461831025758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461831025758208[0;39m ==> Parameters: 
2023-05-26 23:38:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461831025758208[0;39m <==    Updates: 0
2023-05-26 23:38:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461831025758208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461851993083904[0;39m 生成今日电子书快照开始
2023-05-26 23:38:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461851993083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461851993083904[0;39m ==> Parameters: 
2023-05-26 23:38:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461851993083904[0;39m <==    Updates: 0
2023-05-26 23:38:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461851993083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461872947826688[0;39m 生成今日电子书快照开始
2023-05-26 23:38:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461872947826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461872947826688[0;39m ==> Parameters: 
2023-05-26 23:38:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461872947826688[0;39m <==    Updates: 0
2023-05-26 23:38:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461872947826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:38:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461893919346688[0;39m 生成今日电子书快照开始
2023-05-26 23:38:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461893919346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:38:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461893919346688[0;39m ==> Parameters: 
2023-05-26 23:38:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461893919346688[0;39m <==    Updates: 0
2023-05-26 23:38:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461893919346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:39:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461914928615424[0;39m 生成今日电子书快照开始
2023-05-26 23:39:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461914928615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461914928615424[0;39m ==> Parameters: 
2023-05-26 23:39:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461914928615424[0;39m <==    Updates: 0
2023-05-26 23:39:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461914928615424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:39:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119461935887552512[0;39m 更新电子书下的文档数据开始
2023-05-26 23:39:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461935887552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:39:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461935887552512[0;39m ==> Parameters: 
2023-05-26 23:39:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119461935887552512[0;39m <==    Updates: 8
2023-05-26 23:39:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119461935887552512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:39:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461935895941120[0;39m 生成今日电子书快照开始
2023-05-26 23:39:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461935895941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461935895941120[0;39m ==> Parameters: 
2023-05-26 23:39:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461935895941120[0;39m <==    Updates: 0
2023-05-26 23:39:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461935895941120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:39:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461956863266816[0;39m 生成今日电子书快照开始
2023-05-26 23:39:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461956863266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461956863266816[0;39m ==> Parameters: 
2023-05-26 23:39:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461956863266816[0;39m <==    Updates: 0
2023-05-26 23:39:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461956863266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:39:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461977818009600[0;39m 生成今日电子书快照开始
2023-05-26 23:39:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461977818009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461977818009600[0;39m ==> Parameters: 
2023-05-26 23:39:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461977818009600[0;39m <==    Updates: 0
2023-05-26 23:39:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461977818009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:39:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119461998776946688[0;39m 生成今日电子书快照开始
2023-05-26 23:39:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461998776946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461998776946688[0;39m ==> Parameters: 
2023-05-26 23:39:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119461998776946688[0;39m <==    Updates: 0
2023-05-26 23:39:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119461998776946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:39:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462019777826816[0;39m 生成今日电子书快照开始
2023-05-26 23:39:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462019777826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462019777826816[0;39m ==> Parameters: 
2023-05-26 23:39:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462019777826816[0;39m <==    Updates: 0
2023-05-26 23:39:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462019777826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:39:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462040740958208[0;39m 生成今日电子书快照开始
2023-05-26 23:39:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462040740958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462040740958208[0;39m ==> Parameters: 
2023-05-26 23:39:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462040740958208[0;39m <==    Updates: 0
2023-05-26 23:39:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462040740958208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:39:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119462061729255424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:39:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462061729255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:39:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462061729255424[0;39m ==> Parameters: 
2023-05-26 23:39:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462061729255424[0;39m <==    Updates: 8
2023-05-26 23:39:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119462061729255424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:39:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462061733449728[0;39m 生成今日电子书快照开始
2023-05-26 23:39:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462061733449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462061733449728[0;39m ==> Parameters: 
2023-05-26 23:39:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462061733449728[0;39m <==    Updates: 0
2023-05-26 23:39:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462061733449728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:39:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462082688192512[0;39m 生成今日电子书快照开始
2023-05-26 23:39:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462082688192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462082688192512[0;39m ==> Parameters: 
2023-05-26 23:39:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462082688192512[0;39m <==    Updates: 0
2023-05-26 23:39:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462082688192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:39:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462103642935296[0;39m 生成今日电子书快照开始
2023-05-26 23:39:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462103642935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462103642935296[0;39m ==> Parameters: 
2023-05-26 23:39:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462103642935296[0;39m <==    Updates: 0
2023-05-26 23:39:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462103642935296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:39:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462124610260992[0;39m 生成今日电子书快照开始
2023-05-26 23:39:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462124610260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462124610260992[0;39m ==> Parameters: 
2023-05-26 23:39:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462124610260992[0;39m <==    Updates: 0
2023-05-26 23:39:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462124610260992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:39:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462145573392384[0;39m 生成今日电子书快照开始
2023-05-26 23:39:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462145573392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:39:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462145573392384[0;39m ==> Parameters: 
2023-05-26 23:39:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462145573392384[0;39m <==    Updates: 0
2023-05-26 23:39:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462145573392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462166544912384[0;39m 生成今日电子书快照开始
2023-05-26 23:40:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462166544912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462166544912384[0;39m ==> Parameters: 
2023-05-26 23:40:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462166544912384[0;39m <==    Updates: 0
2023-05-26 23:40:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462166544912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462187562569728[0;39m 生成今日电子书快照开始
2023-05-26 23:40:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462187562569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462187562569728[0;39m ==> Parameters: 
2023-05-26 23:40:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462187562569728[0;39m <==    Updates: 0
2023-05-26 23:40:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462187562569728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119462187570958336[0;39m 更新电子书下的文档数据开始
2023-05-26 23:40:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462187570958336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:40:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462187570958336[0;39m ==> Parameters: 
2023-05-26 23:40:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462187570958336[0;39m <==    Updates: 8
2023-05-26 23:40:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119462187570958336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:40:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462208492146688[0;39m 生成今日电子书快照开始
2023-05-26 23:40:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462208492146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462208492146688[0;39m ==> Parameters: 
2023-05-26 23:40:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462208492146688[0;39m <==    Updates: 0
2023-05-26 23:40:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462208492146688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:40:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462229476249600[0;39m 生成今日电子书快照开始
2023-05-26 23:40:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462229476249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462229476249600[0;39m ==> Parameters: 
2023-05-26 23:40:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462229476249600[0;39m <==    Updates: 0
2023-05-26 23:40:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462229476249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462250447769600[0;39m 生成今日电子书快照开始
2023-05-26 23:40:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462250447769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462250447769600[0;39m ==> Parameters: 
2023-05-26 23:40:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462250447769600[0;39m <==    Updates: 0
2023-05-26 23:40:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462250447769600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:40:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462271436066816[0;39m 生成今日电子书快照开始
2023-05-26 23:40:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462271436066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462271436066816[0;39m ==> Parameters: 
2023-05-26 23:40:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462271436066816[0;39m <==    Updates: 0
2023-05-26 23:40:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462271436066816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:40:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462292411781120[0;39m 生成今日电子书快照开始
2023-05-26 23:40:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462292411781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462292411781120[0;39m ==> Parameters: 
2023-05-26 23:40:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462292411781120[0;39m <==    Updates: 0
2023-05-26 23:40:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462292411781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462313332969472[0;39m 生成今日电子书快照开始
2023-05-26 23:40:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462313332969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462313332969472[0;39m ==> Parameters: 
2023-05-26 23:40:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462313332969472[0;39m <==    Updates: 0
2023-05-26 23:40:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462313332969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119462313341358080[0;39m 更新电子书下的文档数据开始
2023-05-26 23:40:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462313341358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:40:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462313341358080[0;39m ==> Parameters: 
2023-05-26 23:40:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462313341358080[0;39m <==    Updates: 8
2023-05-26 23:40:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119462313341358080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:40:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462334333849600[0;39m 生成今日电子书快照开始
2023-05-26 23:40:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462334333849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462334333849600[0;39m ==> Parameters: 
2023-05-26 23:40:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462334333849600[0;39m <==    Updates: 0
2023-05-26 23:40:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462334333849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462355284398080[0;39m 生成今日电子书快照开始
2023-05-26 23:40:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462355284398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462355284398080[0;39m ==> Parameters: 
2023-05-26 23:40:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462355284398080[0;39m <==    Updates: 0
2023-05-26 23:40:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462355284398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462376268500992[0;39m 生成今日电子书快照开始
2023-05-26 23:40:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462376268500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462376268500992[0;39m ==> Parameters: 
2023-05-26 23:40:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462376268500992[0;39m <==    Updates: 0
2023-05-26 23:40:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462376268500992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:40:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462397219049472[0;39m 生成今日电子书快照开始
2023-05-26 23:40:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462397219049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:40:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462397219049472[0;39m ==> Parameters: 
2023-05-26 23:40:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462397219049472[0;39m <==    Updates: 0
2023-05-26 23:40:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462397219049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462418253484032[0;39m 生成今日电子书快照开始
2023-05-26 23:41:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462418253484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462418253484032[0;39m ==> Parameters: 
2023-05-26 23:41:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462418253484032[0;39m <==    Updates: 0
2023-05-26 23:41:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462418253484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462439191449600[0;39m 生成今日电子书快照开始
2023-05-26 23:41:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462439191449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462439191449600[0;39m ==> Parameters: 
2023-05-26 23:41:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462439191449600[0;39m <==    Updates: 0
2023-05-26 23:41:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462439191449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119462439199838208[0;39m 更新电子书下的文档数据开始
2023-05-26 23:41:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462439199838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:41:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462439199838208[0;39m ==> Parameters: 
2023-05-26 23:41:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462439199838208[0;39m <==    Updates: 8
2023-05-26 23:41:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119462439199838208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:41:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462460192329728[0;39m 生成今日电子书快照开始
2023-05-26 23:41:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462460192329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462460192329728[0;39m ==> Parameters: 
2023-05-26 23:41:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462460192329728[0;39m <==    Updates: 0
2023-05-26 23:41:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462460192329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462481159655424[0;39m 生成今日电子书快照开始
2023-05-26 23:41:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462481159655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462481159655424[0;39m ==> Parameters: 
2023-05-26 23:41:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462481159655424[0;39m <==    Updates: 0
2023-05-26 23:41:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462481159655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462502080843776[0;39m 生成今日电子书快照开始
2023-05-26 23:41:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462502080843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462502080843776[0;39m ==> Parameters: 
2023-05-26 23:41:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462502080843776[0;39m <==    Updates: 0
2023-05-26 23:41:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462502080843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462523111084032[0;39m 生成今日电子书快照开始
2023-05-26 23:41:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462523111084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462523111084032[0;39m ==> Parameters: 
2023-05-26 23:41:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462523111084032[0;39m <==    Updates: 0
2023-05-26 23:41:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462523111084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462544053243904[0;39m 生成今日电子书快照开始
2023-05-26 23:41:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462544053243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462544053243904[0;39m ==> Parameters: 
2023-05-26 23:41:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462544053243904[0;39m <==    Updates: 0
2023-05-26 23:41:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462544053243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462565016375296[0;39m 生成今日电子书快照开始
2023-05-26 23:41:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462565016375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462565016375296[0;39m ==> Parameters: 
2023-05-26 23:41:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462565016375296[0;39m <==    Updates: 0
2023-05-26 23:41:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462565016375296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119462565024763904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:41:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462565024763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:41:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462565024763904[0;39m ==> Parameters: 
2023-05-26 23:41:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462565024763904[0;39m <==    Updates: 8
2023-05-26 23:41:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119462565024763904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:41:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462585962729472[0;39m 生成今日电子书快照开始
2023-05-26 23:41:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462585962729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462585962729472[0;39m ==> Parameters: 
2023-05-26 23:41:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462585962729472[0;39m <==    Updates: 0
2023-05-26 23:41:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462585962729472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462606988775424[0;39m 生成今日电子书快照开始
2023-05-26 23:41:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462606988775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462606988775424[0;39m ==> Parameters: 
2023-05-26 23:41:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462606988775424[0;39m <==    Updates: 0
2023-05-26 23:41:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462606988775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462627918352384[0;39m 生成今日电子书快照开始
2023-05-26 23:41:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462627918352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462627918352384[0;39m ==> Parameters: 
2023-05-26 23:41:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462627918352384[0;39m <==    Updates: 0
2023-05-26 23:41:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462627918352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:41:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462648931815424[0;39m 生成今日电子书快照开始
2023-05-26 23:41:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462648931815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:41:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462648931815424[0;39m ==> Parameters: 
2023-05-26 23:41:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462648931815424[0;39m <==    Updates: 0
2023-05-26 23:41:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462648931815424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:42:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462669903335424[0;39m 生成今日电子书快照开始
2023-05-26 23:42:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462669903335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462669903335424[0;39m ==> Parameters: 
2023-05-26 23:42:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462669903335424[0;39m <==    Updates: 0
2023-05-26 23:42:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462669903335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:42:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119462690883244032[0;39m 更新电子书下的文档数据开始
2023-05-26 23:42:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462690883244032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:42:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462690883244032[0;39m ==> Parameters: 
2023-05-26 23:42:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462690883244032[0;39m <==    Updates: 8
2023-05-26 23:42:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119462690883244032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:42:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462690887438336[0;39m 生成今日电子书快照开始
2023-05-26 23:42:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462690887438336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462690887438336[0;39m ==> Parameters: 
2023-05-26 23:42:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462690887438336[0;39m <==    Updates: 0
2023-05-26 23:42:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462690887438336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:42:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462711846375424[0;39m 生成今日电子书快照开始
2023-05-26 23:42:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462711846375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462711846375424[0;39m ==> Parameters: 
2023-05-26 23:42:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462711846375424[0;39m <==    Updates: 0
2023-05-26 23:42:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462711846375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:42:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462732822089728[0;39m 生成今日电子书快照开始
2023-05-26 23:42:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462732822089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462732822089728[0;39m ==> Parameters: 
2023-05-26 23:42:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462732822089728[0;39m <==    Updates: 0
2023-05-26 23:42:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462732822089728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:42:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462753764249600[0;39m 生成今日电子书快照开始
2023-05-26 23:42:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462753764249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462753764249600[0;39m ==> Parameters: 
2023-05-26 23:42:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462753764249600[0;39m <==    Updates: 0
2023-05-26 23:42:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462753764249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:42:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462774706409472[0;39m 生成今日电子书快照开始
2023-05-26 23:42:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462774706409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462774706409472[0;39m ==> Parameters: 
2023-05-26 23:42:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462774706409472[0;39m <==    Updates: 0
2023-05-26 23:42:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462774706409472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:42:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462795686318080[0;39m 生成今日电子书快照开始
2023-05-26 23:42:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462795686318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462795686318080[0;39m ==> Parameters: 
2023-05-26 23:42:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462795686318080[0;39m <==    Updates: 0
2023-05-26 23:42:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462795686318080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:42:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462816699781120[0;39m 生成今日电子书快照开始
2023-05-26 23:42:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462816699781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462816699781120[0;39m ==> Parameters: 
2023-05-26 23:42:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462816699781120[0;39m <==    Updates: 0
2023-05-26 23:42:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462816699781120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:42:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119462816703975424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:42:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462816703975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:42:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462816703975424[0;39m ==> Parameters: 
2023-05-26 23:42:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462816703975424[0;39m <==    Updates: 8
2023-05-26 23:42:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119462816703975424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:42:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462837658718208[0;39m 生成今日电子书快照开始
2023-05-26 23:42:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462837658718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462837658718208[0;39m ==> Parameters: 
2023-05-26 23:42:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462837658718208[0;39m <==    Updates: 0
2023-05-26 23:42:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462837658718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:42:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462858605072384[0;39m 生成今日电子书快照开始
2023-05-26 23:42:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462858605072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462858605072384[0;39m ==> Parameters: 
2023-05-26 23:42:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462858605072384[0;39m <==    Updates: 0
2023-05-26 23:42:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462858605072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:42:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462879593369600[0;39m 生成今日电子书快照开始
2023-05-26 23:42:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462879593369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462879593369600[0;39m ==> Parameters: 
2023-05-26 23:42:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462879593369600[0;39m <==    Updates: 0
2023-05-26 23:42:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462879593369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:42:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462900564889600[0;39m 生成今日电子书快照开始
2023-05-26 23:42:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462900564889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:42:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462900564889600[0;39m ==> Parameters: 
2023-05-26 23:42:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462900564889600[0;39m <==    Updates: 0
2023-05-26 23:42:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462900564889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462921569964032[0;39m 生成今日电子书快照开始
2023-05-26 23:43:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462921569964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462921569964032[0;39m ==> Parameters: 
2023-05-26 23:43:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462921569964032[0;39m <==    Updates: 0
2023-05-26 23:43:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462921569964032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119462942524706816[0;39m 更新电子书下的文档数据开始
2023-05-26 23:43:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462942524706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:43:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462942524706816[0;39m ==> Parameters: 
2023-05-26 23:43:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119462942524706816[0;39m <==    Updates: 8
2023-05-26 23:43:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119462942524706816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:43:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462942533095424[0;39m 生成今日电子书快照开始
2023-05-26 23:43:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462942533095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462942533095424[0;39m ==> Parameters: 
2023-05-26 23:43:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462942533095424[0;39m <==    Updates: 0
2023-05-26 23:43:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462942533095424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:43:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462963471060992[0;39m 生成今日电子书快照开始
2023-05-26 23:43:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462963471060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462963471060992[0;39m ==> Parameters: 
2023-05-26 23:43:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462963471060992[0;39m <==    Updates: 0
2023-05-26 23:43:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462963471060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119462984463552512[0;39m 生成今日电子书快照开始
2023-05-26 23:43:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462984463552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462984463552512[0;39m ==> Parameters: 
2023-05-26 23:43:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119462984463552512[0;39m <==    Updates: 0
2023-05-26 23:43:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119462984463552512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463005397323776[0;39m 生成今日电子书快照开始
2023-05-26 23:43:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463005397323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463005397323776[0;39m ==> Parameters: 
2023-05-26 23:43:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463005397323776[0;39m <==    Updates: 0
2023-05-26 23:43:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463005397323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463026373038080[0;39m 生成今日电子书快照开始
2023-05-26 23:43:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463026373038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463026373038080[0;39m ==> Parameters: 
2023-05-26 23:43:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463026373038080[0;39m <==    Updates: 0
2023-05-26 23:43:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463026373038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463047390695424[0;39m 生成今日电子书快照开始
2023-05-26 23:43:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463047390695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463047390695424[0;39m ==> Parameters: 
2023-05-26 23:43:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463047390695424[0;39m <==    Updates: 0
2023-05-26 23:43:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463047390695424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:43:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119463068328660992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:43:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463068328660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:43:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463068328660992[0;39m ==> Parameters: 
2023-05-26 23:43:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463068328660992[0;39m <==    Updates: 8
2023-05-26 23:43:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119463068328660992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:43:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463068337049600[0;39m 生成今日电子书快照开始
2023-05-26 23:43:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463068337049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463068337049600[0;39m ==> Parameters: 
2023-05-26 23:43:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463068337049600[0;39m <==    Updates: 0
2023-05-26 23:43:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463068337049600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:43:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463089337929728[0;39m 生成今日电子书快照开始
2023-05-26 23:43:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463089337929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463089337929728[0;39m ==> Parameters: 
2023-05-26 23:43:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463089337929728[0;39m <==    Updates: 0
2023-05-26 23:43:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463089337929728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463110275895296[0;39m 生成今日电子书快照开始
2023-05-26 23:43:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463110275895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463110275895296[0;39m ==> Parameters: 
2023-05-26 23:43:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463110275895296[0;39m <==    Updates: 0
2023-05-26 23:43:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463110275895296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463131280969728[0;39m 生成今日电子书快照开始
2023-05-26 23:43:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463131280969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463131280969728[0;39m ==> Parameters: 
2023-05-26 23:43:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463131280969728[0;39m <==    Updates: 0
2023-05-26 23:43:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463131280969728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:43:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463152193769472[0;39m 生成今日电子书快照开始
2023-05-26 23:43:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463152193769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:43:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463152193769472[0;39m ==> Parameters: 
2023-05-26 23:43:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463152193769472[0;39m <==    Updates: 0
2023-05-26 23:43:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463152193769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463173228204032[0;39m 生成今日电子书快照开始
2023-05-26 23:44:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463173228204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463173228204032[0;39m ==> Parameters: 
2023-05-26 23:44:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463173228204032[0;39m <==    Updates: 0
2023-05-26 23:44:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463173228204032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119463194170363904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:44:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463194170363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:44:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463194170363904[0;39m ==> Parameters: 
2023-05-26 23:44:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463194170363904[0;39m <==    Updates: 8
2023-05-26 23:44:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119463194170363904[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:44:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463194174558208[0;39m 生成今日电子书快照开始
2023-05-26 23:44:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463194174558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463194174558208[0;39m ==> Parameters: 
2023-05-26 23:44:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463194174558208[0;39m <==    Updates: 0
2023-05-26 23:44:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463194174558208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:44:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463215154466816[0;39m 生成今日电子书快照开始
2023-05-26 23:44:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463215154466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463215154466816[0;39m ==> Parameters: 
2023-05-26 23:44:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463215154466816[0;39m <==    Updates: 0
2023-05-26 23:44:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463215154466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463236134375424[0;39m 生成今日电子书快照开始
2023-05-26 23:44:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463236134375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463236134375424[0;39m ==> Parameters: 
2023-05-26 23:44:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463236134375424[0;39m <==    Updates: 0
2023-05-26 23:44:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463236134375424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2023-05-26 23:44:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463257059758080[0;39m 生成今日电子书快照开始
2023-05-26 23:44:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463257059758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463257059758080[0;39m ==> Parameters: 
2023-05-26 23:44:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463257059758080[0;39m <==    Updates: 0
2023-05-26 23:44:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463257059758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463278031278080[0;39m 生成今日电子书快照开始
2023-05-26 23:44:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463278031278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463278031278080[0;39m ==> Parameters: 
2023-05-26 23:44:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463278031278080[0;39m <==    Updates: 0
2023-05-26 23:44:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463278031278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463299044741120[0;39m 生成今日电子书快照开始
2023-05-26 23:44:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463299044741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463299044741120[0;39m ==> Parameters: 
2023-05-26 23:44:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463299044741120[0;39m <==    Updates: 0
2023-05-26 23:44:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463299044741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119463319982706688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:44:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463319982706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:44:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463319982706688[0;39m ==> Parameters: 
2023-05-26 23:44:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463319982706688[0;39m <==    Updates: 8
2023-05-26 23:44:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119463319982706688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:44:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463319991095296[0;39m 生成今日电子书快照开始
2023-05-26 23:44:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463319991095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463319991095296[0;39m ==> Parameters: 
2023-05-26 23:44:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463319991095296[0;39m <==    Updates: 0
2023-05-26 23:44:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463319991095296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:44:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463340991975424[0;39m 生成今日电子书快照开始
2023-05-26 23:44:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463340991975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463340991975424[0;39m ==> Parameters: 
2023-05-26 23:44:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463340991975424[0;39m <==    Updates: 0
2023-05-26 23:44:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463340991975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463361929940992[0;39m 生成今日电子书快照开始
2023-05-26 23:44:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463361929940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463361929940992[0;39m ==> Parameters: 
2023-05-26 23:44:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463361929940992[0;39m <==    Updates: 0
2023-05-26 23:44:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463361929940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463382926626816[0;39m 生成今日电子书快照开始
2023-05-26 23:44:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463382926626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463382926626816[0;39m ==> Parameters: 
2023-05-26 23:44:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463382926626816[0;39m <==    Updates: 0
2023-05-26 23:44:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463382926626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:44:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463403860398080[0;39m 生成今日电子书快照开始
2023-05-26 23:44:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463403860398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:44:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463403860398080[0;39m ==> Parameters: 
2023-05-26 23:44:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463403860398080[0;39m <==    Updates: 0
2023-05-26 23:44:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463403860398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:45:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463424857083904[0;39m 生成今日电子书快照开始
2023-05-26 23:45:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463424857083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463424857083904[0;39m ==> Parameters: 
2023-05-26 23:45:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463424857083904[0;39m <==    Updates: 0
2023-05-26 23:45:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463424857083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:45:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119463445836992512[0;39m 更新电子书下的文档数据开始
2023-05-26 23:45:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463445836992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:45:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463445836992512[0;39m ==> Parameters: 
2023-05-26 23:45:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463445836992512[0;39m <==    Updates: 8
2023-05-26 23:45:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119463445836992512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:45:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463445845381120[0;39m 生成今日电子书快照开始
2023-05-26 23:45:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463445845381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463445845381120[0;39m ==> Parameters: 
2023-05-26 23:45:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463445845381120[0;39m <==    Updates: 0
2023-05-26 23:45:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463445845381120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:45:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463466774958080[0;39m 生成今日电子书快照开始
2023-05-26 23:45:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463466774958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463466774958080[0;39m ==> Parameters: 
2023-05-26 23:45:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463466774958080[0;39m <==    Updates: 0
2023-05-26 23:45:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463466774958080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:45:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463487763255296[0;39m 生成今日电子书快照开始
2023-05-26 23:45:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463487763255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463487763255296[0;39m ==> Parameters: 
2023-05-26 23:45:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463487763255296[0;39m <==    Updates: 0
2023-05-26 23:45:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463487763255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:45:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463508726386688[0;39m 生成今日电子书快照开始
2023-05-26 23:45:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463508726386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463508726386688[0;39m ==> Parameters: 
2023-05-26 23:45:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463508726386688[0;39m <==    Updates: 0
2023-05-26 23:45:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463508726386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:45:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463529723072512[0;39m 生成今日电子书快照开始
2023-05-26 23:45:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463529723072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463529723072512[0;39m ==> Parameters: 
2023-05-26 23:45:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463529723072512[0;39m <==    Updates: 0
2023-05-26 23:45:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463529723072512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:45:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463550702981120[0;39m 生成今日电子书快照开始
2023-05-26 23:45:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463550702981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463550702981120[0;39m ==> Parameters: 
2023-05-26 23:45:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463550702981120[0;39m <==    Updates: 0
2023-05-26 23:45:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463550702981120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:45:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119463571687084032[0;39m 更新电子书下的文档数据开始
2023-05-26 23:45:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463571687084032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:45:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463571687084032[0;39m ==> Parameters: 
2023-05-26 23:45:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463571687084032[0;39m <==    Updates: 8
2023-05-26 23:45:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119463571687084032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:45:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463571691278336[0;39m 生成今日电子书快照开始
2023-05-26 23:45:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463571691278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463571691278336[0;39m ==> Parameters: 
2023-05-26 23:45:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463571691278336[0;39m <==    Updates: 0
2023-05-26 23:45:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463571691278336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:45:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463592637632512[0;39m 生成今日电子书快照开始
2023-05-26 23:45:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463592637632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463592637632512[0;39m ==> Parameters: 
2023-05-26 23:45:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463592637632512[0;39m <==    Updates: 0
2023-05-26 23:45:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463592637632512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:45:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463613575598080[0;39m 生成今日电子书快照开始
2023-05-26 23:45:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463613575598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463613575598080[0;39m ==> Parameters: 
2023-05-26 23:45:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463613575598080[0;39m <==    Updates: 0
2023-05-26 23:45:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463613575598080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:45:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463634597449728[0;39m 生成今日电子书快照开始
2023-05-26 23:45:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463634597449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463634597449728[0;39m ==> Parameters: 
2023-05-26 23:45:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463634597449728[0;39m <==    Updates: 0
2023-05-26 23:45:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463634597449728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:45:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463655573164032[0;39m 生成今日电子书快照开始
2023-05-26 23:45:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463655573164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:45:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463655573164032[0;39m ==> Parameters: 
2023-05-26 23:45:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463655573164032[0;39m <==    Updates: 0
2023-05-26 23:45:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463655573164032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463676544684032[0;39m 生成今日电子书快照开始
2023-05-26 23:46:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463676544684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463676544684032[0;39m ==> Parameters: 
2023-05-26 23:46:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463676544684032[0;39m <==    Updates: 0
2023-05-26 23:46:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463676544684032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463697503621120[0;39m 生成今日电子书快照开始
2023-05-26 23:46:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463697503621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463697503621120[0;39m ==> Parameters: 
2023-05-26 23:46:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463697503621120[0;39m <==    Updates: 0
2023-05-26 23:46:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463697503621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119463697512009728[0;39m 更新电子书下的文档数据开始
2023-05-26 23:46:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463697512009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:46:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463697512009728[0;39m ==> Parameters: 
2023-05-26 23:46:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463697512009728[0;39m <==    Updates: 8
2023-05-26 23:46:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119463697512009728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:46:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463718475141120[0;39m 生成今日电子书快照开始
2023-05-26 23:46:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463718475141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463718475141120[0;39m ==> Parameters: 
2023-05-26 23:46:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463718475141120[0;39m <==    Updates: 0
2023-05-26 23:46:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463718475141120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463739396329472[0;39m 生成今日电子书快照开始
2023-05-26 23:46:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463739396329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463739396329472[0;39m ==> Parameters: 
2023-05-26 23:46:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463739396329472[0;39m <==    Updates: 0
2023-05-26 23:46:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463739396329472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:46:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463760401403904[0;39m 生成今日电子书快照开始
2023-05-26 23:46:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463760401403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463760401403904[0;39m ==> Parameters: 
2023-05-26 23:46:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463760401403904[0;39m <==    Updates: 0
2023-05-26 23:46:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463760401403904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:46:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463781402284032[0;39m 生成今日电子书快照开始
2023-05-26 23:46:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463781402284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463781402284032[0;39m ==> Parameters: 
2023-05-26 23:46:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463781402284032[0;39m <==    Updates: 0
2023-05-26 23:46:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463781402284032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463802365415424[0;39m 生成今日电子书快照开始
2023-05-26 23:46:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463802365415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463802365415424[0;39m ==> Parameters: 
2023-05-26 23:46:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463802365415424[0;39m <==    Updates: 0
2023-05-26 23:46:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463802365415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463823332741120[0;39m 生成今日电子书快照开始
2023-05-26 23:46:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463823332741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463823332741120[0;39m ==> Parameters: 
2023-05-26 23:46:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463823332741120[0;39m <==    Updates: 0
2023-05-26 23:46:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463823332741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119463823341129728[0;39m 更新电子书下的文档数据开始
2023-05-26 23:46:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463823341129728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:46:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463823341129728[0;39m ==> Parameters: 
2023-05-26 23:46:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463823341129728[0;39m <==    Updates: 8
2023-05-26 23:46:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119463823341129728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:46:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463844262318080[0;39m 生成今日电子书快照开始
2023-05-26 23:46:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463844262318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463844262318080[0;39m ==> Parameters: 
2023-05-26 23:46:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463844262318080[0;39m <==    Updates: 0
2023-05-26 23:46:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463844262318080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:46:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463865279975424[0;39m 生成今日电子书快照开始
2023-05-26 23:46:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463865279975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463865279975424[0;39m ==> Parameters: 
2023-05-26 23:46:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463865279975424[0;39m <==    Updates: 0
2023-05-26 23:46:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463865279975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463886255689728[0;39m 生成今日电子书快照开始
2023-05-26 23:46:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463886255689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463886255689728[0;39m ==> Parameters: 
2023-05-26 23:46:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463886255689728[0;39m <==    Updates: 0
2023-05-26 23:46:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463886255689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:46:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463907189460992[0;39m 生成今日电子书快照开始
2023-05-26 23:46:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463907189460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:46:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463907189460992[0;39m ==> Parameters: 
2023-05-26 23:46:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463907189460992[0;39m <==    Updates: 0
2023-05-26 23:46:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463907189460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463928194535424[0;39m 生成今日电子书快照开始
2023-05-26 23:47:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463928194535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463928194535424[0;39m ==> Parameters: 
2023-05-26 23:47:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463928194535424[0;39m <==    Updates: 0
2023-05-26 23:47:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463928194535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463949115723776[0;39m 生成今日电子书快照开始
2023-05-26 23:47:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463949115723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463949115723776[0;39m ==> Parameters: 
2023-05-26 23:47:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463949115723776[0;39m <==    Updates: 0
2023-05-26 23:47:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463949115723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119463949124112384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:47:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463949124112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:47:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463949124112384[0;39m ==> Parameters: 
2023-05-26 23:47:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119463949124112384[0;39m <==    Updates: 8
2023-05-26 23:47:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119463949124112384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:47:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463970129186816[0;39m 生成今日电子书快照开始
2023-05-26 23:47:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463970129186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463970129186816[0;39m ==> Parameters: 
2023-05-26 23:47:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463970129186816[0;39m <==    Updates: 0
2023-05-26 23:47:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463970129186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119463991100706816[0;39m 生成今日电子书快照开始
2023-05-26 23:47:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463991100706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463991100706816[0;39m ==> Parameters: 
2023-05-26 23:47:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119463991100706816[0;39m <==    Updates: 0
2023-05-26 23:47:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119463991100706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464012059643904[0;39m 生成今日电子书快照开始
2023-05-26 23:47:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464012059643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464012059643904[0;39m ==> Parameters: 
2023-05-26 23:47:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464012059643904[0;39m <==    Updates: 0
2023-05-26 23:47:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464012059643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464033026969600[0;39m 生成今日电子书快照开始
2023-05-26 23:47:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464033026969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464033026969600[0;39m ==> Parameters: 
2023-05-26 23:47:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464033026969600[0;39m <==    Updates: 0
2023-05-26 23:47:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464033026969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464053981712384[0;39m 生成今日电子书快照开始
2023-05-26 23:47:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464053981712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464053981712384[0;39m ==> Parameters: 
2023-05-26 23:47:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464053981712384[0;39m <==    Updates: 0
2023-05-26 23:47:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464053981712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464074953232384[0;39m 生成今日电子书快照开始
2023-05-26 23:47:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464074953232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464074953232384[0;39m ==> Parameters: 
2023-05-26 23:47:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464074953232384[0;39m <==    Updates: 0
2023-05-26 23:47:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464074953232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119464074961620992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:47:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464074961620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:47:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464074961620992[0;39m ==> Parameters: 
2023-05-26 23:47:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464074961620992[0;39m <==    Updates: 8
2023-05-26 23:47:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119464074961620992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:47:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464095966695424[0;39m 生成今日电子书快照开始
2023-05-26 23:47:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464095966695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464095966695424[0;39m ==> Parameters: 
2023-05-26 23:47:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464095966695424[0;39m <==    Updates: 0
2023-05-26 23:47:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464095966695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464116942409728[0;39m 生成今日电子书快照开始
2023-05-26 23:47:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464116942409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464116942409728[0;39m ==> Parameters: 
2023-05-26 23:47:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464116942409728[0;39m <==    Updates: 0
2023-05-26 23:47:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464116942409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464137909735424[0;39m 生成今日电子书快照开始
2023-05-26 23:47:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464137909735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464137909735424[0;39m ==> Parameters: 
2023-05-26 23:47:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464137909735424[0;39m <==    Updates: 0
2023-05-26 23:47:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464137909735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:47:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464158881255424[0;39m 生成今日电子书快照开始
2023-05-26 23:47:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464158881255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:47:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464158881255424[0;39m ==> Parameters: 
2023-05-26 23:47:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464158881255424[0;39m <==    Updates: 0
2023-05-26 23:47:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464158881255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464179840192512[0;39m 生成今日电子书快照开始
2023-05-26 23:48:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464179840192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464179840192512[0;39m ==> Parameters: 
2023-05-26 23:48:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464179840192512[0;39m <==    Updates: 0
2023-05-26 23:48:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464179840192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464200820101120[0;39m 生成今日电子书快照开始
2023-05-26 23:48:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464200820101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464200820101120[0;39m ==> Parameters: 
2023-05-26 23:48:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464200820101120[0;39m <==    Updates: 0
2023-05-26 23:48:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464200820101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119464200828489728[0;39m 更新电子书下的文档数据开始
2023-05-26 23:48:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464200828489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:48:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464200828489728[0;39m ==> Parameters: 
2023-05-26 23:48:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464200828489728[0;39m <==    Updates: 8
2023-05-26 23:48:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119464200828489728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:48:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464221766455296[0;39m 生成今日电子书快照开始
2023-05-26 23:48:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464221766455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464221766455296[0;39m ==> Parameters: 
2023-05-26 23:48:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464221766455296[0;39m <==    Updates: 0
2023-05-26 23:48:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464221766455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464242746363904[0;39m 生成今日电子书快照开始
2023-05-26 23:48:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464242746363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464242746363904[0;39m ==> Parameters: 
2023-05-26 23:48:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464242746363904[0;39m <==    Updates: 0
2023-05-26 23:48:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464242746363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464263726272512[0;39m 生成今日电子书快照开始
2023-05-26 23:48:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464263726272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464263726272512[0;39m ==> Parameters: 
2023-05-26 23:48:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464263726272512[0;39m <==    Updates: 0
2023-05-26 23:48:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464263726272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464284685209600[0;39m 生成今日电子书快照开始
2023-05-26 23:48:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464284685209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464284685209600[0;39m ==> Parameters: 
2023-05-26 23:48:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464284685209600[0;39m <==    Updates: 0
2023-05-26 23:48:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464284685209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464305673506816[0;39m 生成今日电子书快照开始
2023-05-26 23:48:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464305673506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464305673506816[0;39m ==> Parameters: 
2023-05-26 23:48:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464305673506816[0;39m <==    Updates: 0
2023-05-26 23:48:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464305673506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119464326640832512[0;39m 更新电子书下的文档数据开始
2023-05-26 23:48:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464326640832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:48:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464326640832512[0;39m ==> Parameters: 
2023-05-26 23:48:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464326640832512[0;39m <==    Updates: 8
2023-05-26 23:48:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119464326640832512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:48:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464326645026816[0;39m 生成今日电子书快照开始
2023-05-26 23:48:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464326645026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464326645026816[0;39m ==> Parameters: 
2023-05-26 23:48:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464326645026816[0;39m <==    Updates: 0
2023-05-26 23:48:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464326645026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464347599769600[0;39m 生成今日电子书快照开始
2023-05-26 23:48:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464347599769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464347599769600[0;39m ==> Parameters: 
2023-05-26 23:48:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464347599769600[0;39m <==    Updates: 0
2023-05-26 23:48:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464347599769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464368592261120[0;39m 生成今日电子书快照开始
2023-05-26 23:48:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464368592261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464368592261120[0;39m ==> Parameters: 
2023-05-26 23:48:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464368592261120[0;39m <==    Updates: 0
2023-05-26 23:48:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464368592261120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:48:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464389567975424[0;39m 生成今日电子书快照开始
2023-05-26 23:48:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464389567975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464389567975424[0;39m ==> Parameters: 
2023-05-26 23:48:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464389567975424[0;39m <==    Updates: 0
2023-05-26 23:48:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464389567975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:48:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464410484969472[0;39m 生成今日电子书快照开始
2023-05-26 23:48:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464410484969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:48:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464410484969472[0;39m ==> Parameters: 
2023-05-26 23:48:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464410484969472[0;39m <==    Updates: 0
2023-05-26 23:48:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464410484969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464431485849600[0;39m 生成今日电子书快照开始
2023-05-26 23:49:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464431485849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464431485849600[0;39m ==> Parameters: 
2023-05-26 23:49:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464431485849600[0;39m <==    Updates: 0
2023-05-26 23:49:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464431485849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119464452478341120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:49:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464452478341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:49:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464452478341120[0;39m ==> Parameters: 
2023-05-26 23:49:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464452478341120[0;39m <==    Updates: 8
2023-05-26 23:49:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119464452478341120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:49:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464452486729728[0;39m 生成今日电子书快照开始
2023-05-26 23:49:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464452486729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464452486729728[0;39m ==> Parameters: 
2023-05-26 23:49:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464452486729728[0;39m <==    Updates: 0
2023-05-26 23:49:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464452486729728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:49:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464473437278208[0;39m 生成今日电子书快照开始
2023-05-26 23:49:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464473437278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464473437278208[0;39m ==> Parameters: 
2023-05-26 23:49:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464473437278208[0;39m <==    Updates: 0
2023-05-26 23:49:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464473437278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464494404603904[0;39m 生成今日电子书快照开始
2023-05-26 23:49:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464494404603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464494404603904[0;39m ==> Parameters: 
2023-05-26 23:49:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464494404603904[0;39m <==    Updates: 0
2023-05-26 23:49:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464494404603904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:49:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464515376123904[0;39m 生成今日电子书快照开始
2023-05-26 23:49:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464515376123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464515376123904[0;39m ==> Parameters: 
2023-05-26 23:49:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464515376123904[0;39m <==    Updates: 0
2023-05-26 23:49:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464515376123904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464536356032512[0;39m 生成今日电子书快照开始
2023-05-26 23:49:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464536356032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464536356032512[0;39m ==> Parameters: 
2023-05-26 23:49:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464536356032512[0;39m <==    Updates: 0
2023-05-26 23:49:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464536356032512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464557306580992[0;39m 生成今日电子书快照开始
2023-05-26 23:49:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464557306580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464557306580992[0;39m ==> Parameters: 
2023-05-26 23:49:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464557306580992[0;39m <==    Updates: 0
2023-05-26 23:49:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464557306580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119464578307461120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:49:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464578307461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:49:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464578307461120[0;39m ==> Parameters: 
2023-05-26 23:49:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464578307461120[0;39m <==    Updates: 8
2023-05-26 23:49:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119464578307461120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:49:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464578311655424[0;39m 生成今日电子书快照开始
2023-05-26 23:49:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464578311655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464578311655424[0;39m ==> Parameters: 
2023-05-26 23:49:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464578311655424[0;39m <==    Updates: 0
2023-05-26 23:49:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464578311655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464599283175424[0;39m 生成今日电子书快照开始
2023-05-26 23:49:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464599283175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464599283175424[0;39m ==> Parameters: 
2023-05-26 23:49:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464599283175424[0;39m <==    Updates: 0
2023-05-26 23:49:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464599283175424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:49:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464620263084032[0;39m 生成今日电子书快照开始
2023-05-26 23:49:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464620263084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464620263084032[0;39m ==> Parameters: 
2023-05-26 23:49:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464620263084032[0;39m <==    Updates: 0
2023-05-26 23:49:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464620263084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464641175883776[0;39m 生成今日电子书快照开始
2023-05-26 23:49:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464641175883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464641175883776[0;39m ==> Parameters: 
2023-05-26 23:49:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464641175883776[0;39m <==    Updates: 0
2023-05-26 23:49:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464641175883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:49:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464662189346816[0;39m 生成今日电子书快照开始
2023-05-26 23:49:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464662189346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:49:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464662189346816[0;39m ==> Parameters: 
2023-05-26 23:49:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464662189346816[0;39m <==    Updates: 0
2023-05-26 23:49:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464662189346816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:50:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464683169255424[0;39m 生成今日电子书快照开始
2023-05-26 23:50:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464683169255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464683169255424[0;39m ==> Parameters: 
2023-05-26 23:50:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464683169255424[0;39m <==    Updates: 0
2023-05-26 23:50:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464683169255424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:50:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464704132386816[0;39m 生成今日电子书快照开始
2023-05-26 23:50:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464704132386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464704132386816[0;39m ==> Parameters: 
2023-05-26 23:50:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464704132386816[0;39m <==    Updates: 0
2023-05-26 23:50:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464704132386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119464704140775424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:50:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464704140775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:50:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464704140775424[0;39m ==> Parameters: 
2023-05-26 23:50:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464704140775424[0;39m <==    Updates: 8
2023-05-26 23:50:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119464704140775424[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:50:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464725061963776[0;39m 生成今日电子书快照开始
2023-05-26 23:50:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464725061963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464725061963776[0;39m ==> Parameters: 
2023-05-26 23:50:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464725061963776[0;39m <==    Updates: 0
2023-05-26 23:50:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464725061963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464746054455296[0;39m 生成今日电子书快照开始
2023-05-26 23:50:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464746054455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464746054455296[0;39m ==> Parameters: 
2023-05-26 23:50:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464746054455296[0;39m <==    Updates: 0
2023-05-26 23:50:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464746054455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464767030169600[0;39m 生成今日电子书快照开始
2023-05-26 23:50:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464767030169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464767030169600[0;39m ==> Parameters: 
2023-05-26 23:50:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464767030169600[0;39m <==    Updates: 0
2023-05-26 23:50:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464767030169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464788022661120[0;39m 生成今日电子书快照开始
2023-05-26 23:50:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464788022661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464788022661120[0;39m ==> Parameters: 
2023-05-26 23:50:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464788022661120[0;39m <==    Updates: 0
2023-05-26 23:50:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464788022661120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:50:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464808969015296[0;39m 生成今日电子书快照开始
2023-05-26 23:50:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464808969015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464808969015296[0;39m ==> Parameters: 
2023-05-26 23:50:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464808969015296[0;39m <==    Updates: 0
2023-05-26 23:50:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464808969015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119464829936340992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:50:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464829936340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:50:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464829936340992[0;39m ==> Parameters: 
2023-05-26 23:50:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464829936340992[0;39m <==    Updates: 8
2023-05-26 23:50:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119464829936340992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:50:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464829940535296[0;39m 生成今日电子书快照开始
2023-05-26 23:50:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464829940535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464829940535296[0;39m ==> Parameters: 
2023-05-26 23:50:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464829940535296[0;39m <==    Updates: 0
2023-05-26 23:50:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464829940535296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464850924638208[0;39m 生成今日电子书快照开始
2023-05-26 23:50:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464850924638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464850924638208[0;39m ==> Parameters: 
2023-05-26 23:50:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464850924638208[0;39m <==    Updates: 0
2023-05-26 23:50:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464850924638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464871866798080[0;39m 生成今日电子书快照开始
2023-05-26 23:50:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464871866798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464871866798080[0;39m ==> Parameters: 
2023-05-26 23:50:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464871866798080[0;39m <==    Updates: 0
2023-05-26 23:50:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464871866798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464892876066816[0;39m 生成今日电子书快照开始
2023-05-26 23:50:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464892876066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464892876066816[0;39m ==> Parameters: 
2023-05-26 23:50:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464892876066816[0;39m <==    Updates: 0
2023-05-26 23:50:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464892876066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:50:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464913851781120[0;39m 生成今日电子书快照开始
2023-05-26 23:50:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464913851781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:50:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464913851781120[0;39m ==> Parameters: 
2023-05-26 23:50:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464913851781120[0;39m <==    Updates: 0
2023-05-26 23:50:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464913851781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464934772969472[0;39m 生成今日电子书快照开始
2023-05-26 23:51:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464934772969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464934772969472[0;39m ==> Parameters: 
2023-05-26 23:51:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464934772969472[0;39m <==    Updates: 0
2023-05-26 23:51:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464934772969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119464955794821120[0;39m 更新电子书下的文档数据开始
2023-05-26 23:51:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464955794821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:51:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464955794821120[0;39m ==> Parameters: 
2023-05-26 23:51:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119464955794821120[0;39m <==    Updates: 8
2023-05-26 23:51:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119464955794821120[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:51:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464955799015424[0;39m 生成今日电子书快照开始
2023-05-26 23:51:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464955799015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464955799015424[0;39m ==> Parameters: 
2023-05-26 23:51:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464955799015424[0;39m <==    Updates: 0
2023-05-26 23:51:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464955799015424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:51:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464976724398080[0;39m 生成今日电子书快照开始
2023-05-26 23:51:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464976724398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464976724398080[0;39m ==> Parameters: 
2023-05-26 23:51:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464976724398080[0;39m <==    Updates: 0
2023-05-26 23:51:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464976724398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119464997737861120[0;39m 生成今日电子书快照开始
2023-05-26 23:51:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464997737861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464997737861120[0;39m ==> Parameters: 
2023-05-26 23:51:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119464997737861120[0;39m <==    Updates: 0
2023-05-26 23:51:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119464997737861120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465018692603904[0;39m 生成今日电子书快照开始
2023-05-26 23:51:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465018692603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465018692603904[0;39m ==> Parameters: 
2023-05-26 23:51:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465018692603904[0;39m <==    Updates: 0
2023-05-26 23:51:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465018692603904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465039634763776[0;39m 生成今日电子书快照开始
2023-05-26 23:51:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465039634763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465039634763776[0;39m ==> Parameters: 
2023-05-26 23:51:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465039634763776[0;39m <==    Updates: 0
2023-05-26 23:51:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465039634763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465060635643904[0;39m 生成今日电子书快照开始
2023-05-26 23:51:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465060635643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465060635643904[0;39m ==> Parameters: 
2023-05-26 23:51:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465060635643904[0;39m <==    Updates: 0
2023-05-26 23:51:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465060635643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465081586192384[0;39m 生成今日电子书快照开始
2023-05-26 23:51:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465081586192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465081586192384[0;39m ==> Parameters: 
2023-05-26 23:51:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465081586192384[0;39m <==    Updates: 0
2023-05-26 23:51:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465081586192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119465081594580992[0;39m 更新电子书下的文档数据开始
2023-05-26 23:51:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465081594580992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:51:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465081594580992[0;39m ==> Parameters: 
2023-05-26 23:51:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465081594580992[0;39m <==    Updates: 8
2023-05-26 23:51:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119465081594580992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:51:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465102599655424[0;39m 生成今日电子书快照开始
2023-05-26 23:51:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465102599655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465102599655424[0;39m ==> Parameters: 
2023-05-26 23:51:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465102599655424[0;39m <==    Updates: 0
2023-05-26 23:51:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465102599655424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:51:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465123571175424[0;39m 生成今日电子书快照开始
2023-05-26 23:51:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465123571175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:45.463 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465123571175424[0;39m ==> Parameters: 
2023-05-26 23:51:45.464 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465123571175424[0;39m <==    Updates: 0
2023-05-26 23:51:45.464 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465123571175424[0;39m 生成今日电子书快照结束，耗时：450 毫秒
2023-05-26 23:51:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465144500752384[0;39m 生成今日电子书快照开始
2023-05-26 23:51:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465144500752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465144500752384[0;39m ==> Parameters: 
2023-05-26 23:51:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465144500752384[0;39m <==    Updates: 0
2023-05-26 23:51:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465144500752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:51:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465165493243904[0;39m 生成今日电子书快照开始
2023-05-26 23:51:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465165493243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:51:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465165493243904[0;39m ==> Parameters: 
2023-05-26 23:51:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465165493243904[0;39m <==    Updates: 0
2023-05-26 23:51:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465165493243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465186481541120[0;39m 生成今日电子书快照开始
2023-05-26 23:52:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465186481541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465186481541120[0;39m ==> Parameters: 
2023-05-26 23:52:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465186481541120[0;39m <==    Updates: 0
2023-05-26 23:52:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465186481541120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:52:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465207453061120[0;39m 生成今日电子书快照开始
2023-05-26 23:52:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465207453061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465207453061120[0;39m ==> Parameters: 
2023-05-26 23:52:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465207453061120[0;39m <==    Updates: 0
2023-05-26 23:52:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465207453061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119465207461449728[0;39m 更新电子书下的文档数据开始
2023-05-26 23:52:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465207461449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:52:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465207461449728[0;39m ==> Parameters: 
2023-05-26 23:52:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465207461449728[0;39m <==    Updates: 8
2023-05-26 23:52:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119465207461449728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:52:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465228386832384[0;39m 生成今日电子书快照开始
2023-05-26 23:52:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465228386832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465228386832384[0;39m ==> Parameters: 
2023-05-26 23:52:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465228386832384[0;39m <==    Updates: 0
2023-05-26 23:52:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465228386832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465249345769472[0;39m 生成今日电子书快照开始
2023-05-26 23:52:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465249345769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465249345769472[0;39m ==> Parameters: 
2023-05-26 23:52:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465249345769472[0;39m <==    Updates: 0
2023-05-26 23:52:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465249345769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465270338260992[0;39m 生成今日电子书快照开始
2023-05-26 23:52:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465270338260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465270338260992[0;39m ==> Parameters: 
2023-05-26 23:52:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465270338260992[0;39m <==    Updates: 0
2023-05-26 23:52:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465270338260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465291318169600[0;39m 生成今日电子书快照开始
2023-05-26 23:52:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465291318169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465291318169600[0;39m ==> Parameters: 
2023-05-26 23:52:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465291318169600[0;39m <==    Updates: 0
2023-05-26 23:52:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465291318169600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:52:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465312314855424[0;39m 生成今日电子书快照开始
2023-05-26 23:52:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465312314855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465312314855424[0;39m ==> Parameters: 
2023-05-26 23:52:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465312314855424[0;39m <==    Updates: 0
2023-05-26 23:52:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465312314855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119465333248626688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:52:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465333248626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:52:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465333248626688[0;39m ==> Parameters: 
2023-05-26 23:52:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465333248626688[0;39m <==    Updates: 8
2023-05-26 23:52:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119465333248626688[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2023-05-26 23:52:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465333261209600[0;39m 生成今日电子书快照开始
2023-05-26 23:52:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465333261209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465333261209600[0;39m ==> Parameters: 
2023-05-26 23:52:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465333261209600[0;39m <==    Updates: 0
2023-05-26 23:52:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465333261209600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:52:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465354257895424[0;39m 生成今日电子书快照开始
2023-05-26 23:52:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465354257895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465354257895424[0;39m ==> Parameters: 
2023-05-26 23:52:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465354257895424[0;39m <==    Updates: 0
2023-05-26 23:52:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465354257895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465375183278080[0;39m 生成今日电子书快照开始
2023-05-26 23:52:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465375183278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465375183278080[0;39m ==> Parameters: 
2023-05-26 23:52:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465375183278080[0;39m <==    Updates: 0
2023-05-26 23:52:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465375183278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465396167380992[0;39m 生成今日电子书快照开始
2023-05-26 23:52:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465396167380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465396167380992[0;39m ==> Parameters: 
2023-05-26 23:52:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465396167380992[0;39m <==    Updates: 0
2023-05-26 23:52:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465396167380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:52:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465417159872512[0;39m 生成今日电子书快照开始
2023-05-26 23:52:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465417159872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:52:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465417159872512[0;39m ==> Parameters: 
2023-05-26 23:52:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465417159872512[0;39m <==    Updates: 0
2023-05-26 23:52:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465417159872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465438106226688[0;39m 生成今日电子书快照开始
2023-05-26 23:53:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465438106226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465438106226688[0;39m ==> Parameters: 
2023-05-26 23:53:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465438106226688[0;39m <==    Updates: 0
2023-05-26 23:53:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465438106226688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:53:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465459069358080[0;39m 生成今日电子书快照开始
2023-05-26 23:53:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465459069358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465459069358080[0;39m ==> Parameters: 
2023-05-26 23:53:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465459069358080[0;39m <==    Updates: 0
2023-05-26 23:53:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465459069358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119465459077746688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:53:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465459077746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:53:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465459077746688[0;39m ==> Parameters: 
2023-05-26 23:53:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465459077746688[0;39m <==    Updates: 8
2023-05-26 23:53:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119465459077746688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:53:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465480032489472[0;39m 生成今日电子书快照开始
2023-05-26 23:53:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465480032489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465480032489472[0;39m ==> Parameters: 
2023-05-26 23:53:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465480032489472[0;39m <==    Updates: 0
2023-05-26 23:53:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465480032489472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465501008203776[0;39m 生成今日电子书快照开始
2023-05-26 23:53:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465501008203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465501008203776[0;39m ==> Parameters: 
2023-05-26 23:53:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465501008203776[0;39m <==    Updates: 0
2023-05-26 23:53:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465501008203776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465522021666816[0;39m 生成今日电子书快照开始
2023-05-26 23:53:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465522021666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465522021666816[0;39m ==> Parameters: 
2023-05-26 23:53:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465522021666816[0;39m <==    Updates: 0
2023-05-26 23:53:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465522021666816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465542955438080[0;39m 生成今日电子书快照开始
2023-05-26 23:53:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465542955438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465542955438080[0;39m ==> Parameters: 
2023-05-26 23:53:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465542955438080[0;39m <==    Updates: 0
2023-05-26 23:53:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465542955438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:30.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465563914375168[0;39m 生成今日电子书快照开始
2023-05-26 23:53:30.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465563914375168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465563914375168[0;39m ==> Parameters: 
2023-05-26 23:53:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465563914375168[0;39m <==    Updates: 0
2023-05-26 23:53:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465563914375168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119465584944615424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:53:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465584944615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:53:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465584944615424[0;39m ==> Parameters: 
2023-05-26 23:53:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465584944615424[0;39m <==    Updates: 8
2023-05-26 23:53:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119465584944615424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:53:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465584953004032[0;39m 生成今日电子书快照开始
2023-05-26 23:53:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465584953004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465584953004032[0;39m ==> Parameters: 
2023-05-26 23:53:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465584953004032[0;39m <==    Updates: 0
2023-05-26 23:53:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465584953004032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465605920329728[0;39m 生成今日电子书快照开始
2023-05-26 23:53:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465605920329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465605920329728[0;39m ==> Parameters: 
2023-05-26 23:53:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465605920329728[0;39m <==    Updates: 0
2023-05-26 23:53:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465605920329728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:53:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465626858295296[0;39m 生成今日电子书快照开始
2023-05-26 23:53:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465626858295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465626858295296[0;39m ==> Parameters: 
2023-05-26 23:53:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465626858295296[0;39m <==    Updates: 0
2023-05-26 23:53:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465626858295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465647846592512[0;39m 生成今日电子书快照开始
2023-05-26 23:53:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465647846592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465647846592512[0;39m ==> Parameters: 
2023-05-26 23:53:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465647846592512[0;39m <==    Updates: 0
2023-05-26 23:53:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465647846592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:53:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465668784558080[0;39m 生成今日电子书快照开始
2023-05-26 23:53:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465668784558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:53:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465668784558080[0;39m ==> Parameters: 
2023-05-26 23:53:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465668784558080[0;39m <==    Updates: 0
2023-05-26 23:53:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465668784558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:54:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465689772855296[0;39m 生成今日电子书快照开始
2023-05-26 23:54:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465689772855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465689772855296[0;39m ==> Parameters: 
2023-05-26 23:54:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465689772855296[0;39m <==    Updates: 0
2023-05-26 23:54:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465689772855296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:54:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119465710735986688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:54:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465710735986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:54:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465710735986688[0;39m ==> Parameters: 
2023-05-26 23:54:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465710735986688[0;39m <==    Updates: 8
2023-05-26 23:54:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119465710735986688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:54:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465710744375296[0;39m 生成今日电子书快照开始
2023-05-26 23:54:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465710744375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465710744375296[0;39m ==> Parameters: 
2023-05-26 23:54:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465710744375296[0;39m <==    Updates: 0
2023-05-26 23:54:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465710744375296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:54:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465731720089600[0;39m 生成今日电子书快照开始
2023-05-26 23:54:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465731720089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465731720089600[0;39m ==> Parameters: 
2023-05-26 23:54:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465731720089600[0;39m <==    Updates: 0
2023-05-26 23:54:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465731720089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:54:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465752708386816[0;39m 生成今日电子书快照开始
2023-05-26 23:54:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465752708386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465752708386816[0;39m ==> Parameters: 
2023-05-26 23:54:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465752708386816[0;39m <==    Updates: 0
2023-05-26 23:54:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465752708386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:54:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465773692489728[0;39m 生成今日电子书快照开始
2023-05-26 23:54:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465773692489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465773692489728[0;39m ==> Parameters: 
2023-05-26 23:54:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465773692489728[0;39m <==    Updates: 0
2023-05-26 23:54:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465773692489728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:54:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465794622066688[0;39m 生成今日电子书快照开始
2023-05-26 23:54:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465794622066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465794622066688[0;39m ==> Parameters: 
2023-05-26 23:54:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465794622066688[0;39m <==    Updates: 0
2023-05-26 23:54:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465794622066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:54:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465815585198080[0;39m 生成今日电子书快照开始
2023-05-26 23:54:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465815585198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465815585198080[0;39m ==> Parameters: 
2023-05-26 23:54:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465815585198080[0;39m <==    Updates: 0
2023-05-26 23:54:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465815585198080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:54:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119465836594466816[0;39m 更新电子书下的文档数据开始
2023-05-26 23:54:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465836594466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:54:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465836594466816[0;39m ==> Parameters: 
2023-05-26 23:54:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465836594466816[0;39m <==    Updates: 8
2023-05-26 23:54:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119465836594466816[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2023-05-26 23:54:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465836594466817[0;39m 生成今日电子书快照开始
2023-05-26 23:54:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465836594466817[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465836594466817[0;39m ==> Parameters: 
2023-05-26 23:54:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465836594466817[0;39m <==    Updates: 0
2023-05-26 23:54:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465836594466817[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:54:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465857545015296[0;39m 生成今日电子书快照开始
2023-05-26 23:54:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465857545015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465857545015296[0;39m ==> Parameters: 
2023-05-26 23:54:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465857545015296[0;39m <==    Updates: 0
2023-05-26 23:54:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465857545015296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:54:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465878554284032[0;39m 生成今日电子书快照开始
2023-05-26 23:54:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465878554284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465878554284032[0;39m ==> Parameters: 
2023-05-26 23:54:45.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465878554284032[0;39m <==    Updates: 0
2023-05-26 23:54:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465878554284032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:54:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465899509026816[0;39m 生成今日电子书快照开始
2023-05-26 23:54:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465899509026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465899509026816[0;39m ==> Parameters: 
2023-05-26 23:54:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465899509026816[0;39m <==    Updates: 0
2023-05-26 23:54:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465899509026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:54:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465920442798080[0;39m 生成今日电子书快照开始
2023-05-26 23:54:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465920442798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:54:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465920442798080[0;39m ==> Parameters: 
2023-05-26 23:54:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465920442798080[0;39m <==    Updates: 0
2023-05-26 23:54:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465920442798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:55:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465941418512384[0;39m 生成今日电子书快照开始
2023-05-26 23:55:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465941418512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465941418512384[0;39m ==> Parameters: 
2023-05-26 23:55:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465941418512384[0;39m <==    Updates: 0
2023-05-26 23:55:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465941418512384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:55:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465962377449472[0;39m 生成今日电子书快照开始
2023-05-26 23:55:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465962377449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465962377449472[0;39m ==> Parameters: 
2023-05-26 23:55:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465962377449472[0;39m <==    Updates: 0
2023-05-26 23:55:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465962377449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:55:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119465962385838080[0;39m 更新电子书下的文档数据开始
2023-05-26 23:55:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465962385838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:55:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465962385838080[0;39m ==> Parameters: 
2023-05-26 23:55:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119465962385838080[0;39m <==    Updates: 8
2023-05-26 23:55:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119465962385838080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:55:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119465983411884032[0;39m 生成今日电子书快照开始
2023-05-26 23:55:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465983411884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465983411884032[0;39m ==> Parameters: 
2023-05-26 23:55:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119465983411884032[0;39m <==    Updates: 0
2023-05-26 23:55:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119465983411884032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:55:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466004358238208[0;39m 生成今日电子书快照开始
2023-05-26 23:55:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466004358238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466004358238208[0;39m ==> Parameters: 
2023-05-26 23:55:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466004358238208[0;39m <==    Updates: 0
2023-05-26 23:55:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466004358238208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:55:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466025342341120[0;39m 生成今日电子书快照开始
2023-05-26 23:55:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466025342341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466025342341120[0;39m ==> Parameters: 
2023-05-26 23:55:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466025342341120[0;39m <==    Updates: 0
2023-05-26 23:55:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466025342341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:55:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466046280306688[0;39m 生成今日电子书快照开始
2023-05-26 23:55:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466046280306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466046280306688[0;39m ==> Parameters: 
2023-05-26 23:55:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466046280306688[0;39m <==    Updates: 0
2023-05-26 23:55:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466046280306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:55:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466067256020992[0;39m 生成今日电子书快照开始
2023-05-26 23:55:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466067256020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466067256020992[0;39m ==> Parameters: 
2023-05-26 23:55:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466067256020992[0;39m <==    Updates: 0
2023-05-26 23:55:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466067256020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:55:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119466088206569472[0;39m 更新电子书下的文档数据开始
2023-05-26 23:55:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466088206569472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:55:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466088206569472[0;39m ==> Parameters: 
2023-05-26 23:55:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466088206569472[0;39m <==    Updates: 8
2023-05-26 23:55:35.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119466088206569472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:55:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466088214958080[0;39m 生成今日电子书快照开始
2023-05-26 23:55:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466088214958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466088214958080[0;39m ==> Parameters: 
2023-05-26 23:55:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466088214958080[0;39m <==    Updates: 0
2023-05-26 23:55:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466088214958080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:55:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466109203255296[0;39m 生成今日电子书快照开始
2023-05-26 23:55:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466109203255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466109203255296[0;39m ==> Parameters: 
2023-05-26 23:55:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466109203255296[0;39m <==    Updates: 0
2023-05-26 23:55:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466109203255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:55:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466130208329728[0;39m 生成今日电子书快照开始
2023-05-26 23:55:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466130208329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466130208329728[0;39m ==> Parameters: 
2023-05-26 23:55:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466130208329728[0;39m <==    Updates: 0
2023-05-26 23:55:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466130208329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:55:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466151150489600[0;39m 生成今日电子书快照开始
2023-05-26 23:55:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466151150489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466151150489600[0;39m ==> Parameters: 
2023-05-26 23:55:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466151150489600[0;39m <==    Updates: 0
2023-05-26 23:55:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466151150489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:55:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466172105232384[0;39m 生成今日电子书快照开始
2023-05-26 23:55:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466172105232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:55:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466172105232384[0;39m ==> Parameters: 
2023-05-26 23:55:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466172105232384[0;39m <==    Updates: 0
2023-05-26 23:55:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466172105232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:56:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466193080946688[0;39m 生成今日电子书快照开始
2023-05-26 23:56:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466193080946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466193080946688[0;39m ==> Parameters: 
2023-05-26 23:56:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466193080946688[0;39m <==    Updates: 0
2023-05-26 23:56:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466193080946688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:56:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119466214069243904[0;39m 更新电子书下的文档数据开始
2023-05-26 23:56:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466214069243904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:56:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466214069243904[0;39m ==> Parameters: 
2023-05-26 23:56:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466214069243904[0;39m <==    Updates: 8
2023-05-26 23:56:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119466214069243904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2023-05-26 23:56:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466214077632512[0;39m 生成今日电子书快照开始
2023-05-26 23:56:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466214077632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466214077632512[0;39m ==> Parameters: 
2023-05-26 23:56:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466214077632512[0;39m <==    Updates: 0
2023-05-26 23:56:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466214077632512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:56:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466235007209472[0;39m 生成今日电子书快照开始
2023-05-26 23:56:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466235007209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466235007209472[0;39m ==> Parameters: 
2023-05-26 23:56:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466235007209472[0;39m <==    Updates: 0
2023-05-26 23:56:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466235007209472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:56:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466256029061120[0;39m 生成今日电子书快照开始
2023-05-26 23:56:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466256029061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466256029061120[0;39m ==> Parameters: 
2023-05-26 23:56:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466256029061120[0;39m <==    Updates: 0
2023-05-26 23:56:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466256029061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:56:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466276958638080[0;39m 生成今日电子书快照开始
2023-05-26 23:56:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466276958638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466276958638080[0;39m ==> Parameters: 
2023-05-26 23:56:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466276958638080[0;39m <==    Updates: 0
2023-05-26 23:56:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466276958638080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:56:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466297984684032[0;39m 生成今日电子书快照开始
2023-05-26 23:56:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466297984684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466297984684032[0;39m ==> Parameters: 
2023-05-26 23:56:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466297984684032[0;39m <==    Updates: 0
2023-05-26 23:56:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466297984684032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:56:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466318897483776[0;39m 生成今日电子书快照开始
2023-05-26 23:56:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466318897483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466318897483776[0;39m ==> Parameters: 
2023-05-26 23:56:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466318897483776[0;39m <==    Updates: 0
2023-05-26 23:56:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466318897483776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:56:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119466339927724032[0;39m 更新电子书下的文档数据开始
2023-05-26 23:56:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466339927724032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:56:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466339927724032[0;39m ==> Parameters: 
2023-05-26 23:56:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466339927724032[0;39m <==    Updates: 8
2023-05-26 23:56:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119466339927724032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:56:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466339931918336[0;39m 生成今日电子书快照开始
2023-05-26 23:56:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466339931918336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466339931918336[0;39m ==> Parameters: 
2023-05-26 23:56:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466339931918336[0;39m <==    Updates: 0
2023-05-26 23:56:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466339931918336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:56:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466360882466816[0;39m 生成今日电子书快照开始
2023-05-26 23:56:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466360882466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466360882466816[0;39m ==> Parameters: 
2023-05-26 23:56:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466360882466816[0;39m <==    Updates: 0
2023-05-26 23:56:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466360882466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:56:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466381858181120[0;39m 生成今日电子书快照开始
2023-05-26 23:56:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466381858181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466381858181120[0;39m ==> Parameters: 
2023-05-26 23:56:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466381858181120[0;39m <==    Updates: 0
2023-05-26 23:56:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466381858181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:56:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466402829701120[0;39m 生成今日电子书快照开始
2023-05-26 23:56:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466402829701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466402829701120[0;39m ==> Parameters: 
2023-05-26 23:56:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466402829701120[0;39m <==    Updates: 0
2023-05-26 23:56:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466402829701120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:56:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466423780249600[0;39m 生成今日电子书快照开始
2023-05-26 23:56:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466423780249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:56:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466423780249600[0;39m ==> Parameters: 
2023-05-26 23:56:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466423780249600[0;39m <==    Updates: 0
2023-05-26 23:56:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466423780249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466444781129728[0;39m 生成今日电子书快照开始
2023-05-26 23:57:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466444781129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466444781129728[0;39m ==> Parameters: 
2023-05-26 23:57:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466444781129728[0;39m <==    Updates: 0
2023-05-26 23:57:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466444781129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119466465706512384[0;39m 更新电子书下的文档数据开始
2023-05-26 23:57:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466465706512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:57:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466465706512384[0;39m ==> Parameters: 
2023-05-26 23:57:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466465706512384[0;39m <==    Updates: 8
2023-05-26 23:57:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119466465706512384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:57:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466465714900992[0;39m 生成今日电子书快照开始
2023-05-26 23:57:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466465714900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466465714900992[0;39m ==> Parameters: 
2023-05-26 23:57:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466465714900992[0;39m <==    Updates: 0
2023-05-26 23:57:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466465714900992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:57:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466486673838080[0;39m 生成今日电子书快照开始
2023-05-26 23:57:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466486673838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466486673838080[0;39m ==> Parameters: 
2023-05-26 23:57:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466486673838080[0;39m <==    Updates: 0
2023-05-26 23:57:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466486673838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466507695689728[0;39m 生成今日电子书快照开始
2023-05-26 23:57:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466507695689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466507695689728[0;39m ==> Parameters: 
2023-05-26 23:57:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466507695689728[0;39m <==    Updates: 0
2023-05-26 23:57:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466507695689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466528642043904[0;39m 生成今日电子书快照开始
2023-05-26 23:57:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466528642043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466528642043904[0;39m ==> Parameters: 
2023-05-26 23:57:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466528642043904[0;39m <==    Updates: 0
2023-05-26 23:57:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466528642043904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:57:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466549605175296[0;39m 生成今日电子书快照开始
2023-05-26 23:57:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466549605175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466549605175296[0;39m ==> Parameters: 
2023-05-26 23:57:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466549605175296[0;39m <==    Updates: 0
2023-05-26 23:57:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466549605175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466570601861120[0;39m 生成今日电子书快照开始
2023-05-26 23:57:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466570601861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466570601861120[0;39m ==> Parameters: 
2023-05-26 23:57:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466570601861120[0;39m <==    Updates: 0
2023-05-26 23:57:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466570601861120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119466591577575424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:57:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466591577575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:57:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466591577575424[0;39m ==> Parameters: 
2023-05-26 23:57:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466591577575424[0;39m <==    Updates: 8
2023-05-26 23:57:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119466591577575424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:57:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466591581769728[0;39m 生成今日电子书快照开始
2023-05-26 23:57:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466591581769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466591581769728[0;39m ==> Parameters: 
2023-05-26 23:57:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466591581769728[0;39m <==    Updates: 0
2023-05-26 23:57:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466591581769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466612532318208[0;39m 生成今日电子书快照开始
2023-05-26 23:57:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466612532318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466612532318208[0;39m ==> Parameters: 
2023-05-26 23:57:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466612532318208[0;39m <==    Updates: 0
2023-05-26 23:57:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466612532318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466633520615424[0;39m 生成今日电子书快照开始
2023-05-26 23:57:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466633520615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466633520615424[0;39m ==> Parameters: 
2023-05-26 23:57:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466633520615424[0;39m <==    Updates: 0
2023-05-26 23:57:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466633520615424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:57:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466654492135424[0;39m 生成今日电子书快照开始
2023-05-26 23:57:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466654492135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466654492135424[0;39m ==> Parameters: 
2023-05-26 23:57:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466654492135424[0;39m <==    Updates: 0
2023-05-26 23:57:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466654492135424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:57:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466675455266816[0;39m 生成今日电子书快照开始
2023-05-26 23:57:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466675455266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:57:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466675455266816[0;39m ==> Parameters: 
2023-05-26 23:57:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466675455266816[0;39m <==    Updates: 0
2023-05-26 23:57:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466675455266816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:58:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466696422592512[0;39m 生成今日电子书快照开始
2023-05-26 23:58:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466696422592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466696422592512[0;39m ==> Parameters: 
2023-05-26 23:58:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466696422592512[0;39m <==    Updates: 0
2023-05-26 23:58:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466696422592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:58:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466717398306816[0;39m 生成今日电子书快照开始
2023-05-26 23:58:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466717398306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466717398306816[0;39m ==> Parameters: 
2023-05-26 23:58:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466717398306816[0;39m <==    Updates: 0
2023-05-26 23:58:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466717398306816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:58:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119466717406695424[0;39m 更新电子书下的文档数据开始
2023-05-26 23:58:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466717406695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:58:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466717406695424[0;39m ==> Parameters: 
2023-05-26 23:58:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466717406695424[0;39m <==    Updates: 8
2023-05-26 23:58:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119466717406695424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:58:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466738344660992[0;39m 生成今日电子书快照开始
2023-05-26 23:58:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466738344660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466738344660992[0;39m ==> Parameters: 
2023-05-26 23:58:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466738344660992[0;39m <==    Updates: 0
2023-05-26 23:58:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466738344660992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2023-05-26 23:58:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466759337152512[0;39m 生成今日电子书快照开始
2023-05-26 23:58:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466759337152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466759337152512[0;39m ==> Parameters: 
2023-05-26 23:58:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466759337152512[0;39m <==    Updates: 0
2023-05-26 23:58:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466759337152512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:58:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466780291895296[0;39m 生成今日电子书快照开始
2023-05-26 23:58:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466780291895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466780291895296[0;39m ==> Parameters: 
2023-05-26 23:58:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466780291895296[0;39m <==    Updates: 0
2023-05-26 23:58:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466780291895296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:58:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466801263415296[0;39m 生成今日电子书快照开始
2023-05-26 23:58:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466801263415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466801263415296[0;39m ==> Parameters: 
2023-05-26 23:58:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466801263415296[0;39m <==    Updates: 0
2023-05-26 23:58:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466801263415296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:58:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466822239129600[0;39m 生成今日电子书快照开始
2023-05-26 23:58:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466822239129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466822239129600[0;39m ==> Parameters: 
2023-05-26 23:58:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466822239129600[0;39m <==    Updates: 0
2023-05-26 23:58:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466822239129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:58:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466843240009728[0;39m 生成今日电子书快照开始
2023-05-26 23:58:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466843240009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466843240009728[0;39m ==> Parameters: 
2023-05-26 23:58:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466843240009728[0;39m <==    Updates: 0
2023-05-26 23:58:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466843240009728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:58:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119466843248398336[0;39m 更新电子书下的文档数据开始
2023-05-26 23:58:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466843248398336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:58:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466843248398336[0;39m ==> Parameters: 
2023-05-26 23:58:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466843248398336[0;39m <==    Updates: 8
2023-05-26 23:58:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119466843248398336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:58:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466864165392384[0;39m 生成今日电子书快照开始
2023-05-26 23:58:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466864165392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466864165392384[0;39m ==> Parameters: 
2023-05-26 23:58:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466864165392384[0;39m <==    Updates: 0
2023-05-26 23:58:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466864165392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:58:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466885174661120[0;39m 生成今日电子书快照开始
2023-05-26 23:58:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466885174661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466885174661120[0;39m ==> Parameters: 
2023-05-26 23:58:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466885174661120[0;39m <==    Updates: 0
2023-05-26 23:58:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466885174661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:58:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466906133598208[0;39m 生成今日电子书快照开始
2023-05-26 23:58:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466906133598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466906133598208[0;39m ==> Parameters: 
2023-05-26 23:58:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466906133598208[0;39m <==    Updates: 0
2023-05-26 23:58:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466906133598208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:58:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466927105118208[0;39m 生成今日电子书快照开始
2023-05-26 23:58:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466927105118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:58:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466927105118208[0;39m ==> Parameters: 
2023-05-26 23:58:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466927105118208[0;39m <==    Updates: 0
2023-05-26 23:58:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466927105118208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:59:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466948097609728[0;39m 生成今日电子书快照开始
2023-05-26 23:59:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466948097609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466948097609728[0;39m ==> Parameters: 
2023-05-26 23:59:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466948097609728[0;39m <==    Updates: 0
2023-05-26 23:59:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466948097609728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:59:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466969069129728[0;39m 生成今日电子书快照开始
2023-05-26 23:59:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466969069129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466969069129728[0;39m ==> Parameters: 
2023-05-26 23:59:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466969069129728[0;39m <==    Updates: 0
2023-05-26 23:59:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466969069129728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:59:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119466969073324032[0;39m 更新电子书下的文档数据开始
2023-05-26 23:59:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466969073324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:59:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466969073324032[0;39m ==> Parameters: 
2023-05-26 23:59:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119466969073324032[0;39m <==    Updates: 8
2023-05-26 23:59:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119466969073324032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:59:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119466990007095296[0;39m 生成今日电子书快照开始
2023-05-26 23:59:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466990007095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466990007095296[0;39m ==> Parameters: 
2023-05-26 23:59:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119466990007095296[0;39m <==    Updates: 0
2023-05-26 23:59:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119466990007095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:59:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467010987003904[0;39m 生成今日电子书快照开始
2023-05-26 23:59:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467010987003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467010987003904[0;39m ==> Parameters: 
2023-05-26 23:59:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467010987003904[0;39m <==    Updates: 0
2023-05-26 23:59:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467010987003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:59:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467031937552384[0;39m 生成今日电子书快照开始
2023-05-26 23:59:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467031937552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467031937552384[0;39m ==> Parameters: 
2023-05-26 23:59:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467031937552384[0;39m <==    Updates: 0
2023-05-26 23:59:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467031937552384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:59:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467052938432512[0;39m 生成今日电子书快照开始
2023-05-26 23:59:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467052938432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467052938432512[0;39m ==> Parameters: 
2023-05-26 23:59:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467052938432512[0;39m <==    Updates: 0
2023-05-26 23:59:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467052938432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:59:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467073901563904[0;39m 生成今日电子书快照开始
2023-05-26 23:59:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467073901563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467073901563904[0;39m ==> Parameters: 
2023-05-26 23:59:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467073901563904[0;39m <==    Updates: 0
2023-05-26 23:59:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467073901563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:59:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467094847918080[0;39m 生成今日电子书快照开始
2023-05-26 23:59:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467094847918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467094847918080[0;39m ==> Parameters: 
2023-05-26 23:59:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467094847918080[0;39m <==    Updates: 0
2023-05-26 23:59:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467094847918080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:59:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m119467094856306688[0;39m 更新电子书下的文档数据开始
2023-05-26 23:59:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467094856306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-26 23:59:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467094856306688[0;39m ==> Parameters: 
2023-05-26 23:59:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m119467094856306688[0;39m <==    Updates: 8
2023-05-26 23:59:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m119467094856306688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2023-05-26 23:59:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467115857186816[0;39m 生成今日电子书快照开始
2023-05-26 23:59:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467115857186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467115857186816[0;39m ==> Parameters: 
2023-05-26 23:59:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467115857186816[0;39m <==    Updates: 0
2023-05-26 23:59:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467115857186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:59:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467136841289728[0;39m 生成今日电子书快照开始
2023-05-26 23:59:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467136841289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467136841289728[0;39m ==> Parameters: 
2023-05-26 23:59:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467136841289728[0;39m <==    Updates: 0
2023-05-26 23:59:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467136841289728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2023-05-26 23:59:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467157770866688[0;39m 生成今日电子书快照开始
2023-05-26 23:59:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467157770866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467157770866688[0;39m ==> Parameters: 
2023-05-26 23:59:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467157770866688[0;39m <==    Updates: 0
2023-05-26 23:59:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467157770866688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2023-05-26 23:59:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m119467178738192384[0;39m 生成今日电子书快照开始
2023-05-26 23:59:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467178738192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-26 23:59:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467178738192384[0;39m ==> Parameters: 
2023-05-26 23:59:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m119467178738192384[0;39m <==    Updates: 0
2023-05-26 23:59:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m119467178738192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
